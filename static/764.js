"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[764],{2764:(dt,D,s)=>{s.r(D),s.d(D,{DiakanonismoiModule:()=>rt});var I=s(4864),c=s(6230),_=s(5265),h=s(2100),t=s(4496),a=s(3228),f=s(5657),p=s(3616),E=function(e){return e.xreosiMode="\u0395\u03af\u03b4\u03bf\u03c2 \u03a7\u03c1\u03b5\u03ce\u03c3\u03b5\u03c9\u03bd",e.arithmosDoseon="\u0391\u03c1\u03b9\u03b8\u03bc\u03cc\u03c2 \u0394\u03cc\u03c3\u03b5\u03c9\u03bd",e}(E||{}),b=function(e){return e.xreosiMode="Debits Type",e.arithmosDoseon="Instalments Count",e}(b||{}),g=s(4704),k=s(9144),F=s(7048);let y=(()=>{class e{constructor(i,o){this.http=i,this.toasterSrv=o,AppConfOptions.finance_api?this.apiUrl=(0,a.sF)(AppConfOptions.finance_api)+"/api/profile/ofeiletis":AppConfOptions.epayments_api&&(this.apiUrl=(0,a.sF)(AppConfOptions.epayments_api)+"/api/profile/ofeiletis")}getDiakanonismous(){return this.http.get(`${this.apiUrl}/diakanonismoi`).pipe((0,g.k)(o=>o),(0,k.a)(o=>(0,a.Og)(o,this.toasterSrv)))}getAitisiDiakanonismouStatus(i){return this.http.post(`${this.apiUrl}/diakanonismoi/info`,i).pipe((0,g.k)(n=>n),(0,k.a)(n=>(0,a.Og)(n,this.toasterSrv)))}oristikopoiisiDiakanonismou(i){return this.http.post(`${this.apiUrl}/diakanonismoi`,i).pipe((0,g.k)(n=>n),(0,k.a)(n=>(0,a.Og)(n,this.toasterSrv)))}getXreoseisSelections(){return this.http.get(`${this.apiUrl}/diakanonismoi/xreoseisSelections`).pipe((0,g.k)(o=>o),(0,k.a)(o=>(0,a.Og)(o,this.toasterSrv)))}static#t=this.\u0275fac=function(o){return new(o||e)(t.CoB(F.KK),t.CoB(a.y6))};static#i=this.\u0275prov=t.wxM({token:e,factory:e.\u0275fac})}return e})();var C=s(9161),u=s(1368),d=s(6504),Y=s(120),w=s(6328);const $=["diakanonismosForm"];function L(e,m){if(1&e&&(t.I0R(0,"div",14)(1,"h5",15),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"p",16)(5,"span",17),t.OEk(6),t.wVc(7,"translate"),t.C$Y(),t.I0R(8,"span",18),t.OEk(9),t.wVc(10,"currency"),t.C$Y()(),t.I0R(11,"p",16)(12,"span",17),t.OEk(13),t.wVc(14,"translate"),t.C$Y(),t.I0R(15,"span",18),t.OEk(16),t.wVc(17,"currency"),t.C$Y()(),t.I0R(18,"p",16)(19,"span",17),t.OEk(20),t.wVc(21,"translate"),t.C$Y(),t.I0R(22,"span",18),t.OEk(23),t.wVc(24,"currency"),t.C$Y()()()),2&e){const i=t.GaO();t.yG2(2),t.cNF(t.kDX(3,7,null==i.translation?null:i.translation.diakanonismoi.initialDebits)),t.yG2(4),t.oRS("",t.kDX(7,9,null==i.translation?null:i.translation.diakanonismoi.amountRemaining),":"),t.yG2(3),t.cNF(t.wB1(10,11,i.selectedEidosXreosis.ypoloipoKatharo,"\u20ac","symbol","1.2")),t.yG2(4),t.oRS("",t.kDX(14,16,null==i.translation?null:i.translation.egwebapps.egrOngoingCharges),":"),t.yG2(3),t.cNF(t.wB1(17,18,i.selectedEidosXreosis.prosafksiseis,"\u20ac","symbol","1.2")),t.yG2(4),t.oRS("",t.kDX(21,23,null==i.translation?null:i.translation.egwebapps.egrTotalCost),":"),t.yG2(3),t.cNF(t.wB1(24,25,i.selectedEidosXreosis.synolo,"\u20ac","symbol","1.2"))}}function T(e,m){if(1&e&&t.wR5(0,"p-message",19),2&e){const i=t.GaO();t.E7m("styleClass","mt-2 form-msgs")("escape",!1)("text",i.formErrorsMsg)}}function A(e,m){if(1&e&&(t.I0R(0,"li"),t.OEk(1),t.C$Y()),2&e){const i=m.$implicit;t.yG2(),t.oRS(" ",i," ")}}function M(e,m){if(1&e){const i=t.KQA();t.I0R(0,"div",20)(1,"h5",21),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"p"),t.OEk(5),t.wVc(6,"translate"),t.I0R(7,"span",22),t.OEk(8),t.wVc(9,"currency"),t.C$Y()(),t.I0R(10,"ul")(11,"li",23),t.OEk(12),t.wVc(13,"translate"),t.I0R(14,"span",24),t.OEk(15),t.wVc(16,"date"),t.C$Y()(),t.yuY(17,A,2,1,"li",25),t.C$Y(),t.wR5(18,"p-message",26),t.wVc(19,"translate"),t.I0R(20,"button",27),t.qCj("click",function(){t.usT(i);const n=t.GaO();return t.CGJ(n.onOristikopoiisiDiakanonismou())}),t.wR5(21,"span",28),t.OEk(22),t.wVc(23,"translate"),t.C$Y()()}if(2&e){const i=t.GaO();t.yG2(2),t.cNF(t.kDX(3,9,null==i.translation?null:i.translation.diakanonismoi.formulateSettlement)),t.yG2(3),t.oRS("",t.kDX(6,11,null==i.translation?null:i.translation.diakanonismoi.totalCostAfter),": "),t.yG2(3),t.cNF(t.wB1(9,13,null==i.oikonomikiResponse||null==i.oikonomikiResponse.model?null:i.oikonomikiResponse.model.sinolikoPoso,"\u20ac","symbol","1.2")),t.yG2(4),t.oRS("",t.kDX(13,18,null==i.translation?null:i.translation.diakanonismoi.firstInstalmentExpire),": "),t.yG2(3),t.oRS("",t.g7$(16,20,null==i.oikonomikiResponse||null==i.oikonomikiResponse.entry?null:i.oikonomikiResponse.entry.hmLixisProtisDosis,"dd/LL/yyyy"),"*"),t.yG2(2),t.E7m("ngForOf",i.oikonomikiResponse.entry.doseisInfo),t.yG2(),t.E7m("styleClass","mb-2")("text",t.kDX(19,23,null==i.translation?null:i.translation.diakanonismoi.info)),t.yG2(4),t.oRS(" ",t.kDX(23,25,null==i.translation?null:i.translation.egwebapps.egrSubmit)," ")}}let R=(()=>{class e{constructor(i,o,n,r){this.diakanonismoiSrv=i,this.appCacheSv=o,this.toasterSrv=n,this.cdr=r,this.oristikopoiisi=new t._w7,this.onDestroy=new f.E,this.isFormSubmitted=!1,this.isLoading=!1}ngOnInit(){this.model={xreoseisSelectionMode:0},this.appCacheSv.translation$.pipe((0,p.a)(this.onDestroy)).subscribe(i=>{i&&(this.translation=i),(0,a.Er)(this.cdr)}),this.appCacheSv.selectedLang$.pipe((0,p.a)(this.onDestroy)).subscribe(i=>{i&&(this.selectedLang=i),this.formDictionaryEnum="el"==this.selectedLang?E:b,(0,a.Er)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSubmit(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,a.Er)(this.cdr),this.isFormSubmitted&&this.diakanonismosForm.valid?(this.isLoading=!0,(0,a.Er)(this.cdr),this.diakanonismoiSrv.getAitisiDiakanonismouStatus(this.model).subscribe(i=>{i&&1==i.statusCode?(this.oikonomikiResponse=i,this.model.infoHash=this.oikonomikiResponse.entry.infoHash):(2==i.statusCode||3==i.statusCode)&&(i.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(this.toasterSrv.showWarning("",this.translation.epayments.revDebtorNotFound),this.diakanonismosRequestMessage=this.translation.epayments.revDebtorNotFound):i.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")?(this.toasterSrv.showError("error",this.translation.epayments.duplicateTin),this.diakanonismosRequestMessage=this.translation.epayments.duplicateTin):this.formErrorsMsg=i.message),this.isLoading=!1,(0,a.Er)(this.cdr)})):(this.formErrorsMsg=(0,a.SG)(this.diakanonismosForm,this.formDictionaryEnum,""),(0,a.Er)(this.cdr))}onSelectedEidosXreoseonChanged(i){this.selectedEidosXreosis=this.xreoseisSelections.filter(o=>o.mode==i.target.value)[0],(0,a.Er)(this.cdr)}onOristikopoiisiDiakanonismou(){this.isLoading=!0,(0,a.Er)(this.cdr),this.diakanonismoiSrv.oristikopoiisiDiakanonismou(this.model).subscribe(i=>{i&&i.statusCode===a.oZ.Ok?this.toasterSrv.showSuccess("",this.translation.diakanonismoi.finalised):this.toasterSrv.showError("",this.translation.diakanonismoi.finaliseError),this.isLoading=!1,(0,a.Er)(this.cdr),this.oristikopoiisi.emit(!0)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.GI1(y),t.GI1(C.i),t.GI1(a.y6),t.GI1(t.kD9))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-diakanonismoi-create"]],viewQuery:function(o,n){if(1&o&&t.CC$($,5),2&o){let r;t.wto(r=t.Gqi())&&(n.diakanonismosForm=r.first)}},inputs:{xreoseisSelections:"xreoseisSelections"},outputs:{oristikopoiisi:"oristikopoiisi"},decls:29,vars:30,consts:[[1,"form"],["diakanonismosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-6"],["name","xreosiMode","bindLabel","perigrafi","bindValue","mode",1,"ontop-select",2,"flex","1",3,"appendTo","searchable","virtualScroll","clearable","items","ngModel","ngModelChange"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],["name","arithmosDoseon","placeholder","1","type","number","required","",1,"form-control",3,"ngModel","ngModelChange"],["arithmosDoseonInput","ngModel"],["class","my-2",4,"ngIf"],["type","button",1,"btn","btn-info","btn-sm","d-block","mx-auto",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-calculator"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"condition","customClass"],["class","col-12 py-3 bg-white debits-info_left",4,"ngIf"],[1,"my-2"],[1,"text-primary","font-weight-bold"],[1,"mb-0"],[1,"me-1","d-inline-block",2,"width","200px"],[1,"totalPoso",2,"width","220px"],["severity","error",3,"styleClass","escape","text"],[1,"col-12","py-3","bg-white","debits-info_left"],[1,"text-info","font-weight-bold"],[1,"totalPoso"],[1,"font-weight-bold"],[1,"text-danger"],[4,"ngFor","ngForOf"],["severity","warn",3,"styleClass","text"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"far","fa-save"]],template:function(o,n){if(1&o&&(t.I0R(0,"form",0,1)(2,"div",2)(3,"div",3)(4,"label"),t.OEk(5),t.wVc(6,"translate"),t.C$Y(),t.I0R(7,"ng-select",4),t.iHE("ngModelChange",function(l){return t.kNx(n.model.xreoseisSelectionMode,l)||(n.model.xreoseisSelectionMode=l),l}),t.C$Y(),t.I0R(8,"div",5),t.OEk(9),t.wVc(10,"translate"),t.C$Y()(),t.I0R(11,"div",3)(12,"label"),t.OEk(13),t.wVc(14,"translate"),t.C$Y(),t.I0R(15,"input",6,7),t.iHE("ngModelChange",function(l){return t.kNx(n.model.arithmosDoseon,l)||(n.model.arithmosDoseon=l),l}),t.C$Y(),t.I0R(17,"div",5),t.OEk(18),t.wVc(19,"translate"),t.C$Y()()(),t.yuY(20,L,25,30,"div",8),t.I0R(21,"button",9),t.qCj("click",function(){return n.onSubmit()}),t.wR5(22,"span",10),t.OEk(23),t.wVc(24,"translate"),t.C$Y(),t.yuY(25,T,1,3,"p-message",11),t.C$Y(),t.wR5(26,"eg-loading",12)(27,"hr"),t.yuY(28,M,24,27,"div",13)),2&o){const r=t.Gew(1),l=t.Gew(16);t.yG2(5),t.oRS("",t.kDX(6,20,null==n.translation?null:n.translation.diakanonismoi.debitsType),"*"),t.yG2(2),t.E7m("appendTo","body")("searchable",!0)("virtualScroll",!0)("clearable",!1)("items",n.xreoseisSelections),t.OKB("ngModel",n.model.xreoseisSelectionMode),t.yG2(),t.E7m("hidden",!n.isFormSubmitted||n.isFormSubmitted&&n.model.xreoseisSelectionMode),t.yG2(),t.oRS(" *",t.kDX(10,22,null==n.translation?null:n.translation.egwebapps.egrRequiredField)," "),t.yG2(4),t.oRS("",t.kDX(14,24,null==n.translation?null:n.translation.diakanonismoi.instalmentsCount),"*"),t.yG2(2),t.OKB("ngModel",n.model.arithmosDoseon),t.yG2(2),t.E7m("hidden",!n.isFormSubmitted||n.isFormSubmitted&&l.valid),t.yG2(),t.oRS(" *",t.kDX(19,26,null==n.translation?null:n.translation.egwebapps.egrRequiredField)," "),t.yG2(2),t.E7m("ngIf",n.selectedEidosXreosis),t.yG2(),t.E7m("disabled",r.invalid),t.yG2(2),t.oRS(" ",t.kDX(24,28,null==n.translation?null:n.translation.diakanonismoi.calculateInstalments)," "),t.yG2(2),t.E7m("ngIf",n.formErrorsMsg&&""!==n.formErrorsMsg),t.yG2(),t.E7m("condition",n.isLoading)("customClass","egr-load-small"),t.yG2(2),t.E7m("ngIf",n.oikonomikiResponse&&n.oikonomikiResponse.entry&&n.oikonomikiResponse.entry.doseisInfo&&!n.isLoading)}},dependencies:[u.ay,u.u_,d.sz,d.ot,d.O4,d.ue,d.u,d.eJ,d._G,d.SC,Y.UT,a.uU,w.S,u.cf,u.y,c.sD],encapsulation:2,changeDetection:0})}return e})();var V=s(2140),N=s(4940),x=s(2700),G=s(7368),X=s(8552),B=s(7564),P=s(5544),z=s(3856),O=s(1148);function U(e,m){if(1&e){const i=t.KQA();t.I0R(0,"div",22)(1,"button",23),t.qCj("click",function(){t.usT(i);const n=t.GaO();return t.CGJ(n.onCreateNewAitisiDiakanonismou())}),t.wR5(2,"span",24),t.OEk(3),t.wVc(4,"translate"),t.C$Y()()}if(2&e){const i=t.GaO();t.yG2(3),t.oRS(" ",t.kDX(4,1,null==i.translation?null:i.translation.diakanonismoi.addNew)," ")}}function j(e,m){if(1&e&&t.wR5(0,"p-message",25),2&e){const i=t.GaO();t.E7m("text",null==i.translation?null:i.translation.diakanonismoi.noSettlementsFound)("styleClass","mb-2")}}function H(e,m){if(1&e&&(t.I0R(0,"tr")(1,"th",26),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"th",27),t.OEk(5),t.wVc(6,"translate"),t.C$Y(),t.I0R(7,"th",27),t.OEk(8),t.wVc(9,"translate"),t.C$Y(),t.I0R(10,"th",28),t.OEk(11),t.wVc(12,"translate"),t.C$Y(),t.I0R(13,"th",29),t.OEk(14),t.wVc(15,"translate"),t.C$Y(),t.I0R(16,"th",29),t.OEk(17),t.wVc(18,"translate"),t.C$Y(),t.I0R(19,"th",29),t.OEk(20),t.wVc(21,"translate"),t.C$Y()()),2&e){const i=t.GaO();t.yG2(2),t.cNF(t.kDX(3,7,null==i.translation?null:i.translation.egwebapps.egrAA)),t.yG2(3),t.cNF(t.kDX(6,9,null==i.translation?null:i.translation.egwebapps.egrStatus)),t.yG2(3),t.cNF(t.kDX(9,11,null==i.translation?null:i.translation.egwebapps.egrDate)),t.yG2(3),t.cNF(t.kDX(12,13,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount)),t.yG2(3),t.cNF(t.kDX(15,15,null==i.translation?null:i.translation.egwebapps.egrTotalCost)),t.yG2(3),t.cNF(t.kDX(18,17,null==i.translation?null:i.translation.diakanonismoi.amountReceived)),t.yG2(3),t.cNF(t.kDX(21,19,null==i.translation?null:i.translation.diakanonismoi.amountRemaining))}}function K(e,m){if(1&e&&(t.I0R(0,"tr")(1,"td",30)(2,"span",31),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.OEk(5),t.C$Y(),t.I0R(6,"td",27)(7,"span",31),t.OEk(8),t.wVc(9,"translate"),t.C$Y(),t.OEk(10),t.C$Y(),t.I0R(11,"td",32)(12,"span",31),t.OEk(13),t.wVc(14,"translate"),t.C$Y(),t.OEk(15),t.wVc(16,"date"),t.C$Y(),t.I0R(17,"td",33)(18,"span",31),t.OEk(19),t.wVc(20,"translate"),t.C$Y(),t.OEk(21),t.C$Y(),t.I0R(22,"td",34)(23,"span",31),t.OEk(24),t.wVc(25,"translate"),t.C$Y(),t.OEk(26),t.wVc(27,"currency"),t.C$Y(),t.I0R(28,"td",34)(29,"span",31),t.OEk(30),t.wVc(31,"translate"),t.C$Y(),t.OEk(32),t.wVc(33,"currency"),t.C$Y(),t.I0R(34,"td",34)(35,"span",31),t.OEk(36),t.wVc(37,"translate"),t.C$Y(),t.OEk(38),t.wVc(39,"currency"),t.C$Y()()),2&e){const i=m.$implicit,o=t.GaO();t.yG2(3),t.cNF(t.kDX(4,14,null==o.translation?null:o.translation.egwebapps.egrAA)),t.yG2(2),t.oRS(" ",i.aa," "),t.yG2(3),t.cNF(t.kDX(9,16,null==o.translation?null:o.translation.egwebapps.egrStatus)),t.yG2(2),t.oRS(" ",i.katastatsiPerigrafi," "),t.yG2(3),t.cNF(t.kDX(14,18,null==o.translation?null:o.translation.egwebapps.egrDate)),t.yG2(2),t.oRS(" ",t.g7$(16,20,i.hmerominia,"dd/LL/yyyy")," "),t.yG2(4),t.cNF(t.kDX(20,23,null==o.translation?null:o.translation.diakanonismoi.instalmentsCount)),t.yG2(2),t.oRS(" ",i.arithmosDoseon," "),t.yG2(3),t.cNF(t.kDX(25,25,null==o.translation?null:o.translation.egwebapps.egrTotalCost)),t.yG2(2),t.oRS(" ",t.wB1(27,27,i.sinolikoPoso,"\u20ac","symbol","1.2")," "),t.yG2(4),t.cNF(t.kDX(31,32,null==o.translation?null:o.translation.diakanonismoi.amountReceived)),t.yG2(2),t.oRS(" ",t.wB1(33,34,i.eispraxthen,"\u20ac","symbol","1.2")," "),t.yG2(4),t.cNF(t.kDX(37,39,null==o.translation?null:o.translation.diakanonismoi.amountRemaining)),t.yG2(2),t.oRS(" ",t.wB1(39,41,i.ypoloipo,"\u20ac","symbol","1.2")," ")}}function Q(e,m){if(1&e&&(t.I0R(0,"tr")(1,"td",35),t.OEk(2),t.wVc(3,"translate"),t.C$Y()()),2&e){const i=t.GaO();t.yG2(2),t.oRS(" ",t.kDX(3,1,null==i.translation?null:i.translation.egwebapps.egrNoResultsFound)," ")}}function J(e,m){if(1&e&&(t.I0R(0,"tr")(1,"td",36)(2,"strong"),t.OEk(3),t.C$Y()(),t.I0R(4,"td",33)(5,"strong"),t.OEk(6),t.wVc(7,"translate"),t.C$Y()(),t.I0R(8,"td",34)(9,"strong"),t.OEk(10),t.wVc(11,"currency"),t.C$Y()(),t.I0R(12,"td",34)(13,"strong"),t.OEk(14),t.wVc(15,"currency"),t.C$Y()(),t.I0R(16,"td",34)(17,"strong"),t.OEk(18),t.wVc(19,"currency"),t.C$Y()()()),2&e){const i=t.GaO();t.yG2(3),t.oRS("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==i.modelFiltered?null:i.modelFiltered.length,""),t.yG2(3),t.oRS("",t.kDX(7,5,null==i.translation?null:i.translation.egwebapps.egrTotalCost),":"),t.yG2(4),t.cNF(t.wB1(11,7,i.totalSinolikoPoso,"\u20ac","symbol","1.2")),t.yG2(4),t.cNF(t.wB1(15,12,i.totalEispraxthenPoso,"\u20ac","symbol","1.2")),t.yG2(4),t.cNF(t.wB1(19,17,i.totalYpoloipoPoso,"\u20ac","symbol","1.2"))}}function W(e,m){if(1&e){const i=t.KQA();t.I0R(0,"app-diakanonismoi-create",37),t.qCj("oristikopoiisi",function(){t.usT(i);const n=t.GaO();return t.CGJ(n.onOristikopoiisiAitisis())}),t.C$Y()}if(2&e){const i=t.GaO();t.E7m("xreoseisSelections",i.xreoseisSelections)}}const Z=()=>({width:"100%"}),q=()=>({minWidth:"40vw"});let S=(()=>{class e{constructor(i,o,n,r){this.diakanonismoiSrv=i,this.appCacheSv=o,this.toasterSrv=n,this.cdr=r,this.onDestroy=new f.E,this.modelFiltered=[],this.isLoading=!0,this.isAddingNewDiakanonismo=!1,this.diakanonismosDateRange=null,this.katastasiFilter=null,this.totalSinolikoPoso=0,this.totalEispraxthenPoso=0,this.totalYpoloipoPoso=0,this.today=new Date,this.yearRange=(0,a.sj)(50,50)}ngOnInit(){this.appCacheSv.translation$.pipe((0,p.a)(this.onDestroy)).subscribe(i=>{i&&(this.translation=i),(0,a.Er)(this.cdr)}),this.diakanonismoiSrv.getDiakanonismous().pipe((0,G.G)(i=>i?(this.model=i,this.modelFiltered=(0,a.O0)(this.model),this.model.forEach(o=>{this.totalSinolikoPoso+=o.sinolikoPoso,this.totalEispraxthenPoso+=o.eispraxthen,this.totalYpoloipoPoso+=o.ypoloipo}),this._orderDiakanonismous(this.modelFiltered),this.diakanonismoiSrv.getXreoseisSelections()):(0,x.of)(!1))).subscribe(i=>{i?(this.xreoseisSelections=i,this.xreoseisSelections=this.xreoseisSelections.filter(o=>o.synolo>0),this.isLoading=!1):this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2."),(0,a.Er)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSearch(){this.isLoading=!0,this.modelFiltered=(0,a.O0)(this.model);let i=[];if(this.katastasiFilter){let o=this.modelFiltered.filter(n=>n.katastatsiPerigrafi.toLowerCase().includes(this.katastasiFilter.toLowerCase()));o&&o.length&&o.forEach(n=>{i.push(n)})}if(this.diakanonismosDateRange){let o=this.modelFiltered.filter(n=>(0,V.c)(new Date(n.hmerominia),{start:new Date(this.diakanonismosDateRange[0]),end:new Date(this.diakanonismosDateRange[1])}));o&&o.length&&o.forEach(n=>{i.push(n)})}this.modelFiltered=N.intersection(i),this.isLoading=!1,(0,a.Er)(this.cdr)}onClearSearch(){this.modelFiltered=(0,a.O0)(this.model),this.diakanonismosDateRange=null,(0,a.Er)(this.cdr)}onCreateNewAitisiDiakanonismou(){this.isAddingNewDiakanonismo=!0,(0,a.Er)(this.cdr)}onOristikopoiisiAitisis(){this.isAddingNewDiakanonismo=!1,(0,a.Er)(this.cdr)}_orderDiakanonismous(i){this.isLoading=!0,(0,a.Er)(this.cdr),i=i.sort(function(o,n){return o.hmerominia!=n.hmerominia?new Date(n.hmerominia).getTime()-new Date(o.hmerominia).getTime():+n.aa-+o.aa}),this.isLoading=!1,(0,a.Er)(this.cdr)}static#t=this.\u0275fac=function(o){return new(o||e)(t.GI1(y),t.GI1(C.i),t.GI1(a.y6),t.GI1(t.kD9))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-diakanonismoi-list"]],inputs:{isAuthorized:"isAuthorized"},decls:31,vars:49,consts:[["class","d-flex justify-content-end",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","diakanonismosPerigrafi"],["name","diakanonismosPerigrafi","type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","diakanonismoDateRange"],["name","diakanonismoDateRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","touchUI","ngModel","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","me-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["appendTo","body","resizable","false","modal","true",3,"header","visible","draggable","closable","visibleChange"],[3,"xreoseisSelections","oristikopoiisi",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-plus","fa-fw"],["severity","warn",3,"text","styleClass"],[1,"fixed-width-col-40"],[1,"fixed-width-col-100"],[1,"fixed-width-col-60"],[1,"fixed-width-col-120"],[1,"fixed-width-col-40","text-end"],[1,"p-column-title"],[1,"fixed-width-col-100","text-center"],[1,"fixed-width-col-60","text-end"],[1,"fixed-width-col-120","text-end"],["colspan","7"],["colspan","3",1,"fixed-width-col-240"],[3,"xreoseisSelections","oristikopoiisi"]],template:function(o,n){1&o&&(t.yuY(0,U,5,3,"div",0)(1,j,1,2,"p-message",1),t.I0R(2,"p-panel",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"label",6),t.OEk(7),t.wVc(8,"translate"),t.C$Y(),t.I0R(9,"input",7),t.iHE("ngModelChange",function(l){return t.kNx(n.katastasiFilter,l)||(n.katastasiFilter=l),l}),t.C$Y()(),t.I0R(10,"div",5)(11,"label",8),t.OEk(12),t.wVc(13,"translate"),t.C$Y(),t.I0R(14,"p-calendar",9),t.iHE("ngModelChange",function(l){return t.kNx(n.diakanonismosDateRange,l)||(n.diakanonismosDateRange=l),l}),t.C$Y()()(),t.I0R(15,"div",10)(16,"button",11),t.qCj("click",function(){return n.onSearch()}),t.wR5(17,"span",12),t.OEk(18),t.wVc(19,"translate"),t.C$Y(),t.I0R(20,"button",13),t.qCj("click",function(){return n.onClearSearch()}),t.wR5(21,"span",14),t.OEk(22),t.wVc(23,"translate"),t.C$Y()()()(),t.I0R(24,"p-table",15),t.yuY(25,H,22,21,"ng-template",16)(26,K,40,46,"ng-template",17)(27,Q,4,3,"ng-template",18)(28,J,20,22,"ng-template",19),t.C$Y(),t.I0R(29,"p-dialog",20),t.iHE("visibleChange",function(l){return t.kNx(n.isAddingNewDiakanonismo,l)||(n.isAddingNewDiakanonismo=l),l}),t.yuY(30,W,1,1,"app-diakanonismoi-create",21),t.C$Y()),2&o&&(t.E7m("ngIf",n.xreoseisSelections&&n.xreoseisSelections.length>0&&!n.isLoading),t.yG2(),t.E7m("ngIf",!(n.model&&0!==n.model.length||n.isLoading)),t.yG2(),t.E7m("header",null==n.translation?null:n.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),t.yG2(5),t.cNF(t.kDX(8,39,null==n.translation?null:n.translation.egwebapps.egrStatus)),t.yG2(2),t.E7m("placeholder",null==n.translation?null:n.translation.egwebapps.egrStatus),t.OKB("ngModel",n.katastasiFilter),t.yG2(3),t.cNF(t.kDX(13,41,null==n.translation?null:n.translation.egwebapps.egrDate)),t.yG2(2),t.m_g(t.q4q(47,Z)),t.E7m("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",n.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("touchUI",!0),t.OKB("ngModel",n.diakanonismosDateRange),t.yG2(4),t.oRS(" ",t.kDX(19,43,null==n.translation?null:n.translation.egwebapps.egrSearchBtn)," "),t.yG2(4),t.oRS(" ",t.kDX(23,45,null==n.translation?null:n.translation.egwebapps.egrClearBtn)," "),t.yG2(2),t.E7m("value",n.modelFiltered)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",n.isLoading)("totalRecords",null==n.modelFiltered?null:n.modelFiltered.length),t.yG2(5),t.m_g(t.q4q(48,q)),t.E7m("header",null==n.translation?null:n.translation.diakanonismoi.addNew),t.OKB("visible",n.isAddingNewDiakanonismo),t.E7m("draggable",!1)("closable",!0),t.yG2(),t.E7m("ngIf",n.isAddingNewDiakanonismo))},dependencies:[u.u_,d.sz,d.ot,d.ue,d.u,d._G,d.SC,X.oJ,B.U3,P.Yf,z.C,w.S,O.s,R,u.cf,u.y,c.sD],encapsulation:2,changeDetection:0})}return e})();var tt=s(2116),v=s(1123),it=s(2656);function nt(e,m){if(1&e&&t.wR5(0,"p-message",3),2&e){const i=t.GaO();t.E7m("text",null==i.translation?null:i.translation.egwebapps.egwebappsLoginMesg)}}function ot(e,m){if(1&e&&(t.I0R(0,"p-panel",6),t.wVc(1,"translate"),t.wR5(2,"div",7),t.wVc(3,"decodeHtmlString"),t.C$Y()),2&e){const i=t.GaO(2);t.E7m("header",t.kDX(1,4,null==i.translation?null:i.translation.egwebapps.information))("styleClass","tab-msg mb-3")("toggleable",!0),t.yG2(2),t.E7m("innerHTML",t.kDX(3,6,i.tabMsg),t.E3n)}}function et(e,m){if(1&e){const i=t.KQA();t.I0R(0,"p-tabView",8),t.qCj("onChange",function(n){t.usT(i);const r=t.GaO(2);return t.CGJ(r.onTabChanged(n))}),t.I0R(1,"p-tabPanel",9),t.wR5(2,"app-diakanonismoi-list"),t.C$Y()()}if(2&e){const i=t.GaO(2);t.E7m("activeIndex",i.index),t.yG2(),t.E7m("header",null==i.translation?null:i.translation.egwebapps.history)}}function at(e,m){if(1&e&&(t.SAx(0),t.yuY(1,ot,4,8,"p-panel",4)(2,et,3,2,"p-tabView",5),t.k70()),2&e){const i=t.GaO();t.yG2(),t.E7m("ngIf",i.isAuthorized&&i.tabMsg&&""!==i.tabMsg),t.yG2(),t.E7m("ngIf",i.isAuthorized)}}const st=[{path:"",component:(()=>{class e{constructor(i,o,n,r,l,mt){this.oidcSecuritySrv=i,this.appCacheSrv=o,this.location=n,this.router=r,this.route=l,this.cdr=mt,this.onDestroy=new f.E,this.afmNotFound=!1,this.index=0,this.selectedLang="el"}ngOnInit(){this.appCacheSrv.translation$.pipe((0,p.a)(this.onDestroy)).subscribe(i=>{i&&(this.translation=i),(0,a.Er)(this.cdr)}),this.appCacheSrv.selectedLang$.pipe((0,p.a)(this.onDestroy)).subscribe(i=>{i&&(this.selectedLang=i),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.diakanonismoi_tab_info_en&&""!=AppConfOptions.diakanonismoi_tab_info_en?this.tabMsg=AppConfOptions.diakanonismoi_tab_info_en:AppConfOptions.diakanonismoi_tab_info&&""!=AppConfOptions.diakanonismoi_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.diakanonismoi_tab_info),(0,a.Er)(this.cdr)}),this.oidcSecuritySrv.isAuthenticated$.pipe((0,G.G)(i=>(this.isAuthorized=null!=i&&i.isAuthenticated,this.appCacheSrv.user$))).subscribe(i=>{this.afmNotFound=!1,(0,a.Er)(this.cdr),i&&(0,a.w1)(i.tin)&&AppConfOptions.diakanonismoi_afm_required&&(this.afmNotFound=!0),(0,a.Er)(this.cdr)}),this.index="create"===this.route.children[0].snapshot.url[0].path?1:0,(0,a.Er)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(i){this.router.navigate(0==i.index?["./list"]:["./create"],{relativeTo:this.route})}static#t=this.\u0275fac=function(o){return new(o||e)(t.GI1(tt.Bf),t.GI1(C.i),t.GI1(u.oB),t.GI1(h.E5),t.GI1(h.gV),t.GI1(t.kD9))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-diakanonismoi-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:4,vars:3,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"]],template:function(o,n){1&o&&(t.I0R(0,"h3",0),t.OEk(1),t.C$Y(),t.yuY(2,nt,1,1,"p-message",1)(3,at,3,2,"ng-container",2)),2&o&&(t.yG2(),t.cNF(null==n.translation?null:n.translation.menu.diakanonismoiMenuItem),t.yG2(),t.E7m("ngIf",!n.isAuthorized),t.yG2(),t.E7m("ngIf",!n.afmNotFound))},dependencies:[u.u_,v.DX,v.Gk,w.S,O.s,S,it.m,c.sD],encapsulation:2,changeDetection:0})}return e})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:S},{path:"create",component:R}]}];let lt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#i=this.\u0275mod=t.a4G({type:e});static#n=this.\u0275inj=t.s3X({imports:[h.qQ.forChild(st),h.qQ]})}return e})(),rt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#i=this.\u0275mod=t.a4G({type:e});static#n=this.\u0275inj=t.s3X({providers:[y],imports:[_.k,I.IB,lt,c.O0.forChild()]})}return e})()}}]);