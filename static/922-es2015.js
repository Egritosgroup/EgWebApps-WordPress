"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[922],{11922:function(t,i,n){n.r(i),n.d(i,{DiakanonismoiModule:function(){return K}});var o=n(43645),e=n(29790),s=n(88052),a=n(54655),l=n(37716),r=n(68214),d=n(79765),u=n(46782),p=(()=>{return(t=p||(p={})).xreosiMode="\u0395\u03af\u03b4\u03bf\u03c2 \u03a7\u03c1\u03b5\u03ce\u03c3\u03b5\u03c9\u03bd",t.arithmosDoseon="\u0391\u03c1\u03b9\u03b8\u03bc\u03cc\u03c2 \u0394\u03cc\u03c3\u03b5\u03c9\u03bd",p;var t})(),c=(()=>{return(t=c||(c={})).xreosiMode="Debits Type",t.arithmosDoseon="Instalments Count",c;var t})(),g=n(91841);let h=(()=>{class t{constructor(t){this.http=t,this.apiUrl=AppConfOptions.epayments_api+"api/profile/ofeiletis/"}getDiakanonismous(){return this.http.get(`${this.apiUrl}diakanonismoi`)}getAitisiDiakanonismouStatus(t){return this.http.post(`${this.apiUrl}diakanonismoi/info`,t)}oristikopoiisiDiakanonismou(t){return this.http.post(`${this.apiUrl}diakanonismoi`,t)}getXreoseisSelections(){return this.http.get(`${this.apiUrl}diakanonismoi/xreoseisSelections`)}}return t.\u0275fac=function(i){return new(i||t)(l.LFG(g.eN))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})();var m=n(12622),Z=n(3679),f=n(38583);const A=["diakanonismosForm"];function x(t,i){if(1&t&&(l.TgZ(0,"option",16),l._uU(1),l.qZA()),2&t){const t=i.$implicit;l.Q6J("value",t.mode),l.xp6(1),l.hij(" ",t.perigrafi," ")}}function b(t,i){if(1&t&&(l.TgZ(0,"div",17),l.TgZ(1,"h5",18),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"p",19),l.TgZ(5,"span",20),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"span",21),l._uU(9),l.ALo(10,"currency"),l.qZA(),l.qZA(),l.TgZ(11,"p",19),l.TgZ(12,"span",20),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"span",21),l._uU(16),l.ALo(17,"currency"),l.qZA(),l.qZA(),l.TgZ(18,"p",19),l.TgZ(19,"span",20),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.TgZ(22,"span",21),l._uU(23),l.ALo(24,"currency"),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,7,null==t.translation?null:t.translation.diakanonismoi.initialDebits)),l.xp6(4),l.hij("",l.lcZ(7,9,null==t.translation?null:t.translation.diakanonismoi.amountRemaining),":"),l.xp6(3),l.Oqu(l.gM2(10,11,t.selectedEidosXreosis.ypoloipoKatharo,"\u20ac","symbol","1.2")),l.xp6(4),l.hij("",l.lcZ(14,16,null==t.translation?null:t.translation.egwebapps.egrOngoingCharges),":"),l.xp6(3),l.Oqu(l.gM2(17,18,t.selectedEidosXreosis.prosafksiseis,"\u20ac","symbol","1.2")),l.xp6(4),l.hij("",l.lcZ(21,23,null==t.translation?null:t.translation.egwebapps.egrTotalCost),":"),l.xp6(3),l.Oqu(l.gM2(24,25,t.selectedEidosXreosis.synolo,"\u20ac","symbol","1.2"))}}function k(t,i){if(1&t&&l._UZ(0,"div",22),2&t){const t=l.oxw();l.Q6J("innerHTML",t.formErrorsMsg,l.oJD)}}function w(t,i){if(1&t&&(l.TgZ(0,"li"),l._uU(1),l.qZA()),2&t){const t=i.$implicit;l.xp6(1),l.hij(" ",t," ")}}function y(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"div",23),l.TgZ(1,"h5",24),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"p"),l._uU(5),l.ALo(6,"translate"),l.TgZ(7,"span",25),l._uU(8),l.ALo(9,"currency"),l.qZA(),l.qZA(),l.TgZ(10,"ul"),l.TgZ(11,"li",26),l._uU(12),l.ALo(13,"translate"),l.TgZ(14,"span",27),l._uU(15),l.ALo(16,"date"),l.qZA(),l.qZA(),l.YNc(17,w,2,1,"li",28),l.qZA(),l.TgZ(18,"p",29),l._uU(19),l.ALo(20,"translate"),l.qZA(),l.TgZ(21,"button",30),l.NdJ("click",function(){return l.CHM(t),l.oxw().onOristikopoiisiDiakanonismou()}),l._UZ(22,"span",31),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,8,null==t.translation?null:t.translation.diakanonismoi.formulateSettlement)),l.xp6(3),l.hij("",l.lcZ(6,10,null==t.translation?null:t.translation.diakanonismoi.totalCostAfter),": "),l.xp6(3),l.Oqu(l.gM2(9,12,null==t.oikonomikiResponse||null==t.oikonomikiResponse.model?null:t.oikonomikiResponse.model.sinolikoPoso,"\u20ac","symbol","1.2")),l.xp6(4),l.hij("",l.lcZ(13,17,null==t.translation?null:t.translation.diakanonismoi.firstInstalmentExpire),": "),l.xp6(3),l.hij("",l.xi3(16,19,null==t.oikonomikiResponse||null==t.oikonomikiResponse.model?null:t.oikonomikiResponse.model.hmLixisProtisDosis,"dd/LL/yyyy"),"*"),l.xp6(2),l.Q6J("ngForOf",t.oikonomikiResponse.model.doseisInfo),l.xp6(2),l.hij("* ",l.lcZ(20,22,null==t.translation?null:t.translation.diakanonismoi.info),""),l.xp6(4),l.hij(" ",l.lcZ(24,24,null==t.translation?null:t.translation.egwebapps.egrSubmit)," ")}}let q=(()=>{class t{constructor(t,i,n,o){this.diakanonismoiSrv=t,this.appCacheSv=i,this.toasterSrv=n,this.cdr=o,this.oristikopoiisi=new l.vpe,this.onDestroy=new d.xQ,this.isFormSubmitted=!1,this.isLoading=!1}ngOnInit(){this.appCacheSv.translation$.pipe((0,u.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t,(0,r.RA)(this.cdr))}),this.appCacheSv.selectedLang$.pipe((0,u.R)(this.onDestroy)).subscribe(t=>{t&&(this.selectedLang=t),this.formDictionaryEnum="el"==this.selectedLang?p:c,(0,r.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSubmit(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,r.RA)(this.cdr),this.isFormSubmitted&&this.diakanonismosForm.valid?(this.isLoading=!0,(0,r.RA)(this.cdr),this.diakanonismoiSrv.getAitisiDiakanonismouStatus(this.model).subscribe(t=>{t&&1==t.statusCode?(this.oikonomikiResponse=t,this.model.infoHash=this.oikonomikiResponse.entry.infoHash):(2==t.statusCode||3==t.statusCode)&&(t.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(this.toasterSrv.showWarning("",this.translation.epayments.revDebtorNotFound),this.diakanonismosRequestMessage=this.translation.epayments.revDebtorNotFound):t.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")&&(this.toasterSrv.showError("error",this.translation.epayments.duplicateTin),this.diakanonismosRequestMessage=this.translation.epayments.duplicateTin)),this.isLoading=!1,(0,r.RA)(this.cdr)})):(this.formErrorsMsg=(0,r.CD)(this.diakanonismosForm,this.formDictionaryEnum,""),(0,r.RA)(this.cdr))}onSelectedEidosXreoseonChanged(t){this.selectedEidosXreosis=this.xreoseisSelections.filter(i=>i.mode==t.target.value)[0],(0,r.RA)(this.cdr)}onOristikopoiisiDiakanonismou(){this.isLoading=!0,(0,r.RA)(this.cdr),this.diakanonismoiSrv.oristikopoiisiDiakanonismou(this.model).subscribe(t=>{t?this.toasterSrv.showSuccess("",this.translation.diakanonismoi.finalised):this.toasterSrv.showError("",this.translation.diakanonismoi.finaliseError),this.isLoading=!1,(0,r.RA)(this.cdr),this.oristikopoiisi.emit(!0)})}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(h),l.Y36(m.g),l.Y36(r.MJ),l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-diakanonismoi-create"]],viewQuery:function(t,i){if(1&t&&l.Gf(A,5),2&t){let t;l.iGM(t=l.CRH())&&(i.diakanonismosForm=t.first)}},inputs:{xreoseisSelections:"xreoseisSelections"},outputs:{oristikopoiisi:"oristikopoiisi"},decls:33,vars:29,consts:[[1,"form"],["diakanonismosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-6"],["name","xreosiMode","required","",1,"form-control","custom-select",3,"ngModel","ngModelChange","change"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],["name","arithmosDoseon","placeholder","1","type","number","required","",1,"form-control",3,"ngModel","ngModelChange"],["arithmosDoseonInput","ngModel"],["class","my-2",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","d-block","mx-auto",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-calculator"],["class","alert alert-danger form-msgs",3,"innerHTML",4,"ngIf"],[3,"condition","customClass"],["class","col-12 py-3 bg-white debits-info_left",4,"ngIf"],[3,"value"],[1,"my-2"],[1,"text-primary","font-weight-bold"],[1,"mb-0"],[1,"mr-1","d-inline-block",2,"width","200px"],[1,"totalPoso",2,"width","220px"],[1,"alert","alert-danger","form-msgs",3,"innerHTML"],[1,"col-12","py-3","bg-white","debits-info_left"],[1,"text-info","font-weight-bold"],[1,"totalPoso"],[1,"font-weight-bold"],[1,"text-danger"],[4,"ngFor","ngForOf"],[1,"text-danger","font-italic","font-weight-bold"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["aria-hidden","true",1,"far","fa-save"]],template:function(t,i){if(1&t&&(l.TgZ(0,"form",0,1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"label"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"select",4),l.NdJ("ngModelChange",function(t){return i.model.xreoseisSelectionMode=t})("change",function(t){return i.onSelectedEidosXreoseonChanged(t)}),l.TgZ(8,"option",5),l._uU(9),l.ALo(10,"translate"),l.qZA(),l.YNc(11,x,2,2,"option",6),l.qZA(),l.TgZ(12,"div",7),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.qZA(),l.TgZ(15,"div",3),l.TgZ(16,"label"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.TgZ(19,"input",8,9),l.NdJ("ngModelChange",function(t){return i.model.arithmosDoseon=t}),l.qZA(),l.TgZ(21,"div",7),l._uU(22),l.ALo(23,"translate"),l.qZA(),l.qZA(),l.qZA(),l.YNc(24,b,25,30,"div",10),l.TgZ(25,"button",11),l.NdJ("click",function(){return i.onSubmit()}),l._UZ(26,"span",12),l._uU(27),l.ALo(28,"translate"),l.qZA(),l.YNc(29,k,1,1,"div",13),l.qZA(),l._UZ(30,"lib-egr-loading",14),l._UZ(31,"hr"),l.YNc(32,y,25,26,"div",15)),2&t){const t=l.MAs(1),n=l.MAs(20);l.xp6(5),l.hij("",l.lcZ(6,17,null==i.translation?null:i.translation.diakanonismoi.debitsType),"*"),l.xp6(2),l.Q6J("ngModel",i.model.xreoseisSelectionMode),l.xp6(2),l.Oqu(l.lcZ(10,19,null==i.translation?null:i.translation.egwebapps.egrSelect)),l.xp6(2),l.Q6J("ngForOf",i.xreoseisSelections),l.xp6(1),l.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&i.model.xreoseisSelectionMode),l.xp6(1),l.hij(" *",l.lcZ(14,21,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),l.xp6(4),l.hij("",l.lcZ(18,23,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount),"*"),l.xp6(2),l.Q6J("ngModel",i.model.arithmosDoseon),l.xp6(2),l.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&n.valid),l.xp6(1),l.hij(" *",l.lcZ(23,25,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),l.xp6(2),l.Q6J("ngIf",i.selectedEidosXreosis),l.xp6(1),l.Q6J("disabled",t.invalid),l.xp6(2),l.hij(" ",l.lcZ(28,27,null==i.translation?null:i.translation.diakanonismoi.calculateInstalments)," "),l.xp6(2),l.Q6J("ngIf",i.formErrorsMsg&&""!=i.formErrorsMsg),l.xp6(1),l.Q6J("condition",i.isLoading)("customClass","egr-load-small"),l.xp6(2),l.Q6J("ngIf",i.oikonomikiResponse&&!i.isLoading)}},directives:[Z._Y,Z.JL,Z.F,Z.EJ,Z.Q7,Z.JJ,Z.On,Z.YN,Z.Kr,f.sg,Z.wV,Z.Fj,f.O5,r.IE],pipes:[e.X$,f.H9,f.uU],encapsulation:2,changeDetection:0}),t})();var T=n(24663),_=n(23815),v=n(25917),L=n(43190),S=n(24020),D=n(88598),C=n(84439),U=n(33013),O=n(45121),M=n(3379);function R(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"div",22),l.TgZ(1,"button",23),l.NdJ("click",function(){return l.CHM(t),l.oxw().onCreateNewAitisiDiakanonismou()}),l._UZ(2,"span",24),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(3),l.hij(" ",l.lcZ(4,1,null==t.translation?null:t.translation.diakanonismoi.addNew)," ")}}function F(t,i){if(1&t&&l._UZ(0,"p-message",25),2&t){const t=l.oxw();l.Q6J("text",null==t.translation?null:t.translation.diakanonismoi.noSettlementsFound)("styleClass","mb-2")}}function J(t,i){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"th",26),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"th",27),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"th",27),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"th",28),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"th",29),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"th",29),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.TgZ(19,"th",29),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,7,null==t.translation?null:t.translation.egwebapps.egrAA)),l.xp6(3),l.Oqu(l.lcZ(6,9,null==t.translation?null:t.translation.egwebapps.egrStatus)),l.xp6(3),l.Oqu(l.lcZ(9,11,null==t.translation?null:t.translation.egwebapps.egrDate)),l.xp6(3),l.Oqu(l.lcZ(12,13,null==t.translation?null:t.translation.diakanonismoi.instalmentsCount)),l.xp6(3),l.Oqu(l.lcZ(15,15,null==t.translation?null:t.translation.egwebapps.egrTotalCost)),l.xp6(3),l.Oqu(l.lcZ(18,17,null==t.translation?null:t.translation.diakanonismoi.amountReceived)),l.xp6(3),l.Oqu(l.lcZ(21,19,null==t.translation?null:t.translation.diakanonismoi.amountRemaining))}}function N(t,i){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td",26),l.TgZ(2,"span",30),l._uU(3),l.ALo(4,"translate"),l.qZA(),l._uU(5),l.qZA(),l.TgZ(6,"td",27),l.TgZ(7,"span",30),l._uU(8),l.ALo(9,"translate"),l.qZA(),l._uU(10),l.qZA(),l.TgZ(11,"td",31),l.TgZ(12,"span",30),l._uU(13),l.ALo(14,"translate"),l.qZA(),l._uU(15),l.ALo(16,"date"),l.qZA(),l.TgZ(17,"td",32),l.TgZ(18,"span",30),l._uU(19),l.ALo(20,"translate"),l.qZA(),l._uU(21),l.qZA(),l.TgZ(22,"td",33),l.TgZ(23,"span",30),l._uU(24),l.ALo(25,"translate"),l.qZA(),l._uU(26),l.ALo(27,"currency"),l.qZA(),l.TgZ(28,"td",33),l.TgZ(29,"span",30),l._uU(30),l.ALo(31,"translate"),l.qZA(),l._uU(32),l.ALo(33,"currency"),l.qZA(),l.TgZ(34,"td",33),l.TgZ(35,"span",30),l._uU(36),l.ALo(37,"translate"),l.qZA(),l._uU(38),l.ALo(39,"currency"),l.qZA(),l.qZA()),2&t){const t=i.$implicit,n=l.oxw();l.xp6(3),l.Oqu(l.lcZ(4,14,null==n.translation?null:n.translation.egwebapps.egrAA)),l.xp6(2),l.hij(" ",t.aa," "),l.xp6(3),l.Oqu(l.lcZ(9,16,null==n.translation?null:n.translation.egwebapps.egrStatus)),l.xp6(2),l.hij(" ",t.katastatsiPerigrafi," "),l.xp6(3),l.Oqu(l.lcZ(14,18,null==n.translation?null:n.translation.egwebapps.egrDate)),l.xp6(2),l.hij(" ",l.xi3(16,20,t.hmerominia,"dd/LL/yyyy")," "),l.xp6(4),l.Oqu(l.lcZ(20,23,null==n.translation?null:n.translation.diakanonismoi.instalmentsCount)),l.xp6(2),l.hij(" ",t.arithmosDoseon," "),l.xp6(3),l.Oqu(l.lcZ(25,25,null==n.translation?null:n.translation.egwebapps.egrTotalCost)),l.xp6(2),l.hij(" ",l.gM2(27,27,t.sinolikoPoso,"\u20ac","symbol","1.2")," "),l.xp6(4),l.Oqu(l.lcZ(31,32,null==n.translation?null:n.translation.diakanonismoi.amountReceived)),l.xp6(2),l.hij(" ",l.gM2(33,34,t.eispraxthen,"\u20ac","symbol","1.2")," "),l.xp6(4),l.Oqu(l.lcZ(37,39,null==n.translation?null:n.translation.diakanonismoi.amountRemaining)),l.xp6(2),l.hij(" ",l.gM2(39,41,t.ypoloipo,"\u20ac","symbol","1.2")," ")}}function I(t,i){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td",34),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.hij(" ",l.lcZ(3,1,null==t.translation?null:t.translation.egwebapps.egrNoResultsFound)," ")}}function E(t,i){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td",35),l.TgZ(2,"strong"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"td",32),l.TgZ(5,"strong"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.TgZ(8,"td",33),l.TgZ(9,"strong"),l._uU(10),l.ALo(11,"currency"),l.qZA(),l.qZA(),l.TgZ(12,"td",33),l.TgZ(13,"strong"),l._uU(14),l.ALo(15,"currency"),l.qZA(),l.qZA(),l.TgZ(16,"td",33),l.TgZ(17,"strong"),l._uU(18),l.ALo(19,"currency"),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(3),l.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==t.modelFiltered?null:t.modelFiltered.length,""),l.xp6(3),l.hij("",l.lcZ(7,5,null==t.translation?null:t.translation.egwebapps.egrTotalCost),":"),l.xp6(4),l.Oqu(l.gM2(11,7,t.totalSinolikoPoso,"\u20ac","symbol","1.2")),l.xp6(4),l.Oqu(l.gM2(15,12,t.totalEispraxthenPoso,"\u20ac","symbol","1.2")),l.xp6(4),l.Oqu(l.gM2(19,17,t.totalYpoloipoPoso,"\u20ac","symbol","1.2"))}}function Y(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"app-diakanonismoi-create",36),l.NdJ("oristikopoiisi",function(){return l.CHM(t),l.oxw().onOristikopoiisiAitisis()}),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("xreoseisSelections",t.xreoseisSelections)}}const Q=function(){return{width:"100%"}};let j=(()=>{class t{constructor(t,i,n,o){this.diakanonismoiSrv=t,this.appCacheSv=i,this.toasterSrv=n,this.cdr=o,this.onDestroy=new d.xQ,this.modelFiltered=[],this.isLoading=!0,this.isAddingNewDiakanonismo=!1,this.providerKey="AB375F23-B94C-45C3-BF8F-5A9FFF350EC0",this.diakanonismosDateRange=null,this.katastasiFilter=null,this.totalSinolikoPoso=0,this.totalEispraxthenPoso=0,this.totalYpoloipoPoso=0,this.today=new Date,this.yearRange=(0,r.ug)(50,50)}ngOnInit(){this.appCacheSv.translation$.pipe((0,u.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t,(0,r.RA)(this.cdr))}),this.diakanonismoiSrv.getDiakanonismous().pipe((0,L.w)(t=>t?(this.model=t,this.modelFiltered=(0,r.p$)(this.model),this.model.forEach(t=>{this.totalSinolikoPoso+=t.sinolikoPoso,this.totalEispraxthenPoso+=t.eispraxthen,this.totalYpoloipoPoso+=t.ypoloipo}),this._orderDiakanonismous(this.modelFiltered),this.diakanonismoiSrv.getXreoseisSelections()):(0,v.of)(!1))).subscribe(t=>{t?(this.xreoseisSelections=t,this.xreoseisSelections=this.xreoseisSelections.filter(t=>t.synolo>0),this.isLoading=!1):this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2."),(0,r.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSearch(){this.isLoading=!0,this.modelFiltered=(0,r.p$)(this.model);let t=[];if(this.katastasiFilter){let i=this.modelFiltered.filter(t=>t.katastatsiPerigrafi.toLowerCase().includes(this.katastasiFilter.toLowerCase()));i&&i.length&&i.forEach(i=>{t.push(i)})}if(this.diakanonismosDateRange){let i=this.modelFiltered.filter(t=>(0,T.Z)(new Date(t.hmerominia),{start:new Date(this.diakanonismosDateRange[0]),end:new Date(this.diakanonismosDateRange[1])}));i&&i.length&&i.forEach(i=>{t.push(i)})}this.modelFiltered=_.intersection(t),this.isLoading=!1,(0,r.RA)(this.cdr)}onClearSearch(){this.modelFiltered=(0,r.p$)(this.model),this.diakanonismosDateRange=null,(0,r.RA)(this.cdr)}onCreateNewAitisiDiakanonismou(){this.isAddingNewDiakanonismo=!0,(0,r.RA)(this.cdr)}onOristikopoiisiAitisis(){this.isAddingNewDiakanonismo=!1,(0,r.RA)(this.cdr)}_orderDiakanonismous(t){this.isLoading=!0,(0,r.RA)(this.cdr),t=t.sort(function(t,i){return t.hmerominia!=i.hmerominia?new Date(i.hmerominia).getTime()-new Date(t.hmerominia).getTime():+i.aa-+t.aa}),this.isLoading=!1,(0,r.RA)(this.cdr)}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(h),l.Y36(m.g),l.Y36(r.MJ),l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-diakanonismoi-list"]],inputs:{isAuthorized:"isAuthorized"},decls:31,vars:45,consts:[["class","d-flex justify-content-end",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","diakanonismosPerigrafi"],["name","diakanonismosPerigrafi","type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","diakanonismoDateRange"],["name","diakanonismoDateRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["appendTo","body","resizable","false","modal","true",3,"header","visible","draggable","closable","visibleChange"],[3,"xreoseisSelections","oristikopoiisi",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-plus","fa-fw"],["severity","warn",3,"text","styleClass"],[1,"fixed-width-col-40"],[1,"fixed-width-col-100"],[1,"fixed-width-col-60"],[1,"fixed-width-col-120"],[1,"p-column-title"],[1,"fixed-width-col-100","text-center"],[1,"fixed-width-col-60","text-right"],[1,"fixed-width-col-120","text-right"],["colspan","7"],["colspan","3",1,"fixed-width-col-240"],[3,"xreoseisSelections","oristikopoiisi"]],template:function(t,i){1&t&&(l.YNc(0,R,5,3,"div",0),l.YNc(1,F,1,2,"p-message",1),l.TgZ(2,"p-panel",2),l.TgZ(3,"form",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.TgZ(6,"label",6),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.TgZ(9,"input",7),l.NdJ("ngModelChange",function(t){return i.katastasiFilter=t}),l.qZA(),l.qZA(),l.TgZ(10,"div",5),l.TgZ(11,"label",8),l._uU(12),l.ALo(13,"translate"),l.qZA(),l.TgZ(14,"p-calendar",9),l.NdJ("ngModelChange",function(t){return i.diakanonismosDateRange=t}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",10),l.TgZ(16,"button",11),l.NdJ("click",function(){return i.onSearch()}),l._UZ(17,"span",12),l._uU(18),l.ALo(19,"translate"),l.qZA(),l.TgZ(20,"button",13),l.NdJ("click",function(){return i.onClearSearch()}),l._UZ(21,"span",14),l._uU(22),l.ALo(23,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"p-table",15),l.YNc(25,J,22,21,"ng-template",16),l.YNc(26,N,40,46,"ng-template",17),l.YNc(27,I,4,3,"ng-template",18),l.YNc(28,E,20,22,"ng-template",19),l.qZA(),l.TgZ(29,"p-dialog",20),l.NdJ("visibleChange",function(t){return i.isAddingNewDiakanonismo=t}),l.YNc(30,Y,1,1,"app-diakanonismoi-create",21),l.qZA()),2&t&&(l.Q6J("ngIf",i.xreoseisSelections&&i.xreoseisSelections.length>0&&!i.isLoading),l.xp6(1),l.Q6J("ngIf",!(i.model&&0!=i.model.length||i.isLoading)),l.xp6(1),l.Q6J("header",null==i.translation?null:i.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),l.xp6(5),l.Oqu(l.lcZ(8,36,null==i.translation?null:i.translation.egwebapps.egrStatus)),l.xp6(2),l.Q6J("placeholder",null==i.translation?null:i.translation.egwebapps.egrStatus)("ngModel",i.katastasiFilter),l.xp6(3),l.Oqu(l.lcZ(13,38,null==i.translation?null:i.translation.egwebapps.egrDate)),l.xp6(2),l.Akn(l.DdM(44,Q)),l.Q6J("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",i.diakanonismosDateRange),l.xp6(4),l.hij(" ",l.lcZ(19,40,null==i.translation?null:i.translation.egwebapps.egrSearchBtn)," "),l.xp6(4),l.hij(" ",l.lcZ(23,42,null==i.translation?null:i.translation.egwebapps.egrClearBtn)," "),l.xp6(2),l.Q6J("value",i.modelFiltered)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",i.isLoading)("totalRecords",null==i.modelFiltered?null:i.modelFiltered.length),l.xp6(5),l.Q6J("header",null==i.translation?null:i.translation.diakanonismoi.addNew)("visible",i.isAddingNewDiakanonismo)("draggable",!1)("closable",!0),l.xp6(1),l.Q6J("ngIf",i.isAddingNewDiakanonismo))},directives:[f.O5,S.s,Z._Y,Z.JL,Z.F,Z.Fj,Z.JJ,Z.On,D.f,C.iA,U.jx,O.V,M.q,q],pipes:[e.X$,f.uU,f.H9],encapsulation:2,changeDetection:0}),t})();var P=n(87622),$=n(44748),z=n(41886);function H(t,i){if(1&t&&l._UZ(0,"p-message",3),2&t){const t=l.oxw();l.Q6J("text",null==t.translation?null:t.translation.egwebapps.egwebappsLoginMesg)}}function B(t,i){if(1&t&&(l.TgZ(0,"p-panel",4),l._UZ(1,"div",5),l.ALo(2,"decodeHtmlString"),l.qZA()),2&t){const t=l.oxw();l.Q6J("header",null==t.translation?null:t.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),l.xp6(1),l.Q6J("innerHTML",l.lcZ(2,4,t.tabMsg),l.oJD)}}function X(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"p-tabView",6),l.NdJ("onChange",function(i){return l.CHM(t),l.oxw().onTabChanged(i)}),l.TgZ(1,"p-tabPanel",7),l._UZ(2,"app-diakanonismoi-list"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("activeIndex",t.index),l.xp6(1),l.Q6J("header",null==t.translation?null:t.translation.egwebapps.history)}}const V=[{path:"",component:(()=>{class t{constructor(t,i,n,o,e,s){this.oidcSecuritySrv=t,this.appCacheSv=i,this.location=n,this.router=o,this.route=e,this.cdr=s,this.onDestroy=new d.xQ,this.index=0,this.selectedLang="el"}ngOnInit(){this.appCacheSv.translation$.pipe((0,u.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t,(0,r.RA)(this.cdr))}),this.appCacheSv.selectedLang$.pipe((0,u.R)(this.onDestroy)).subscribe(t=>{t&&(this.selectedLang=t),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.diakanonismoi_tab_info_en&&""!=AppConfOptions.diakanonismoi_tab_info_en?this.tabMsg=AppConfOptions.diakanonismoi_tab_info_en:AppConfOptions.diakanonismoi_tab_info&&""!=AppConfOptions.diakanonismoi_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.diakanonismoi_tab_info),(0,r.RA)(this.cdr)}),this.oidcSecuritySrv.isAuthenticated$.subscribe(t=>{this.isAuthorized=t,(0,r.RA)(this.cdr)}),this.index="create"===this.route.children[0].snapshot.url[0].path?1:0,(0,r.RA)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(t){this.router.navigate(0==t.index?["./list"]:["./create"],{relativeTo:this.route})}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(P.J_),l.Y36(m.g),l.Y36(f.Ye),l.Y36(a.F0),l.Y36(a.gz),l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-diakanonismoi-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:3,vars:3,consts:[["severity","warn",3,"text",4,"ngIf"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"]],template:function(t,i){1&t&&(l.YNc(0,H,1,1,"p-message",0),l.YNc(1,B,3,6,"p-panel",1),l.YNc(2,X,3,2,"p-tabView",2)),2&t&&(l.Q6J("ngIf",!i.isAuthorized),l.xp6(1),l.Q6J("ngIf",i.isAuthorized&&i.tabMsg&&""!=i.tabMsg),l.xp6(1),l.Q6J("ngIf",i.isAuthorized))},directives:[f.O5,M.q,S.s,$.xf,$.x4,j],pipes:[z.o],encapsulation:2,changeDetection:0}),t})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:j},{path:"create",component:q}]}];let G=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.Bz.forChild(V)],a.Bz]}),t})(),K=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[h],imports:[[s.m,o.IJ,G,e.aw.forChild()]]}),t})()}}]);