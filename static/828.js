"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[828],{4828:(Ut,G,c)=>{c.r(G),c.d(G,{ShdeModule:()=>Kt});var g=c(6230),f=c(7048),S=c(4864),$=c(5265),t=c(4496);let Y=(()=>{class e{intercept(i,a){return i=i.clone({setHeaders:{"Application-Key":"aitiseis-politon"}}),a.handle(i)}static#t=this.\u0275fac=function(a){return new(a||e)};static#i=this.\u0275prov=t.wxM({token:e,factory:e.\u0275fac})}return e})();var m=c(7921),r=c(3228),k=c(5657),B=c(6040),_=c(3616),y=c(7368),D=c(2116),E=c(9161),p=c(1368),F=c(6328),w=c(1148),T=c(2656);function L(e,o){if(1&e&&(t.wR5(0,"p-message",3),t.wVc(1,"translate")),2&e){const i=t.GaO();t.E7m("styleClass","mb-2")("text",t.kDX(1,2,null==i.translation?null:i.translation.egwebapps.egwebappsLoginMesg))}}function P(e,o){if(1&e&&(t.I0R(0,"p-panel",6),t.wVc(1,"translate"),t.wR5(2,"div",7),t.wVc(3,"decodeHtmlString"),t.C$Y()),2&e){const i=t.GaO(2);t.E7m("header",t.kDX(1,4,null==i.translation?null:i.translation.egwebapps.information))("styleClass","tab-msg mb-3")("toggleable",!0),t.yG2(2),t.E7m("innerHTML",t.kDX(3,6,i.tabMsg),t.E3n)}}function M(e,o){1&e&&(t.I0R(0,"div",8),t.wR5(1,"router-outlet"),t.C$Y())}function N(e,o){if(1&e&&(t.SAx(0),t.yuY(1,P,4,8,"p-panel",4)(2,M,2,0,"div",5),t.k70()),2&e){const i=t.GaO();t.yG2(),t.E7m("ngIf",i.isAuthorized&&i.tabMsg&&""!==i.tabMsg),t.yG2(),t.E7m("ngIf",i.isAuthorized)}}let V=(()=>{class e{constructor(i,a,n,s,l){this.oidcSecuritySrv=i,this.appCacheSrv=a,this.location=n,this.cdr=s,this.router=l,this.onDestroy=new k.E,this.afmNotFound=!1,this.index=0,this.selectedLang="el"}ngOnInit(){(0,B.E)([this.appCacheSrv.translation$,this.appCacheSrv.selectedLang$]).pipe((0,_.a)(this.onDestroy)).subscribe(i=>{i&&(this.translation=i[0],this.selectedLang=i[1],this.selectedLang&&(1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.shde_tab_info_en&&""!=AppConfOptions.shde_tab_info_en?this.tabMsg=AppConfOptions.shde_tab_info_en:AppConfOptions.shde_tab_info&&""!=AppConfOptions.shde_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.shde_tab_info)),(0,r.Er)(this.cdr))}),this.oidcSecuritySrv.isAuthenticated$.pipe((0,y.G)(i=>(this.isAuthorized=null!=i&&i.isAuthenticated,this.appCacheSrv.user$)),(0,_.a)(this.onDestroy)).subscribe(i=>{this.afmNotFound=!1,(0,r.Er)(this.cdr),i&&(0,r.w1)(i.tin)&&AppConfOptions.shde_afm_required&&(this.afmNotFound=!0),(0,r.Er)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(i){}static#t=this.\u0275fac=function(a){return new(a||e)(t.GI1(D.Bf),t.GI1(E.i),t.GI1(p.oB),t.GI1(t.kD9),t.GI1(m.E5))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-shde-layout"]],decls:4,vars:3,consts:[[1,"module-title"],["severity","warn",3,"styleClass","text",4,"ngIf"],[4,"ngIf"],["severity","warn",3,"styleClass","text"],[3,"header","styleClass","toggleable",4,"ngIf"],["class","benefits-container bg-white p-2",4,"ngIf"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[1,"benefits-container","bg-white","p-2"]],template:function(a,n){1&a&&(t.I0R(0,"h3",0),t.OEk(1),t.C$Y(),t.yuY(2,L,2,4,"p-message",1)(3,N,3,2,"ng-container",2)),2&a&&(t.yG2(),t.cNF(null==n.translation?null:n.translation.menu.shdeMenuItem),t.yG2(),t.E7m("ngIf",!n.isAuthorized),t.yG2(),t.E7m("ngIf",!n.afmNotFound))},dependencies:[m.cP,p.u_,F.S,w.s,T.m,g.sD],encapsulation:2,changeDetection:0})}return e})();class X{constructor(){this.DiadikasiaId=-1,this.DiadikasiaProtypoEggrafoId=-1,this.Description="\u0386\u03bb\u03bb\u03b1 \u0388\u03b3\u03b3\u03c1\u03b1\u03c6\u03b1",this.Sinimena=[]}}class K{constructor(){this.Start=0,this.Length=10,this.Order=[],this.Columns=[]}}class U{constructor(){this.IsPublicInUser=!0}}var u=c(4704);let I=(()=>{class e extends r._e{constructor(i,a){super(i,a),this.http=i,this.exceptionSrv=a,this.apiUrl=AppConfOptions.shde_api+"api/"}getDiadikasiaById(i){return this.http.get(`${this.apiUrl}DiadikasiaData/${i}`).pipe((0,u.k)(n=>n),this.catchHttpErrors())}getAvailableBooks(){return this.http.get(`${this.apiUrl}Relatives/GetAvailableBooks`)}getAvailableDiadikasies(){return this.http.get(`${this.apiUrl}Politis/GetDiadikasiesPolti`)}createAitisiPoliti(i){return this.http.post(`${this.apiUrl}Politis/CreateAitisiPoliti`,i).pipe((0,u.k)(n=>n),this.catchHttpErrors())}ypovoliAitisisPoliti(i){return this.http.get(`${this.apiUrl}Politis/YpovoliAitisisPoliti/${i}`).pipe((0,u.k)(n=>n),this.catchHttpErrors())}akyrosiAitisisPoliti(i){return this.http.get(`${this.apiUrl}Politis/AkyrosiAitisisPoliti/${i}`).pipe((0,u.k)(n=>n),this.catchHttpErrors())}getCommentsPoliti(i){return this.http.post(`${this.apiUrl}Politis/GetCommentsPoliti`,i).pipe((0,u.k)(n=>n),this.catchHttpErrors())}createComment(i){return this.http.post(`${this.apiUrl}Politis/CreateComment`,i).pipe((0,u.k)(n=>n),this.catchHttpErrors())}deleteComment(i){return this.http.post(`${this.apiUrl}Politis/DeleteComment/${i}`,i).pipe((0,u.k)(n=>n),this.catchHttpErrors())}uploadFile(i,a,n){let s=`${this.apiUrl}Politis/SinimenoUpload?EggrafoId=${a}`;n&&(s=`${this.apiUrl}Politis/SinimenoUpload?ProtypoEggrafoId=${n}&EggrafoId=${a}`);let l=new f.UD;return l.append("Content-Type","multipart/form-data"),l.append("Accept","application/json"),this.http.post(s,i,{headers:l}).pipe((0,u.k)(h=>h),this.catchHttpErrors())}deleteFile(i){return this.http.post(`${this.apiUrl}Politis/SinimenoDelete/${i}`,i).pipe((0,u.k)(n=>n),this.catchHttpErrors())}getProtypoEggrafoDiadikasia(i){let a=`${this.apiUrl}Politis/GetSinnimenoProtypoDiadikasias/${i}`;return(new f.UD).append("Accept","application/octet-stream"),this.http.get(a,{responseType:"blob"}).pipe(this.catchHttpErrors())}getSinnimeno(i){let a=`${this.apiUrl}Politis/GetSinnimeno/${i}`;return(new f.UD).append("Accept","application/octet-stream"),this.http.get(a,{responseType:"blob"}).pipe(this.catchHttpErrors())}getSinimenaList(i){return this.http.get(`${this.apiUrl}Politis/SinimenaList/${i}`).pipe((0,u.k)(n=>n),this.catchHttpErrors())}getAitisiPoliti(i){return this.http.get(`${this.apiUrl}Politis/GetAitisiPoliti/${i}`).pipe((0,u.k)(n=>n),this.catchHttpErrors())}getMyAitiseis(i){return this.http.post(`${this.apiUrl}Politis/GetMyAitiseis`,i).pipe((0,u.k)(n=>n),this.catchHttpErrors())}static#t=this.\u0275fac=function(a){return new(a||e)(t.CoB(f.KK),t.CoB(r.gn))};static#i=this.\u0275prov=t.wxM({token:e,factory:e.\u0275fac})}return e})();var d=c(6504),b=c(8552),v=c(7564),W=c(5544);const Z=["searchAitisisForm"];function q(e,o){if(1&e&&(t.I0R(0,"div",30),t.wR5(1,"i",31),t.I0R(2,"span",32),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.wR5(5,"i",33),t.I0R(6,"span"),t.OEk(7),t.wVc(8,"translate"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(3),t.cNF(t.kDX(4,2,null==i.translation?null:i.translation.shde.statusProcessing)),t.yG2(4),t.cNF(t.kDX(8,4,null==i.translation?null:i.translation.shde.statusSubmitted))}}function tt(e,o){if(1&e&&(t.I0R(0,"tr")(1,"th",34),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"th",34),t.OEk(5),t.wVc(6,"translate"),t.C$Y(),t.I0R(7,"th",35),t.OEk(8),t.wVc(9,"translate"),t.C$Y(),t.I0R(10,"th",36),t.OEk(11),t.wVc(12,"translate"),t.C$Y(),t.I0R(13,"th",36),t.OEk(14),t.wVc(15,"translate"),t.C$Y(),t.I0R(16,"th",34),t.OEk(17),t.wVc(18,"translate"),t.C$Y(),t.I0R(19,"th",34),t.OEk(20),t.wVc(21,"translate"),t.C$Y(),t.I0R(22,"th",37),t.OEk(23,"\xa0"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.cNF(t.kDX(3,7,null==i.translation?null:i.translation.egwebapps.egrStatus)),t.yG2(3),t.cNF(t.kDX(6,9,null==i.translation?null:i.translation.shde.protocolNbr)),t.yG2(3),t.cNF(t.kDX(9,11,null==i.translation?null:i.translation.shde.applicationNbr)),t.yG2(3),t.cNF(t.kDX(12,13,null==i.translation?null:i.translation.shde.trafficStatus)),t.yG2(3),t.cNF(t.kDX(15,15,null==i.translation?null:i.translation.shde.process)),t.yG2(3),t.cNF(t.kDX(18,17,null==i.translation?null:i.translation.shde.creationDate)),t.yG2(3),t.cNF(t.kDX(21,19,null==i.translation?null:i.translation.shde.protocolDate))}}function it(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td",38)(2,"span",39),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.wR5(5,"span",40),t.C$Y(),t.I0R(6,"td",41)(7,"span",39),t.OEk(8),t.wVc(9,"translate"),t.C$Y(),t.OEk(10),t.C$Y(),t.I0R(11,"td",42)(12,"span",39),t.OEk(13),t.wVc(14,"translate"),t.C$Y(),t.OEk(15),t.C$Y(),t.I0R(16,"td",36)(17,"span",39),t.OEk(18),t.wVc(19,"translate"),t.C$Y(),t.OEk(20),t.C$Y(),t.I0R(21,"td",36)(22,"span",39),t.OEk(23),t.wVc(24,"translate"),t.C$Y(),t.OEk(25),t.C$Y(),t.I0R(26,"td",41)(27,"span",39),t.OEk(28),t.wVc(29,"translate"),t.C$Y(),t.OEk(30),t.wVc(31,"date"),t.C$Y(),t.I0R(32,"td",41)(33,"span",39),t.OEk(34),t.wVc(35,"translate"),t.C$Y(),t.OEk(36),t.wVc(37,"date"),t.C$Y(),t.I0R(38,"td",43)(39,"a",44),t.wR5(40,"span",45),t.C$Y()()()),2&e){const i=o.$implicit,a=t.GaO(3);t.yG2(3),t.cNF(t.kDX(4,16,null==a.translation?null:a.translation.egwebapps.egrStatus)),t.yG2(2),t.E7m("innerHTML",a._getKatastasiIcon(i.AAProtocol,i.Katastasi),t.E3n),t.yG2(3),t.cNF(t.kDX(9,18,null==a.translation?null:a.translation.shde.protocolNbr)),t.yG2(2),t.CAO(" ",i.AAProtocol," ",i.Etos?"/ "+i.Etos:""," "),t.yG2(3),t.cNF(t.kDX(14,20,null==a.translation?null:a.translation.shde.applicationNbr)),t.yG2(2),t.oRS(" ",i.AitisiId," "),t.yG2(3),t.cNF(t.kDX(19,22,null==a.translation?null:a.translation.shde.trafficStatus)),t.yG2(2),t.oRS(" ",i.WorkflowPerigrafi," "),t.yG2(3),t.cNF(t.kDX(24,24,null==a.translation?null:a.translation.shde.process)),t.yG2(2),t.oRS(" ",i.Diadikasia," "),t.yG2(3),t.cNF(t.kDX(29,26,null==a.translation?null:a.translation.shde.creationDate)),t.yG2(2),t.oRS(" ",t.g7$(31,28,i.ImerominiaDimiourgias,"dd/LL/yyyy")," "),t.yG2(4),t.cNF(t.kDX(35,31,null==a.translation?null:a.translation.shde.protocolDate)),t.yG2(2),t.oRS(" ",t.g7$(37,33,i.ImerominiaProtokollisis,"dd/LL/yyyy")," "),t.yG2(3),t.CI5("routerLink","/shde-app/aitisi/",i.AitisiId,"")}}function et(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td",46)(2,"strong"),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.OEk(5),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(3),t.oRS("",t.kDX(4,2,null==i.translation?null:i.translation.egwebapps.egrTotal),":"),t.yG2(2),t.oRS(" ",null==i.aitiseisList.Data?null:i.aitiseisList.Data.length," ")}}function at(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td",46),t.OEk(2),t.wVc(3,"translate"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.oRS(" ",t.kDX(3,1,null==i.translation?null:i.translation.egwebapps.egrNoResultsFound)," ")}}function nt(e,o){if(1&e&&(t.I0R(0,"p-table",24),t.yuY(1,q,9,6,"ng-template",25)(2,tt,24,21,"ng-template",26)(3,it,41,36,"ng-template",27)(4,et,6,4,"ng-template",28)(5,at,4,3,"ng-template",29),t.C$Y()),2&e){const i=t.GaO(2);t.E7m("value",i.aitiseisList.Data)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",i.isLoading)("totalRecords",null==i.aitiseisList.Data?null:i.aitiseisList.Data.length)}}const O=()=>({width:"100%"});function st(e,o){if(1&e){const i=t.KQA();t.SAx(0),t.I0R(1,"div",2)(2,"a",3),t.wR5(3,"span",4),t.OEk(4),t.wVc(5,"translate"),t.C$Y()(),t.I0R(6,"p-panel",5),t.wVc(7,"translate"),t.I0R(8,"form",6,7)(10,"div",8)(11,"div",9)(12,"label"),t.OEk(13),t.wVc(14,"translate"),t.C$Y(),t.I0R(15,"p-calendar",10),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO();return t.kNx(s.filters.imerominiaApo,n)||(s.filters.imerominiaApo=n),t.CGJ(n)}),t.C$Y()(),t.I0R(16,"div",9)(17,"label"),t.OEk(18),t.wVc(19,"translate"),t.C$Y(),t.I0R(20,"p-calendar",11),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO();return t.kNx(s.filters.imerominiaEos,n)||(s.filters.imerominiaEos=n),t.CGJ(n)}),t.C$Y()(),t.I0R(21,"div",9)(22,"label"),t.OEk(23),t.wVc(24,"translate"),t.C$Y(),t.I0R(25,"select",12),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO();return t.kNx(s.filters.katastasi,n)||(s.filters.katastasi=n),t.CGJ(n)}),t.I0R(26,"option",13),t.OEk(27),t.wVc(28,"translate"),t.C$Y(),t.I0R(29,"option",14),t.OEk(30),t.wVc(31,"translate"),t.C$Y(),t.I0R(32,"option",15),t.OEk(33),t.wVc(34,"translate"),t.C$Y()()(),t.I0R(35,"div",9)(36,"label"),t.OEk(37),t.wVc(38,"translate"),t.C$Y(),t.I0R(39,"input",16),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO();return t.kNx(s.filters.madDiadikasias,n)||(s.filters.madDiadikasias=n),t.CGJ(n)}),t.C$Y()(),t.I0R(40,"div",9)(41,"label"),t.OEk(42),t.wVc(43,"translate"),t.C$Y(),t.I0R(44,"input",17),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO();return t.kNx(s.filters.aaProtocol,n)||(s.filters.aaProtocol=n),t.CGJ(n)}),t.C$Y()()(),t.I0R(45,"div",18)(46,"button",19),t.qCj("click",function(){t.usT(i);const n=t.GaO();return t.CGJ(n.onSearch())}),t.wR5(47,"i",20),t.OEk(48),t.wVc(49,"translate"),t.C$Y(),t.I0R(50,"button",21),t.qCj("click",function(){t.usT(i);const n=t.GaO();return t.CGJ(n.onClearFilters())}),t.wR5(51,"i",22),t.OEk(52),t.wVc(53,"translate"),t.C$Y()()()(),t.yuY(54,nt,6,9,"p-table",23),t.k70()}if(2&e){const i=t.GaO();t.yG2(4),t.oRS(" ",t.kDX(5,41,null==i.translation?null:i.translation.shde.newApplication),""),t.yG2(2),t.E7m("header",t.kDX(7,43,null==i.translation?null:i.translation.egwebapps.egrSearchFilters))("styleClass","mb-3"),t.yG2(7),t.cNF(t.kDX(14,45,null==i.translation?null:i.translation.shde.dateFrom)),t.yG2(2),t.m_g(t.q4q(65,O)),t.E7m("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0),t.OKB("ngModel",i.filters.imerominiaApo),t.yG2(3),t.cNF(t.kDX(19,47,null==i.translation?null:i.translation.shde.dateTo)),t.yG2(2),t.m_g(t.q4q(66,O)),t.E7m("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0),t.OKB("ngModel",i.filters.imerominiaEos),t.yG2(3),t.cNF(t.kDX(24,49,null==i.translation?null:i.translation.egwebapps.egrStatus)),t.yG2(2),t.OKB("ngModel",i.filters.katastasi),t.yG2(2),t.cNF(t.kDX(28,51,null==i.translation?null:i.translation.shde.statusNew)),t.yG2(3),t.cNF(t.kDX(31,53,null==i.translation?null:i.translation.shde.statusProcessing)),t.yG2(3),t.cNF(t.kDX(34,55,null==i.translation?null:i.translation.shde.statusCompleted)),t.yG2(4),t.cNF(t.kDX(38,57,null==i.translation?null:i.translation.shde.protocolUID)),t.yG2(2),t.OKB("ngModel",i.filters.madDiadikasias),t.yG2(3),t.cNF(t.kDX(43,59,null==i.translation?null:i.translation.shde.protocolNbr)),t.yG2(2),t.OKB("ngModel",i.filters.aaProtocol),t.yG2(4),t.oRS(" ",t.kDX(49,61,null==i.translation?null:i.translation.egwebapps.egrSearchBtn)," "),t.yG2(4),t.oRS(" ",t.kDX(53,63,null==i.translation?null:i.translation.egwebapps.egrClearBtn)," "),t.yG2(2),t.E7m("ngIf",i.aitiseisList&&!i.isLoading)}}let ot=(()=>{class e{constructor(i,a,n,s,l){this.toasterSrv=i,this.oidcSecuritySrv=a,this.shdeService=n,this.appCacheSv=s,this.cdr=l,this.filters={},this.yearRange=(0,r.sj)(50,50),this.isLoading=!1,this.isFormSubmitted=!1,this.onDestroy=new k.E}ngOnInit(){this.appCacheSv.translation$.pipe((0,_.a)(this.onDestroy)).subscribe(i=>{i&&(this.translation=i),(0,r.Er)(this.cdr)}),this.isLoading=!0,this.request=new K,this.request.Order=[{ColumnName:"DateCreated",Dir:"desc"}],(0,r.Er)(this.cdr),this.shdeService.getMyAitiseis(this.request).subscribe(i=>{i&&(this.aitiseisList=i),this.isLoading=!1,(0,r.Er)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSearch(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,r.Er)(this.cdr),this.isFormSubmitted&&this.searchAitisisForm.valid&&(this.isLoading=!0,this.request.Columns=this.getDefaultSearchColumns(),(0,r.Er)(this.cdr),this.shdeService.getMyAitiseis(this.request).subscribe(i=>{i&&(this.aitiseisList=i),this.isLoading=!1,(0,r.Er)(this.cdr)}))}onClearFilters(){this.filters={},this.request.Columns=this.getDefaultSearchColumns(),this.onSearch()}_getKatastasiIcon(i,a){return null===i&&1==a?'<i class="fas fa-pencil-alt me-1" style="color: orangered;"></i>':""!=i&&1!=a?"<i class='fas fa-paper-plane me-1' style='color: green;'></i>":void 0}getDefaultSearchColumns(){return[this.filters.imerominiaApo|this.filters.imerominiaEos?{ColumnName:"Eis.dHmProtokollisis",Value:(0,r.nM)(this.filters.imerominiaApo)+"~"+(0,r.nM)(this.filters.imerominiaEos),Regex:!1}:null,this.filters.aaProtocol?{ColumnName:"nAA.Search",Value:this.filters.aaProtocol,Regex:!1}:null,this.filters.madDiadikasias?{ColumnName:"AitisiId",Value:this.filters.madDiadikasias,Regex:!1}:null,this.filters.katastasi?{ColumnName:"KatastasiAitisis",Value:this.filters.katastasi,Regex:!1}:null].filter(l=>l)}static#t=this.\u0275fac=function(a){return new(a||e)(t.GI1(r.y6),t.GI1(D.Bf),t.GI1(I),t.GI1(E.i),t.GI1(t.kD9))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-aitiseis-list"]],viewQuery:function(a,n){if(1&a&&t.CC$(Z,5),2&a){let s;t.wto(s=t.Gqi())&&(n.searchAitisisForm=s.first)}},decls:2,vars:3,consts:[[3,"condition","customClass"],[4,"ngIf"],[1,"d-flex","justify-content-end"],["routerLink","/shde-app/aitisi/0",1,"btn","btn-primary","btn-sm","mb-1"],["aria-hidden","true",1,"fas","fa-plus"],[3,"header","styleClass"],[1,"form"],["searchAitisisForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-4"],["name","imerominiaApo","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["name","imerominiaEos","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["name","katastasi",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["name","maddiadikasias","placeholder","1","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","aadiadikasias","placeholder","1","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","me-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords",4,"ngIf"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"ui-helper-clearfix",2,"text-align","left"],[1,"fas","fa-pencil-alt","me-1",2,"color","orangered"],[1,"me-2"],[1,"fas","fa-paper-plane","me-1",2,"color","green"],[1,"fixed-width-col-100"],[1,"fixed-width-col-80"],[1,"fixed-width-col-170"],[1,"fixed-width-col-40"],[1,"fixed-width-col-100","text-center","katastasi"],[1,"p-column-title"],[3,"innerHTML"],[1,"fixed-width-col-100","text-center"],[1,"fixed-width-col-80","text-center"],[1,"fixed-width-col-40","text-center"],[1,"btn","btn-sm","btn-primary","m-0",3,"routerLink"],["aria-label","\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u0391\u03af\u03c4\u03b7\u03c3\u03b7\u03c2",1,"far","fa-eye"],["colspan","8"]],template:function(a,n){1&a&&(t.wR5(0,"eg-loading",0),t.yuY(1,st,55,67,"ng-container",1)),2&a&&(t.E7m("condition",n.isLoading)("customClass","egr-load-small"),t.yG2(),t.E7m("ngIf",!n.isLoading))},dependencies:[m.ER,p.u_,d.sz,d.wd,d.GO,d.ot,d.GC,d.ue,d.u,d._G,d.SC,r.uU,b.oJ,v.U3,W.Yf,w.s,p.y,g.sD],encapsulation:2,changeDetection:0})}return e})();var rt=c(9016),lt=c(120);function ct(e,o){if(1&e){const i=t.KQA();t.I0R(0,"div",6)(1,"label"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"ng-select",10),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO(2);return t.kNx(s.selectedDiadikasia,n)||(s.selectedDiadikasia=n),t.CGJ(n)}),t.qCj("change",function(n){t.usT(i);const s=t.GaO(2);return t.CGJ(s.onDiadikasiaChanged(n))}),t.C$Y()()}if(2&e){const i=t.GaO(2);t.yG2(2),t.cNF(t.kDX(3,4,null==i.translation?null:i.translation.shde.chooseProcess)),t.yG2(2),t.E7m("appendTo","body")("items",i.selectedKatigoria.Diadikasies),t.OKB("ngModel",i.selectedDiadikasia)}}function dt(e,o){if(1&e&&(t.SAx(0),t.I0R(1,"div",13)(2,"label"),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.wR5(5,"div",14),t.C$Y(),t.k70()),2&e){const i=t.GaO(3);t.yG2(3),t.cNF(t.kDX(4,2,null==i.translation?null:i.translation.shde.instructions)),t.yG2(2),t.E7m("innerHtml",i.selectedDiadikasia.Simeioseis,t.E3n)}}function ut(e,o){if(1&e&&(t.I0R(0,"ul"),t.wR5(1,"li",14),t.C$Y()),2&e){const i=o.$implicit;t.yG2(),t.E7m("innerHtml",i.Description,t.E3n)}}function mt(e,o){if(1&e&&(t.SAx(0),t.I0R(1,"div",13)(2,"label"),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.yuY(5,ut,2,1,"ul",15),t.C$Y(),t.k70()),2&e){const i=t.GaO(3);t.yG2(3),t.cNF(t.kDX(4,2,null==i.translation?null:i.translation.shde.docTemplates)),t.yG2(2),t.E7m("ngForOf",i.selectedDiadikasia.ProtypaEggrafa)}}function pt(e,o){if(1&e){const i=t.KQA();t.SAx(0),t.yuY(1,dt,6,4,"ng-container",9)(2,mt,6,4,"ng-container",9),t.I0R(3,"button",11),t.qCj("click",function(){t.usT(i);const n=t.GaO(2);return t.CGJ(n.onCreateAitisi())}),t.wR5(4,"span",12),t.OEk(5),t.wVc(6,"translate"),t.C$Y(),t.k70()}if(2&e){const i=t.GaO(2);t.yG2(),t.E7m("ngIf",i.selectedDiadikasia.Simeioseis),t.yG2(),t.E7m("ngIf",i.selectedDiadikasia.ProtypaEggrafa),t.yG2(),t.E7m("disabled",i.isLoading),t.yG2(2),t.oRS(" ",t.kDX(6,4,null==i.translation?null:i.translation.shde.createAndContinue)," ")}}function ht(e,o){if(1&e){const i=t.KQA();t.I0R(0,"form",2,3)(2,"h4",4),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.wR5(5,"hr"),t.I0R(6,"div",5)(7,"div",6)(8,"label"),t.OEk(9),t.wVc(10,"translate"),t.C$Y(),t.I0R(11,"ng-select",7),t.iHE("ngModelChange",function(n){t.usT(i);const s=t.GaO();return t.kNx(s.selectedKatigoria,n)||(s.selectedKatigoria=n),t.CGJ(n)}),t.qCj("change",function(){t.usT(i);const n=t.GaO();return t.CGJ(n.onKatigoriaChanged())}),t.C$Y()(),t.yuY(12,ct,5,6,"div",8),t.C$Y(),t.yuY(13,pt,7,6,"ng-container",9),t.C$Y()}if(2&e){const i=t.GaO();t.yG2(3),t.cNF(t.kDX(4,7,null==i.translation?null:i.translation.shde.newApplication)),t.yG2(6),t.cNF(t.kDX(10,9,null==i.translation?null:i.translation.shde.chooseCategory)),t.yG2(2),t.E7m("appendTo","body")("items",i.katigoriesDiadikasion),t.OKB("ngModel",i.selectedKatigoria),t.yG2(),t.E7m("ngIf",i.selectedKatigoria),t.yG2(),t.E7m("ngIf",i.selectedKatigoria&&i.selectedDiadikasia)}}let A=(()=>{class e{constructor(i,a,n,s,l,h,C,Ht){this.toasterSrv=i,this.route=a,this.router=n,this.oidcSecuritySrv=s,this.appCacheSv=l,this.shdeService=h,this.cdr=C,this._parent=Ht,this.closeModal=new t._w7,this.listHasChanged=new t._w7,this.onDestroy=new k.E,this.isLoading=!1}ngOnInit(){this.defaultSelectedDiadikasiaId=this.route.snapshot.params.selecteddiadikasiaid,this.appCacheSv.translation$.pipe((0,_.a)(this.onDestroy)).subscribe(i=>{i&&(this.translation=i),(0,r.Er)(this.cdr)}),this.isLoading=!0,(0,r.Er)(this.cdr),this.shdeService.getAvailableDiadikasies().subscribe(i=>{if(i&&(this.model={},this.katigoriesDiadikasion=i,this.katigoriesDiadikasion&&1==this.katigoriesDiadikasion.length&&(this.selectedKatigoria=this.katigoriesDiadikasion[0]),this.defaultSelectedDiadikasiaId&&null!=this.defaultSelectedDiadikasiaId)){let a=this.katigoriesDiadikasion.find(n=>n.Diadikasies.some(s=>s.Id==this.defaultSelectedDiadikasiaId));a&&null!=a&&(this.selectedKatigoria=a,this.selectedDiadikasia=a.Diadikasies.find(n=>n.Id==this.defaultSelectedDiadikasiaId),this.model.DiadikasiaId=this.defaultSelectedDiadikasiaId)}this.isLoading=!1,(0,r.Er)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onKatigoriaChanged(){this.selectedDiadikasia=null,(0,r.Er)(this.cdr)}onDiadikasiaChanged(i){this.model.DiadikasiaId=this.selectedKatigoria?i.Id:null,(0,r.Er)(this.cdr)}onCreateAitisi(){this.isLoading=!0,(0,r.Er)(this.cdr),this.shdeService.createAitisiPoliti(this.model).subscribe(i=>{i&&(this.toasterSrv.showWarning("",this.translation.shde.warningMsg),this.router.navigate([`/shde-app/aitisi/${i.AitisiId}`,{}]))}),this.isLoading=!1,(0,r.Er)(this.cdr)}static#t=this.\u0275fac=function(a){return new(a||e)(t.GI1(r.y6),t.GI1(m.gV),t.GI1(m.E5),t.GI1(D.Bf),t.GI1(E.i),t.GI1(I),t.GI1(t.kD9),t.GI1(rt.a))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-aitisi-create"]],outputs:{closeModal:"closeModal",listHasChanged:"listHasChanged"},decls:2,vars:3,consts:[[3,"condition","customClass"],["class","form bg-white",4,"ngIf"],[1,"form","bg-white"],["mAitisiForm","ngForm"],[1,"mb-2"],[1,"row"],[1,"form-group","col-12","col-md-6"],["name","katigoriaDiadikasiasPerigrafi","bindLabel","KatigoriaDiadikasiasPerigrafi",1,"ontop-select",3,"appendTo","items","ngModel","ngModelChange","change"],["class","form-group col-12 col-md-6",4,"ngIf"],[4,"ngIf"],["name","diadikasia","bindLabel","Titlos",1,"ontop-select",3,"appendTo","items","ngModel","ngModelChange","change"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"far","fa-save","fa-fw"],[1,"form-group"],[3,"innerHtml"],[4,"ngFor","ngForOf"]],template:function(a,n){1&a&&(t.wR5(0,"eg-loading",0),t.yuY(1,ht,14,11,"form",1)),2&a&&(t.E7m("condition",n.isLoading)("customClass","egr-load-small"),t.yG2(),t.E7m("ngIf",!n.isLoading))},dependencies:[p.ay,p.u_,d.sz,d.ue,d.u,d._G,d.SC,lt.UT,r.uU,g.sD],encapsulation:2,changeDetection:0})}return e})();var gt=c(9336),R=c(2700),x=c(4935),ft=c(3856);function _t(e,o){if(1&e&&(t.I0R(0,"p",16)(1,"strong"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.OEk(4),t.C$Y()),2&e){const i=t.GaO(2);t.yG2(2),t.oRS("",t.kDX(3,2,i.translation.shde.category),":"),t.yG2(2),t.oRS(" ",i.selectedKatigoria.KatigoriaDiadikasiasPerigrafi," ")}}function Ct(e,o){if(1&e&&(t.I0R(0,"p",16)(1,"strong"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.OEk(4),t.C$Y()),2&e){const i=t.GaO(2);t.yG2(2),t.oRS("",t.kDX(3,2,i.translation.shde.process),":"),t.yG2(2),t.oRS(" ",i.selectedDiadikasia.Titlos," ")}}function kt(e,o){if(1&e&&(t.I0R(0,"div",21)(1,"label"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.wR5(4,"div",22),t.C$Y()),2&e){const i=t.GaO(2);t.yG2(2),t.cNF(t.kDX(3,2,i.translation.shde.instructions)),t.yG2(2),t.E7m("innerHtml",i.selectedDiadikasia.Simeioseis,t.E3n)}}function yt(e,o){if(1&e&&(t.I0R(0,"div",30)(1,"span"),t.OEk(2),t.wVc(3,"translate"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.cNF(t.kDX(3,1,i.translation.shde.requiredDocuments))}}function Dt(e,o){if(1&e&&(t.I0R(0,"tr")(1,"th"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"th"),t.OEk(5),t.wVc(6,"translate"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.cNF(t.kDX(3,2,i.translation.shde.docTemplate)),t.yG2(3),t.cNF(t.kDX(6,4,i.translation.shde.files))}}function Et(e,o){if(1&e){const i=t.KQA();t.I0R(0,"span",36),t.qCj("click",function(){t.usT(i);const n=t.GaO().$implicit,s=t.GaO(3);return t.CGJ(s.onClickEggrafo(n.DiadikasiaProtypoEggrafoId))}),t.wR5(1,"i",37),t.C$Y()}}function It(e,o){if(1&e){const i=t.KQA();t.SAx(0),t.I0R(1,"div",39)(2,"span",40),t.qCj("click",function(){t.usT(i);const n=t.GaO().$implicit,s=t.GaO(4);return t.CGJ(s.onClickSinimeno(n.DmsId))}),t.wR5(3,"span",41),t.C$Y(),t.I0R(4,"span",42),t.qCj("click",function(){t.usT(i);const n=t.GaO().$implicit,s=t.GaO(4);return t.CGJ(s.onDeleteSinimeno(n.DmsId))}),t.wR5(5,"span",43),t.C$Y()(),t.k70()}}function Gt(e,o){if(1&e&&(t.I0R(0,"div")(1,"span",38),t.OEk(2),t.C$Y(),t.yuY(3,It,6,0,"ng-container",35),t.C$Y()),2&e){const i=o.$implicit,a=t.GaO().$implicit,n=t.GaO(3);t.uQ9("sinimeno d-flex align-items-center justify-content-between ",a.Sinimena.length>1?"border-bottom":""," p-2"),t.yG2(2),t.CAO("",i.Description,"",i.Extension,""),t.yG2(),t.E7m("ngIf",!n.model.AAProtocol)}}function wt(e,o){if(1&e){const i=t.KQA();t.SAx(0),t.I0R(1,"div",44)(2,"label",45),t.wR5(3,"span",46),t.OEk(4),t.wVc(5,"translate"),t.C$Y(),t.I0R(6,"input",47),t.qCj("change",function(n){t.usT(i);const s=t.GaO().$implicit,l=t.GaO(3);return t.CGJ(l._handleFileInput(n.target.files,s.DiadikasiaProtypoEggrafoId))}),t.C$Y()(),t.k70()}if(2&e){const i=t.GaO().$implicit,a=t.GaO(3);t.yG2(2),t.CI5("for","file-upload-",i.DiadikasiaProtypoEggrafoId,""),t.yG2(2),t.oRS(" ",t.kDX(5,4,a.translation.shde.addFiles)," "),t.yG2(2),t.CI5("name","file-upload-",i.DiadikasiaProtypoEggrafoId,"")("id","file-upload-",i.DiadikasiaProtypoEggrafoId,"")}}function bt(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td")(2,"span",31),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.OEk(5),t.yuY(6,Et,2,0,"span",32),t.C$Y(),t.I0R(7,"td",33)(8,"span",31),t.OEk(9),t.wVc(10,"translate"),t.C$Y(),t.yuY(11,Gt,4,6,"div",34)(12,wt,7,6,"ng-container",35),t.C$Y()()),2&e){const i=o.$implicit,a=t.GaO(3);t.yG2(3),t.cNF(t.kDX(4,6,a.translation.shde.docTemplate)),t.yG2(2),t.oRS(" ",i.Description," "),t.yG2(),t.E7m("ngIf",-1!==i.DiadikasiaId&&i.ExeiFysikoArxeio),t.yG2(3),t.cNF(t.kDX(10,8,a.translation.shde.files)),t.yG2(2),t.E7m("ngForOf",i.Sinimena),t.yG2(),t.E7m("ngIf",!a.model.AAProtocol)}}function vt(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td",48),t.OEk(2),t.wVc(3,"translate"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.oRS(" ",t.kDX(3,1,i.translation.egwebapps.egrNoResultsFound)," ")}}function Ot(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td",48)(2,"strong"),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.OEk(5),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(3),t.oRS("",t.kDX(4,2,i.translation.egwebapps.egrTotal),":"),t.yG2(2),t.oRS(" ",null==i.updatedEiserxomenaData?null:i.updatedEiserxomenaData.length," ")}}function At(e,o){if(1&e&&(t.I0R(0,"div",30)(1,"span"),t.OEk(2),t.wVc(3,"translate"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.cNF(t.kDX(3,1,i.translation.shde.publishedDocuments))}}function Rt(e,o){if(1&e&&(t.I0R(0,"tr")(1,"th"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"th"),t.OEk(5,"\xa0"),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(2),t.cNF(t.kDX(3,1,i.translation.shde.files))}}function xt(e,o){if(1&e){const i=t.KQA();t.I0R(0,"tr")(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td")(4,"span",40),t.qCj("click",function(){const s=t.usT(i).$implicit,l=t.GaO(3);return t.CGJ(l.onClickSinimeno(s.DmsId))}),t.wR5(5,"span",41),t.C$Y()()()}if(2&e){const i=o.$implicit;t.yG2(2),t.CAO(" ",i.Description,"",i.Extension," ")}}function St(e,o){1&e&&(t.I0R(0,"tr")(1,"td",48),t.OEk(2," \u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ad\u03c2. "),t.C$Y()())}function $t(e,o){if(1&e&&(t.I0R(0,"tr")(1,"td",48)(2,"strong"),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.OEk(5),t.C$Y()()),2&e){const i=t.GaO(3);t.yG2(3),t.oRS("",t.kDX(4,2,i.translation.egwebapps.egrTotal),":"),t.yG2(2),t.oRS(" ",null==i.ekserxomena?null:i.ekserxomena.length," ")}}function Yt(e,o){if(1&e&&(t.I0R(0,"div",23)(1,"p-table",24),t.yuY(2,yt,4,3,"ng-template",25)(3,Dt,7,6,"ng-template",26)(4,bt,13,10,"ng-template",27)(5,vt,4,3,"ng-template",28)(6,Ot,6,4,"ng-template",29),t.C$Y(),t.I0R(7,"p-table",24),t.yuY(8,At,4,3,"ng-template",25)(9,Rt,6,3,"ng-template",26)(10,xt,6,2,"ng-template",27)(11,St,3,0,"ng-template",28)(12,$t,6,4,"ng-template",29),t.C$Y()()),2&e){const i=t.GaO(2);t.yG2(),t.E7m("value",i.updatedEiserxomenaData)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",i.isLoading)("totalRecords",null==i.updatedEiserxomenaData?null:i.updatedEiserxomenaData.length)("styleClass","py-3"),t.yG2(6),t.E7m("value",i.ekserxomena)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",i.isLoading)("totalRecords",null==i.ekserxomena?null:i.ekserxomena.length)("styleClass","py-3")}}function Bt(e,o){1&e&&(t.I0R(0,"div",54),t.OEk(1," \u0393\u03b9\u03b1 \u03bd\u03b1 \u03c5\u03c0\u03bf\u03b2\u03ac\u03bb\u03b5\u03c4\u03b5 \u03c4\u03b7\u03bd \u03b1\u03af\u03c4\u03b7\u03c3\u03ae \u03c3\u03b1\u03c2 \u03b8\u03b1 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03b1\u03bd\u03b5\u03b2\u03ac\u03c3\u03b5\u03c4\u03b5 \u03c4\u03bf\u03c5\u03bb\u03ac\u03c7\u03b9\u03c3\u03c4\u03bf\u03bd \u03ad\u03bd\u03b1 \u03b1\u03c0\u03bf \u03c4\u03b1 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03b1 \u03b4\u03b9\u03ba\u03b1\u03b9\u03bf\u03bb\u03bf\u03b3\u03b7\u03c4\u03b9\u03ba\u03ac "),t.C$Y())}function Ft(e,o){if(1&e){const i=t.KQA();t.I0R(0,"button",55),t.qCj("click",function(){t.usT(i);const n=t.GaO(3);return t.CGJ(n.onYpovoli())}),t.wR5(1,"span",56),t.OEk(2),t.wVc(3,"translate"),t.C$Y()}if(2&e){const i=t.GaO(3);t.yG2(2),t.oRS(" ",t.kDX(3,1,i.translation.egwebapps.egrSubmit)," ")}}function Tt(e,o){if(1&e){const i=t.KQA();t.I0R(0,"div",49),t.yuY(1,Bt,2,0,"div",50)(2,Ft,4,3,"button",51),t.I0R(3,"button",52),t.qCj("click",function(){t.usT(i);const n=t.GaO(2);return t.CGJ(n.onReturn())}),t.wR5(4,"span",53),t.OEk(5),t.wVc(6,"translate"),t.C$Y()()}if(2&e){const i=t.GaO(2);t.yG2(),t.E7m("ngIf",i.sinimena&&i.sinimena.length<1),t.yG2(),t.E7m("ngIf",i.sinimena&&i.sinimena.length>=1),t.yG2(3),t.oRS(" ",t.kDX(6,3,i.translation.egwebapps.egrReturn)," ")}}function Lt(e,o){if(1&e&&(t.I0R(0,"form",12,13)(2,"h4",3),t.OEk(3),t.wVc(4,"translate"),t.C$Y(),t.wR5(5,"hr"),t.I0R(6,"div",14)(7,"div",15)(8,"p",16)(9,"strong"),t.OEk(10),t.wVc(11,"translate"),t.C$Y(),t.OEk(12),t.C$Y(),t.I0R(13,"p",16)(14,"strong"),t.OEk(15),t.wVc(16,"translate"),t.C$Y(),t.OEk(17),t.C$Y(),t.yuY(18,_t,5,4,"p",17)(19,Ct,5,4,"p",17),t.C$Y(),t.I0R(20,"div",15)(21,"p",16)(22,"strong"),t.OEk(23),t.wVc(24,"translate"),t.C$Y(),t.OEk(25),t.wVc(26,"date"),t.C$Y(),t.I0R(27,"p",16)(28,"strong"),t.OEk(29),t.wVc(30,"translate"),t.C$Y(),t.OEk(31),t.wVc(32,"date"),t.C$Y(),t.I0R(33,"p",16)(34,"strong"),t.OEk(35),t.wVc(36,"translate"),t.C$Y(),t.OEk(37),t.C$Y()(),t.yuY(38,kt,5,4,"div",18)(39,Yt,13,20,"div",19)(40,Tt,7,5,"div",20),t.C$Y()()),2&e){const i=t.GaO();t.yG2(3),t.cNF(t.kDX(4,16,i.translation.shde.viewApplication)),t.yG2(7),t.oRS("",t.kDX(11,18,i.translation.egwebapps.egrStatus),":"),t.yG2(2),t.oRS(" ",i.model.KatastasiPerigrafi," "),t.yG2(3),t.oRS("",t.kDX(16,20,i.translation.shde.applicationNbr),":"),t.yG2(2),t.oRS(" ",i.model.AitisiId," "),t.yG2(),t.E7m("ngIf",i.selectedKatigoria),t.yG2(),t.E7m("ngIf",i.selectedKatigoria),t.yG2(4),t.oRS("",t.kDX(24,22,i.translation.shde.submissionDate),":"),t.yG2(2),t.oRS(" ",t.g7$(26,24,i.model.ImerominiaDimiourgias,"dd/LL/yyyy")," "),t.yG2(4),t.oRS("",t.kDX(30,27,i.translation.shde.protocolDate),":"),t.yG2(2),t.oRS(" ",t.g7$(32,29,i.model.ImerominiaProtokollisis,"dd/LL/yyyy")," "),t.yG2(4),t.oRS("",t.kDX(36,32,i.translation.shde.protocolNbr),":"),t.yG2(2),t.oRS(" ",i.model.AAProtocol," "),t.yG2(),t.E7m("ngIf",i.selectedDiadikasia&&i.selectedDiadikasia.Simeioseis),t.yG2(),t.E7m("ngIf",i.updatedEiserxomenaData),t.yG2(),t.E7m("ngIf",!i.model.AAProtocol)}}function Pt(e,o){if(1&e){const i=t.KQA();t.SAx(0),t.wR5(1,"i",60),t.I0R(2,"span",62),t.qCj("click",function(){t.usT(i);const n=t.GaO().$implicit,s=t.GaO(2);return t.CGJ(s.onDeleteComment(n.Id))}),t.wR5(3,"i",63),t.C$Y(),t.k70()}}function Mt(e,o){if(1&e&&(t.I0R(0,"div")(1,"div",58)(2,"span",59),t.OEk(3),t.C$Y(),t.wR5(4,"i",60),t.I0R(5,"span"),t.OEk(6),t.wVc(7,"date"),t.C$Y(),t.yuY(8,Pt,4,0,"ng-container",35),t.C$Y(),t.I0R(9,"pre",61),t.OEk(10),t.C$Y()()),2&e){const i=o.$implicit;t.uQ9("comment-body w-75 mb-2 p-2  rounded ",i.IsUser?"bg-light":"ms-auto text-end bg-grey",""),t.yG2(),t.uQ9("comment-head d-flex align-items-center ",i.IsUser?"":"justify-content-end",""),t.yG2(2),t.cNF(i.AuthorFullname),t.yG2(3),t.cNF(t.g7$(7,10,i.DateCreated,"dd/LL/yyyy HH:mm")),t.yG2(2),t.E7m("ngIf",i.CanDelete),t.yG2(2),t.cNF(i.Keimeno)}}function Nt(e,o){if(1&e&&(t.I0R(0,"div",57),t.yuY(1,Mt,11,13,"div",34),t.C$Y()),2&e){const i=t.GaO();t.yG2(),t.E7m("ngForOf",i.comments)}}const Vt=[{path:"",component:V,children:[{path:"",pathMatch:"full",redirectTo:"aitiseis"},{path:"aitiseis",component:ot},{path:"aitisi/0",component:A},{path:"aitisi/0/:selecteddiadikasiaid",component:A},{path:"aitisi/:id",component:(()=>{class e{constructor(i,a,n,s,l,h,C){this.toasterSrv=i,this.oidcSecuritySrv=a,this.appCacheSv=n,this.shdeSrv=s,this.router=l,this.activatedRoute=h,this.cdr=C,this.closeModal=new t._w7,this.listHasChanged=new t._w7,this.commentModalOpen=!1,this.selectedDiadikasia=null,this.toCreateComment=new U,this.updatedEiserxomenaData=[],this.sinimena=[],this.eiserxomena=[],this.ekserxomena=[],this.onDestroy=new k.E,this.isLoading=!1,this.isCommentsLoading=!1}ngOnInit(){this.appCacheSv.translation$.pipe((0,_.a)(this.onDestroy)).subscribe(a=>{a&&(this.translation=a),(0,r.Er)(this.cdr)}),this.aitisiId=this.activatedRoute.snapshot.params.id;let i={StartIndex:0,Length:200,Filters:[{PropertyName:"EggrafoId",Filter:this.aitisiId}]};this.isLoading=!0,(0,r.Er)(this.cdr),this.oidcSecuritySrv.getUserData().subscribe(a=>{a&&(this.userData=a),(0,r.Er)(this.cdr)}),(0,gt.y)([this.shdeSrv.getAitisiPoliti(this.aitisiId),this.shdeSrv.getAvailableDiadikasies(),this.shdeSrv.getSinimenaList(this.aitisiId),this.shdeSrv.getCommentsPoliti(i)]).subscribe(a=>{a&&(this.model=a[0]?a[0]:null,this.searchKatigoria=a[1]?a[1]:null,this.sinimena=a[2]?a[2]:null,this.comments=a[3]?this._prepeareComments(a[3]):null,this.searchKatigoria.some(n=>n.Diadikasies.find(s=>s.Id==this.model.DiadikasiaId))&&(this.selectedKatigoria=this.searchKatigoria.find(n=>n.Diadikasies.find(s=>s.Id==this.model.DiadikasiaId)),this.selectedKatigoria.Diadikasies.some(n=>n.Id==this.model.DiadikasiaId)&&(this.selectedDiadikasia=this.selectedKatigoria.Diadikasies.find(n=>n.Id==this.model.DiadikasiaId)),this.sinimena&&(this.eiserxomena=this.sinimena.filter(n=>1==n.SinimenaDirection),this.ekserxomena=this.sinimena.filter(n=>2==n.SinimenaDirection)),this.selectedDiadikasia&&(this.updatedEiserxomenaData=this._createEiserxomenaData(this.selectedDiadikasia.ProtypaEggrafa,this.eiserxomena)))),this.isLoading=!1,(0,r.Er)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onCreateComment(){this.toCreateComment.EggrafoId=this.aitisiId,this.toCreateComment.Keimeno&&(this.isCommentsLoading=!0,(0,r.Er)(this.cdr),this.shdeSrv.createComment(this.toCreateComment).subscribe(i=>{i?(this.comments.push(i),this.toasterSrv.showSuccess("",this.translation.shde.commentCreated)):this.toasterSrv.showSuccess("",this.translation.shde.commentError),this.commentModalOpen=!1,this.isCommentsLoading=!1,(0,r.Er)(this.cdr)}))}onDeleteComment(i){i&&(this.isCommentsLoading=!0,(0,r.Er)(this.cdr),this.shdeSrv.deleteComment(i).pipe((0,y.G)(a=>{if(a){var n={StartIndex:0,Length:200,Filters:[{PropertyName:"EggrafoId",Filter:this.aitisiId}]};return this.toasterSrv.showSuccess("",this.translation.shde.commentDelete),this.shdeSrv.getCommentsPoliti(n)}return(0,R.of)(!1)})).subscribe(a=>{a?this.comments=this._prepeareComments(a):this.toasterSrv.showError("",this.translation.shde.commentDeleteError),this.isCommentsLoading=!1,(0,r.Er)(this.cdr)}))}onClickEggrafo(i){this.shdeSrv.getProtypoEggrafoDiadikasia(i).subscribe(a=>{a&&(0,x.s)(a)})}onClickSinimeno(i){this.shdeSrv.getSinnimeno(i).subscribe(a=>{a&&(0,x.s)(a)})}onDeleteSinimeno(i){this.shdeSrv.deleteFile(i).pipe((0,y.G)(a=>a?(this.toasterSrv.showSuccess("",this.translation.shde.fileDelete),this.shdeSrv.getSinimenaList(this.aitisiId)):(0,R.of)(!1))).subscribe(a=>{a&&(this.sinimena=a,this.updatedEiserxomenaData=this._createEiserxomenaData(this.selectedDiadikasia.ProtypaEggrafa,a)),(0,r.Er)(this.cdr)})}onYpovoli(){this.isLoading=!0,(0,r.Er)(this.cdr),this.shdeSrv.ypovoliAitisisPoliti(this.aitisiId).subscribe(i=>{i&&(this.model=i,this.toasterSrv.showSuccess("",this.translation.shde.successMsg)),this.isLoading=!1,(0,r.Er)(this.cdr)})}onAkyrosi(){this.isLoading=!0,(0,r.Er)(this.cdr),this.shdeSrv.akyrosiAitisisPoliti(this.aitisiId).subscribe(i=>{i&&(this.model=i,this.toasterSrv.showSuccess("",this.translation.shde.cancelMsg)),this.isLoading=!1,(0,r.Er)(this.cdr)})}onReturn(){this.router.navigate(["/shde-app"])}_prepeareComments(i){return i&&i.length>0&&(i.forEach(a=>{if(a.AuthorId&&a.AuthorId==this.userData.sub){a.IsUser=!0;let n=Date.now(),s=new Date(a.DateCreated).getTime();a.DateDif=(n-s)/1e3/60/60}else a.IsUser=!1}),i[0].AuthorId&&i[0].AuthorId==this.userData.sub&&i[0].DateDif<=4&&(i[0].CanDelete=!0),i.sort(function(a,n){let s=new Date(a.DateCreated),l=new Date(n.DateCreated);return Math.floor(s-l)})),(0,r.Er)(this.cdr),i}_createEiserxomenaData(i,a){return i.find(s=>-1==s.DiadikasiaProtypoEggrafoId)?i.forEach(s=>{s.Sinimena=[]}):i.push(new X),a.forEach(s=>{let l=i.find(h=>h.DiadikasiaProtypoEggrafoId==s.DiadikasiaProtypoEggrafoId);l?(l.Sinimena||(l.Sinimena=[]),l.Sinimena.push(s)):i.find(C=>-1==C.DiadikasiaProtypoEggrafoId).Sinimena.push(s)}),this.filesCount=a.length,(0,r.Er)(this.cdr),i}_handleFileInput(i,a){let n=new FormData;Array.from(i).forEach(s=>{n.append("SinimenaFiles",s,s.name)}),this.shdeSrv.uploadFile(n,this.aitisiId,a).pipe((0,y.G)(s=>this.shdeSrv.getSinimenaList(this.aitisiId))).subscribe(s=>{s&&(this.sinimena=s,this.updatedEiserxomenaData=this._createEiserxomenaData(this.selectedDiadikasia.ProtypaEggrafa,s),this.toasterSrv.showSuccess("",this.translation.shde.fileAdd)),(0,r.Er)(this.cdr)}),(0,r.Er)(this.cdr)}_fileType(i){return 1==i?"<i title='\u03b5\u03b9\u03c3\u03b5\u03c1\u03c7\u03cc\u03bc\u03b5\u03bd\u03bf' class='fa fa-arrow-circle-down eiserxomeno'></i>":2==i?"<i title='\u03b5\u03b9\u03c3\u03b5\u03c1\u03c7\u03cc\u03bc\u03b5\u03bd\u03bf' class='fa fa-arrow-circle-up ekserxomeno'></i>":void 0}_fileExt(i){return"pdf"==(i=i.substring(1))?"<i class='far fa-file-pdf'></i>":"docx"==i||"doc"==i?"<i class='far fa-file-word'></i>":"xls"==i||"xlsx"==i?"<i class='far fa-file-excel'></i>":"txt"==i||"rtf"==i||"dwg"==i||"odt"==i?"<i class='far fa-file-alt'></i>":"zip"==i||"7z"==i||"rar"==i?"<i class='far fa-file-archive'></i>":"png"==i||"jpeg"==i||"jpg"==i?"<i class='far fa-file-image'></i>":"eml"==i?"<i class='far fa-file'></i>":void 0}static#t=this.\u0275fac=function(a){return new(a||e)(t.GI1(r.y6),t.GI1(D.Bf),t.GI1(E.i),t.GI1(I),t.GI1(m.E5),t.GI1(m.gV),t.GI1(t.kD9))};static#i=this.\u0275cmp=t.In1({type:e,selectors:[["app-aitisi-detail"]],outputs:{closeModal:"closeModal",listHasChanged:"listHasChanged"},decls:26,vars:29,consts:[[3,"condition","customClass"],["class","form bg-white",4,"ngIf"],[1,"bg-white","mt-4"],[1,"mb-2"],["class","comments-wrapper w-100",4,"ngIf"],["type","button",1,"btn","btn-primary","mt-3",3,"click"],["aria-hidden","true",1,"far","fa-comment-alt"],["appendTo","body","modal","true",3,"header","visible","draggable","closable","resizable","visibleChange"],[1,"form-group"],[1,"text-uppercase","font-weight-bold"],["name","sxolioPoliti","rows","4",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["aria-hidden","true",1,"far","fa-save","fa-fw"],[1,"form","bg-white"],["mAitisiForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-6"],[1,"mb-1"],["class","mb-1",4,"ngIf"],["class","form-group col-12",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-12 mt-2 d-flex flex-wrap",4,"ngIf"],[1,"form-group","col-12"],[3,"innerHtml"],[1,"col-12"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords","styleClass"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],[1,"d-flex","align-items-center","justify-content-between"],[1,"p-column-title"],["class","m-0 ms-2 btn btn-primary",3,"click",4,"ngIf"],["id","files-td"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"m-0","ms-2","btn","btn-primary",3,"click"],[1,"fas","fa-file-download"],[1,"me-2"],[1,"d-flex"],[1,"m-0","me-2","btn","btn-primary",3,"click"],["aria-label","\u039a\u03b1\u03c4\u03ad\u03b2\u03b1\u03c3\u03bc\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03bf\u03c5",1,"fas","fa-file-download"],[1,"custom-file-delete","btn","btn-danger","m-0",3,"click"],["aria-label","\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b1\u03c1\u03c7\u03b5\u03af\u03bf\u03c5",1,"far","fa-trash-alt"],[1,"p-2","text-center"],[1,"download","btn","btn-success","m-0","w-100",3,"for"],["aria-hidden","true",1,"fas","fa-file-upload"],["type","file","multiple","",1,"file-upload",3,"name","id","change"],["colspan","2"],[1,"col-12","mt-2","d-flex","flex-wrap"],["class","alert alert-warning w-100",4,"ngIf"],["class","btn btn-primary me-1","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","me-1",3,"click"],["aria-hidden","true",1,"fas","fa-undo"],[1,"alert","alert-warning","w-100"],["type","button",1,"btn","btn-primary","me-1",3,"click"],["aria-hidden","true",1,"fas","fa-paper-plane"],[1,"comments-wrapper","w-100"],[2,"font-size","14px"],[1,"font-weight-bold"],[1,"fas","fa-circle","mx-1",2,"font-size","5px"],[1,"comemnt-content","mt-1"],[1,"btn","btn-danger","m-0","px-2","py-1",3,"click"],[1,"far","fa-trash-alt"]],template:function(a,n){1&a&&(t.wR5(0,"eg-loading",0),t.yuY(1,Lt,41,34,"form",1),t.I0R(2,"div",2)(3,"h4",3),t.OEk(4),t.wVc(5,"translate"),t.C$Y(),t.wR5(6,"hr")(7,"eg-loading",0),t.yuY(8,Nt,2,1,"div",4),t.I0R(9,"button",5),t.qCj("click",function(){return n.commentModalOpen=!0}),t.wR5(10,"span",6),t.OEk(11),t.wVc(12,"translate"),t.C$Y()(),t.I0R(13,"p-dialog",7),t.iHE("visibleChange",function(l){return t.kNx(n.commentModalOpen,l)||(n.commentModalOpen=l),l}),t.wVc(14,"translate"),t.I0R(15,"div",8)(16,"label",9),t.OEk(17),t.wVc(18,"translate"),t.C$Y(),t.I0R(19,"textarea",10),t.iHE("ngModelChange",function(l){return t.kNx(n.toCreateComment.Keimeno,l)||(n.toCreateComment.Keimeno=l),l}),t.wVc(20,"translate"),t.OEk(21,"\t\t"),t.C$Y(),t.I0R(22,"button",5),t.qCj("click",function(){return n.onCreateComment()}),t.wR5(23,"span",11),t.OEk(24),t.wVc(25,"translate"),t.C$Y()()()),2&a&&(t.E7m("condition",!n.model||n.isLoading)("customClass","egr-load-small"),t.yG2(),t.E7m("ngIf",n.model&&!n.isLoading),t.yG2(3),t.cNF(t.kDX(5,17,n.translation.shde.comments)),t.yG2(3),t.E7m("condition",n.isCommentsLoading)("customClass","egr-load-small"),t.yG2(),t.E7m("ngIf",n.comments&&!n.isCommentsLoading),t.yG2(3),t.oRS(" ",t.kDX(12,19,n.translation.shde.addCmment),""),t.yG2(2),t.E7m("header",t.kDX(14,21,n.translation.shde.addCmment)),t.OKB("visible",n.commentModalOpen),t.E7m("draggable",!1)("closable",!0)("resizable",!0),t.yG2(4),t.cNF(t.kDX(18,23,n.translation.shde.comments)),t.yG2(2),t.E7m("placeholder",t.kDX(20,25,n.translation.shde.comments)),t.OKB("ngModel",n.toCreateComment.Keimeno),t.yG2(5),t.oRS(" ",t.kDX(25,27,n.translation.egwebapps.egrSubmit)," "))},dependencies:[p.ay,p.u_,d.sz,d.ot,d.ue,d.u,d._G,d.SC,r.uU,b.oJ,v.U3,ft.C,p.y,g.sD],encapsulation:2,changeDetection:0})}return e})()}]}];let Xt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#i=this.\u0275mod=t.a4G({type:e});static#e=this.\u0275inj=t.s3X({imports:[m.qQ.forChild(Vt),m.qQ]})}return e})(),Kt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#i=this.\u0275mod=t.a4G({type:e});static#e=this.\u0275inj=t.s3X({providers:[I,{provide:f.So,useClass:Y,multi:!0}],imports:[Xt,$.k,S.IB,g.O0.forChild()]})}return e})()}}]);