!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[906],{35906:function(t,i,s){s.r(i),s.d(i,{TautotitaOfeilisModule:function(){return W}});var r,o=s(43645),a=s(29790),u=s(23292),p=s(35660),l=s(54655),c=s(68214),d=s(79765),f=s(46782),m=s(43190),g=s(37716),h=s(74868),y=s(12622),_=s(38583),b=s(60394),v=s(3379),A=s(9112),Z=s(21571),x=((x||(x={})).paymentCode="\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2",x),w=((w||(w={})).paymentCode="Payment Code",w),C=s(84608),k=s(88002),q=s(5304),S=s(91841),T=((r=function(){function t(n,i){e(this,t),this.http=n,this.toasterSrv=i,this.apiUrl=AppConfOptions.eidopoiitiria_api+"api/"}return n(t,[{key:"getYpoloipoKodikouPliromisDias",value:function(e){var t=this;return this.http.get(this.apiUrl+"PraxeisEidopoiisis/GetYpoloipoKodikouPliromisDias/".concat(e)).pipe((0,k.U)(function(e){return e}),(0,q.K)(function(e){return(0,c.Zj)(e,t.toasterSrv)}))}}]),t}()).\u0275fac=function(e){return new(e||r)(g.LFG(S.eN),g.LFG(c.MJ))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac}),r),O=s(3679),J=["tautotitaOfeilisForm"];function L(e,t){if(1&e&&g._UZ(0,"p-message",16),2&e){var n=g.oxw(2);g.Q6J("severity",n.bankStatusMessageClass)("text",n.bankStatusMessage)("styleClass","mb-2")}}function M(e,t){if(1&e&&g._UZ(0,"p-message",17),2&e){var n=g.oxw(2);g.Q6J("styleClass","mt-2 form-msgs")("escape",!1)("text",n.formErrorsMsg)}}function I(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.YNc(1,L,1,3,"p-message",2),g.TgZ(2,"form",3,4),g.TgZ(4,"div",5),g.TgZ(5,"div",6),g.TgZ(6,"label",7),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.TgZ(9,"input",8),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().request.kodikos=e}),g.ALo(10,"translate"),g.qZA(),g.TgZ(11,"div",9),g._uU(12),g.ALo(13,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"div",10),g.TgZ(15,"button",11),g.NdJ("click",function(){return g.CHM(n),g.oxw().onSubmit()}),g._UZ(16,"span",12),g._uU(17),g.ALo(18,"translate"),g.qZA(),g.TgZ(19,"button",13),g.NdJ("click",function(){return g.CHM(n),g.oxw().onClear()}),g._UZ(20,"span",14),g._uU(21),g.ALo(22,"translate"),g.qZA(),g.qZA(),g.YNc(23,M,1,3,"p-message",15),g.qZA(),g.BQk()}if(2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.bankStatusMessage&&""!==i.bankStatusMessage),g.xp6(6),g.hij("",g.lcZ(8,11,null==i.translation?null:i.translation.eidopoiitiria.code),"*"),g.xp6(2),g.Q6J("placeholder",g.lcZ(10,13,null==i.translation?null:i.translation.eidopoiitiria.code))("ngModel",i.request.kodikos)("disabled",i.response||i.isLoading),g.xp6(2),g.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&i.request.kodikos&&""!==i.request.kodikos),g.xp6(1),g.hij(" *",g.lcZ(13,15,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),g.xp6(3),g.Q6J("disabled",i.response),g.xp6(2),g.hij(" ",g.lcZ(18,17,null==i.translation?null:i.translation.egwebapps.egrSearchBtn)," "),g.xp6(4),g.hij(" ",g.lcZ(22,19,null==i.translation?null:i.translation.egwebapps.egrClearBtn)," "),g.xp6(2),g.Q6J("ngIf",i.formErrorsMsg&&""!==i.formErrorsMsg)}}function E(e,t){1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"span",24),g._uU(2,"\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2:"),g.qZA(),g.qZA())}function P(e,t){1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"span",24),g._uU(2,"\u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),g.qZA(),g.qZA())}function Y(e,t){1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"span",24),g._uU(2,"\u03a0\u03bf\u03c3\u03cc \u03a0\u03c1\u03bf\u03c3\u03b1\u03c5\u03be\u03ae\u03c3\u03b5\u03c9\u03bd:"),g.qZA(),g.qZA())}function Q(e,t){1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"strong",24),g._uU(2,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),g.qZA(),g.qZA())}function U(e,t){if(1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"span",25),g._uU(2),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(2),g.Oqu(n.response.remittanceInfo)}}var N=function(e){return[e,"\u20ac","symbol","1.2","el"]};function F(e,t){if(1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"span",25),g._uU(2),g.ALo(3,"currency"),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(2),g.Oqu(g.G7q(3,1,g.VKq(7,N,n.response.currentKatharoPoso)))}}function D(e,t){if(1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"span",25),g._uU(2),g.ALo(3,"currency"),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(2),g.Oqu(g.G7q(3,1,g.VKq(7,N,n.response.currentProsafksisi)))}}function R(e,t){if(1&e&&(g.TgZ(0,"p",23),g.TgZ(1,"strong",25),g._uU(2),g.ALo(3,"currency"),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(2),g.Oqu(g.G7q(3,1,g.VKq(7,N,n.response.ypoloipoProsPliromi)))}}function B(e,t){if(1&e){var n=g.EpF();g.ynx(0),g._UZ(1,"hr"),g.TgZ(2,"h5",18),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.TgZ(5,"div",19),g.TgZ(6,"div",20),g.TgZ(7,"div"),g.YNc(8,E,3,0,"p",21),g.YNc(9,P,3,0,"p",21),g.YNc(10,Y,3,0,"p",21),g.YNc(11,Q,3,0,"p",21),g.qZA(),g.TgZ(12,"div"),g.YNc(13,U,3,1,"p",21),g.YNc(14,F,4,9,"p",21),g.YNc(15,D,4,9,"p",21),g.YNc(16,R,4,9,"p",21),g.qZA(),g.qZA(),g.TgZ(17,"app-checkout",22),g.NdJ("onPayBtnClick",function(e){return g.CHM(n),g.oxw().onCreatePaymentRequest(e)}),g.qZA(),g.qZA(),g.BQk()}if(2&e){var i=g.oxw();g.xp6(3),g.Oqu(g.lcZ(4,14,null==i.translation?null:i.translation.egwebapps.egrResults)),g.xp6(5),g.Q6J("ngIf",i.response.remittanceInfo),g.xp6(1),g.Q6J("ngIf",i.response.currentKatharoPoso),g.xp6(1),g.Q6J("ngIf",i.response.remittanceInfo),g.xp6(1),g.Q6J("ngIf",i.response.remittanceInfo),g.xp6(2),g.Q6J("ngIf",i.response.remittanceInfo),g.xp6(1),g.Q6J("ngIf",i.response.currentKatharoPoso),g.xp6(1),g.Q6J("ngIf",i.response.currentProsafksisi),g.xp6(1),g.Q6J("ngIf",i.response.ypoloipoProsPliromi),g.xp6(1),g.Q6J("isPaymentFormValid",!0)("doPaymentSubscription",i.onDoPaymentSubject.asObservable())("finApiUrl",i.financeApiUrl)("buttonText",i.translation.egwebapps.egrPaymentBtnText)("cancelButtonText",i.translation.egwebapps.egrCancelBtn)}}var z=function(){var t=function(){function t(n,i,s,r,o,a,u,p,l){e(this,t),this.oidcSecuritySrv=n,this.epaymentsSrv=i,this.egPaymentSrv=s,this.tautotitaOfeilisSrv=r,this.cookieSrv=o,this.toasterSrv=a,this.appCacheSv=u,this.cdr=p,this.route=l,this.request={},this.countriesList=[],this.onDoPaymentSubject=new d.xQ,this.onDestroy=new d.xQ,this.isLoading=!1,this.isLoadingInit=!1,this.errorMessageProfile=null,this.oikonomikiBankMessagesEn=C.Px,this.isFormSubmitted=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;(0,A.aj)([this.appCacheSv.translation$,this.appCacheSv.selectedLang$]).pipe((0,f.R)(this.onDestroy)).subscribe(function(t){t&&(e.translation=t[0],e.selectedLang=t[1],e.formDictionaryEnum="el"==e.selectedLang?x:w,(0,c.RA)(e.cdr))}),this.isLoadingInit=!0,(0,c.RA)(this.cdr),"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=(0,c.Qj)(AppConfOptions.epayments_api)),this.route.queryParams.pipe((0,f.R)(this.onDestroy)).subscribe(function(t){var n;if(t){var i=t;if(i.messagecode||i.paymentStatus){var s=i.messagecode?i.messagecode:i.paymentStatus;e.bankStatusMessage="el"==e.selectedLang?e.oikonomikiBankMessages[s]:e.oikonomikiBankMessagesEn[s],e.bankStatusMessageClass="TRANSACTION_COMPLETED"==s||"APPROVED"==s?"success":"error"}}else e.toasterSrv.showError("",null===(n=e.translation)||void 0===n?void 0:n.egwebapps.egrProblemFound);(0,c.RA)(e.cdr)}),this.appCacheSv.initCountries(AuthConfOptions.stsServer+"/api/general/GetCountries"),(0,Z.$R)(this.epaymentsSrv.getBankMessages(),this.oidcSecuritySrv.userData$,this.appCacheSv.countries$).subscribe(function(t){t&&(e.oikonomikiBankMessages=t[0]?t[0]:null,t[1]&&(e.user=t[1].userData,e.user&&(e.user.email=(0,c.Ew)(e.user.email)?e.user.email:e.user.email.trim(),e.user.username=(0,c.Ew)(e.user.username)?e.user.username:e.user.username.trim(),e.user.tin=(0,c.Ew)(e.user.tin)?e.user.tin:e.user.tin.trim(),e.user.family_name=(0,c.Ew)(e.user.family_name)?e.user.family_name:e.user.family_name.trim(),e.user.given_name=(0,c.Ew)(e.user.given_name)?e.user.given_name:e.user.given_name.trim(),e.user.fathers_name=(0,c.Ew)(e.user.fathers_name)?e.user.fathers_name:e.user.fathers_name.trim(),e.user.mothers_name=(0,c.Ew)(e.user.mothers_name)?e.user.mothers_name:e.user.mothers_name.trim(),e.user.name=(0,c.Ew)(e.user.name)?e.user.name:e.user.name.trim(),e.user.address_city=(0,c.Ew)(e.user.address_city)?e.user.address_city:e.user.address_city.trim(),e.user.address_country_code=(0,c.Ew)(e.user.address_country_code)?e.user.address_country_code:e.user.address_country_code.trim(),e.user.address_country_num=(0,c.Ew)(e.user.address_country_num)?e.user.address_country_num:e.user.address_country_num.trim(),e.user.address_zip=(0,c.Ew)(e.user.address_zip)?e.user.address_zip:e.user.address_zip.trim(),e.user.address=(0,c.Ew)(e.user.address)?e.user.address:e.user.address.trim(),e.user.adt=(0,c.Ew)(e.user.adt)?e.user.adt:e.user.adt.trim(),e.user.phone_number=(0,c.Ew)(e.user.phone_number)?e.user.phone_number:e.user.phone_number.trim())),t[2]&&(e.countriesList=t[2],e.user&&e.user.address_country_code&&""!=e.user.address_country_code&&(e.user.address_country_num=e.countriesList.find(function(t){return t.Alpha2Code==e.user.address_country_code}).NumericCode.toString()))),e.isLoadingInit=!1,(0,c.RA)(e.cdr)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onSubmit",value:function(){var e=this;this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,c.RA)(this.cdr),this.isFormSubmitted&&this.tautotitaOfeilisForm.valid?(this.response=null,this.isLoading=!0,(0,c.RA)(this.cdr),this.tautotitaOfeilisSrv.getYpoloipoKodikouPliromisDias(this.request.kodikos).subscribe(function(t){t&&t.statusCode==c.WE.Ok?e.response=t:(e.toasterSrv.showError("",t.message),e.errorMessage=t.message),e.isLoading=!1,(0,c.RA)(e.cdr)})):(this.formErrorsMsg=(0,c.CD)(this.tautotitaOfeilisForm,this.formDictionaryEnum,""),(0,c.RA)(this.cdr))}},{key:"onCreatePaymentRequest",value:function(e){}},{key:"onClear",value:function(){this.isFormSubmitted=!1,this.request=null,this.response=null,(0,c.RA)(this.cdr)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.J_),g.Y36(u.C),g.Y36(c.te),g.Y36(T),g.Y36(c.N_),g.Y36(c.MJ),g.Y36(y.g),g.Y36(g.sBO),g.Y36(l.gz))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-tautotita-ofeilis-debits"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(J,5),2&e)&&(g.iGM(n=g.CRH())&&(t.tautotitaOfeilisForm=n.first))},inputs:{isAuthorized:"isAuthorized"},decls:3,vars:4,consts:[[3,"condition","customClass"],[4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],[1,"form"],["tautotitaOfeilisForm","ngForm"],[1,"row"],[1,"form-group","col-12"],["for","paymentCode"],["name","paymentCode","type","text","required","",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],[1,"d-flex","align-items-center","justify-content-center","flex-wrap"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"severity","text","styleClass"],["severity","error",3,"styleClass","escape","text"],[1,"mt-4","text-center"],[1,"debits-info","d-flex","justify-content-between"],[1,"debits-info_left","d-flex","mr-1"],["class","mb-0",4,"ngIf"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","cancelButtonText","onPayBtnClick"],[1,"mb-0"],[1,"mr-1",2,"width","220px","line-height","1.7"],[1,"totalPoso",2,"line-height","1.7"]],template:function(e,t){1&e&&(g._UZ(0,"lib-egr-loading",0),g.YNc(1,I,24,21,"ng-container",1),g.YNc(2,B,18,16,"ng-container",1)),2&e&&(g.Q6J("condition",t.isLoadingInit||t.isLoading)("customClass","egr-load-small"),g.xp6(1),g.Q6J("ngIf",!t.isLoadingInit),g.xp6(1),g.Q6J("ngIf",t.response&&!t.isLoading))},directives:[c.IE,_.O5,O._Y,O.JL,O.F,O.Fj,O.Q7,O.JJ,O.On,v.q,c.Hl],pipes:[a.X$,_.H9],encapsulation:2,changeDetection:0}),t}(),j=s(24020),H=s(41886);function K(e,t){if(1&e&&g._UZ(0,"p-message",4),2&e){var n=g.oxw();g.Q6J("text",null==n.translation?null:n.translation.egwebapps.egwebappsLoginMesg)}}function $(e,t){if(1&e&&(g.TgZ(0,"p-panel",7),g._UZ(1,"div",8),g.ALo(2,"decodeHtmlString"),g.qZA()),2&e){var n=g.oxw(2);g.Q6J("header",null==n.translation?null:n.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),g.xp6(1),g.Q6J("innerHTML",g.lcZ(2,4,n.tabMsg),g.oJD)}}function G(e,t){if(1&e&&(g.ynx(0),g.YNc(1,$,3,6,"p-panel",5),g.TgZ(2,"div",6),g._UZ(3,"app-tautotita-ofeilis-debits"),g.qZA(),g.BQk()),2&e){var n=g.oxw();g.xp6(1),g.Q6J("ngIf",n.tabMsg)}}var V=[{path:"",component:function(){var t=function(){function t(n,i,s,r,o,a){e(this,t),this.oidcSecuritySrv=n,this.appCacheSv=i,this.location=s,this.cdr=r,this.router=o,this.route=a,this.onDestroy=new d.xQ,this.afmNotFound=!1,this.index=0,this.isUnauthorizedAllowed=AppConfOptions.unauthorized_allowed,this.selectedLang="el"}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.appCacheSv.translation$.pipe((0,f.R)(this.onDestroy)).subscribe(function(t){t&&(e.translation=t,(0,c.RA)(e.cdr))}),this.appCacheSv.selectedLang$.pipe((0,f.R)(this.onDestroy)).subscribe(function(t){t&&(e.selectedLang=t),1==AppConfOptions.multilingual&&"el"!=e.selectedLang&&AppConfOptions.eidopoiitiria_tab_info_en&&""!=AppConfOptions.eidopoiitiria_tab_info_en?e.tabMsg=AppConfOptions.eidopoiitiria_tab_info_en:AppConfOptions.eidopoiitiria_tab_info&&""!=AppConfOptions.eidopoiitiria_tab_info&&"el"==e.selectedLang&&(e.tabMsg=AppConfOptions.eidopoiitiria_tab_info),(0,c.RA)(e.cdr)}),this.oidcSecuritySrv.isAuthenticated$.pipe((0,m.w)(function(t){return e.isAuthorized=null!=t&&t.isAuthenticated,e.oidcSecuritySrv.userData$})).subscribe(function(t){var n=null==t?void 0:t.userData;e.isAuthorized&&n&&(!n.tin||(0,c.Ew)(n.tin))&&1==AppConfOptions.eidopoiitiria_afm_required&&(e.afmNotFound=!0)}),this.index="receipts"===this.route.children[0].snapshot.url[0].path?1:0,(0,c.RA)(this.cdr)}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onTabChanged",value:function(e){this.router.navigate(0==e.index?["./debits"]:["./receipts"],{relativeTo:this.route})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.J_),g.Y36(y.g),g.Y36(_.Ye),g.Y36(g.sBO),g.Y36(l.F0),g.Y36(l.gz))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-tautotita-ofeilis-layout"]],decls:5,vars:4,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[3,"afmNotFound"],[4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[1,"bg-white","p-2"],[3,"header","styleClass","toggleable"],[3,"innerHTML"]],template:function(e,t){1&e&&(g.TgZ(0,"h3",0),g._uU(1),g.qZA(),g.YNc(2,K,1,1,"p-message",1),g._UZ(3,"app-afmnotfound",2),g.YNc(4,G,4,1,"ng-container",3)),2&e&&(g.xp6(1),g.Oqu(null==t.translation?null:t.translation.menu.eidopoiitiriaMenuItem),g.xp6(1),g.Q6J("ngIf",!t.isAuthorized&&!t.isUnauthorizedAllowed),g.xp6(1),g.Q6J("afmNotFound",t.afmNotFound),g.xp6(1),g.Q6J("ngIf",!t.afmNotFound))},directives:[_.O5,b.d,v.q,z,j.s],pipes:[H.o],encapsulation:2,changeDetection:0}),t}(),children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:z}]}],X=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[l.Bz.forChild(V)],l.Bz]}),t}(),W=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[T,u.C],imports:[[p.m,o.IJ,X,a.aw.forChild()]]}),t}()}}])}();