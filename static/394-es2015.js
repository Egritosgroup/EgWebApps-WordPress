(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[394],{62247:function(i){i.exports=function(i){return new Promise((t,e)=>{let o=new FileReader,n=i.target.files;if(n.length>1)e(new DOMException("Only one file can be uploaded at a time"));else{o.onerror=()=>{o.abort(),e(new DOMException("Problem parsing input file."))};let i=n[0];o.onload=e=>{const n=new Uint8Array(e.target.result);let a=[];n.map(i=>{a.push(i.toString(16))});const l=a.join("").toUpperCase();let r=o.result.split(",")[1];i.base64=r,i.binaryFileType=s(l),t(i)},o.readAsDataURL(i)}})};const s=i=>{switch(i){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";default:return"Unknown filetype"}}},97394:function(i,s,t){"use strict";t.r(s),t.d(s,{KatastimataModule:function(){return Ki},PublicLibLoader:function(){return zi}});var e=t(91841),o=t(37716),n=t(68214),a=t(26215),l=t(25917),r=t(79765),d=t(35758),p=t(88002),h=t(5304),c=t(46782),u=t(43190),m=t(54655),g=t(3379),f=t(44748),y=t(84439),b=t(38583),x=t(33013),Z=t(12332),A=t(45121),P=t(3679),I=t(86640),k=t(22597),C=t(39075),T=t(87622),U=t(27745),q=t(24020);function w(i,s){1&i&&o._UZ(0,"p-message",7)}function _(i,s){if(1&i&&o._UZ(0,"p-message",8),2&i){const i=o.oxw();o.Q6J("severity",i.bankStatusMessageClass)("text",i.bankStatusMessage)("styleClass","my-1")}}function v(i,s){1&i&&(o.TgZ(0,"tr"),o.TgZ(1,"th",9),o._uU(2,"\u0391/\u0391"),o.qZA(),o.TgZ(3,"th",10),o._uU(4,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),o.qZA(),o.TgZ(5,"th",9),o._uU(6,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),o.qZA(),o.TgZ(7,"th",11),o._uU(8,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),o.qZA(),o.TgZ(9,"th",11),o._uU(10,"\u03a4\u03ad\u03bb\u03bf\u03c2"),o.qZA(),o.TgZ(11,"th",11),o._uU(12,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),o.qZA(),o.TgZ(13,"th",11),o._uU(14,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),o.qZA(),o.TgZ(15,"th",12),o._uU(16,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),o.qZA(),o.qZA())}function D(i,s){1&i&&o._UZ(0,"i",17)}function S(i,s){if(1&i&&(o.TgZ(0,"tr"),o.TgZ(1,"td",13),o.TgZ(2,"span",14),o._uU(3,"\u0391/\u0391"),o.qZA(),o._uU(4),o.qZA(),o.TgZ(5,"td",10),o.TgZ(6,"span",14),o._uU(7,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),o.qZA(),o._uU(8),o.qZA(),o.TgZ(9,"td",13),o.TgZ(10,"span",14),o._uU(11,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),o.qZA(),o.YNc(12,D,1,0,"i",15),o.qZA(),o.TgZ(13,"td",16),o.TgZ(14,"span",14),o._uU(15,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),o.qZA(),o._uU(16),o.ALo(17,"currency"),o.qZA(),o.TgZ(18,"td",16),o.TgZ(19,"span",14),o._uU(20,"\u03a4\u03ad\u03bb\u03bf\u03c2"),o.qZA(),o._uU(21),o.ALo(22,"currency"),o.qZA(),o.TgZ(23,"td",16),o.TgZ(24,"span",14),o._uU(25,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),o.qZA(),o._uU(26),o.ALo(27,"currency"),o.qZA(),o.TgZ(28,"td",16),o.TgZ(29,"span",14),o._uU(30,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),o.qZA(),o._uU(31),o.ALo(32,"currency"),o.qZA(),o.TgZ(33,"td",12),o.TgZ(34,"span",14),o._uU(35,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),o.qZA(),o._uU(36),o.qZA(),o.qZA()),2&i){const i=s.$implicit,t=s.rowIndex;o.xp6(4),o.hij(" ",t+1," "),o.xp6(4),o.hij(" ",i.dilosiCaption," "),o.xp6(4),o.Q6J("ngIf",i.midenikiDilosi),o.xp6(4),o.hij(" ",o.gM2(17,8,i.ypokeimenoPoso,"\u20ac","symbol","1.2")," "),o.xp6(5),o.hij(" ",o.gM2(22,13,i.telosPoso,"\u20ac","symbol","1.2")," "),o.xp6(5),o.hij(" ",o.gM2(27,18,i.prostimoPoso,"\u20ac","symbol","1.2")," "),o.xp6(5),o.hij(" ",o.gM2(32,23,i.sinolikoPoso,"\u20ac","symbol","1.2")," "),o.xp6(5),o.hij(" ",i.stoixeiaApodixis," ")}}function M(i,s){1&i&&(o.TgZ(0,"tr"),o.TgZ(1,"td",18),o._uU(2," \u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ad\u03c2. "),o.qZA(),o.qZA())}const O=function(i){return[i,"EUR","symbol","1.2-2","el"]};function F(i,s){if(1&i&&(o.TgZ(0,"tr"),o.TgZ(1,"td",19),o.TgZ(2,"strong"),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"td",16),o.TgZ(5,"strong"),o._uU(6),o.ALo(7,"currency"),o.qZA(),o.qZA(),o.TgZ(8,"td",16),o.TgZ(9,"strong"),o._uU(10),o.ALo(11,"currency"),o.qZA(),o.qZA(),o.TgZ(12,"td",16),o.TgZ(13,"strong"),o._uU(14),o.ALo(15,"currency"),o.qZA(),o.qZA(),o.TgZ(16,"td",16),o.TgZ(17,"strong"),o._uU(18),o.ALo(19,"currency"),o.qZA(),o.qZA(),o.TgZ(20,"td",12),o._uU(21,"\xa0"),o.qZA(),o.qZA()),2&i){const i=o.oxw();o.xp6(3),o.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==i.diloseisPayed?null:i.diloseisPayed.length,""),o.xp6(3),o.Oqu(o.G7q(7,5,o.VKq(29,O,i.sumYpokeimeno))),o.xp6(4),o.Oqu(o.G7q(11,11,o.VKq(31,O,i.sumTelos))),o.xp6(4),o.Oqu(o.G7q(15,17,o.VKq(33,O,i.sumProstimo))),o.xp6(4),o.Oqu(o.G7q(19,23,o.VKq(35,O,i.sumSinolo)))}}const R=["dimotikosForosForm"];function N(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"div",19),o.TgZ(1,"label"),o._uU(2,"\u03a0\u03bf\u03c3\u03bf\u03c3\u03c4\u03cc*"),o.qZA(),o.TgZ(3,"ng-select",20,21),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw(2).selectedPososto=s}),o.qZA(),o.TgZ(5,"div",9),o._uU(6," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),o.qZA(),o.qZA()}if(2&i){const i=o.oxw(2);o.xp6(3),o.Q6J("items",i.pososta)("searchable",!0)("clearable",!1)("ngModel",i.selectedPososto)("disabled",3==i.dilosi.statusId||4==i.dilosi.statusId||5==i.dilosi.statusId||7==i.dilosi.statusId||i.dilosi.oikothenId||i.dilosi.xrimatikosKatalogosEggrafesProstimoId||i.dilosi.xrimatikosKatalogosEggrafesTelosId),o.xp6(2),o.Q6J("hidden",!i.isFormSubmitted||"1"==i.onlinePaymentsSettingsCompany||i.isFormSubmitted&&"1"!=i.onlinePaymentsSettingsCompany&&i.selectedPososto&&""!=i.selectedPososto)}}function E(i,s){1&i&&(o.TgZ(0,"span"),o._uU(1,"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd"),o.qZA())}function L(i,s){1&i&&(o.TgZ(0,"span"),o._uU(1,"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7 \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1\u03c2 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd"),o.qZA())}function J(i,s){if(1&i&&(o.TgZ(0,"div",26),o.TgZ(1,"a",27),o.ALo(2,"async"),o.ALo(3,"securePlg"),o._UZ(4,"i",28),o.qZA(),o.TgZ(5,"strong"),o._uU(6),o.qZA(),o._uU(7),o.TgZ(8,"small"),o._UZ(9,"i",29),o._uU(10),o.ALo(11,"date"),o.qZA(),o.qZA()),2&i){const i=s.$implicit,t=o.oxw(3);o.xp6(1),o.s9C("download",i.fileName),o.Q6J("href",o.lcZ(2,5,o.lcZ(3,7,t.katastimataApiUrl+"/api/DocDms/DownloadFile/"+i.dmsId)),o.LSH),o.xp6(5),o.Oqu(i.perigrafi),o.xp6(1),o.hij(" (",i.fileName,")\xa0 "),o.xp6(3),o.hij(" ",o.xi3(11,9,i.creationTime,"dd/MM/yyyy"),"")}}function Q(i,s){if(1&i){const i=o.EpF();o.ynx(0),o.TgZ(1,"div",22),o.TgZ(2,"h5"),o._uU(3,"\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03b1"),o.qZA(),o.TgZ(4,"button",23),o.NdJ("click",function(){o.CHM(i);const s=o.oxw(2);return s.toggleEditFiles=!s.toggleEditFiles}),o._UZ(5,"i",24),o.YNc(6,E,2,0,"span",2),o.YNc(7,L,2,0,"span",2),o.qZA(),o.qZA(),o.YNc(8,J,12,12,"div",25),o.BQk()}if(2&i){const i=o.oxw(2);o.xp6(4),o.Q6J("disabled",3==i.dilosi.statusId||4==i.dilosi.statusId||5==i.dilosi.statusId||7==i.dilosi.statusId||i.dilosi.oikothenId||i.dilosi.xrimatikosKatalogosEggrafesProstimoId||i.dilosi.xrimatikosKatalogosEggrafesTelosId),o.xp6(2),o.Q6J("ngIf",!i.toggleEditFiles),o.xp6(1),o.Q6J("ngIf",i.toggleEditFiles),o.xp6(1),o.Q6J("ngForOf",i.dilosiFiles)}}function Y(i,s){1&i&&o._UZ(0,"p-message",37)}function W(i,s){if(1&i){const i=o.EpF();o.ynx(0),o.YNc(1,Y,1,0,"p-message",30),o.TgZ(2,"div",5),o.TgZ(3,"div",31),o.TgZ(4,"label",32),o._uU(5,"\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)*"),o.qZA(),o.TgZ(6,"input",33,34),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw(2).periodikiDilosiFPA=s})("change",function(s){return o.CHM(i),o.oxw(2).onFileChange(s,"periodikiDilosiFPA")}),o.qZA(),o.TgZ(8,"div",9),o._uU(9," *\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),o.qZA(),o.qZA(),o.TgZ(10,"div",31),o.TgZ(11,"label",35),o._uU(12,"\u0395\u03c0\u03b9\u03c0\u03bb\u03ad\u03bf\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03bf (\u03a0.\u03c7. \u0399\u03c3\u03bf\u03b6\u03cd\u03b3\u03b9\u03bf)"),o.qZA(),o.TgZ(13,"input",36),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw(2).extraFile=s})("change",function(s){return o.CHM(i),o.oxw(2).onFileChange(s,"extraFile")}),o.qZA(),o.qZA(),o.qZA(),o.BQk()}if(2&i){const i=o.oxw(2);o.xp6(1),o.Q6J("ngIf",i.toggleEditFiles),o.xp6(5),o.Q6J("ngModel",i.periodikiDilosiFPA)("required",!i.dilosiFiles||i.dilosiFiles&&0==i.dilosiFiles.length),o.xp6(2),o.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&i.uploadedFiles&&i.uploadedFiles.periodikiDilosiFPA),o.xp6(5),o.Q6J("ngModel",i.extraFile)}}function j(i,s){1&i&&(o.TgZ(0,"span"),o._UZ(1,"span",38),o._uU(2," \u03a5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc\u03c2 \u03a0\u03bf\u03c3\u03ce\u03bd"),o.qZA())}function B(i,s){1&i&&(o.TgZ(0,"span"),o._UZ(1,"span",39),o._uU(2," \u03a5\u03c0\u03bf\u03b2\u03bf\u03bb\u03ae"),o.qZA())}function H(i,s){if(1&i&&o._UZ(0,"div",40),2&i){const i=o.oxw(2);o.Q6J("innerHTML",i.formErrorsMsg,o.oJD)}}function K(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"form",3,4),o.TgZ(2,"div",5),o.TgZ(3,"div",6),o.TgZ(4,"label"),o._uU(5,"\u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2*"),o.qZA(),o.TgZ(6,"ng-select",7,8),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw().dilosiCopy.dilosiId=s})("change",function(s){o.CHM(i);const t=o.oxw();return t.onSelectedDilosiChanged(s),t.isFormDirty=!0}),o.qZA(),o.TgZ(8,"div",9),o._uU(9," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),o.qZA(),o.qZA(),o.TgZ(10,"div",6),o.TgZ(11,"label"),o._uU(12,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),o.qZA(),o._UZ(13,"input",10),o.ALo(14,"date"),o.qZA(),o.TgZ(15,"div",11),o.TgZ(16,"p-checkbox",12),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw().dilosiCopy.isMideniki=s})("ngModelChange",function(){return o.CHM(i),o.oxw().onIsMidenikiChanged()}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",5),o.YNc(18,N,7,6,"div",13),o.TgZ(19,"div",14),o.TgZ(20,"label"),o._uU(21,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc*"),o.qZA(),o.TgZ(22,"input",15,16),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw().dilosiCopy.ypokeimenoPoso=s})("ngModelChange",function(){return o.CHM(i),o.oxw().isFormDirty=!0}),o.qZA(),o.TgZ(24,"div",9),o._uU(25," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),o.qZA(),o.qZA(),o.qZA(),o.YNc(26,Q,9,4,"ng-container",2),o.YNc(27,W,14,5,"ng-container",2),o._UZ(28,"hr"),o.TgZ(29,"button",17),o.NdJ("click",function(){return o.CHM(i),o.oxw().onSubmit()}),o.YNc(30,j,3,0,"span",2),o.YNc(31,B,3,0,"span",2),o.qZA(),o.YNc(32,H,1,1,"div",18),o.qZA()}if(2&i){const i=o.MAs(7),s=o.MAs(23),t=o.oxw();o.xp6(6),o.Q6J("items",t.diloseisToPay)("searchable",!0)("clearable",!1)("ngModel",t.dilosiCopy.dilosiId)("disabled",3==t.dilosi.statusId||4==t.dilosi.statusId||5==t.dilosi.statusId||7==t.dilosi.statusId||t.dilosi.oikothenId||t.dilosi.xrimatikosKatalogosEggrafesProstimoId||t.dilosi.xrimatikosKatalogosEggrafesTelosId),o.xp6(2),o.Q6J("hidden",!t.isFormSubmitted||t.isFormSubmitted&&i.valid),o.xp6(5),o.Q6J("value",o.xi3(14,20,t.dilosiCopy.hmeromiaLixisDilosis,"dd/MM/yyyy")),o.xp6(3),o.Q6J("ngModel",t.dilosiCopy.isMideniki)("disabled",3==t.dilosi.statusId||4==t.dilosi.statusId||5==t.dilosi.statusId||7==t.dilosi.statusId||t.dilosi.oikothenId||t.dilosi.xrimatikosKatalogosEggrafesProstimoId||t.dilosi.xrimatikosKatalogosEggrafesTelosId),o.xp6(2),o.Q6J("ngIf","1"!=t.onlinePaymentsSettingsCompany),o.xp6(1),o.Q6J("ngClass","1"==t.onlinePaymentsSettingsCompany?"":"col-md-6"),o.xp6(3),o.Q6J("ngModel",t.dilosiCopy.ypokeimenoPoso)("disabled",3==t.dilosi.statusId||4==t.dilosi.statusId||5==t.dilosi.statusId||7==t.dilosi.statusId||t.dilosi.oikothenId||t.dilosi.xrimatikosKatalogosEggrafesProstimoId||t.dilosi.xrimatikosKatalogosEggrafesTelosId||t.dilosi.isMideniki),o.xp6(2),o.Q6J("hidden",!t.isFormSubmitted||t.isFormSubmitted&&s.valid),o.xp6(2),o.Q6J("ngIf",t.dilosiFiles&&t.dilosiFiles.length),o.xp6(1),o.Q6J("ngIf",t.toggleEditFiles||!t.dilosiFiles||t.dilosiFiles&&0==t.dilosiFiles.length),o.xp6(2),o.Q6J("disabled",3==t.dilosi.statusId||4==t.dilosi.statusId||5==t.dilosi.statusId||7==t.dilosi.statusId||t.dilosi.oikothenId||t.dilosi.xrimatikosKatalogosEggrafesProstimoId||t.dilosi.xrimatikosKatalogosEggrafesTelosId),o.xp6(1),o.Q6J("ngIf",!t.dilosiCopy.isMideniki&&"1"==t.onlinePaymentsSettingsCompany),o.xp6(1),o.Q6J("ngIf",t.dilosiCopy.isMideniki||"1"!=t.onlinePaymentsSettingsCompany),o.xp6(1),o.Q6J("ngIf",t.formErrorsMsg&&""!=t.formErrorsMsg)}}function z(i,s){1&i&&(o.TgZ(0,"p",44),o.TgZ(1,"span",45),o._uU(2,"\u03a4\u03b1\u03c5\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2 \u0394\u0399\u0391\u03a3:"),o.qZA(),o.qZA())}function $(i,s){1&i&&(o.TgZ(0,"p",44),o.TgZ(1,"span",45),o._uU(2,"\u0397\u03bc\u03b5\u03c1\u03bf\u03bc\u03b7\u03bd\u03af\u03b1 \u039b\u03ae\u03be\u03b7\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2:"),o.qZA(),o.qZA())}function V(i,s){if(1&i&&(o.TgZ(0,"p",44),o.TgZ(1,"span",47),o._uU(2),o.qZA(),o.qZA()),2&i){const i=o.oxw(2);o.xp6(2),o.Oqu(i.kodikosPliromis)}}function G(i,s){if(1&i&&(o.TgZ(0,"p",44),o.TgZ(1,"span",47),o._uU(2),o.ALo(3,"date"),o.qZA(),o.qZA()),2&i){const i=o.oxw(2);o.xp6(2),o.Oqu(o.xi3(3,1,i.dilosiWebPaymentInfo.hmeromiaLixisPliromis,"dd/MM/yyyy"))}}function X(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"a",52),o.NdJ("click",function(s){return o.CHM(i),o.oxw(3).onOpenEktiposi(s)}),o._UZ(1,"span",53),o._uU(2," \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7 "),o.qZA()}if(2&i){const i=o.oxw(3);o.ekj("disabled",!!i.isFormDirty||null),o.Q6J("href",i.katastimataApiUrl+"/ViewReports/ReportDilosiTautotitaPliromisDias/"+i.dilosiWebPaymentInfo.dilosiId,o.LSH)}}function ii(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"div",49),o.YNc(1,X,3,3,"a",50),o.TgZ(2,"app-checkout",51),o.NdJ("onPayBtnClick",function(s){return o.CHM(i),o.oxw(2).onCreatePaymentRequest(s)}),o.qZA(),o.qZA()}if(2&i){const i=o.oxw(2);o.xp6(1),o.Q6J("ngIf",i.kodikosPliromis&&""!=i.kodikosPliromis),o.xp6(1),o.Q6J("isPaymentFormValid",!i.isFormDirty)("doPaymentSubscription",i.onDoPaymentSubject.asObservable())("finApiUrl",i.financeApiUrl)}}const si=function(i){return[i,"\u20ac","symbol","1.2","el"]};function ti(i,s){if(1&i&&(o.ynx(0),o.TgZ(1,"h4",41),o._uU(2,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u03a5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03bf\u03cd"),o.qZA(),o.TgZ(3,"div",42),o.TgZ(4,"div",43),o.TgZ(5,"div"),o.TgZ(6,"p",44),o.TgZ(7,"span",45),o._uU(8,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),o.qZA(),o.qZA(),o.TgZ(9,"p",44),o.TgZ(10,"span",45),o._uU(11,"\u03a0\u03bf\u03c3\u03cc \u03a4\u03ad\u03bb\u03bf\u03c5\u03c2:"),o.qZA(),o.qZA(),o.TgZ(12,"p",44),o.TgZ(13,"span",45),o._uU(14,"\u039c\u03ae\u03bd\u03b5\u03c2 \u039a\u03b1\u03b8\u03c5\u03c3\u03c4\u03ad\u03c1\u03b7\u03c3\u03b7\u03c2:"),o.qZA(),o.qZA(),o.TgZ(15,"p",44),o.TgZ(16,"span",45),o._uU(17,"\u03a0\u03bf\u03c3\u03cc \u03a0\u03c1\u03bf\u03c3\u03c4\u03af\u03bc\u03bf\u03c5:"),o.qZA(),o.qZA(),o.TgZ(18,"p",44),o.TgZ(19,"span",45),o._uU(20,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),o.qZA(),o.qZA(),o.YNc(21,z,3,0,"p",46),o.YNc(22,$,3,0,"p",46),o.qZA(),o.TgZ(23,"div"),o.TgZ(24,"p",44),o.TgZ(25,"span",47),o._uU(26),o.qZA(),o.qZA(),o.TgZ(27,"p",44),o.TgZ(28,"span",47),o._uU(29),o.ALo(30,"currency"),o.qZA(),o.qZA(),o.TgZ(31,"p",44),o.TgZ(32,"span",47),o._uU(33),o.qZA(),o.qZA(),o.TgZ(34,"p",44),o.TgZ(35,"span",47),o._uU(36),o.ALo(37,"currency"),o.qZA(),o.qZA(),o.TgZ(38,"p",44),o.TgZ(39,"span",47),o._uU(40),o.ALo(41,"currency"),o.qZA(),o.qZA(),o.YNc(42,V,3,1,"p",46),o.YNc(43,G,4,4,"p",46),o.qZA(),o.qZA(),o.YNc(44,ii,3,4,"div",48),o.qZA(),o.BQk()),2&i){const i=o.oxw();o.xp6(21),o.Q6J("ngIf",i.kodikosPliromis&&i.dilosiWebPaymentInfo.paymentAmount>0),o.xp6(1),o.Q6J("ngIf",i.kodikosPliromis&&i.dilosiWebPaymentInfo.paymentAmount>0),o.xp6(4),o.Oqu(i.dilosiWebPaymentInfo.paymentCaption),o.xp6(3),o.Oqu(o.G7q(30,10,o.VKq(28,si,i.dilosiWebPaymentInfo.telosPoso))),o.xp6(4),o.Oqu(i.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines),o.xp6(3),o.Oqu(o.G7q(37,16,o.VKq(30,si,i.dilosiWebPaymentInfo.prostimoPoso))),o.xp6(4),o.Oqu(o.G7q(41,22,o.VKq(32,si,i.dilosiWebPaymentInfo.paymentAmount))),o.xp6(2),o.Q6J("ngIf",i.kodikosPliromis&&i.dilosiWebPaymentInfo.paymentAmount>0),o.xp6(1),o.Q6J("ngIf",i.kodikosPliromis&&i.dilosiWebPaymentInfo.paymentAmount>0),o.xp6(1),o.Q6J("ngIf",i.dilosiWebPaymentInfo.paymentAmount>0)}}function ei(i,s){if(1&i&&o._UZ(0,"p-message",12),2&i){const i=o.oxw();o.Q6J("severity",i.bankStatusMessageClass)("text",i.bankStatusMessage)("styleClass","mb-2")}}function oi(i,s){1&i&&o.GkF(0)}function ni(i,s){if(1&i&&(o.TgZ(0,"div",13),o.YNc(1,oi,1,0,"ng-container",14),o.qZA()),2&i){o.oxw();const i=o.MAs(10);o.xp6(1),o.Q6J("ngTemplateOutlet",i)}}function ai(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"th",15),o.TgZ(2,"p-checkbox",16),o.NdJ("ngModelChange",function(s){return o.CHM(i),o.oxw().isAllDebitsChecked=s})("onChange",function(){return o.CHM(i),o.oxw().onAllDebitsSelected()}),o.qZA(),o.qZA(),o.TgZ(3,"th",17),o._uU(4,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),o.qZA(),o.TgZ(5,"th",18),o._uU(6,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),o.qZA(),o.TgZ(7,"th",18),o._uU(8,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),o.qZA(),o.TgZ(9,"th",19),o._uU(10,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),o.qZA(),o.TgZ(11,"th",19),o._uU(12,"\u03a4\u03ad\u03bb\u03bf\u03c2"),o.qZA(),o.TgZ(13,"th",19),o._uU(14,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),o.qZA(),o.TgZ(15,"th",19),o._uU(16,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),o.qZA(),o.TgZ(17,"th",20),o._uU(18,"\xa0"),o.qZA(),o.qZA()}if(2&i){const i=o.oxw();o.xp6(2),o.Q6J("binary",!0)("ngModel",i.isAllDebitsChecked),o.xp6(15),o.Q6J("frozen",!0)}}function li(i,s){1&i&&o._UZ(0,"i",30)}function ri(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td",21),o.TgZ(2,"span",22),o._uU(3,"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae"),o.qZA(),o.TgZ(4,"p-checkbox",23),o.NdJ("ngModelChange",function(s){return o.CHM(i).$implicit.isChecked=s})("onChange",function(){return o.CHM(i),o.oxw()._calculateTotalAmounts()}),o.qZA(),o.qZA(),o.TgZ(5,"td",17),o.TgZ(6,"span",22),o._uU(7,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),o.qZA(),o._uU(8),o.qZA(),o.TgZ(9,"td",24),o.TgZ(10,"span",22),o._uU(11,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),o.qZA(),o._uU(12),o.ALo(13,"date"),o.qZA(),o.TgZ(14,"td",24),o.TgZ(15,"span",22),o._uU(16,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),o.qZA(),o.YNc(17,li,1,0,"i",25),o.qZA(),o.TgZ(18,"td",26),o.TgZ(19,"span",22),o._uU(20,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),o.qZA(),o._uU(21),o.ALo(22,"currency"),o.qZA(),o.TgZ(23,"td",26),o.TgZ(24,"span",22),o._uU(25,"\u03a4\u03ad\u03bb\u03bf\u03c2"),o.qZA(),o._uU(26),o.ALo(27,"currency"),o.qZA(),o.TgZ(28,"td",26),o.TgZ(29,"span",22),o._uU(30,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),o.qZA(),o._uU(31),o.ALo(32,"currency"),o.qZA(),o.TgZ(33,"td",26),o.TgZ(34,"span",22),o._uU(35,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),o.qZA(),o.TgZ(36,"strong"),o._uU(37),o.ALo(38,"currency"),o.qZA(),o.qZA(),o.TgZ(39,"td",27),o.TgZ(40,"span",22),o._uU(41,"\u0395\u03bd\u03ad\u03c1\u03b3\u03b5\u03b9\u03b5\u03c2"),o.qZA(),o.TgZ(42,"button",28),o.NdJ("click",function(){const s=o.CHM(i).$implicit;return o.oxw().onEdit(s)}),o._UZ(43,"i",29),o.qZA(),o.qZA(),o.qZA()}if(2&i){const i=s.$implicit;o.xp6(4),o.Q6J("binary",!0)("ngModel",i.isChecked)("disabled",i.isMideniki),o.xp6(4),o.hij(" ",i.dilosiDescription," "),o.xp6(4),o.hij(" ",o.xi3(13,11,i.hmeromiaLixisDilosis,"dd/MM/yyyy")," "),o.xp6(5),o.Q6J("ngIf",i.isMideniki),o.xp6(4),o.hij(" ",o.gM2(22,14,i.ypokeimenoPoso,"\u20ac","symbol","1.2")," "),o.xp6(5),o.hij(" ",o.gM2(27,19,i.telosPoso,"\u20ac","symbol","1.2")," "),o.xp6(5),o.hij(" ",o.gM2(32,24,i.prostimoPoso,"\u20ac","symbol","1.2")," "),o.xp6(6),o.Oqu(o.gM2(38,29,i.telosPoso+i.prostimoPoso,"\u20ac","symbol","1.2")),o.xp6(2),o.Q6J("frozen",!0)}}function di(i,s){1&i&&(o.TgZ(0,"tr"),o.TgZ(1,"td",31),o._uU(2," \u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ad\u03c2. "),o.qZA(),o.qZA())}function pi(i,s){if(1&i&&(o.TgZ(0,"tr"),o.TgZ(1,"td",32),o.TgZ(2,"strong"),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"td",26),o.TgZ(5,"strong"),o._uU(6),o.ALo(7,"currency"),o.qZA(),o.qZA(),o.TgZ(8,"td",26),o.TgZ(9,"strong"),o._uU(10),o.ALo(11,"currency"),o.qZA(),o.qZA(),o.TgZ(12,"td",26),o.TgZ(13,"strong"),o._uU(14),o.ALo(15,"currency"),o.qZA(),o.qZA(),o.TgZ(16,"td",26),o.TgZ(17,"strong"),o._uU(18),o.ALo(19,"currency"),o.qZA(),o.qZA(),o.TgZ(20,"td",33),o._uU(21,"\xa0"),o.qZA(),o.qZA()),2&i){const i=o.oxw();o.xp6(3),o.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==i.diloseisSaved?null:i.diloseisSaved.length,""),o.xp6(3),o.Oqu(o.G7q(7,5,o.VKq(29,O,i.sumYpokeimeno))),o.xp6(4),o.Oqu(o.G7q(11,11,o.VKq(31,O,i.sumTelos))),o.xp6(4),o.Oqu(o.G7q(15,17,o.VKq(33,O,i.sumProstimo))),o.xp6(4),o.Oqu(o.G7q(19,23,o.VKq(35,O,i.sumToPay)))}}function hi(i,s){1&i&&o.GkF(0)}function ci(i,s){if(1&i){const i=o.EpF();o.ynx(0),o.TgZ(1,"div",13),o.YNc(2,hi,1,0,"ng-container",14),o.qZA(),o.TgZ(3,"div",34),o._UZ(4,"lib-egr-loading",35),o.TgZ(5,"app-checkout",36),o.NdJ("onPayBtnClick",function(s){return o.CHM(i),o.oxw().onCreatePaymentRequest(s)}),o.qZA(),o.qZA(),o.BQk()}if(2&i){const i=o.oxw(),s=o.MAs(10);o.xp6(2),o.Q6J("ngTemplateOutlet",s),o.xp6(2),o.Q6J("condition",i.isLoadingResponse)("customClass","egr-load-small"),o.xp6(1),o.Q6J("isPaymentFormValid",!0)("doPaymentSubscription",i.onDoPaymentSubject.asObservable())("finApiUrl",i.financeApiUrl)("buttonText","\u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae")}}function ui(i,s){if(1&i&&(o.TgZ(0,"div",37),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&i){const i=o.oxw();o.xp6(2),o.Oqu(i.errorMessageProfile)}}function mi(i,s){if(1&i&&(o.TgZ(0,"p"),o._uU(1,"\u0388\u03c7\u03b5\u03c4\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03b9 "),o.TgZ(2,"span",38),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"div",39),o.TgZ(5,"p"),o._uU(6,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a4\u03ad\u03bb\u03bf\u03c2: "),o.TgZ(7,"span",38),o._uU(8),o.ALo(9,"currency"),o.qZA(),o.qZA(),o.TgZ(10,"p"),o._uU(11,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf: "),o.TgZ(12,"span",38),o._uU(13),o.ALo(14,"currency"),o.qZA(),o.qZA(),o.TgZ(15,"p"),o._uU(16,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd: "),o.TgZ(17,"span",40),o._uU(18),o.ALo(19,"currency"),o.qZA(),o.qZA(),o.qZA()),2&i){const i=o.oxw();o.xp6(3),o.AsE("",i.calculatedChecked.countChecked," ",i.calculatedChecked.countText,""),o.xp6(5),o.Oqu(o.gM2(9,5,i.calculatedChecked.checkedTelos,"\u20ac","symbol","1.2")),o.xp6(5),o.Oqu(o.gM2(14,10,i.calculatedChecked.checkedProstimo,"\u20ac","symbol","1.2")),o.xp6(5),o.Oqu(o.gM2(19,15,i.calculatedChecked.checkedTelos+i.calculatedChecked.checkedProstimo,"\u20ac","symbol","1.2"))}}function gi(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"app-katastimata-create-dilosi",41),o.NdJ("updateSaved",function(s){return o.CHM(i),o.oxw().updateDilosiInTable(s)}),o.qZA()}if(2&i){const i=o.oxw();o.Q6J("diloseisToPay",i.diloseisToPay)("dilosi",i.selectedDilosi)("applicationUrl",i.applicationUrl)("onlinePaymentsSettingsCompany",i.onlinePaymentsSettingsCompany)}}const fi=function(){return{minWidth:"60vw"}};function yi(i,s){1&i&&o._UZ(0,"p-message",4)}function bi(i,s){if(1&i&&(o.TgZ(0,"p",14),o.TgZ(1,"strong"),o._uU(2,"\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1 \u0395\u03c0\u03b9\u03c7\u03b5\u03af\u03c1\u03b7\u03c3\u03b7\u03c2:"),o.qZA(),o._uU(3),o.qZA()),2&i){const i=o.oxw(3);o.xp6(3),o.hij("\xa0",i.epixeirisiInfo.eponimia," ")}}function xi(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"button",15),o.NdJ("click",function(){return o.CHM(i),o.oxw(3).onCreateNewDilosiClicked()}),o._UZ(1,"span",16),o._uU(2," \u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 "),o.qZA()}}function Zi(i,s){if(1&i&&(o.TgZ(0,"div",11),o.YNc(1,bi,4,1,"p",12),o.YNc(2,xi,3,0,"button",13),o.qZA()),2&i){const i=o.oxw(2);o.xp6(1),o.Q6J("ngIf",i.epixeirisiInfo),o.xp6(1),o.Q6J("ngIf",i.diloseisToPay&&i.diloseisToPay.length>0)}}function Ai(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"app-katastimata-receipts",17),o.NdJ("reloadData",function(){return o.CHM(i),o.oxw(2)._loadData()}),o.qZA()}if(2&i){const i=o.oxw(2);o.Q6J("diloseisPayed",i.diloseisPayed)("diloseisToPay",i.diloseisToPay)("userInfo",i.userInfo)("isLoading",i.isLoading)}}function Pi(i,s){if(1&i){const i=o.EpF();o.ynx(0),o.YNc(1,Zi,3,2,"div",5),o.TgZ(2,"p-tabView",6),o.NdJ("onChange",function(s){return o.CHM(i),o.oxw().onTabChanged(s)}),o.TgZ(3,"p-tabPanel",7),o.YNc(4,Ai,1,4,"app-katastimata-receipts",8),o.qZA(),o.TgZ(5,"p-tabPanel",9),o.TgZ(6,"app-katastimata-saved",10),o.NdJ("reloadData",function(){return o.CHM(i),o.oxw()._loadData()}),o.qZA(),o.qZA(),o.qZA(),o.BQk()}if(2&i){const i=o.oxw();o.xp6(1),o.Q6J("ngIf",i.epixeirisiInfo||i.diloseisToPay&&i.diloseisToPay.length>0),o.xp6(1),o.Q6J("activeIndex",i.index),o.xp6(2),o.Q6J("ngIf",i.diloseisPayed),o.xp6(2),o.Q6J("diloseisSaved",i.diloseisSaved)("diloseisToPay",i.diloseisToPay)("userInfo",i.userInfo)("epixeirisiInfo",i.epixeirisiInfo)("onlinePaymentsSettingsCompany",i.onlinePaymentsSettingsCompany)("isLoading",i.isLoading)("applicationUrl",i.applicationUrl)}}function Ii(i,s){if(1&i){const i=o.EpF();o.TgZ(0,"app-katastimata-create-dilosi",18),o.NdJ("updateSaved",function(s){return o.CHM(i),o.oxw().onReloadSaved(s)}),o.qZA()}if(2&i){const i=o.oxw();o.Q6J("epixeirisiInfo",i.epixeirisiInfo)("diloseisToPay",i.diloseisToPay)("dilosi",null)("applicationUrl",i.applicationUrl)("onlinePaymentsSettingsCompany",i.onlinePaymentsSettingsCompany)}}let ki=(()=>{class i extends class{constructor(i,s){this.http=i,this.exceptionService=s,this.getBaseUrl=()=>this.baseUrl,AppConfOptions&&AppConfOptions.katastimata_api?(this.baseUrl=AppConfOptions.katastimata_api,this.financeUrl=AppConfOptions.epayments_api):(this.baseUrl="/",this.financeUrl=AppConfOptions.financeApi),this.baseUrl+="api",this.financeUrl+="api"}}{constructor(i,s){super(s,i),this.exceptionSrv=i,this.http=s,this.userInfoSubject=new a.X(null),this.userInfo$=this.userInfoSubject.asObservable(),this.egOnInit()}egOnInit(){this.userInfo$.subscribe(i=>{this.userInfo=i})}initUserInfo(){if(!this.userInfo){let i=null,s=window.sessionStorage.length>0?window.sessionStorage:window.localStorage;for(let t=0;t<s.length;t++){const e=s.key(t);e.includes("userData")&&(i=JSON.parse(s.getItem(e)),this.userInfoSubject.next({email:i.email,username:i.given_name,tin:i.tin,family_name:i.family_name,given_name:i.given_name,name:i.name,address_city:i.address_city,address_country_code:i.address_country_code,address_zip:i.address_zip,address:i.address,fathers_name:i.fathers_name,mothers_name:i.mothers_name,adt:i.adt,phone_number:i.phone_number}))}}}getDiloseisWebInfo(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/DiloseisWeb/DiloseisWebInfo/${i}`).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}getDilosiWebPaymentInfo(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.post(`${this.baseUrl}/DiloseisWeb/DilosiWebPaymentInfo`,i).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}uploadPeriodikiDilosi(i){let s=new e.WM;return s=s.append("isForm","true"),this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.post(`${this.baseUrl}/DiloseisWeb/DilosiWebScan`,i,{headers:s,responseType:"arraybuffer"}).pipe((0,p.U)(i=>i),(0,h.K)(()=>(0,l.of)(!1)))}getDiloseisWebPayedInfo(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/DiloseisWeb/DiloseisWebPayedInfo/${i}`).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}getEpixeirisiInfo(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/DiloseisWeb/DiloseisWebEpixirisiInfo/${i}`).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}deleteDocDmsByDilosiId(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/DiloseisWeb/DeleteDocDmsByDilosiId/${i}`).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}markDilosiWebExoflisi(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.post(`${this.baseUrl}/DiloseisWeb/MarkDilosiWebExoflisi`,i).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionService.catchBadResponse))}getDocDmsByDilosiId(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/DiloseisWeb/GetDocDmsByDilosiId/${i}`).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}getDownloadFile(i){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/DocDms/DownloadFile/${i}`,{responseType:"blob"}).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}getPluginCustomerOptions(){return this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get(`${this.baseUrl}/Configurations/GetPluginCustomerSpecificOptions`).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}createRemittanceInfoById(i){this.baseUrl=(0,n.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl;const s=`${this.baseUrl}/DiloseisWeb/CreateRemittanceInfoById/${i}`,t={headers:new e.WM({Accept:"text/html, application/xhtml+xml, */*","Content-Type":"text/plain; charset=utf-8"}),responseType:"text"};return this.http.get(s,t).pipe((0,p.U)(i=>i),(0,h.K)(this.exceptionSrv.catchBadResponse))}}return i.\u0275fac=function(s){return new(s||i)(o.LFG(n.Hm),o.LFG(e.eN))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Ci{constructor(){this.dilosiId=0,this.dilosiDescription=null,this.hmeromiaLixisDilosis=null,this.isMideniki=!1}}class Ti{constructor(){this.dilosiId=null,this.epixirisiEponimia=null,this.epixirisiOfeiletisEponimia=null,this.epixirisiOfeiletisAfm=null,this.paymentCaption=null,this.paymentCode=null,this.paymentCodeDias=null,this.paymentAmount=null,this.telosPoso=null,this.prostimoPoso=null,this.ypokeimenoPoso=null,this.apoforologimenoPoso=null,this.posostoTelous=null,this.posostoEkprothesmisKatavolis=null,this.posostoEkprothesmisKatavolisArxiko=null,this.posostoEkprothesmisKatavolisMines=null}}class Ui{constructor(){this.bankTransactionId=null}}var qi=(()=>{return(i=qi||(qi={})).dilosiDescription="\u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2",i.ypokeimenoPoso="\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc",i.periodikiDilosiFPA="\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)",i.pososto="\u03a0\u03bf\u03c3\u03bf\u03c3\u03c4\u03cc",qi;var i})();let wi=(()=>{class i{constructor(i,s,t){this.katastimataNgSrv=i,this.route=s,this._http=t,this.reloadData=new o.vpe,this.onDestroy=new r.xQ,this.financeApiUrl="",this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumSinolo=0,this.financeApiUrl="undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(0,n.Qj)(AppConfOptions.epayments_api):(0,n.Qj)(AppConfOptions.financeApi)}ngOnChanges(i){i&&i.diloseisPayed&&(this.diloseisPayed=i.diloseisPayed.currentValue,this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumSinolo=0,this.diloseisPayed.forEach(i=>{this.sumYpokeimeno+=i.ypokeimenoPoso,this.sumTelos+=i.telosPoso,this.sumProstimo+=i.prostimoPoso,i.sinolikoPoso=+i.telosPoso+ +i.prostimoPoso,this.sumSinolo+=i.sinolikoPoso})),i&&i.isLoading&&(this.isLoading=i.isLoading.currentValue)}ngOnInit(){this.katastimataNgSrv.userInfo$.pipe((0,c.R)(this.onDestroy)).subscribe(i=>this.userInfo=i),this._getBankMessages().pipe((0,u.w)(i=>i?(this.oikonomikiBankMessages=i,this.route.queryParams.pipe((0,c.R)(this.onDestroy))):(0,l.of)(!1))).subscribe(i=>{if(i){let s=i.messagecode,t=i.btId;if(s)if(this.bankStatusMessage=this.oikonomikiBankMessages[s],"TRANSACTION_COMPLETED"==s){if(this.bankStatusMessageClass="success",t){let i=new Ui;i.bankTransactionId=t,this.katastimataNgSrv.markDilosiWebExoflisi(i).subscribe(()=>{this.reloadData.emit(!0)})}}else this.bankStatusMessageClass="error"}})}ngOnDestroy(){this.onDestroy.next()}_getBankMessages(){return this._http.get(this.financeApiUrl+"/api/Banks/BankMessages")}btnBankStatusMessageClicked(){this.bankStatusMessage=null}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(ki),o.Y36(m.gz),o.Y36(e.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-katastimata-receipts"]],inputs:{diloseisPayed:"diloseisPayed",diloseisToPay:"diloseisToPay",userInfo:"userInfo",isLoading:"isLoading"},outputs:{reloadData:"reloadData"},features:[o.TTD],decls:7,vars:11,consts:[["severity","warn","text","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2. \u0395\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf\u03bd \u03bf\u03c1\u03b3\u03b1\u03bd\u03b9\u03c3\u03bc\u03cc.",4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["severity","warn","text","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2. \u0395\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf\u03bd \u03bf\u03c1\u03b3\u03b1\u03bd\u03b9\u03c3\u03bc\u03cc."],[3,"severity","text","styleClass"],[1,"fixed-width-col-80"],[1,"fixed-width-col-220"],[1,"fixed-width-col-120"],[1,"fixed-width-col-170"],[1,"fixed-width-col-80","text-center"],[1,"p-column-title"],["class","fas fa-check",4,"ngIf"],[1,"fixed-width-col-120","text-right"],[1,"fas","fa-check"],["colspan","8"],["colspan","3",1,"fixed-width-col-380"]],template:function(i,s){1&i&&(o.YNc(0,w,1,0,"p-message",0),o.YNc(1,_,1,3,"p-message",1),o.TgZ(2,"p-table",2),o.YNc(3,v,17,0,"ng-template",3),o.YNc(4,S,37,28,"ng-template",4),o.YNc(5,M,3,0,"ng-template",5),o.YNc(6,F,22,37,"ng-template",6),o.qZA()),2&i&&(o.Q6J("ngIf",(!s.diloseisToPay||s.diloseisToPay&&0==s.diloseisToPay.length)&&!s.isLoading),o.xp6(1),o.Q6J("ngIf",s.bankStatusMessage&&""!=s.bankStatusMessage),o.xp6(1),o.Q6J("value",s.diloseisPayed)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",s.isLoading)("totalRecords",null==s.diloseisPayed?null:s.diloseisPayed.length))},directives:[b.O5,y.iA,x.jx,g.q],pipes:[b.H9],styles:[".fixed-width-col-80[_ngcontent-%COMP%]{width:80px!important;min-width:80px!important}.fixed-width-col-120[_ngcontent-%COMP%]{width:120px!important;min-width:120px!important}.fixed-width-col-170[_ngcontent-%COMP%]{width:170px!important;min-width:170px!important}.fixed-width-col-220[_ngcontent-%COMP%]{width:220px!important;min-width:220px!important}.fixed-width-col-380[_ngcontent-%COMP%]{width:380px!important;min-width:380px!important}"]}),i})(),_i=(()=>{class i{constructor(i,s,t){this.http=i,this.sanitizer=s,this.toasterSrv=t}transform(i){return this.http.get(i,{responseType:"blob"}).pipe((0,p.U)(i=>this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i))),(0,h.K)(i=>(0,n.Zj)(i,this.toasterSrv)))}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(e.eN,16),o.Y36(C.H7,16),o.Y36(n.MJ,16))},i.\u0275pipe=o.Yjl({name:"securePlg",type:i,pure:!0}),i})(),vi=t(62247),Di=(()=>{class i{constructor(i,s,t,e){this.katastimataNgSrv=i,this.paymentSrv=s,this.toasterSrv=t,this.cdr=e,this.updateSaved=new o.vpe,this.paymentRequestDto=void 0,this.requestObs=[],this.onDoPaymentSubject=new r.xQ,this.onDestroy=new r.xQ,this.pososta=[{value:"0.5",description:"0.5%"},{value:"2",description:"2%"},{value:"5",description:"5%"}],this.toggleEditFiles=!1,this.periodikiDilosiFPA=null,this.extraFile=null,this.uploadedFiles=[],this.isLoading=!1,this.isLoadingResponse=!1,this.initPaymentMethods=!1,this.isFormDirty=!1,this.isFormSubmitted=!1,this.formDictionaryEnum=qi}ngOnInit(){"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.katastimataApiUrl=(0,n.Qj)(AppConfOptions.katastimata_api),this.financeApiUrl=(0,n.Qj)(AppConfOptions.epayments_api),this.relatedCallbackUrl=encodeURI(this.applicationUrl+"/katastimata/receipts")):(this.katastimataApiUrl=(0,n.Qj)(AppConfOptions.applicationUrl),this.financeApiUrl=(0,n.Qj)(AppConfOptions.financeApi),this.relatedCallbackUrl=encodeURI(this.applicationUrl+"/plugin/receipts")),(0,n.RA)(this.cdr),this.dilosi?this._getDilosiFiles():(this.dilosi=new Ci,this.dilosiCopy=(0,n.p$)(this.dilosi),(0,n.RA)(this.cdr)),this.katastimataNgSrv.userInfo$.pipe((0,c.R)(this.onDestroy)).subscribe(i=>{i&&(this.userInfo=i,(0,n.RA)(this.cdr))})}ngOnDestroy(){this.onDestroy.next()}ngOnChanges(i){i&&i.dilosi&&(this.dilosiCopy=i.dilosi.currentValue,this.dilosiCopy&&this.dilosiCopy.kodikosPliromisDias&&(this.dilosiCopy.oikothenId||this.dilosiCopy.xrimatikosKatalogosEggrafesProstimoId||this.dilosiCopy.xrimatikosKatalogosEggrafesTelosId||3==this.dilosiCopy.statusId||4==this.dilosiCopy.statusId||5==this.dilosiCopy.statusId||7==this.dilosiCopy.statusId)&&(this.dilosiCopy.kodikosPliromisDias.length>15&&(this.kodikosPliromis=this.dilosiCopy.kodikosPliromisDias.match(/(.|[\r\n]){1,4}/g).toString(),this.kodikosPliromis=this.kodikosPliromis.replace(new RegExp(",","g")," ")),this.dilosiWebPaymentInfo=new Ti,this.dilosiWebPaymentInfo.dilosiId=this.dilosiCopy.dilosiId,this.dilosiWebPaymentInfo.paymentCaption=this.dilosiCopy.dilosiDescription,this.dilosiWebPaymentInfo.telosPoso=this.dilosiCopy.telosPoso,this.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines=this.dilosiCopy.posostoEkprothesmisKatavolis,this.dilosiWebPaymentInfo.prostimoPoso=this.dilosiCopy.prostimoPoso,this.dilosiWebPaymentInfo.paymentAmount=this.dilosiCopy.prostimoPoso+this.dilosiCopy.telosPoso,this.dilosiWebPaymentInfo.hmeromiaLixisPliromis=this.dilosiCopy.hmeromiaLixisPliromis),(0,n.RA)(this.cdr)),i&&i.onlinePaymentsSettingsCompany&&(this.onlinePaymentsSettingsCompany=i.onlinePaymentsSettingsCompany.currentValue,(0,n.RA)(this.cdr))}onSelectedDilosiChanged(i){if(i){let s=this.dilosiCopy.isMideniki;this.dilosiCopy=this.diloseisToPay.filter(i=>i.dilosiId===+this.dilosiCopy.dilosiId)[0],this.dilosiCopy.isMideniki=s,this.dilosiCopy.isMideniki&&(this.dilosiCopy.ypokeimenoPoso=0),this.katastimataNgSrv.getDocDmsByDilosiId(i.dilosiId).subscribe(i=>{i&&(this.dilosiFiles=i),(0,n.RA)(this.cdr)})}}onIsMidenikiChanged(){this.dilosiCopy.isMideniki&&(this.dilosiCopy.ypokeimenoPoso=0,(0,n.RA)(this.cdr))}downloadFile(i){i&&this.katastimataNgSrv.getDownloadFile(i).subscribe()}onFileChange(i,s){i&&i.srcElement.files.length>0?vi(i,!0).then(i=>{this.uploadedFiles=[...this.uploadedFiles,{type:s,result:i}]}):this.uploadedFiles=this.uploadedFiles.filter(i=>i.type!=s),this.isFormDirty=!0,(0,n.RA)(this.cdr)}onOpenEktiposi(i){this.isFormDirty&&i.preventDefault()}onSubmit(){if(this.formErrorsMsg="",this.toggleEditFiles=!1,(0,n.RA)(this.cdr),this.dimotikosForosForm.valid&&(this.dilosiCopy.isMideniki||!this.dilosiCopy.isMideniki&&this.dilosiCopy.ypokeimenoPoso>0)){this.isFormSubmitted=!0,this.isFormDirty=!1,this.isLoading=!0;let i=[];if(this.uploadedFiles&&this.uploadedFiles.some(i=>"periodikiDilosiFPA"==i.type)){let s=[];for(let i=0;i<this.uploadedFiles.length;i++){const t=Object.values(this.uploadedFiles[i]),e=t[1];let o=e.name.substr(e.name.lastIndexOf(".")+1),n=+this.dilosiCopy.ypokeimenoPoso;"periodikiDilosiFPA"!=t[0]&&(n=0),s.push({language:"el",dilosiId:+this.dilosiCopy.dilosiId,fileContent:e.base64,fileLength:e.size,fileExtension:o,fileDescription:i,fileName:e.name,poso:n,hmerominiaDilosis:new Date,type:t[0]})}i=[...i,this.katastimataNgSrv.deleteDocDmsByDilosiId(this.dilosiCopy.dilosiId)],this.uploadedFiles.some(i=>"extraFile"==i.type)&&(i=[...i,this.katastimataNgSrv.uploadPeriodikiDilosi(s.find(i=>"extraFile"==i.type))]),i=[...i,this.katastimataNgSrv.uploadPeriodikiDilosi(s.find(i=>"periodikiDilosiFPA"==i.type))]}let s={language:"el",dilosiId:+this.dilosiCopy.dilosiId,ypokeimenoPoso:+this.dilosiCopy.ypokeimenoPoso,hmerominiaDilosis:(0,n.Fh)(new Date),isMideniki:this.dilosiCopy.isMideniki};if(this.onlinePaymentsSettingsCompany&&"1"==this.onlinePaymentsSettingsCompany)this.requestObs=[...this.requestObs,this.katastimataNgSrv.getDilosiWebPaymentInfo(s)],i=[...i,this.katastimataNgSrv.getDilosiWebPaymentInfo(s)],(0,n.RA)(this.cdr),(0,n.CV)(i,()=>this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1.")).subscribe(i=>{i?(this.dilosiWebPaymentInfo=i,this.dilosiWebPaymentInfo&&(this.updateSaved.emit({dilosiId:this.dilosiWebPaymentInfo.dilosiId,dilosiDescription:this.dilosiWebPaymentInfo.paymentCaption,statusId:this.dilosiCopy.statusId,akatharistoPoso:this.dilosiCopy.akatharistoPoso,ypokeimenoPoso:this.dilosiCopy.ypokeimenoPoso,telosPoso:this.dilosiWebPaymentInfo.telosPoso,prostimoPoso:this.dilosiWebPaymentInfo.prostimoPoso,hmeromiaLixisDilosis:this.dilosiCopy.hmeromiaLixisDilosis,isChecked:!1,isMideniki:this.dilosiCopy.isMideniki,epixirisiId:this.dilosiCopy.epixirisiId,etos:this.dilosiCopy.etos}),this.kodikosPliromis=this.dilosiWebPaymentInfo.paymentCodeDias,this.kodikosPliromis&&this.kodikosPliromis.length>15&&(this.kodikosPliromis=this.dilosiWebPaymentInfo.paymentCodeDias.match(/(.|[\r\n]){1,4}/g).toString(),this.kodikosPliromis=this.kodikosPliromis.replace(new RegExp(",","g")," "))),this._getDilosiFiles()):this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03bf\u03bd \u03c5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc \u03c4\u03c9\u03bd \u03c0\u03bf\u03c3\u03ce\u03bd."),this.isLoading=!1,this.isFormSubmitted=!1,(0,n.RA)(this.cdr)});else{let s="";this.katastimataNgSrv.createRemittanceInfoById(this.dilosiCopy.dilosiId).pipe((0,u.w)(t=>t?(s=t,(0,n.CV)(i,()=>this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1."))):(0,l.of)(!1))).subscribe(i=>{if(i&&i.statusUpload){this.dilosiWebPaymentInfo=new Ti;let t=(this.dilosiCopy.ypokeimenoPoso/(+this.selectedPososto/100+1)).toFixed(2);t=+t;let e=+this.selectedPososto/100,o=+i.poso,n=function(i,s){return s.getMonth()-i.getMonth()+12*(s.getFullYear()-i.getFullYear())}(new Date(this.dilosiCopy.hmeromiaLixisDilosis),new Date);n<0&&(n=0);let a=i.proposo;this.dilosiWebPaymentInfo.dilosiId=this.dilosiCopy.dilosiId,this.dilosiWebPaymentInfo.epixirisiEponimia=this.epixeirisiInfo.eponimia,this.dilosiWebPaymentInfo.epixirisiOfeiletisEponimia=this.epixeirisiInfo.ofeiletisEponimia,this.dilosiWebPaymentInfo.epixirisiOfeiletisAfm=this.epixeirisiInfo.ofeiletisAfm,this.dilosiWebPaymentInfo.paymentCaption=this.dilosiCopy.dilosiDescription,this.dilosiWebPaymentInfo.paymentCode=s,this.dilosiWebPaymentInfo.paymentAmount=o+a,this.dilosiWebPaymentInfo.telosPoso=o,this.dilosiWebPaymentInfo.prostimoPoso=a,this.dilosiWebPaymentInfo.ypokeimenoPoso=this.dilosiCopy.ypokeimenoPoso,this.dilosiWebPaymentInfo.apoforologimenoPoso=t,this.dilosiWebPaymentInfo.posostoTelous=e,this.dilosiWebPaymentInfo.posostoEkprothesmisKatavolis=.02*n,this.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisArxiko=.02,this.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines=n,this.updateSaved.emit({dilosiId:this.dilosiCopy.dilosiId,dilosiDescription:this.dilosiCopy.dilosiDescription,statusId:this.dilosiCopy.statusId,hmeromiaLixisDilosis:this.dilosiCopy.hmeromiaLixisDilosis,akatharistoPoso:this.dilosiCopy.akatharistoPoso,ypokeimenoPoso:this.dilosiCopy.ypokeimenoPoso,isChecked:!1,telosPoso:this.dilosiWebPaymentInfo.telosPoso,prostimoPoso:this.dilosiWebPaymentInfo.prostimoPoso,isMideniki:this.dilosiCopy.isMideniki,epixirisiId:this.dilosiCopy.epixirisiId,etos:this.dilosiCopy.etos})}else this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03bf\u03bd \u03c5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc \u03c4\u03c9\u03bd \u03c0\u03bf\u03c3\u03ce\u03bd \u03ae \u03c4\u03bf\u03c5 Remittance Info.");this.isLoading=!1,this.isFormSubmitted=!1,(0,n.RA)(this.cdr)})}}else{let i="";this.dilosiCopy.dilosiId||(i+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: \u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf</li>"),0==this.dilosiCopy.ypokeimenoPoso&&(i+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: \u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf \u03ba\u03b1\u03b9 \u03bc\u03b5\u03b3\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03bf \u03c4\u03bf\u03c5 0</li>"),this.formErrorsMsg=(0,n.CD)(this.dimotikosForosForm,this.formDictionaryEnum,i),(0,n.RA)(this.cdr)}}onCreatePaymentRequest(i){this.initPaymentMethods=!0,this.isLoadingResponse=!0,this.paymentRequestDto=void 0,(0,n.RA)(this.cdr),i&&(this.paymentRequestDto={tinRelated:this.userInfo.tin,relatedCallbackUrl:this.relatedCallbackUrl,billingAddressCity:this.userInfo.address_city,billingAddressCountryCode:this.userInfo.address_country_code,billingAddressZip:this.userInfo.address_zip,billingAddress:this.userInfo.address,userEmail:this.userInfo.email,userPhone:this.userInfo.phone_number,paymentMethodKey:i.key,entries:[]},"PIRBGRAA"===i.key&&(this.paymentRequestDto.billingAddressCountryCode=null),this.paymentRequestDto.entries.push({remittanceInfo:this.dilosiWebPaymentInfo.paymentCode,amount:this.dilosiWebPaymentInfo.paymentAmount,debtorName:this.dilosiWebPaymentInfo.epixirisiOfeiletisEponimia,tin:this.userInfo.tin,description:this.dilosiWebPaymentInfo.paymentCaption}),this.paymentSrv.addPaymentRequest(this.financeApiUrl,this.paymentRequestDto).subscribe(i=>{i?(this.paymentResponseDto=i,this.onDoPaymentSubject.next(this.paymentResponseDto)):((0,n.RA)(this.cdr),this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),this.isLoadingResponse=!1,(0,n.RA)(this.cdr)}))}_getDilosiFiles(){this.katastimataNgSrv.getDocDmsByDilosiId(this.dilosiCopy.dilosiId).subscribe(i=>{i&&(this.dilosiFiles=i,(0,n.RA)(this.cdr))})}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(ki),o.Y36(n.te),o.Y36(n.MJ),o.Y36(o.sBO))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-katastimata-create-dilosi"]],viewQuery:function(i,s){if(1&i&&o.Gf(R,5),2&i){let i;o.iGM(i=o.CRH())&&(s.dimotikosForosForm=i.first)}},inputs:{epixeirisiInfo:"epixeirisiInfo",diloseisToPay:"diloseisToPay",dilosi:"dilosi",applicationUrl:"applicationUrl",onlinePaymentsSettingsCompany:"onlinePaymentsSettingsCompany"},outputs:{updateSaved:"updateSaved"},features:[o.TTD],decls:3,vars:4,consts:[["class","form w-100",4,"ngIf"],[3,"condition","customClass"],[4,"ngIf"],[1,"form","w-100"],["dimotikosForosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-4"],["name","dilosiDescription","bindLabel","dilosiDescription","bindValue","dilosiId","placeholder","\u0395\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7","required","",3,"items","searchable","clearable","ngModel","disabled","ngModelChange","change"],["dilosiDescription","ngModel"],[1,"text-danger",3,"hidden"],["name","hmeromiaLixisDilosis","placeholder","\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2","type","text","disabled","",1,"form-control",3,"value"],[1,"form-group","col-12","col-md-4","d-flex","align-items-center"],["label","\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7","name","isMideniki","binary","true",3,"ngModel","disabled","ngModelChange"],["class","form-group col-12 col-md-6",4,"ngIf"],[1,"form-group","col-12",3,"ngClass"],["name","ypokeimenoPoso","type","text","currencyMask","","lang","el-GR","placeholder","0,00","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["ypokeimenoPosoInput","ngModel"],["type","button",1,"btn","btn-primary","d-block","mt-2","mx-auto",3,"disabled","click"],["class","alert alert-danger form-msgs",3,"innerHTML",4,"ngIf"],[1,"form-group","col-12","col-md-6"],["name","pososto","bindLabel","description","bindValue","value","placeholder","\u0395\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c0\u03bf\u03c3\u03bf\u03c3\u03c4\u03cc","required","",3,"items","searchable","clearable","ngModel","disabled","ngModelChange"],["posostoInput","ngModel"],[1,"d-flex","flex-wrap"],["type","button",1,"btn","btn-sm","btn-primary","m-0","ml-auto",3,"disabled","click"],[1,"far","fa-edit"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],["type","button",1,"btn","btn-sm","btn-outline-info","m-0","mr-1",3,"href","download"],[1,"fas","fa-download"],[1,"far","fa-calendar-alt"],["severity","warn","text","\u03a3\u03b5 \u03c0\u03b5\u03c1\u03af\u03c0\u03c4\u03c9\u03c3\u03b7 \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf, \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03bf\u03cd\u03bd \u03cc\u03bb\u03b1 \u03c4\u03b1 \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 \u03ba\u03b1\u03b9 \u03b8\u03b1 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c4\u03b1 \u03b1\u03bd\u03b5\u03b2\u03ac\u03c3\u03b5\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac.",4,"ngIf"],[1,"form-group","col-12","col-sm-6"],["for","periodikiDilosiFPA"],["name","periodikiDilosiFPA","placeholder","\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)","type","file",1,"form-control-file",3,"ngModel","required","ngModelChange","change"],["periodikiDilosiFPAInput","ngModel"],["for","extraFile"],["name","extraFile","placeholder","\u0395\u03c0\u03b9\u03c0\u03bb\u03ad\u03bf\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03bf","type","file",1,"form-control-file",3,"ngModel","ngModelChange","change"],["severity","warn","text","\u03a3\u03b5 \u03c0\u03b5\u03c1\u03af\u03c0\u03c4\u03c9\u03c3\u03b7 \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf, \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03bf\u03cd\u03bd \u03cc\u03bb\u03b1 \u03c4\u03b1 \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 \u03ba\u03b1\u03b9 \u03b8\u03b1 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c4\u03b1 \u03b1\u03bd\u03b5\u03b2\u03ac\u03c3\u03b5\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac."],["aria-hidden","true",1,"fas","fa-calculator"],["aria-hidden","true",1,"far","fa-save","fa-fw"],[1,"alert","alert-danger","form-msgs",3,"innerHTML"],[1,"w-100","pb-2"],[1,"debits-info","d-flex","justify-content-between"],[1,"debits-info_left","d-flex","mr-1"],[1,"mb-0"],[1,"mr-1",2,"width","220px","line-height","1.7"],["class","mb-0",4,"ngIf"],[1,"totalPoso"],["class","d-flex flex-column align-items-center",4,"ngIf"],[1,"d-flex","flex-column","align-items-center"],["class","btn btn-info mb-1 px-4 font-weight-bold","style","width: 173px;","target","_blank",3,"href","disabled","click",4,"ngIf"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","onPayBtnClick"],["target","_blank",1,"btn","btn-info","mb-1","px-4","font-weight-bold",2,"width","173px",3,"href","click"],["aria-hidden","true",1,"fas","fa-print"]],template:function(i,s){1&i&&(o.YNc(0,K,33,23,"form",0),o._UZ(1,"lib-egr-loading",1),o.YNc(2,ti,45,34,"ng-container",2)),2&i&&(o.Q6J("ngIf",s.dilosiCopy&&s.diloseisToPay&&s.diloseisToPay.length>0),o.xp6(1),o.Q6J("condition",s.isLoading)("customClass","egr-load-small"),o.xp6(1),o.Q6J("ngIf",s.dilosiWebPaymentInfo&&!s.isLoading&&!s.isFormDirty))},directives:[b.O5,n.IE,P._Y,P.JL,P.F,I.w9,P.Q7,P.JJ,P.On,Z.XZ,b.mk,P.Fj,k.g1,b.sg,g.q,n.Hl],pipes:[b.uU,b.Ov,_i,b.H9],encapsulation:2,changeDetection:0}),i})(),Si=(()=>{class i{constructor(i,s,t,e,n,a){this.katastimataNgSrv=i,this.paymentSrv=s,this.toasterSrv=t,this.cdr=e,this.route=n,this._http=a,this.reloadData=new o.vpe,this.modelPaymentInfo=[],this.modelToPayInfo=[],this.paymentRequestDto=void 0,this.onDestroy=new r.xQ,this.onDoPaymentSubject=new r.xQ,this.requestObs=[],this.errorMessageProfile=null,this.isLoadingResponse=!1,this.initPaymentMethods=!1,this.isAllDebitsChecked=!1,this.calculatedChecked={countChecked:0,countText:"\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",checkedYpokeimeno:0,checkedTelos:0,checkedProstimo:0},this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumToPay=0,this.isEditModalOpen=!1}ngOnInit(){"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.financeApiUrl=(0,n.Qj)(AppConfOptions.epayments_api),this.relatedCallbackUrl=encodeURI((0,n.Qj)(this.applicationUrl)+"/katastimata/saved")):(this.financeApiUrl=(0,n.Qj)(AppConfOptions.financeApi),this.relatedCallbackUrl=encodeURI((0,n.Qj)(this.applicationUrl)+"/plugin/saved")),this.katastimataNgSrv.userInfo$.pipe((0,c.R)(this.onDestroy)).subscribe(i=>this.userInfo=i),this._getBankMessages().pipe((0,u.w)(i=>i?(this.oikonomikiBankMessages=i,this.route.queryParams.pipe((0,c.R)(this.onDestroy))):(0,l.of)(!1))).subscribe(i=>{if(i){let s=i.messagecode,t=i.btId;if(s)if(this.bankStatusMessage=this.oikonomikiBankMessages[s],"TRANSACTION_COMPLETED"==s){if(this.bankStatusMessageClass="success",t){let i=new Ui;i.bankTransactionId=t,this.katastimataNgSrv.markDilosiWebExoflisi(i).subscribe(()=>{this.reloadData.emit(!0)})}}else this.bankStatusMessageClass="error"}(0,n.RA)(this.cdr)})}ngOnChanges(i){i&&i.diloseisSaved&&(this.diloseisSaved=i.diloseisSaved.currentValue,this.diloseisSaved&&this.diloseisSaved.length&&(this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumToPay=0,this.diloseisSaved.forEach(i=>{this.sumYpokeimeno+=i.ypokeimenoPoso,this.sumTelos+=i.telosPoso,this.sumProstimo+=i.prostimoPoso,this.sumToPay+=i.telosPoso+i.prostimoPoso})),(0,n.RA)(this.cdr))}ngOnDestroy(){this.onDestroy.next()}onAllDebitsSelected(){this.diloseisSaved.forEach(i=>{i.isMideniki||(i.isChecked=this.isAllDebitsChecked)}),(0,n.RA)(this.cdr),this._calculateTotalAmounts()}onEdit(i){this.isEditModalOpen=!0,this.selectedDilosi=(0,n.p$)(i),(0,n.RA)(this.cdr)}updateDilosiInTable(i){if(i){let s=this.diloseisSaved.findIndex(s=>s.dilosiId==i.dilosiId);this.diloseisSaved[s]=i,(0,n.RA)(this.cdr)}}onCreatePaymentRequest(i){var s;this.initPaymentMethods=!0,this.isLoadingResponse=!0,this.paymentRequestDto=void 0,this.paymentResponseDto=void 0,this.modelPaymentInfo=[],(0,n.RA)(this.cdr),!this.requestObs||!this.requestObs.length||this.modelToPayInfo&&0!=this.modelToPayInfo.length?this.requestObs&&0!=(null===(s=this.requestObs)||void 0===s?void 0:s.length)||!this.modelToPayInfo||!this.modelToPayInfo.length?(0,d.D)(this.requestObs).pipe((0,u.w)(s=>s&&s[0]?(s.forEach(i=>{this.modelPaymentInfo=[...this.modelPaymentInfo,i]}),this.modelToPayInfo.forEach(i=>{let s=new Ti;s.paymentCode=i.kodikosPliromisDias,s.paymentAmount=i.prostimoPoso+i.telosPoso,s.epixirisiOfeiletisEponimia=this.epixeirisiInfo.ofeiletisEponimia,s.paymentCaption=i.dilosiDescription,this.modelPaymentInfo=[...this.modelPaymentInfo,s]}),this.paymentRequestDto=this._createPaymentRequest(this.modelPaymentInfo,i),this.paymentSrv.addPaymentRequest(this.financeApiUrl,this.paymentRequestDto)):(0,l.of)(!1))).subscribe(i=>{i?(this.paymentResponseDto=i,this.onDoPaymentSubject.next(this.paymentResponseDto)):((0,n.RA)(this.cdr),this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),this.isLoadingResponse=!1,(0,n.RA)(this.cdr)}):(this.modelPaymentInfo=[],this.diloseisSaved.forEach(i=>{if(i.isChecked){let s=new Ti;s.paymentCode=i.kodikosPliromisDias,s.paymentAmount=i.prostimoPoso+i.telosPoso,s.epixirisiOfeiletisEponimia=this.epixeirisiInfo.ofeiletisEponimia,s.paymentCaption=i.dilosiDescription,this.modelPaymentInfo=[...this.modelPaymentInfo,s]}}),this.paymentRequestDto=this._createPaymentRequest(this.modelPaymentInfo,i),this.paymentSrv.addPaymentRequest(this.financeApiUrl,this.paymentRequestDto).subscribe(i=>{i?(this.paymentResponseDto=i,this.onDoPaymentSubject.next(this.paymentResponseDto)):((0,n.RA)(this.cdr),this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),this.isLoadingResponse=!1,(0,n.RA)(this.cdr)})):(0,d.D)(this.requestObs).pipe((0,u.w)(s=>s&&s[0]?(s.forEach(i=>{this.modelPaymentInfo=[...this.modelPaymentInfo,i]}),this.paymentRequestDto=this._createPaymentRequest(this.modelPaymentInfo,i),this.paymentSrv.addPaymentRequest(this.financeApiUrl,this.paymentRequestDto)):(0,l.of)(!1))).subscribe(i=>{i?(this.paymentResponseDto=i,this.onDoPaymentSubject.next(this.paymentResponseDto)):((0,n.RA)(this.cdr),this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),this.isLoadingResponse=!1,(0,n.RA)(this.cdr)})}_getBankMessages(){return this._http.get(this.financeApiUrl+"/api/Banks/BankMessages")}_createPaymentRequest(i,s){let t={tinRelated:this.userInfo.tin,relatedCallbackUrl:this.relatedCallbackUrl,billingAddressCity:this.userInfo.address_city,billingAddressCountryCode:this.userInfo.address_country_code,billingAddressZip:this.userInfo.address_zip,billingAddress:this.userInfo.address,userEmail:this.userInfo.email,userPhone:this.userInfo.phone_number,paymentMethodKey:s.key,entries:[]};return"PIRBGRAA"===s.key&&(t.billingAddressCountryCode=null),i.forEach(i=>{t.entries.push({remittanceInfo:i.paymentCode,amount:i.paymentAmount,debtorName:i.epixirisiOfeiletisEponimia,tin:this.userInfo.tin,description:i.paymentCaption})}),t}_calculateTotalAmounts(){this.requestObs=[],this.modelToPayInfo=[];let i=0,s=0,t=0,e=0,o="\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2";this.diloseisSaved.forEach(o=>{if(o.isChecked){e++,i+=o.ypokeimenoPoso,s+=o.telosPoso,t+=o.prostimoPoso;let n={language:"el",ypokeimenoPoso:+o.ypokeimenoPoso,dilosiId:+o.dilosiId,hmerominiaDilosis:new Date};o.oikothenId||o.xrimatikosKatalogosEggrafesProstimoId||o.xrimatikosKatalogosEggrafesTelosId||1!=o.statusId&&2!=o.statusId&&6!=o.statusId?this.modelToPayInfo=[...this.modelToPayInfo,o]:this.requestObs=[...this.requestObs,this.katastimataNgSrv.getDilosiWebPaymentInfo(n)]}}),o=1==e?"\u03b4\u03ae\u03bb\u03c9\u03c3\u03b7":"\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",this.calculatedChecked={countChecked:e,countText:o,checkedYpokeimeno:i,checkedTelos:s,checkedProstimo:t},(0,n.RA)(this.cdr)}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(ki),o.Y36(n.te),o.Y36(n.MJ),o.Y36(o.sBO),o.Y36(m.gz),o.Y36(e.eN))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-katastimata-saved"]],inputs:{diloseisSaved:"diloseisSaved",diloseisToPay:"diloseisToPay",userInfo:"userInfo",epixeirisiInfo:"epixeirisiInfo",onlinePaymentsSettingsCompany:"onlinePaymentsSettingsCompany",isLoading:"isLoading",applicationUrl:"applicationUrl"},outputs:{reloadData:"reloadData"},features:[o.TTD],decls:13,vars:20,consts:[[3,"severity","text","styleClass",4,"ngIf"],["class","debits-info__selected-debits",4,"ngIf"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],[4,"ngIf"],["class","screen-msg",4,"ngIf"],["selectedDebits",""],["header","\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2","appendTo","body","resizable","false","modal","true",3,"visible","draggable","closable","visibleChange","onHide"],[3,"diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved",4,"ngIf"],[3,"severity","text","styleClass"],[1,"debits-info__selected-debits"],[4,"ngTemplateOutlet"],[1,"fixed-width-col-40","justify-content-center"],[3,"binary","ngModel","ngModelChange","onChange"],[1,"fixed-width-col-230"],[1,"fixed-width-col-100"],[1,"fixed-width-col-120"],["alignFrozen","right","pFrozenColumn","",1,"fixed-width-col-60",3,"frozen"],[1,"fixed-width-col-40","text-center"],[1,"p-column-title"],[3,"binary","ngModel","disabled","ngModelChange","onChange"],[1,"fixed-width-col-100","text-center"],["class","fas fa-check",4,"ngIf"],[1,"fixed-width-col-120","text-right"],["alignFrozen","right","pFrozenColumn","",1,"fixed-width-col-60","text-center",3,"frozen"],["type","button",1,"btn","btn-primary","btn-sm","m-0",3,"click"],[1,"far","fa-edit"],[1,"fas","fa-check"],["colspan","9"],["colspan","4",1,"fixed-width-col-490"],[1,"fixed-width-col-60"],[1,"mt-2","mx-auto","d-flex","flex-column","justify-content-center",2,"width","350px"],[3,"condition","customClass"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","onPayBtnClick"],[1,"screen-msg"],[1,"totalPoso"],[1,"d-flex","total-selected-cost"],["id","sumTotalToBank",1,"totalPoso"],[3,"diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved"]],template:function(i,s){1&i&&(o.YNc(0,ei,1,3,"p-message",0),o.YNc(1,ni,2,1,"div",1),o.TgZ(2,"p-table",2),o.YNc(3,ai,19,3,"ng-template",3),o.YNc(4,ri,44,34,"ng-template",4),o.YNc(5,di,3,0,"ng-template",5),o.YNc(6,pi,22,37,"ng-template",6),o.qZA(),o.YNc(7,ci,6,7,"ng-container",7),o.YNc(8,ui,3,1,"div",8),o.YNc(9,mi,20,20,"ng-template",null,9,o.W1O),o.TgZ(11,"p-dialog",10),o.NdJ("visibleChange",function(i){return s.isEditModalOpen=i})("onHide",function(){return s.isEditModalOpen=!1,s.selectedDilosi=null}),o.YNc(12,gi,1,4,"app-katastimata-create-dilosi",11),o.qZA()),2&i&&(o.Q6J("ngIf",s.bankStatusMessage),o.xp6(1),o.Q6J("ngIf",s.calculatedChecked.countChecked>0&&!s.isLoading),o.xp6(1),o.Q6J("value",s.diloseisSaved)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",s.isLoading)("totalRecords",null==s.diloseisSaved?null:s.diloseisSaved.length),o.xp6(5),o.Q6J("ngIf",s.calculatedChecked.countChecked>0&&!s.isLoading),o.xp6(1),o.Q6J("ngIf",s.errorMessageProfile),o.xp6(3),o.Akn(o.DdM(19,fi)),o.Q6J("visible",s.isEditModalOpen)("draggable",!1)("closable",!0),o.xp6(1),o.Q6J("ngIf",s.isEditModalOpen&&s.selectedDilosi))},directives:[b.O5,y.iA,x.jx,A.V,g.q,b.tP,Z.XZ,P.JJ,P.On,y.on,n.IE,n.Hl,Di],pipes:[b.uU,b.H9],styles:[".fixed-width-col-60[_ngcontent-%COMP%]{width:60px!important;min-width:60px!important}.fixed-width-col-80[_ngcontent-%COMP%]{width:80px!important;min-width:80px!important}.fixed-width-col-100[_ngcontent-%COMP%]{width:100px!important;min-width:100px!important}.fixed-width-col-120[_ngcontent-%COMP%]{width:120px!important;min-width:120px!important}.fixed-width-col-170[_ngcontent-%COMP%]{width:170px!important;min-width:170px!important}.fixed-width-col-220[_ngcontent-%COMP%]{width:220px!important;min-width:220px!important}.fixed-width-col-230[_ngcontent-%COMP%]{width:230px!important;min-width:230px!important}.fixed-width-col-380[_ngcontent-%COMP%]{width:380px!important;min-width:380px!important}.fixed-width-col-490[_ngcontent-%COMP%]{width:490px!important;min-width:490px!important}"],changeDetection:0}),i})(),Mi=(()=>{class i{constructor(i,s,t,e,o,a){this.katastimataNgSrv=i,this.toasterSrv=s,this.cdr=t,this._http=e,this.router=o,this.route=a,this.diloseisPayed=[],this.countriesList=[],this.HttpStatusCodeEnum=n.WE,this.index=0,this.isLoading=!0,this.isAddingNewDilosi=!1,this.onlinePaymentsSettingsCompany="1",this.createPaymentCodeDias=!1,this.applicationUrl="",this.financeApiUrl="",this.returnUrl="",this.onDestroy=new r.xQ,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.applicationUrl=(0,n.Qj)(AppConfOptions.application_url),this.financeApiUrl=(0,n.Qj)(AppConfOptions.epayments_api),this.returnUrl=encodeURI(this.applicationUrl+"/katastimata/receipts")):(this.applicationUrl=(0,n.Qj)(AppConfOptions.applicationUrl),this.financeApiUrl=(0,n.Qj)(AppConfOptions.financeApi),this.returnUrl=encodeURI(this.applicationUrl+"/plugin/receipts"))}ngOnInit(){this.katastimataNgSrv.initUserInfo(),this.katastimataNgSrv.userInfo$.pipe((0,u.w)(i=>{if(i){if(this.userInfo=i,"undefined"!=typeof AuthConfOptions){let i=(0,n.Qj)(AuthConfOptions.stsServer);return this._http.get(i+"/api/general/GetCountries")}return this._http.get("https://auth.dev.egritosgroup.gr/api/general/GetCountries")}return(0,l.of)(!1)}),(0,c.R)(this.onDestroy)).subscribe(i=>{i&&(this.countriesList=i,this.userInfo.address_country_code&&""!=this.userInfo.address_country_code&&(this.userInfo.address_country_num=this.countriesList.find(i=>i.Alpha2Code==this.userInfo.address_country_code).NumericCode.toString())),this.router.url.includes("receipts")?this.index=0:this.router.url.includes("saved")&&(this.index=1),(0,n.RA)(this.cdr)}),this.katastimataNgSrv.getEpixeirisiInfo(this.userInfo.tin).pipe((0,u.w)(i=>i&&i.statusCode==this.HttpStatusCodeEnum.Ok?(this.epixeirisiInfo=i,this.katastimataNgSrv.getDiloseisWebInfo(this.userInfo.tin)):(this.toasterSrv.showError("",i.message),(0,l.of)(!1))),(0,u.w)(i=>i?(this.diloseisToPay=i,(!this.diloseisToPay||0==this.diloseisToPay.length)&&this.toasterSrv.showWarning("","\u0394\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03b3\u03af\u03bd\u03b5\u03b9 \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd."),this.katastimataNgSrv.getPluginCustomerOptions()):(0,l.of)(!1))).subscribe(i=>{if(i){let s=i;if(s){if(s.configurationOptions&&s.configurationOptions.length&&s.configurationOptions.some(i=>"PluginCustomerSpecificOptions:OnlinePayments"==i.id)&&(this.onlinePaymentsSettingsCompany=s.configurationOptions.find(i=>"PluginCustomerSpecificOptions:OnlinePayments"==i.id).value),this.diloseisSaved=this.diloseisToPay.filter(i=>6==i.statusId),s.configurationOptions&&s.configurationOptions.length&&s.configurationOptions.some(i=>"PluginCustomerSpecificOptions:CreatePaymentCodeDias"==i.id)){let i=s.configurationOptions.find(i=>"PluginCustomerSpecificOptions:CreatePaymentCodeDias"==i.id).value;this.createPaymentCodeDias=!!(i="true")}(0,n.RA)(this.cdr),this._loadData()}else this.toasterSrv.showError("","\u0394\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03b3\u03af\u03bd\u03b5\u03b9 \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03c1\u03c5\u03b8\u03bc\u03af\u03c3\u03b5\u03c9\u03bd \u03c4\u03b7\u03c2 \u03b5\u03c6\u03b1\u03c1\u03bc\u03bf\u03b3\u03ae\u03c2.")}this.isLoading=!1,(0,n.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next()}onCreateNewDilosiClicked(){this.isAddingNewDilosi=!0,(0,n.RA)(this.cdr)}onTabChanged(i){0==i.index?this.router.navigate(["./receipts"],{relativeTo:this.route,queryParamsHandling:"preserve"}):this.router.navigate(["./saved"],{relativeTo:this.route.parent})}onReloadSaved(i){this.isLoading=!0,(0,n.RA)(this.cdr),this.katastimataNgSrv.getDiloseisWebInfo(this.userInfo.tin).subscribe(i=>{i&&(this.diloseisToPay=i,this.diloseisSaved=this.diloseisToPay.filter(i=>6==i.statusId),(0,n.RA)(this.cdr),this._loadData()),this.isLoading=!1,(0,n.RA)(this.cdr)})}_loadData(){this.isLoading=!0,(0,n.RA)(this.cdr),this.katastimataNgSrv.getDiloseisWebPayedInfo(this.userInfo.tin).subscribe(i=>{i?this.diloseisPayed=i:this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b5\u03be\u03bf\u03c6\u03bb\u03b7\u03bc\u03ad\u03bd\u03c9\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd."),this.isLoading=!1,(0,n.RA)(this.cdr)})}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(ki),o.Y36(n.MJ),o.Y36(o.sBO),o.Y36(e.eN),o.Y36(m.F0),o.Y36(m.gz))},i.\u0275cmp=o.Xpm({type:i,selectors:[["lib-katastimata-ng"]],decls:6,vars:13,consts:[["severity","error","text","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03ce \u03b4\u03bf\u03ba\u03b9\u03bc\u03ac\u03c3\u03c4\u03b5 \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1!",4,"ngIf"],[4,"ngIf"],["header","\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2","appendTo","body","resizable","false","modal","true",3,"visible","draggable","closable","visibleChange"],[3,"epixeirisiInfo","diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved",4,"ngIf"],["severity","error","text","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03ce \u03b4\u03bf\u03ba\u03b9\u03bc\u03ac\u03c3\u03c4\u03b5 \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1!"],["class","mb-3 py-1 d-flex flex-wrap",4,"ngIf"],[3,"activeIndex","onChange"],["header","\u0399\u03c3\u03c4\u03bf\u03c1\u03b9\u03ba\u03cc \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ce\u03bd"],[3,"diloseisPayed","diloseisToPay","userInfo","isLoading","reloadData",4,"ngIf"],["header","\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2"],[3,"diloseisSaved","diloseisToPay","userInfo","epixeirisiInfo","onlinePaymentsSettingsCompany","isLoading","applicationUrl","reloadData"],[1,"mb-3","py-1","d-flex","flex-wrap"],["class","m-0 mr-1 d-inline-flex align-items-center eponimia-title",4,"ngIf"],["class","btn btn-primary btn-sm m-0 ml-auto","type","button",3,"click",4,"ngIf"],[1,"m-0","mr-1","d-inline-flex","align-items-center","eponimia-title"],["type","button",1,"btn","btn-primary","btn-sm","m-0","ml-auto",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[3,"diloseisPayed","diloseisToPay","userInfo","isLoading","reloadData"],[3,"epixeirisiInfo","diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved"]],template:function(i,s){1&i&&(o.YNc(0,yi,1,0,"p-message",0),o.ALo(1,"async"),o.YNc(2,Pi,7,10,"ng-container",1),o.ALo(3,"async"),o.TgZ(4,"p-dialog",2),o.NdJ("visibleChange",function(i){return s.isAddingNewDilosi=i}),o.YNc(5,Ii,1,5,"app-katastimata-create-dilosi",3),o.qZA()),2&i&&(o.Q6J("ngIf",!o.lcZ(1,8,s.katastimataNgSrv.userInfo$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(3,10,s.katastimataNgSrv.userInfo$)),o.xp6(2),o.Akn(o.DdM(12,fi)),o.Q6J("visible",s.isAddingNewDilosi)("draggable",!1)("closable",!0),o.xp6(1),o.Q6J("ngIf",s.isAddingNewDilosi))},directives:[b.O5,A.V,g.q,f.xf,f.x4,Si,wi,Di],pipes:[b.Ov],encapsulation:2,changeDetection:0}),i})();const Oi=[{path:"",component:Mi,children:[{path:"",pathMatch:"full",redirectTo:"receipts"},{path:"receipts",component:wi},{path:"saved",component:Si}]}];let Fi=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[m.Bz.forChild(Oi)],m.Bz]}),i})();const Ri={align:"right",allowNegative:!1,decimal:",",precision:2,prefix:"",suffix:"\u20ac",thousands:"."};let Ni=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({providers:[{provide:k.TN,useValue:Ri}],imports:[[b.ez,P.u5,Fi,f.LU,y.U$,Z.nD,A.S,g.O,q.Q,U.d,k.zh,I.A0,n.cA,n.pL,T.ny.forRoot()]]}),i})();var Ei=t(43645),Li=t(88052),Ji=t(12622),Qi=t(41886);function Yi(i,s){1&i&&o._UZ(0,"p-message",2)}function Wi(i,s){if(1&i&&(o.TgZ(0,"p-panel",5),o._UZ(1,"div",6),o.ALo(2,"decodeHtmlString"),o.qZA()),2&i){const i=o.oxw(2);o.Q6J("styleClass","tab-msg mb-3")("toggleable",!0),o.xp6(1),o.Q6J("innerHTML",o.lcZ(2,3,i.tabMsg),o.oJD)}}function ji(i,s){if(1&i&&(o.TgZ(0,"div",3),o.YNc(1,Wi,3,5,"p-panel",4),o._UZ(2,"lib-katastimata-ng"),o.qZA()),2&i){const i=o.oxw();o.xp6(1),o.Q6J("ngIf",i.tabMsg)}}const Bi=[{path:"",component:(()=>{class i{constructor(i,s,t){this.oidcSecuritySrv=i,this.cookieService=s,this.appCacheSrv=t,this.onDestroy=new r.xQ,this.selectedLang="el"}ngOnInit(){let i;for(let s=0;s<window.sessionStorage.length;s++)window.sessionStorage.key(s).includes("authzData")&&(i=window.sessionStorage.getItem(window.sessionStorage.key(s)).replace(/"/g,""));"true"==window.sessionStorage.getItem("_isAuthorized")&&(this.isAuthorized=!0,i&&""!=i&&this.cookieService.set("katastimata-egritos-token",i)),this.appCacheSrv.selectedLang$.pipe((0,c.R)(this.onDestroy)).subscribe(i=>{i&&(this.selectedLang=i),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.katastimata_tab_info_en&&""!=AppConfOptions.katastimata_tab_info_en?this.tabMsg=AppConfOptions.katastimata_tab_info_en:AppConfOptions.katastimata_tab_info&&""!=AppConfOptions.katastimata_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.katastimata_tab_info)})}ngOnDestroy(){this.onDestroy.next(null)}}return i.\u0275fac=function(s){return new(s||i)(o.Y36(T.J_),o.Y36(n.N_),o.Y36(Ji.g))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-katastimata"]],decls:2,vars:2,consts:[["severity","warn","text","\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c5\u03bd\u03b4\u03b5\u03b8\u03b5\u03af\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b7\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03c5\u03c0\u03b7\u03c1\u03b5\u03c3\u03b9\u03ce\u03bd.",4,"ngIf"],["class","card p-2",4,"ngIf"],["severity","warn","text","\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c5\u03bd\u03b4\u03b5\u03b8\u03b5\u03af\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b7\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03c5\u03c0\u03b7\u03c1\u03b5\u03c3\u03b9\u03ce\u03bd."],[1,"card","p-2"],["header","\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2",3,"styleClass","toggleable",4,"ngIf"],["header","\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2",3,"styleClass","toggleable"],[3,"innerHTML"]],template:function(i,s){1&i&&(o.YNc(0,Yi,1,0,"p-message",0),o.YNc(1,ji,3,1,"div",1)),2&i&&(o.Q6J("ngIf",!s.isAuthorized),o.xp6(1),o.Q6J("ngIf",s.isAuthorized))},directives:[b.O5,g.q,Mi,q.s],pipes:[Qi.o],encapsulation:2}),i})(),children:[{path:"",loadChildren:()=>Promise.resolve().then(t.bind(t,97394)).then(i=>i.PublicLibLoader)}]}];let Hi=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[m.Bz.forChild(Bi)],m.Bz]}),i})(),Ki=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[Li.m,Ei.IJ,Hi,Ni]]}),i})(),zi=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[Ni]]}),i})()}}]);