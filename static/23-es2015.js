(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[23],{45123:function(t,e,n){var i,o,r;!function(s){if("object"==typeof t.exports){var c=s(0,e);void 0!==c&&(t.exports=c)}else o=[n,e],void 0!==(r="function"==typeof(i=s)?i.apply(e,o):i)&&(t.exports=r)}(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=void 0;e.default=[[["\u03c0\u03c1\u03c9\u03af","\u03bc\u03b5\u03c3\u03b7\u03bc.","\u03b1\u03c0\u03cc\u03b3.","\u03b2\u03c1\u03ac\u03b4\u03c5"],n,["\u03c4\u03bf \u03c0\u03c1\u03c9\u03af","\u03c4\u03bf \u03bc\u03b5\u03c3\u03b7\u03bc\u03ad\u03c1\u03b9","\u03c4\u03bf \u03b1\u03c0\u03cc\u03b3\u03b5\u03c5\u03bc\u03b1","\u03c4\u03bf \u03b2\u03c1\u03ac\u03b4\u03c5"]],[["\u03c0\u03c1\u03c9\u03af","\u03bc\u03b5\u03c3\u03b7\u03bc.","\u03b1\u03c0\u03cc\u03b3.","\u03b2\u03c1\u03ac\u03b4\u03c5"],n,["\u03c0\u03c1\u03c9\u03af","\u03bc\u03b5\u03c3\u03b7\u03bc\u03ad\u03c1\u03b9","\u03b1\u03c0\u03cc\u03b3\u03b5\u03c5\u03bc\u03b1","\u03b2\u03c1\u03ac\u03b4\u03c5"]],[["04:00","12:00"],["12:00","17:00"],["17:00","20:00"],["20:00","04:00"]]]})},26023:function(t,e,n){"use strict";n.r(e),n.d(e,{NotificationsModule:function(){return H}});var i=n(46019),o=n(35660),r=n(37716),s=n(54655),c=n(25917),a=n(79765),u=n(35758),p=n(91841),l=n(88002),f=n(5304),d=n(3679),h=n(22290),g=n(38583),b=n(49421),w=n.n(b),m=n(45123),y=n.n(m),x=n(86640),v=n(55396),T=n(33013);function S(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"i"),r.BQk()),2&t){const t=r.oxw(2).$implicit;r.xp6(1),r.Gre("fa-2x ",t.GroupIcon,"")}}function N(t,e){if(1&t&&(r.YNc(0,S,2,3,"ng-container",4),r.TgZ(1,"div",5),r.TgZ(2,"h4"),r._uU(3),r.qZA(),r.TgZ(4,"span"),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"div",6),r._UZ(7,"i",7),r.qZA()),2&t){const t=r.oxw().$implicit,e=r.oxw();r.Q6J("ngIf",t.GroupIcon),r.xp6(3),r.Oqu(t.Perigrafi),r.xp6(2),r.Oqu(e.calcEnabledTypes(t.SubscriberEnabledTypes))}}function Z(t,e){if(1&t&&(r.TgZ(0,"span",12),r._uU(1),r.qZA()),2&t){const t=r.oxw(2).$implicit;r.xp6(1),r.hij(" ",t.ExtraInfoForSubscribers,"")}}function I(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",13),r.TgZ(1,"label",14),r._uU(2),r.qZA(),r.TgZ(3,"input",15),r.NdJ("change",function(e){r.CHM(t);const n=r.oxw(2).$implicit;return r.oxw().onInputChange(e,n,n.SupportedTypes)}),r.qZA(),r._UZ(4,"label",16),r.qZA()}if(2&t){const t=r.oxw(2).$implicit;r.xp6(1),r.MGl("for","",t.NotificationGroupId,"-all"),r.xp6(1),r.hij("",0==t.SubscriberEnabledTypes?"\u0395\u03bd\u03b5\u03c1\u03b3\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7":"\u0391\u03c0\u03b5\u03bd\u03b5\u03c1\u03b3\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7"," \u038c\u03bb\u03c9\u03bd"),r.xp6(1),r.MGl("id","",t.NotificationGroupId,"-all"),r.Q6J("checked",0!=t.SubscriberEnabledTypes),r.xp6(1),r.MGl("for","",t.NotificationGroupId,"-all")}}function A(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",17),r._UZ(2,"label",18),r.TgZ(3,"input",15),r.NdJ("change",function(e){r.CHM(t);const n=r.oxw().$implicit,i=r.oxw(2).$implicit;return r.oxw().onInputChange(e,i,n.Value)}),r.qZA(),r._UZ(4,"label",16),r.qZA(),r.BQk()}if(2&t){const t=r.oxw().$implicit,e=r.oxw(2).$implicit,n=r.oxw();r.xp6(2),r.hYB("for","",e.NotificationGroupId,"-",t.Value,""),r.Q6J("innerHTML",t.Metadata.Description+t.DisplayText,r.oJD),r.xp6(1),r.hYB("id","",e.NotificationGroupId,"-",t.Value,""),r.Q6J("checked",n.calcIfChecked(e,t.Value)),r.xp6(1),r.hYB("for","",e.NotificationGroupId,"-",t.Value,"")}}function _(t,e){if(1&t&&(r.ynx(0),r.YNc(1,A,5,8,"ng-container",4),r.BQk()),2&t){const t=e.$implicit,n=r.oxw(2).$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.isSupportedType(n.SupportedTypes,t.Value))}}function E(t,e){if(1&t&&(r.TgZ(0,"div",8),r.YNc(1,Z,2,1,"span",9),r.TgZ(2,"div"),r.TgZ(3,"b",10),r._uU(4,"\u03a0\u03c9\u03c2 \u03b8\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03bb\u03b1\u03bc\u03b2\u03ac\u03bd\u03b5\u03c4\u03b5 \u03b1\u03c5\u03c4\u03ad\u03c2 \u03c4\u03b9\u03c2 \u03b5\u03b9\u03b4\u03bf\u03c0\u03bf\u03b9\u03ae\u03c3\u03b5\u03b9\u03c2"),r.qZA(),r.YNc(5,I,5,5,"div",11),r.qZA(),r.YNc(6,_,2,1,"ng-container",1),r.qZA()),2&t){const t=r.oxw().$implicit,e=r.oxw();r.xp6(1),r.Q6J("ngIf",t.ExtraInfoForSubscribers),r.xp6(1),r.Tol(t.CanUnSubscribe?"has-switch":""),r.xp6(3),r.Q6J("ngIf",t.CanUnSubscribe),r.xp6(1),r.Q6J("ngForOf",e.notificationEnumTypeValues)}}function G(t,e){1&t&&(r.TgZ(0,"p-accordionTab"),r.YNc(1,N,8,3,"ng-template",2),r.YNc(2,E,7,5,"ng-template",3),r.qZA())}let U=(()=>{class t{constructor(t){this.toastr=t}show(t,e,n){e&&this.toastr[n](e,t,{progressBar:!0,onActivateTick:!0})}showError(t,e){this.show(t,e,"error")}showInfo(t,e){this.show(t,e,"info")}showSuccess(t,e){this.show(t,e,"success")}showWarning(t,e){this.show(t,e,"warning")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(h._W))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(h._W))},token:t,providedIn:"root"}),t})(),$=(()=>{class t{constructor(t){this.toasterSrv=t,this.catchBadResponse=t=>{let e="";if(t.error instanceof Error)e=`\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: ${t.message}`;else if(void 0!==t.error)e=`\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: ${t.message}`;else switch(t.status){case 403:e=`\u0394\u03b5\u03bd \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b4\u03b9\u03ba\u03b1\u03af\u03c9\u03bc\u03b1 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7\u03c2 \u03c3\u03b5 \u03b1\u03c5\u03c4\u03ae \u03c4\u03b7\u03bd \u03bf\u03bd\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1. error ${t.status}`;break;case 401:e=`\u0394\u03b5\u03bd \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b4\u03b9\u03ba\u03b1\u03af\u03c9\u03bc\u03b1 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7\u03c2. error  \n ${t.status}`;break;default:e=`Backend returned code ${t.status}, body was: ${void 0!==t.body?t.body.error:void 0!==t.message?t.message:""}`}return this.toasterSrv.showError("",`${e}`),(0,c.of)(!1)}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(U))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(U))},token:t,providedIn:"root"}),t})(),k=(()=>{class t extends class{constructor(t,e){this.http=t,this.exceptionSrv=e,this.getBaseUrl=()=>this.baseUrl,this.baseUrl+="api",this.baseUrl="undefined"!=typeof AppConfOptions&&AppConfOptions.notifications_api?AppConfOptions.notifications_api:"/",this.baseUrl+="api/"}}{constructor(t,e,n){super(n,t),this.exceptionSrv=t,this.toasterSrv=e,this.http=n}GetAllNotificationsTypes(t){return this.http.get(`${this.baseUrl}Notifications/GetAllNotificationsTypes/${t}`)}GetMySubscriptions(){return this.http.get(`${this.baseUrl}Notifications/GetMySubscriptions`)}UpdateSubscriptionPoliti(t){return this.http.post(`${this.baseUrl}Notifications/UpdateSubscriptionPoliti`,t).pipe((0,l.U)(t=>t),(0,f.K)(t=>function(t,e){let n="";if(t.error instanceof Error&&t.error&&t.error.Message||void 0!==t.error&&t.error&&t.error.Message)n=`${t.error.Message}`;else switch(t.status){case 400:n=t.error;break;case 403:n="\u0394\u03b5\u03bd \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b4\u03b9\u03ba\u03b1\u03af\u03c9\u03bc\u03b1 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7\u03c2 \u03c3\u03b5 \u03b1\u03c5\u03c4\u03ae \u03c4\u03b7\u03bd \u03bf\u03bd\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1. \n";break;case 401:n="\u0394\u03b5\u03bd \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b4\u03b9\u03ba\u03b1\u03af\u03c9\u03bc\u03b1 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7\u03c2. \n",setTimeout(()=>window.location.reload(),1e3);break;default:n=`\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1 \u03bc\u03b5 \u03ba\u03c9\u03b4\u03b9\u03ba\u03cc ${t.status}, \u03ba\u03b1\u03b9 \u03c0\u03b5\u03c1\u03b9\u03b5\u03c7\u03cc\u03bc\u03b5\u03bd\u03bf: ${void 0!==t.body?t.body.error:void 0!==t.Message?t.Message:""}`}return console.log("ERRORING: ",t),e.showError("\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1",`${n}`),(0,c.of)(!1)}(t,this.toasterSrv)))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($),r.LFG(U),r.LFG(p.eN))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)($),(0,r.LFG)(U),(0,r.LFG)(p.eN))},token:t,providedIn:"root"}),t})(),F=(()=>{class t{constructor(t,e,n,i){this.notificationsNgSrv=t,this.toasterSrv=e,this.router=n,this.route=i,this.model=[],this.onDestroy=new a.xQ,this.index=0,this.isLoading=!0}ngOnInit(){}ngOnDestroy(){this.onDestroy.next()}_loadData(){}onTabChanged(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(k),r.Y36(U),r.Y36(s.F0),r.Y36(s.gz))},t.\u0275cmp=r.Xpm({type:t,selectors:[["lib-notifications-ng"]],decls:2,vars:0,template:function(t,e){1&t&&(r._UZ(0,"lib-registration"),r._UZ(1,"router-outlet"))},directives:function(){return[C,s.lC]},encapsulation:2}),t})();class J{}let B=(()=>{class t{constructor(t){this.notificationsNgSrv=t,this.onDestroy=new a.xQ}ngOnInit(){(0,u.D)([this.notificationsNgSrv.GetMySubscriptions(),this.notificationsNgSrv.GetAllNotificationsTypes("NotificationType")]).subscribe(t=>{t&&(this.model=t[0],this.notificationEnumTypeValues=t[1])})}ngOnDestroy(){}toggleArrow(t){let e=document.getElementById(t.originalEvent.srcElement.id).getElementsByClassName("arrow")[0];e.children[0].className=e.children[0].classList.contains("fa-caret-down")?"fas fa-caret-up fa-2x":"fas fa-caret-down fa-2x"}isSupportedType(t,e){return!!(t&e)}onInputChange(t,e,n){var i=new J;i.NotificationGroupId=e.NotificationGroupId,i.SubscriberEnabledTypes=e.SubscriberEnabledTypes,e.SubscriberEnabledTypes&n?i.SubscriberEnabledTypes&=~n:i.SubscriberEnabledTypes|=n,this.notificationsNgSrv.UpdateSubscriptionPoliti(i).subscribe(n=>{n?e.SubscriberEnabledTypes=i.SubscriberEnabledTypes:t.target.checked=!0})}calcEnabledTypes(t){var e="";for(let n=0;n<this.notificationEnumTypeValues.length;n++){const i=this.notificationEnumTypeValues[n];t&i.Value&&(e+=(e.length>0?", ":"")+i.DisplayText)}return e}calcIfChecked(t,e){return t.SubscriberEnabledTypes&e}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(k))},t.\u0275cmp=r.Xpm({type:t,selectors:[["lib-mailing-lists"]],decls:2,vars:2,consts:[["expandIcon","","collapseIcon","",3,"multiple","onOpen","onClose"],[4,"ngFor","ngForOf"],["pTemplate","header"],["pTemplate","content"],[4,"ngIf"],[1,"notgroup-title"],[1,"arrow"],[1,"fas","fa-caret-down","fa-2x"],[1,"card","card-body"],["class","extra-info",4,"ngIf"],[1,"descr"],["class","switch all",4,"ngIf"],[1,"extra-info"],[1,"switch","all"],[1,"label",3,"for"],["type","checkbox",1,"input",3,"id","checked","change"],[1,"slider",3,"for"],[1,"switch"],[1,"label",3,"for","innerHTML"]],template:function(t,e){1&t&&(r.TgZ(0,"p-accordion",0),r.NdJ("onOpen",function(t){return e.toggleArrow(t)})("onClose",function(t){return e.toggleArrow(t)}),r.YNc(1,G,3,0,"p-accordionTab",1),r.qZA()),2&t&&(r.Q6J("multiple",!0),r.xp6(1),r.Q6J("ngForOf",e.model))},directives:[v.UQ,g.sg,v.US,T.jx,g.O5],encapsulation:2}),t})(),C=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["lib-registration"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"lib-mailing-lists")},directives:[B],encapsulation:2}),t})();const Y=[{path:"",component:F,pathMatch:"full"},{path:"Notifications",component:F,pathMatch:"full"}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.Bz.forChild(Y)],s.Bz]}),t})();(0,g.qS)(w(),"el",y());const Q=[v.fx];let q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:r.soG,useValue:"el"}],imports:[[g.ez,d.u5,O,x.A0,...Q,h.Rh.forRoot()]]}),t})();var M=n(68214),D=n(43190),L=n(74868),V=n(60394);function z(t,e){1&t&&(r.ynx(0),r.TgZ(1,"div",2),r._UZ(2,"lib-notifications-ng"),r.qZA(),r.BQk())}function j(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"app-afmnotfound",1),r.YNc(2,z,3,0,"ng-container",0),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("afmNotFound",t.afmNotFound),r.xp6(1),r.Q6J("ngIf",!t.afmNotFound)}}const R=[{path:"",component:(()=>{class t{constructor(t){this.oidcSecuritySrv=t,this.afmNotFound=!1}ngOnInit(){this.oidcSecuritySrv.isAuthenticated$.pipe((0,D.w)(t=>(this.isAuthorized=null!=t&&t.isAuthenticated,this.oidcSecuritySrv.userData$))).subscribe(t=>{t&&t.userData&&(!t.userData.tin||(0,M.Ew)(t.userData.tin))&&1==AppConfOptions.notifications_afm_required&&(this.afmNotFound=!0)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(L.J_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-notifications"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"afmNotFound"],[1,"notifications-container","bg-white",2,"padding","30px"]],template:function(t,e){1&t&&r.YNc(0,j,3,2,"ng-container",0),2&t&&r.Q6J("ngIf",e.isAuthorized)},directives:[g.O5,V.d,F],encapsulation:2}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.Bz.forChild(R)],s.Bz]}),t})(),H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.m,P,i.IJ,q]]}),t})()}}]);