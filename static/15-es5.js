!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{ibjo:function(e,i,s){"use strict";s.r(i),s.d(i,"TautotitaOfeilisModule",(function(){return w}));var r=s("mrSG"),a=s("fXoL"),o=s("1kSV"),c=s("AEAu"),u=s("PCNd"),p=s("ofXK"),d=s("tyNb"),l=s("zazq"),h=s("XNiG"),m=function(){function e(n,i,s,r){t(this,e),this.oidcSecuritySrv=n,this.location=i,this.router=s,this.route=r,this.onDestroy=new h.a,this.index=0,this.isUnauthorizedAllowed=AppConfOptions.unauthorized_allowed}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.oidcSecuritySrv.getIsAuthorized().subscribe((function(e){t.isAuthorized=e,AppConfOptions&&AppConfOptions.eidopoiitiria_tab_info&&""!=AppConfOptions.eidopoiitiria_tab_info&&(t.tabMsg=AppConfOptions.eidopoiitiria_tab_info)})),"receipts"===this.route.children[0].snapshot.url[0].path?this.index=1:this.index=0}},{key:"ngOnDestroy",value:function(){this.onDestroy.next()}},{key:"onTabChanged",value:function(t){0==t.index?this.router.navigate(["./debits"],{relativeTo:this.route}):this.router.navigate(["./receipts"],{relativeTo:this.route})}}]),e}();m.ctorParameters=function(){return[{type:l.c},{type:p.k},{type:d.d},{type:d.a}]},m.propDecorators={isAuthorized:[{type:a.G}]},m=Object(r.b)([Object(a.n)({selector:"tautotita-ofeilis-app-layout",template:'<p-message *ngIf="!isAuthorized && !isUnauthorizedAllowed"\r\n\t\t\t  severity="warn"\r\n\t\t\t  text="\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c5\u03bd\u03b4\u03b5\u03b8\u03b5\u03af\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b7\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03c5\u03c0\u03b7\u03c1\u03b5\u03c3\u03b9\u03ce\u03bd.">\r\n</p-message>\r\n\r\n<p-panel *ngIf="isAuthorized && tabMsg && tabMsg != \'\'"\r\n\t\t\theader="\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2"\r\n\t\t\t[styleClass]="\'tab-msg mb-3\'"\r\n\t\t\t[toggleable]="true">\r\n\t<div [innerHTML]="tabMsg | decodeHtmlString"></div>\r\n</p-panel>\r\n\r\n<p-tabView *ngIf="isAuthorized || isUnauthorizedAllowed"\r\n\t\t\t  [activeIndex]="index"\r\n\t\t\t  (onChange)="onTabChanged($event)">\r\n\t<p-tabPanel header="\u0395\u03be\u03cc\u03c6\u03bb\u03b7\u03c3\u03b7 \u03a4\u03b1\u03c5\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2">\r\n\t\t<app-tautotita-ofeilis-debits></app-tautotita-ofeilis-debits>\r\n\t</p-tabPanel>\r\n</p-tabView>\r\n'}),Object(r.c)("design:paramtypes",[l.c,p.k,d.d,d.a])],m);var f,b=s("tk/3"),y=s("1uah"),g=s("1G5W"),v=s("/rUF"),O=s("iFvM");!function(t){t.paymentCode="\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2"}(f||(f={}));var C=function(){function e(n,i){t(this,e),this.http=n,this.toasterSrv=i,this.apiUrl=AppConfOptions.eidopoiitiria_api+"api/"}return n(e,[{key:"getEidopoiitiria",value:function(t){var e=this.apiUrl+"Atm/Eidopoiitiria";return this.http.post(e,t)}}]),e}();C.ctorParameters=function(){return[{type:b.b},{type:v.a}]},C=Object(r.b)([Object(a.D)(),Object(r.c)("design:paramtypes",[b.b,v.a])],C);var S=function(){function e(n,i,s,r,a,o,c){t(this,e),this.oidcSecuritySrv=n,this.epaymentsSrv=i,this.tautotitaOfeilisSrv=s,this.cdr=r,this.toasterSrv=a,this.route=o,this._http=c,this.countriesList=[],this.onDoPaymentSubject=new h.a,this.onDestroy=new h.a,this.isLoading=!1,this.isLoadingInit=!1,this.errorMessageProfile=null,this.isFormSubmitted=!1,this.formDictionaryEnum=f}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.isLoadingInit=!0,Object(O.d)(this.cdr),"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=Object(O.h)(AppConfOptions.epayments_api)),this.route.queryParams.pipe(Object(g.a)(this.onDestroy)).subscribe((function(e){if(e){var n,i=e;if(i.messagecode||i.paymentStatus)n=i.messagecode?i.messagecode:i.paymentStatus,t.bankStatusMessage=t.oikonomikiBankMessages[n],t.bankStatusMessageClass="TRANSACTION_COMPLETED"==n||"APPROVED"==n?"success":"error"}else t.toasterSrv.showError("","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac...");Object(O.d)(t.cdr)})),Object(y.a)(this.epaymentsSrv.getBankMessages(),this.oidcSecuritySrv.getUserData(),this._http.get(AuthConfOptions.stsServer+"/api/general/GetCountries")).subscribe((function(e){e&&(e[0]&&(t.oikonomikiBankMessages=e[0]),e[1]&&(t.user=e[1]),e[2]&&(t.countriesList=e[2],t.user&&t.user.address_country_code&&""!=t.user.address_country_code&&(t.user.address_country_num=t.countriesList.find((function(e){return e.Alpha2Code==t.user.address_country_code})).NumericCode.toString()))),t.isLoadingInit=!1,Object(O.d)(t.cdr)}))}},{key:"ngOnDestroy",value:function(){this.onDestroy.next()}},{key:"onSubmit",value:function(){var t=this;if(this.isFormSubmitted=!0,this.formErrorsMsg=null,Object(O.d)(this.cdr),this.isFormSubmitted&&this.tautotitaOfeilisForm.valid){this.model=null,this.isLoading=!0;var e={language:"el",kodikos:this.paymentCode};Object(O.d)(this.cdr),this.tautotitaOfeilisSrv.getEidopoiitiria(e).subscribe((function(e){e&&e.isSuccessful?t.model=e.result:(t.toasterSrv.showError("",e.errorDescription),t.errorMessage=e.errorDescription),t.isLoading=!1,Object(O.d)(t.cdr)}))}else this.formErrorsMsg=Object(O.f)(this.tautotitaOfeilisForm,this.formDictionaryEnum,""),Object(O.d)(this.cdr)}},{key:"onCreatePaymentRequest",value:function(t){var e=this,n={tinRelated:this.user.tin,relatedCallbackUrl:AppConfOptions.application_url+"/tautotita-ofeilis/debits",billingAddressCity:this.user.address_city,billingAddressCountryCode:this.user.address_country_code,billingAddressZip:this.user.address_zip,billingAddress:this.user.address,userEmail:this.user.email,userPhone:this.user.phone_number,paymentMethodKey:t.key,entries:[]},i={remittanceInfo:this.model.paymentCode,amount:this.model.paymentAmount,debtorName:this.user.family_name+" "+this.user.fathers_name+" "+this.user.mothers_name+" "+this.user.name,tin:this.user.tin,description:this.model.paymentCaption};n.entries.push(i),this.paymentRequestDto=n,this.epaymentsSrv.addPaymentRequest(this.paymentRequestDto).subscribe((function(t){if(t){var n=t;e.paymentResponseDto=n.model,e.onDoPaymentSubject.next(e.paymentResponseDto)}else e.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")}))}},{key:"onClear",value:function(){this.isFormSubmitted=!1,this.paymentCode=null,this.model=null,Object(O.d)(this.cdr)}}]),e}();S.ctorParameters=function(){return[{type:l.c},{type:c.a},{type:C},{type:a.k},{type:v.a},{type:d.a},{type:b.b}]},S.propDecorators={tautotitaOfeilisForm:[{type:a.mb,args:["tautotitaOfeilisForm"]}],isAuthorized:[{type:a.G}]},S=Object(r.b)([Object(a.n)({selector:"app-tautotita-ofeilis-debits",template:'<div *ngIf="isLoadingInit"\r\n\t  class="bg-white"\r\n\t  style="width: 100%; height: 300px">\r\n\t<span class="d-flex justify-content-center align-items-center w-100 h-100">\r\n\t\t<i class="fas fa-circle-notch fa-3x fa-pulse"></i>\r\n\t</span>\r\n</div>\r\n\r\n<ng-container *ngIf="!isLoadingInit">\r\n\t<p-message *ngIf="bankStatusMessage && bankStatusMessage != \'\'"\r\n\t\t\t\t  [severity]="bankStatusMessageClass"\r\n\t\t\t\t  [text]="bankStatusMessage"\r\n\t\t\t\t  [styleClass]="\'mb-2\'">\r\n\t</p-message>\r\n\r\n\t<form #tautotitaOfeilisForm="ngForm"\r\n\t\t\tclass="form">\r\n\t\t<div class="row">\r\n\t\t\t<div class="form-group col-12">\r\n\t\t\t\t<label>\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2*</label>\r\n\t\t\t\t<input name="paymentCode"\r\n\t\t\t\t\t\t class="form-control"\r\n\t\t\t\t\t\t placeholder="\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2"\r\n\t\t\t\t\t\t type="text"\r\n\t\t\t\t\t\t [(ngModel)]="paymentCode"\r\n\t\t\t\t\t\t [disabled]="model"\r\n\t\t\t\t\t\t required />\r\n\t\t\t\t<div [hidden]="!isFormSubmitted || (isFormSubmitted && paymentCode)"\r\n\t\t\t\t\t  class="text-danger pt-1">\r\n\t\t\t\t\t*\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf.\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="d-flex align-items-center justify-content-center flex-wrap">\r\n\t\t\t<button class="btn btn-primary mr-1"\r\n\t\t\t\t\t  type="button"\r\n\t\t\t\t\t  (click)="onSubmit()"\r\n\t\t\t\t\t  [disabled]="model"><span class="fas fa-search fa-fw"\r\n\t\t\t\t\t\taria-hidden="true"></span> \u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7\r\n\t\t\t</button>\r\n\t\t\t<button class="btn btn-warning text-white"\r\n\t\t\t\t\t  type="button"\r\n\t\t\t\t\t  (click)="onClear()"><span class="fas fa-times fa-fw"\r\n\t\t\t\t\t\taria-hidden="true"></span> \u039a\u03b1\u03b8\u03b1\u03c1\u03b9\u03c3\u03bc\u03cc\u03c2\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div *ngIf="formErrorsMsg && formErrorsMsg != \'\'"\r\n\t\t\t  class="alert alert-danger form-msgs"\r\n\t\t\t  [innerHTML]="formErrorsMsg"></div>\r\n\t</form>\r\n\r\n\t<div *ngIf="isLoading"\r\n\t\t  class="bg-white"\r\n\t\t  style="width: 100%; height: 300px">\r\n\t\t<span class="d-flex justify-content-center align-items-center w-100 h-100">\r\n\t\t\t<i class="fas fa-circle-notch fa-3x fa-pulse"></i>\r\n\t\t</span>\r\n\t</div>\r\n\r\n\t<ng-container *ngIf="model && !isLoading">\r\n\t\t<hr />\r\n\t\t<h5 class="mt-4 text-center">\u0391\u03c0\u03bf\u03c4\u03b5\u03bb\u03ad\u03c3\u03bc\u03b1\u03c4\u03b1</h5>\r\n\t\t<div class="debits-info d-flex flex-wrap justify-content-between w-100 align-items-center">\r\n\t\t\t<div>\r\n\t\t\t\t<p *ngIf="model.paymentCode"\r\n\t\t\t\t\tclass="mb-0">\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2: <span class="totalPoso">{{ model.paymentCode }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p *ngIf="model.paymentCaption"\r\n\t\t\t\t\tclass="mb-0">\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2: <span class="totalPoso">{{ model.paymentCaption }}</span></p>\r\n\t\t\t\t<p *ngIf="model.paymentAmount"\r\n\t\t\t\t\tclass="mb-0">\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2: <span\r\n\t\t\t\t\t\t\tclass="totalPoso">{{ model.paymentAmount | currency:\'\u20ac\':\'symbol\':\'1.2\' }}</span></p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<app-checkout [isPaymentFormValid]="true"\r\n\t\t\t\t\t\t\t  [doPaymentSubscription]="onDoPaymentSubject.asObservable()"\r\n\t\t\t\t\t\t\t  [finApiUrl]="financeApiUrl"\r\n\t\t\t\t\t\t\t  [buttonText]="\'\u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\'"\r\n\t\t\t\t\t\t\t  (onPayBtnClick)="onCreatePaymentRequest($event)">\r\n\t\t\t</app-checkout>\r\n\t\t</div>\r\n\t</ng-container>\r\n</ng-container>\r\n',changeDetection:a.j.OnPush}),Object(r.c)("design:paramtypes",[l.c,c.a,C,a.k,v.a,d.a,b.b])],S);var k=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();k.ctorParameters=function(){return[]};var A=[{path:"",component:m,children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:S},{path:"receipts",component:k=Object(r.b)([Object(a.n)({selector:"app-tautotita-ofeilis-receipts",template:""}),Object(r.c)("design:paramtypes",[])],k)}]}],j=function e(){t(this,e)};j=Object(r.b)([Object(a.L)({imports:[d.g.forChild(A)],exports:[d.g]})],j);var w=function e(){t(this,e)};w=Object(r.b)([Object(a.L)({declarations:[m,S,k],imports:[u.a,o.d,j],providers:[C,c.a]})],w)}}])}();