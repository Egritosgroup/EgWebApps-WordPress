!function(){function e(e,i){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var s=0,c=function(){};return{s:c,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{kpNr:function(t,n,c){"use strict";c.r(n),c.d(n,"EpaymentsModule",function(){return ve});var a=c("1kSV"),r=c("PCNd"),o=c("tyNb"),l=c("oXA7"),d=c("fXoL"),p=c("zazq"),u=c("ofXK"),h=c("FMpt"),f=c("7CaW"),m=c("dPl2"),g=c("4krO"),b=c("1q39"),y=c("Sy1n"),v=c("/rUF"),k=c("iFvM"),C=c("AEAu"),T=c("tk/3"),w=c("rEr+"),x=c("7zfz"),O=c("ZOsW"),S=c("3Pt+"),D=c("Ji6n"),_=c("3u8h");function I(e,t){1&e&&(d.mc(0,"div",4),d.mc(1,"span",5),d.hc(2,"i",6),d.lc(),d.lc())}function A(e,t){if(1&e&&d.hc(0,"p-message",7),2&e){var i=d.yc();d.Hc("text",i.debitsMessage)("styleClass","mt-2")}}function M(e,t){1&e&&d.hc(0,"p-message",9),2&e&&d.Hc("styleClass","mt-2")}function R(e,t){1&e&&d.ic(0)}function P(e,t){if(1&e&&(d.mc(0,"div",18),d.gd(1,R,1,0,"ng-container",19),d.lc()),2&e){d.yc(3);var i=d.Xc(4);d.Tb(1),d.Hc("ngTemplateOutlet",i)}}function j(e,t){if(1&e){var i=d.nc();d.mc(0,"div"),d.mc(1,"label"),d.id(2,"\u0395\u03af\u03b4\u03bf\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),d.lc(),d.mc(3,"ng-select",20),d.wc("ngModelChange",function(e){return d.Zc(i),d.yc(3).selectedEidosId=e})("ngModelChange",function(e){return d.Zc(i),d.yc(3).onSelectedPersistedTypeChanged(e)}),d.lc(),d.lc()}if(2&e){var n=d.yc(3);d.Tb(3),d.Hc("items",n.eidosDebit)("ngModel",n.selectedEidosId)("clearable",!1)}}function H(e,t){1&e&&(d.mc(0,"legend",21),d.mc(1,"span",22),d.hc(2,"i",23),d.id(3," \u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b7 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae"),d.lc(),d.mc(4,"span",22),d.hc(5,"i",24),d.id(6," \u039c\u03b7 \u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b7 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae"),d.lc(),d.lc())}function L(e,t){1&e&&(d.mc(0,"th",28),d.id(1,"\xa0"),d.lc())}function E(e,t){if(1&e){var i=d.nc();d.mc(0,"tr"),d.mc(1,"th",25),d.mc(2,"p-checkbox",26),d.wc("ngModelChange",function(e){return d.Zc(i),d.yc(3).isAllDebitsChecked=e})("onChange",function(){return d.Zc(i),d.yc(3).onAllDebitsSelected()}),d.lc(),d.lc(),d.gd(3,L,2,0,"th",27),d.mc(4,"th",28),d.id(5,"AA"),d.lc(),d.mc(6,"th",29),d.id(7,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u03a7\u03c1\u03b7\u03bc\u03b1\u03c4\u03b9\u03ba\u03bf\u03cd \u039a\u03b1\u03c4\u03b1\u03bb\u03cc\u03b3\u03bf\u03c5"),d.lc(),d.mc(8,"th",30),d.id(9,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03a7\u03c1\u03ad\u03c9\u03c3\u03b7\u03c2"),d.lc(),d.mc(10,"th",31),d.id(11,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),d.lc(),d.mc(12,"th",31),d.id(13,"\u039a\u03b1\u03b8\u03b1\u03c1\u03cc \u03a0\u03bf\u03c3\u03cc"),d.lc(),d.mc(14,"th",31),d.id(15,"\u03a4\u03c1\u03ad\u03c7\u03bf\u03c5\u03c3\u03b5\u03c2 \u0395\u03c0\u03b9\u03b2\u03b1\u03c1\u03cd\u03bd\u03c3\u03b5\u03b9\u03c2*"),d.lc(),d.mc(16,"th",31),d.id(17,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),d.lc(),d.lc()}if(2&e){var n=d.yc(3);d.Tb(2),d.Hc("binary",!0)("ngModel",n.isAllDebitsChecked),d.Tb(1),d.Hc("ngIf",n.isNonPersistedEnabled)}}function B(e,t){if(1&e&&(d.mc(0,"td",25),d.mc(1,"span",32),d.id(2,"\xa0"),d.lc(),d.hc(3,"i",35),d.lc()),2&e){var i=d.yc().$implicit;d.Tb(3),d.Hc("ngClass",i.isBebaiomeno?"far fa-dot-circle":"fas fa-dot-circle")}}function z(e,t){if(1&e){var i=d.nc();d.mc(0,"tr"),d.mc(1,"td",25),d.mc(2,"span",32),d.id(3,"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae"),d.lc(),d.mc(4,"p-checkbox",26),d.wc("ngModelChange",function(e){return t.$implicit.isChecked=e})("onChange",function(){return d.Zc(i),d.yc(3)._calculateTotalAmounts()}),d.lc(),d.lc(),d.gd(5,B,4,1,"td",33),d.mc(6,"td",28),d.mc(7,"span",32),d.id(8,"AA"),d.lc(),d.id(9),d.lc(),d.mc(10,"td",29),d.mc(11,"span",32),d.id(12,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u03a7\u03c1\u03b7\u03bc\u03b1\u03c4\u03b9\u03ba\u03bf\u03cd \u039a\u03b1\u03c4\u03b1\u03bb\u03cc\u03b3\u03bf\u03c5"),d.lc(),d.id(13),d.lc(),d.mc(14,"td",30),d.mc(15,"span",32),d.id(16,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03a7\u03c1\u03ad\u03c9\u03c3\u03b7\u03c2"),d.lc(),d.id(17),d.lc(),d.mc(18,"td",31),d.mc(19,"span",32),d.id(20,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),d.lc(),d.id(21),d.zc(22,"date"),d.lc(),d.mc(23,"td",34),d.mc(24,"span",32),d.id(25,"\u039a\u03b1\u03b8\u03b1\u03c1\u03cc \u03a0\u03bf\u03c3\u03cc"),d.lc(),d.id(26),d.zc(27,"currency"),d.lc(),d.mc(28,"td",34),d.mc(29,"span",32),d.id(30,"\u03a4\u03c1\u03ad\u03c7\u03bf\u03c5\u03c3\u03b5\u03c2 \u0395\u03c0\u03b9\u03b2\u03b1\u03c1\u03cd\u03bd\u03c3\u03b5\u03b9\u03c2"),d.lc(),d.id(31),d.zc(32,"currency"),d.lc(),d.mc(33,"td",34),d.mc(34,"span",32),d.id(35,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),d.lc(),d.id(36),d.zc(37,"currency"),d.lc(),d.lc()}if(2&e){var n=t.$implicit,s=t.rowIndex,c=d.yc(3);d.Tb(4),d.Hc("binary",!0)("ngModel",n.isChecked),d.Tb(1),d.Hc("ngIf",c.isNonPersistedEnabled),d.Tb(4),d.kd(" ",s+1," "),d.Tb(4),d.kd(" ",n.aaEggrafis," "),d.Tb(4),d.kd(" ",n.perigrafi," "),d.Tb(4),d.kd(" ",d.Bc(22,10,n.hmerominiaLixis,"dd/LL/yyyy")," "),d.Tb(5),d.kd(" ",d.Dc(27,13,n.currentKatharoPoso,"\u20ac","symbol","1.2")," "),d.Tb(5),d.kd(" ",d.Dc(32,18,n.currentProsafksisi+n.currentKrathseis,"\u20ac","symbol","1.2")," "),d.Tb(5),d.kd(" ",d.Dc(37,23,n.currentSynolo,"\u20ac","symbol","1.2")," ")}}function F(e,t){1&e&&(d.mc(0,"td",39),d.mc(1,"strong"),d.id(2,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03b1:"),d.lc(),d.lc())}function N(e,t){1&e&&(d.mc(0,"td",40),d.mc(1,"strong"),d.id(2,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03b1:"),d.lc(),d.lc())}function U(e,t){if(1&e&&(d.mc(0,"tr"),d.gd(1,F,3,0,"td",36),d.gd(2,N,3,0,"td",37),d.mc(3,"td",38),d.mc(4,"strong"),d.id(5),d.zc(6,"currency"),d.lc(),d.lc(),d.mc(7,"td",38),d.mc(8,"strong"),d.id(9),d.zc(10,"currency"),d.lc(),d.lc(),d.mc(11,"td",38),d.mc(12,"strong"),d.id(13),d.zc(14,"currency"),d.lc(),d.lc(),d.lc()),2&e){var i=d.yc(3);d.Tb(1),d.Hc("ngIf",!i.isNonPersistedEnabled),d.Tb(1),d.Hc("ngIf",i.isNonPersistedEnabled),d.Tb(3),d.jd(d.Dc(6,5,i.totalCurrentKatharo,"\u20ac","symbol","1.2")),d.Tb(4),d.jd(d.Dc(10,10,i.totalCurrentProsafksisi,"\u20ac","symbol","1.2")),d.Tb(4),d.jd(d.Dc(14,15,i.totalcurrentSynolo,"\u20ac","symbol","1.2"))}}function Z(e,t){if(1&e&&(d.kc(0),d.gd(1,P,2,1,"div",10),d.gd(2,j,4,3,"div",2),d.gd(3,H,7,0,"legend",11),d.mc(4,"p",12),d.mc(5,"strong"),d.id(6),d.lc(),d.lc(),d.mc(7,"p-table",13),d.gd(8,E,18,3,"ng-template",14),d.gd(9,z,38,28,"ng-template",15),d.gd(10,U,15,20,"ng-template",16),d.lc(),d.mc(11,"p",17),d.mc(12,"strong"),d.id(13),d.lc(),d.lc(),d.mc(14,"p"),d.mc(15,"small"),d.mc(16,"em"),d.id(17,"* \u03a4\u03c1\u03ad\u03c7\u03bf\u03c5\u03c3\u03b5\u03c2 \u03a0\u03c1\u03bf\u03c3\u03b1\u03c5\u03be\u03ae\u03c3\u03b5\u03b9\u03c2 \u03ba\u03b1\u03b9 \u03a4\u03c1\u03ad\u03c7\u03bf\u03c5\u03c3\u03b5\u03c2 \u039a\u03c1\u03b1\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2"),d.lc(),d.lc(),d.lc(),d.jc()),2&e){var i=d.yc(2);d.Tb(1),d.Hc("ngIf",i.calculatedChecked.countChecked>0),d.Tb(1),d.Hc("ngIf",i.isNonPersistedEnabled),d.Tb(1),d.Hc("ngIf",i.isNonPersistedEnabled),d.Tb(3),d.kd("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd: ",null==i.filteredDebits.entries?null:i.filteredDebits.entries.length,""),d.Tb(1),d.Hc("value",i.filteredDebits.entries)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",i.filteredDebits.entries.length)("loading",i.isLoading),d.Tb(6),d.kd("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd: ",null==i.filteredDebits.entries?null:i.filteredDebits.entries.length,"")}}function K(e,t){if(1&e&&(d.mc(0,"div"),d.gd(1,M,1,1,"p-message",8),d.gd(2,Z,18,15,"ng-container",2),d.lc()),2&e){var i=d.yc();d.Tb(1),d.Hc("ngIf",0==i.calculatedChecked.countChecked&&i.debits.entries),d.Tb(1),d.Hc("ngIf",i.debits.entries&&i.debits.entries.length)}}function V(e,t){if(1&e){var i=d.nc();d.mc(0,"div",41),d.mc(1,"div"),d.mc(2,"p",42),d.id(3,"\u0388\u03c7\u03b5\u03c4\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03b9 "),d.mc(4,"span",43),d.id(5),d.lc(),d.lc(),d.mc(6,"p",42),d.id(7,"\u039a\u03b1\u03b8\u03b1\u03c1\u03cc \u03c3\u03cd\u03bd\u03bf\u03bb\u03bf: "),d.mc(8,"span",43),d.id(9),d.zc(10,"currency"),d.lc(),d.lc(),d.mc(11,"p",42),d.id(12,"\u03a4\u03c1\u03ad\u03c7\u03bf\u03c5\u03c3\u03b5\u03c2 \u03b5\u03c0\u03b9\u03b2\u03b1\u03c1\u03cd\u03bd\u03c3\u03b5\u03b9\u03c2: "),d.mc(13,"span",43),d.id(14),d.zc(15,"currency"),d.lc(),d.lc(),d.mc(16,"p",42),d.id(17,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd: "),d.mc(18,"span",44),d.id(19),d.zc(20,"currency"),d.lc(),d.lc(),d.lc(),d.mc(21,"app-checkout",45),d.wc("onPayBtnClick",function(e){return d.Zc(i),d.yc().onCreatePaymentRequest(e)}),d.lc(),d.lc()}if(2&e){var n=d.yc();d.Tb(5),d.ld("",n.calculatedChecked.countChecked," ",1==n.calculatedChecked.countChecked?"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ae":"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2",""),d.Tb(4),d.jd(d.Dc(10,9,n.calculatedChecked.checkedKatharo,"\u20ac","symbol","1.2")),d.Tb(5),d.jd(d.Dc(15,14,n.calculatedChecked.checkedEpivarinseis,"\u20ac","symbol","1.2")),d.Tb(5),d.jd(d.Dc(20,19,n.calculatedChecked.checkedSum,"\u20ac","symbol","1.2")),d.Tb(2),d.Hc("isPaymentFormValid",!0)("doPaymentSubscription",n.onDoPaymentSubject.asObservable())("finApiUrl",n.financeApiUrl)("buttonText","\u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae")}}var q=function(){function t(e,n,s,c,a,r){i(this,t),this.toasterSrv=e,this.oidcSecuritySrv=n,this.epaymentsSrv=s,this.cdr=c,this._http=a,this._parent=r,this.countriesList=[],this.onDoPaymentSubject=new l.a,this.isMobile=!1,this.debitsMessage=null,this.calculatedChecked={countChecked:0,countText:"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2",checkedSum:0,checkedKatharo:0,checkedProsafksisis:0},this.isAllDebitsChecked=!1,this.isLoading=!0,this.eidosDebit=[{value:0,perigrafi:"\u038c\u03bb\u03b5\u03c2"},{value:1,perigrafi:"\u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b5\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2"},{value:2,perigrafi:"\u039c\u03b7 \u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b5\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2"}],this.selectedEidosId=0,this.onDestroy=new l.a}return s(t,[{key:"ngOnInit",value:function(){var e=this;this.isMobile=this._parent.isMobile,this.isNonPersistedEnabled=AppConfOptions.show_non_persisted_debits,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=Object(k.g)(AppConfOptions.epayments_api));var t=Object(k.g)(AuthConfOptions.stsServer);t+="/api/general/GetCountries",this._http.get(t).pipe(Object(b.a)(function(t){return t?(e.countriesList=t,e.oidcSecuritySrv.userData$):Object(g.a)(!1)})).subscribe(function(t){t&&(e.user=t,e.user.address_country_code&&""!=e.user.address_country_code&&(e.user.address_country_num=e.countriesList.find(function(t){return t.Alpha2Code==e.user.address_country_code}).NumericCode.toString()),e._initDebitsByTin()),Object(k.d)(e.cdr)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onCreatePaymentRequest",value:function(t){var i=this;this.paymentRequestDto=void 0,Object(k.d)(this.cdr);var n=this.debits.entries.filter(function(e){return e.isChecked});if(n&&n.length){var s={tinRelated:this.user.tin,relatedCallbackUrl:AppConfOptions.application_url+"/epayments/receipts",billingAddressCity:this.user.address_city,billingAddressCountryCode:this.user.address_country_code,billingAddressZip:this.user.address_zip,billingAddress:this.user.address,userEmail:this.user.email,userPhone:this.user.phone_number,paymentMethodKey:t.key,entries:[]};"PIRBGRAA"===t.key&&(s.billingAddressCountryCode=null);var c,a=e(n.filter(function(e){return e.isChecked}));try{for(a.s();!(c=a.n()).done;){var r=c.value,o={remittanceInfo:this._createRemittanceInfo(r),amount:r.currentSynolo,debtorName:r.eponymia,tin:this.user.tin,description:r.perigrafi,metadata:r.metadata};s.entries.push(o)}}catch(l){a.e(l)}finally{a.f()}this.paymentRequestDto=s,Object(k.d)(this.cdr),this.epaymentsSrv.addPaymentRequest(this.paymentRequestDto).subscribe(function(e){if(e){var t=e;i.paymentResponseDto=t.model,i.onDoPaymentSubject.next(i.paymentResponseDto)}else i.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")})}}},{key:"onAllDebitsSelected",value:function(){var e=this;this.debits.entries.forEach(function(t){t.isChecked=e.isAllDebitsChecked}),Object(k.d)(this.cdr),this._calculateTotalAmounts()}},{key:"onSelectedPersistedTypeChanged",value:function(e){this.selectedEidosId=+e,this.filteredDebits=JSON.parse(JSON.stringify(this.debits)),1===this.selectedEidosId?this.filteredDebits.entries=this.debits.entries.filter(function(e){return!0===e.isBebaiomeno}):2===this.selectedEidosId?this.filteredDebits.entries=this.debits.entries.filter(function(e){return!1===e.isBebaiomeno}):this.filteredDebits.entries=this.debits.entries,console.log(this.filteredDebits),Object(k.d)(this.cdr),this._fillDebitsTable(this.filteredDebits)}},{key:"_initDebitsByTin",value:function(){var e=this;this.isLoading=!0;var t={tin:this.user.tin};this.epaymentsSrv.getBankMessages().pipe(Object(b.a)(function(i){return e.bankMessages=i,e.epaymentsSrv.getDebitsByTin(t)})).subscribe(function(t){t&&(t.entries&&t.entries.length>=0?(e.debits=t,e.filteredDebits=t,e._fillDebitsTable(e.debits)):(t.message||t.messageId)&&(e.debitsMessage=e.bankMessages[t.messageId]?e.bankMessages[t.messageId]:t.message,e.toasterSrv.showError("",t.message)),e.isLoading=!1)})}},{key:"_fillDebitsTable",value:function(e){if(this.isLoading=!0,Object(k.d)(this.cdr),2==e.statusCode)return this.toasterSrv.showWarning("","\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b5\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf \u03c4\u03b1\u03bc\u03b5\u03af\u03bf \u03c4\u03bf\u03c5 \u03b4\u03ae\u03bc\u03bf\u03c5. \u03a4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2 \u03b5\u03bc\u03c6\u03b1\u03bd\u03af\u03b6\u03b5\u03c4\u03b1\u03b9 \u03c3\u03b5 \u03c0\u03b1\u03c1\u03b1\u03c0\u03ac\u03bd\u03c9 \u03b1\u03c0\u03cc \u03bc\u03b9\u03b1 \u03ba\u03b1\u03c1\u03c4\u03ad\u03bb\u03b5\u03c2, \u03bf\u03b9 \u03bf\u03c0\u03bf\u03af\u03b5\u03c2 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c3\u03c5\u03b3\u03c7\u03c9\u03bd\u03b5\u03c5\u03b8\u03bf\u03cd\u03bd."),void(this.debitsMessage="\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b5\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf \u03c4\u03b1\u03bc\u03b5\u03af\u03bf \u03c4\u03bf\u03c5 \u03b4\u03ae\u03bc\u03bf\u03c5. \u03a4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2 \u03b5\u03bc\u03c6\u03b1\u03bd\u03af\u03b6\u03b5\u03c4\u03b1\u03b9 \u03c3\u03b5 \u03c0\u03b1\u03c1\u03b1\u03c0\u03ac\u03bd\u03c9 \u03b1\u03c0\u03cc \u03bc\u03b9\u03b1 \u03ba\u03b1\u03c1\u03c4\u03ad\u03bb\u03b5\u03c2, \u03bf\u03b9 \u03bf\u03c0\u03bf\u03af\u03b5\u03c2 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c3\u03c5\u03b3\u03c7\u03c9\u03bd\u03b5\u03c5\u03b8\u03bf\u03cd\u03bd.");if(4==e.statusCode)return this.toasterSrv.showWarning("","\u0394\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03ae \u03b7 \u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b2\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2. \u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c0\u03c1\u03bf\u03c3\u03c0\u03b1\u03b8\u03ae\u03c3\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1."),void(this.debitsMessage="\u0394\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03ae \u03b7 \u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b2\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2. \u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c0\u03c1\u03bf\u03c3\u03c0\u03b1\u03b8\u03ae\u03c3\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1.");0===e.entries.length&&(this.debitsMessage="\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b9\u03b1\u03b8\u03ad\u03c3\u03b9\u03bc\u03b5\u03c2 \u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2 \u03c3\u03c4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2 \u03b3\u03b9\u03b1 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae \u03bc\u03ad\u03c3\u03c9 \u03c4\u03bf\u03c5 online \u03c3\u03c5\u03c3\u03c4\u03ae\u03bc\u03b1\u03c4\u03bf\u03c2."),!1===this.isNonPersistedEnabled&&(e.entries=e.entries.filter(function(e){return!0===e.isBebaiomeno})),e.entries.forEach(function(e){e.isChecked=!1});var t=e.entries.map(function(e){return e.currentKatharoPoso});this.totalCurrentKatharo=t.reduce(function(e,t){return e+t},0);var i=e.entries.map(function(e){return e.currentProsafksisi}),n=e.entries.map(function(e){return e.currentKrathseis});this.totalCurrentProsafksisi=i.reduce(function(e,t){return e+t},0)+n.reduce(function(e,t){return e+t},0);var s=e.entries.map(function(e){return e.currentSynolo});this.totalcurrentSynolo=s.reduce(function(e,t){return e+t},0),e.entries.sort(function(e,t){return Date.parse(e.hmerominiaLixis)/1e3-Date.parse(t.hmerominiaLixis)/1e3}),this.isLoading=!1,Object(k.d)(this.cdr)}},{key:"_calculateTotalAmounts",value:function(){var e,t=0,i=0,n=0,s=0;this.debits.entries.forEach(function(e){e.isChecked&&(s++,t+=e.currentSynolo,i+=e.currentKatharoPoso,n+=e.currentProsafksisi+e.currentKrathseis)}),e=1==s?"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ae":"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2",this.calculatedChecked={countChecked:s,countText:e,checkedSum:t,checkedKatharo:i,checkedEpivarinseis:n}}},{key:"_createRemittanceInfo",value:function(e){return e.remittanceInfo}}]),t}();q.\u0275fac=function(e){return new(e||q)(d.gc(v.a),d.gc(p.e),d.gc(C.a),d.gc(d.j),d.gc(T.b),d.gc(y.a))},q.\u0275cmp=d.ac({type:q,selectors:[["app-debits"]],inputs:{isAuthorized:"isAuthorized"},decls:5,vars:3,consts:[["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[4,"ngIf"],["selectedDebits",""],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["severity","warn",3,"text","styleClass"],["severity","warn","text","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b5\u03c2 \u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2. \u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c4\u03b9\u03c2 \u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2 \u03c0\u03bf\u03c5 \u03b8\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03b5\u03be\u03bf\u03c6\u03bb\u03ae\u03c3\u03b5\u03c4\u03b5 \u03b1\u03c0\u03cc \u03c4\u03b7\u03bd \u03c0\u03b1\u03c1\u03b1\u03ba\u03ac\u03c4\u03c9 \u03bb\u03af\u03c3\u03c4\u03b1.",3,"styleClass",4,"ngIf"],["severity","warn","text","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03b5\u03c2 \u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2. \u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c4\u03b9\u03c2 \u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2 \u03c0\u03bf\u03c5 \u03b8\u03ad\u03bb\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03b5\u03be\u03bf\u03c6\u03bb\u03ae\u03c3\u03b5\u03c4\u03b5 \u03b1\u03c0\u03cc \u03c4\u03b7\u03bd \u03c0\u03b1\u03c1\u03b1\u03ba\u03ac\u03c4\u03c9 \u03bb\u03af\u03c3\u03c4\u03b1.",3,"styleClass"],["class","debits-info__selected-debits",4,"ngIf"],["class","iconTooltips d-flex flex-wrap mt-4 mb-2","style","font-size: 14px;",4,"ngIf"],[1,"mt-2","mb-1"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"mt-1"],[1,"debits-info__selected-debits"],[4,"ngTemplateOutlet"],["name","perstType","bindLabel","perigrafi","bindValue","value",3,"items","ngModel","clearable","ngModelChange"],[1,"iconTooltips","d-flex","flex-wrap","mt-4","mb-2",2,"font-size","14px"],[1,"mr-1"],[1,"far","fa-dot-circle","fa-fw"],[1,"fas","fa-dot-circle","fa-fw"],[1,"fixed-width-col-40","text-center"],[3,"binary","ngModel","ngModelChange","onChange"],["class","fixed-width-col-40",4,"ngIf"],[1,"fixed-width-col-40"],[1,"fixed-width-col-120"],[1,"fixed-width-col-170"],[1,"fixed-width-col-100"],[1,"p-column-title"],["class","fixed-width-col-40 text-center",4,"ngIf"],[1,"fixed-width-col-100","text-right"],["aria-hidden","true",1,"fa-fw",3,"ngClass"],["class","fixed-width-col-470 text-right","colspan","5",4,"ngIf"],["class","fixed-width-col-510 text-right","colspan","6",4,"ngIf"],["colspan","1",1,"fixed-width-col-100","text-right"],["colspan","5",1,"fixed-width-col-470","text-right"],["colspan","6",1,"fixed-width-col-510","text-right"],[1,"debits-info","d-flex","flex-wrap","justify-content-around","w-100","align-items-center","mb-1"],[1,"mb-0"],[1,"totalPoso"],["id","sumTotalToBank",1,"totalPoso"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","onPayBtnClick"]],template:function(e,t){1&e&&(d.gd(0,I,3,0,"div",0),d.gd(1,A,1,2,"p-message",1),d.gd(2,K,3,2,"div",2),d.gd(3,V,22,24,"ng-template",null,3,d.hd)),2&e&&(d.Hc("ngIf",t.isLoading),d.Tb(1),d.Hc("ngIf",t.debitsMessage),d.Tb(1),d.Hc("ngIf",t.debits&&!t.isLoading))},directives:[u.p,h.b,w.d,x.j,u.u,O.a,S.m,S.p,D.a,u.n,_.a],pipes:[u.f,u.d],encapsulation:2});var $=c("wd/R"),W=c("lhB6"),J=c("bk9D"),G=c("eO1q");function X(e,t){1&e&&(d.mc(0,"div",4),d.mc(1,"span",5),d.hc(2,"i",6),d.lc(),d.lc())}function Y(e,t){if(1&e&&d.hc(0,"p-message",7),2&e){var i=d.yc();d.Hc("text",i.receiptsMessage)}}function Q(e,t){if(1&e&&d.hc(0,"p-message",8),2&e){var i=d.yc();d.Hc("severity",i.bankStatusMessageClass)("text",i.bankStatusMessage)("styleClass","mb-2")}}function ee(e,t){1&e&&(d.mc(0,"th",38),d.id(1,"\u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2"),d.lc())}function te(e,t){if(1&e&&(d.mc(0,"tr"),d.mc(1,"th",37),d.id(2,"\u0395\u03af\u03b4\u03bf\u03c2"),d.lc(),d.mc(3,"th",38),d.id(4,"\u0391\u03c1. \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.lc(),d.mc(5,"th",38),d.id(6,"\u0397\u03bc. \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.lc(),d.mc(7,"th",38),d.id(8,"\u0391\u03c1. \u03a3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae\u03c2"),d.lc(),d.mc(9,"th",38),d.id(10,"\u0397\u03bc. \u03a3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae\u03c2"),d.lc(),d.mc(11,"th",39),d.id(12,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae"),d.lc(),d.mc(13,"th",38),d.id(14,"\u03a0\u03bf\u03c3\u03cc"),d.lc(),d.gd(15,ee,2,0,"th",40),d.lc()),2&e){var i=d.yc(3);d.Tb(15),d.Hc("ngIf",!(null!=i.paymentsSettings&&i.paymentsSettings.isProviderThirdParty))}}function ie(e,t){if(1&e&&(d.mc(0,"a",48),d.hc(1,"i",49),d.lc()),2&e){var i=d.yc(2).$implicit,n=d.yc(3);d.Kc("href","",n.receiptsUrlBase,"api/PersistedDebits/GetPaymentFile/",i.bankTxnUid,"",d.bd)}}function ne(e,t){if(1&e&&(d.mc(0,"td",46),d.mc(1,"span",42),d.id(2,"\u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2"),d.lc(),d.gd(3,ie,2,2,"a",47),d.lc()),2&e){var i=d.yc().$implicit;d.Tb(3),d.Hc("ngIf",i.receiptId&&i.bankTxnUid)}}function se(e,t){if(1&e&&(d.mc(0,"tr"),d.mc(1,"td",41),d.mc(2,"span",42),d.id(3,"\u0395\u03af\u03b4\u03bf\u03c2"),d.lc(),d.hc(4,"i",43),d.lc(),d.mc(5,"td",38),d.mc(6,"span",42),d.id(7,"\u0391\u03c1. \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.lc(),d.id(8),d.lc(),d.mc(9,"td",38),d.mc(10,"span",42),d.id(11,"\u0397\u03bc. \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.lc(),d.id(12),d.zc(13,"date"),d.lc(),d.mc(14,"td",38),d.mc(15,"span",42),d.id(16,"\u0391\u03c1. \u03a3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae\u03c2"),d.lc(),d.id(17),d.lc(),d.mc(18,"td",38),d.mc(19,"span",42),d.id(20,"\u0397\u03bc. \u03a3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae\u03c2"),d.lc(),d.id(21),d.zc(22,"date"),d.lc(),d.mc(23,"td",39),d.mc(24,"span",42),d.id(25,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae"),d.lc(),d.id(26),d.lc(),d.mc(27,"td",44),d.mc(28,"span",42),d.id(29,"\u03a0\u03bf\u03c3\u03cc"),d.lc(),d.id(30),d.zc(31,"currency"),d.lc(),d.gd(32,ne,4,1,"td",45),d.lc()),2&e){var i=t.$implicit,n=d.yc(3);d.Tb(4),d.Vb(i.icon),d.Tb(4),d.kd(" ",i.receiptIncrNr," "),d.Tb(4),d.kd(" ",d.Bc(13,10,i.receiptDateCreated,"dd/LL/yyyy")," "),d.Tb(5),d.kd(" ",i.bankTxnPaymentRef," "),d.Tb(4),d.kd(" ",d.Bc(22,13,i.bankTxnDateCreated,"dd/LL/yyyy")," "),d.Tb(5),d.kd(" ",i.description," "),d.Tb(4),d.kd(" ",d.Dc(31,16,i.paymentTotal,"\u20ac","symbol","1.2")," "),d.Tb(2),d.Hc("ngIf",!(null!=n.paymentsSettings&&n.paymentsSettings.isProviderThirdParty))}}function ce(e,t){if(1&e&&(d.mc(0,"tr"),d.mc(1,"td",50),d.mc(2,"strong"),d.id(3,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),d.lc(),d.lc(),d.mc(4,"td",51),d.mc(5,"strong"),d.id(6),d.zc(7,"currency"),d.lc(),d.lc(),d.lc()),2&e){var i=d.yc(3);d.Tb(4),d.Ub("colspan",null!=i.paymentsSettings&&i.paymentsSettings.isProviderThirdParty?1:2),d.Tb(2),d.jd(d.Dc(7,2,i.totalPoso,"\u20ac","symbol","1.2"))}}function ae(e,t){if(1&e&&(d.mc(0,"tr"),d.mc(1,"td"),d.id(2," \u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2 \u03bc\u03b5 \u03c4\u03b1 \u03ba\u03c1\u03b9\u03c4\u03ae\u03c1\u03b9\u03b1 \u03c0\u03bf\u03c5 \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03b9. "),d.lc(),d.lc()),2&e){var i=d.yc(3);d.Tb(1),d.Ub("colspan",null!=i.paymentsSettings&&i.paymentsSettings.isProviderThirdParty?7:8)}}var re=function(){return{width:"100%"}};function oe(e,t){if(1&e){var i=d.nc();d.mc(0,"div",10),d.mc(1,"p-panel",11),d.mc(2,"form",12),d.mc(3,"div",13),d.mc(4,"div",14),d.mc(5,"label",15),d.id(6,"\u0395\u03cd\u03c1\u03bf\u03c2 \u0397\u03bc. \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.lc(),d.mc(7,"p-calendar",16),d.wc("ngModelChange",function(e){return d.Zc(i),d.yc(2).hmerominiaApodiksisRange=e}),d.lc(),d.lc(),d.mc(8,"div",14),d.mc(9,"label",17),d.id(10,"\u0395\u03cd\u03c1\u03bf\u03c2 \u0397\u03bc. \u03a3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae\u03c2"),d.lc(),d.mc(11,"p-calendar",18),d.wc("ngModelChange",function(e){return d.Zc(i),d.yc(2).hmerominiaSinallagisRange=e}),d.lc(),d.lc(),d.mc(12,"div",14),d.mc(13,"label",19),d.id(14,"\u03a4\u03c1\u03cc\u03c0\u03bf\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2"),d.lc(),d.mc(15,"ng-select",20),d.wc("ngModelChange",function(e){return d.Zc(i),d.yc(2).receiptType=e}),d.lc(),d.lc(),d.lc(),d.mc(16,"div",21),d.mc(17,"button",22),d.wc("click",function(){return d.Zc(i),d.yc(2).btnApplyFiltersClicked()}),d.hc(18,"i",23),d.id(19," \u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7 "),d.lc(),d.mc(20,"button",24),d.wc("click",function(){return d.Zc(i),d.yc(2).btnCleanFiltersClicked()}),d.hc(21,"i",25),d.id(22," \u039a\u03b1\u03b8\u03b1\u03c1\u03b9\u03c3\u03bc\u03cc\u03c2 "),d.lc(),d.lc(),d.lc(),d.lc(),d.mc(23,"legend",26),d.mc(24,"span",27),d.hc(25,"i",28),d.id(26," \u0395\u03be\u03cc\u03c6\u03bb\u03b7\u03c3\u03b7 \u03bc\u03ad\u03c3\u03c9 \u03c4\u03bf\u03c5 Online \u03a3\u03c5\u03c3\u03c4\u03ae\u03bc\u03b1\u03c4\u03bf\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2"),d.lc(),d.mc(27,"span",27),d.hc(28,"i",29),d.id(29," \u0395\u03be\u03cc\u03c6\u03bb\u03b7\u03c3\u03b7 \u03c3\u03c4\u03bf \u0394\u03ae\u03bc\u03bf"),d.lc(),d.lc(),d.mc(30,"p"),d.mc(31,"strong"),d.id(32),d.lc(),d.lc(),d.mc(33,"p-table",30),d.gd(34,te,16,1,"ng-template",31),d.gd(35,se,33,21,"ng-template",32),d.gd(36,ce,8,7,"ng-template",33),d.gd(37,ae,3,1,"ng-template",34),d.lc(),d.mc(38,"p",35),d.mc(39,"strong"),d.id(40),d.lc(),d.lc(),d.mc(41,"legend",36),d.mc(42,"span",27),d.hc(43,"i",28),d.id(44," \u0395\u03be\u03cc\u03c6\u03bb\u03b7\u03c3\u03b7 \u03bc\u03ad\u03c3\u03c9 \u03c4\u03bf\u03c5 Online \u03a3\u03c5\u03c3\u03c4\u03ae\u03bc\u03b1\u03c4\u03bf\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2"),d.lc(),d.mc(45,"span",27),d.hc(46,"i",29),d.id(47," \u0395\u03be\u03cc\u03c6\u03bb\u03b7\u03c3\u03b7 \u03c3\u03c4\u03bf \u0394\u03ae\u03bc\u03bf"),d.lc(),d.lc(),d.lc()}if(2&e){var n=d.yc(2);d.Tb(1),d.Hc("styleClass","mb-3"),d.Tb(6),d.dd(d.Nc(41,re)),d.Hc("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",n.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",n.hmerominiaApodiksisRange),d.Tb(4),d.dd(d.Nc(42,re)),d.Hc("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",n.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",n.hmerominiaSinallagisRange),d.Tb(4),d.Hc("items",n.tropoiPliromis)("ngModel",n.receiptType)("searchable",!1)("clearable",!1),d.Tb(17),d.kd("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u0391\u03c0\u03bf\u03b4\u03b5\u03af\u03be\u03b5\u03c9\u03bd: ",null==n.orderedReceiptsFiltered?null:n.orderedReceiptsFiltered.length,""),d.Tb(1),d.Hc("value",n.orderedReceiptsFiltered)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",n.orderedReceiptsFiltered.length)("loading",n.isLoading),d.Tb(7),d.kd("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u0391\u03c0\u03bf\u03b4\u03b5\u03af\u03be\u03b5\u03c9\u03bd: ",null==n.orderedReceiptsFiltered?null:n.orderedReceiptsFiltered.length,"")}}function le(e,t){if(1&e&&(d.kc(0),d.gd(1,oe,48,43,"div",9),d.jc()),2&e){var i=d.yc();d.Tb(1),d.Hc("ngIf",i.receipts.entries&&i.receipts.entries.length)}}var de=function(){function e(t,n,s,c,a){i(this,e),this.oidcSecuritySrv=t,this.epaymentsSrv=n,this.toasterSrv=s,this.cdr=c,this.route=a,this.onDestroy=new l.a,this.totalPoso=0,this.bankStatusMessageClass=void 0,this.receiptsUrlBase=AppConfOptions.epayments_api,this.receiptType="all",this.isLoading=!0,this.hmerominiaApodiksisRange=null,this.hmerominiaSinallagisRange=null,this.today=new Date,this.yearRange=k.h,this.tropoiPliromis=[{id:"all",perigrafi:"\u038c\u03bb\u03bf\u03b9"},{id:"municipality",perigrafi:"\u03a4\u03b1\u03bc\u03b5\u03af\u03bf \u0394\u03ae\u03bc\u03bf\u03c5"},{id:"bank",perigrafi:"Online"}]}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.isLoading=!0,this.epaymentsSrv.getPaymentSettings().subscribe(function(t){return e.paymentsSettings=t}),this.epaymentsSrv.getBankMessages().pipe(Object(b.a)(function(t){return t?(e.oikonomikiBankMessages=t,e.oidcSecuritySrv.userData$.pipe(Object(J.a)(e.onDestroy))):Object(g.a)(!1)}),Object(b.a)(function(t){return t?(e.user=t,e.route.queryParams.pipe(Object(J.a)(e.onDestroy))):Object(g.a)(!1)})).subscribe(function(t){if(t){var i,n=t;if(n.messagecode||n.paymentStatus)i=n.messagecode?n.messagecode:n.paymentStatus,e.bankStatusMessage=e.oikonomikiBankMessages[i],e.bankStatusMessageClass="TRANSACTION_COMPLETED"==i||"APPROVED"==i?"success":"error";Object(k.d)(e.cdr),e._initReceiptsByTin()}else e.toasterSrv.showError("","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac..."),e.isLoading=!1,Object(k.d)(e.cdr)})}},{key:"ngOnChanges",value:function(e){e&&e.tabChanged&&(this.bankStatusMessage=void 0,Object(k.d)(this.cdr))}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"_initReceiptsByTin",value:function(){var e=this;this.isLoading=!0;var t=new Date,i={tin:this.user.tin,year:t.getFullYear()};this.epaymentsSrv.getPaymentsByTin(i).subscribe(function(t){t&&(e.receipts=t,e.totalPoso=0,e.receipts.entries&&e.receipts.entries.length>0&&e.receipts.entries.forEach(function(t){e.totalPoso+=t.receiptAmount}),!e.receipts.statusCode||2!=e.receipts.statusCode&&3!=e.receipts.statusCode?1==e.receipts.statusCode&&0==e.receipts.entries.length?e.receiptsMessage="\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b1\u03c0\u03bf\u03b4\u03b5\u03af\u03be\u03b5\u03b9\u03c2 \u03b5\u03af\u03c3\u03c0\u03c1\u03b1\u03be\u03b7\u03c2 \u03c3\u03c4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2.":e._fillOrderedReceipts(e.receipts):e.receipts.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(e.toasterSrv.showWarning("","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b1\u03c0\u03bf\u03b4\u03b5\u03af\u03be\u03b5\u03b9\u03c2 \u03b5\u03af\u03c3\u03c0\u03c1\u03b1\u03be\u03b7\u03c2 \u03c3\u03c4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2."),e.receiptsMessage="\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b1\u03c0\u03bf\u03b4\u03b5\u03af\u03be\u03b5\u03b9\u03c2 \u03b5\u03af\u03c3\u03c0\u03c1\u03b1\u03be\u03b7\u03c2 \u03c3\u03c4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2."):e.receipts.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")&&(e.toasterSrv.showError("error","\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b5\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf \u03c4\u03b1\u03bc\u03b5\u03af\u03bf \u03c4\u03bf\u03c5 \u03b4\u03ae\u03bc\u03bf\u03c5. \u03a4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2 \u03b5\u03bc\u03c6\u03b1\u03bd\u03af\u03b6\u03b5\u03c4\u03b1\u03b9 \u03c3\u03b5 \u03c0\u03b1\u03c1\u03b1\u03c0\u03ac\u03bd\u03c9 \u03b1\u03c0\u03cc \u03bc\u03b9\u03b1 \u03ba\u03b1\u03c1\u03c4\u03ad\u03bb\u03b5\u03c2, \u03bf\u03b9 \u03bf\u03c0\u03bf\u03af\u03b5\u03c2 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c3\u03c5\u03b3\u03c7\u03c9\u03bd\u03b5\u03c5\u03b8\u03bf\u03cd\u03bd."),e.receiptsMessage="\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b5\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf \u03c4\u03b1\u03bc\u03b5\u03af\u03bf \u03c4\u03bf\u03c5 \u03b4\u03ae\u03bc\u03bf\u03c5. \u03a4\u03bf \u0391\u03a6\u039c \u03c3\u03b1\u03c2 \u03b5\u03bc\u03c6\u03b1\u03bd\u03af\u03b6\u03b5\u03c4\u03b1\u03b9 \u03c3\u03b5 \u03c0\u03b1\u03c1\u03b1\u03c0\u03ac\u03bd\u03c9 \u03b1\u03c0\u03cc \u03bc\u03b9\u03b1 \u03ba\u03b1\u03c1\u03c4\u03ad\u03bb\u03b5\u03c2, \u03bf\u03b9 \u03bf\u03c0\u03bf\u03af\u03b5\u03c2 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c3\u03c5\u03b3\u03c7\u03c9\u03bd\u03b5\u03c5\u03b8\u03bf\u03cd\u03bd.")),e.isLoading=!1,Object(k.d)(e.cdr)})}},{key:"btnApplyFiltersClicked",value:function(){var e=this;this.isLoading=!0,this.orderedReceiptsFiltered=Object(k.c)(this.orderedReceipts),this.hmerominiaApodiksisRange&&(this.orderedReceiptsFiltered=this.orderedReceiptsFiltered.filter(function(t){return!!$.utc(t.receiptDateCreated).isBetween($.utc(e.hmerominiaApodiksisRange[0]),$.utc(e.hmerominiaApodiksisRange[1]).add(1,"day"))})),this.hmerominiaSinallagisRange&&(this.orderedReceiptsFiltered=this.orderedReceiptsFiltered.filter(function(t){return!!$(t.bankTxnDateCreated).isBetween($(e.hmerominiaSinallagisRange[0]),$(e.hmerominiaSinallagisRange[1]).add(1,"day"))})),Object(k.d)(this.cdr),this._filterByType()}},{key:"btnCleanFiltersClicked",value:function(){this.orderedReceiptsFiltered=Object(k.c)(this.orderedReceipts),this.hmerominiaApodiksisRange=null,this.hmerominiaSinallagisRange=null,this.receiptType,Object(k.d)(this.cdr)}},{key:"_filterByType",value:function(){"bank"==this.receiptType?this.orderedReceiptsFiltered=this.orderedReceiptsFiltered.filter(function(e){return 0!=e.isOnline}):"municipality"==this.receiptType&&(this.orderedReceiptsFiltered=this.orderedReceiptsFiltered.filter(function(e){return 1!=e.isOnline})),this.isLoading=!1,Object(k.d)(this.cdr)}},{key:"btnBankStatusMessageClicked",value:function(){this.bankStatusMessage=null,this._initReceiptsByTin()}},{key:"_fillOrderedReceipts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==t&&(t=this.receipts);var i=this.receipts.entries.filter(function(e){return null===e.receiptDateCreated}),n=this.receipts.entries.filter(function(e){return null!=e.receiptDateCreated});this.orderedReceipts=n.sort(function(e,t){return t.receiptDateCreated!==e.receiptDateCreated?t.receiptDateCreated>e.receiptDateCreated:parseInt(t.receiptIncrNr.split("/").pop())>parseInt(e.receiptIncrNr.split("/").pop())}),0!=i.length&&i.forEach(function(t){e.orderedReceipts.unshift(t)}),this.orderedReceipts.forEach(function(e){0==e.isOnline?e.icon="far fa-building":e.icon="fas fa-desktop",null==e.bankTxnDescr?e.description=e.receiptDescr:e.description=e.bankTxnDescr,null==e.bankTxnPaymentTotal?e.paymentTotal=e.receiptAmount:e.paymentTotal=e.bankTxnPaymentTotal,null!=e.receiptId&&null!=e.bankTxnUid?e.link='<a href="'+AppConfOptions.epayments_api+"/api/PersistedDebits/GetPaymentFile/"+e.bankTxnUid+'" target="_blank"><i class="far fa-file-pdf"></i></a>':e.link=""}),this.orderedReceiptsFiltered=Object(k.c)(this.orderedReceipts),Object(k.d)(this.cdr)}},{key:"handleError",value:function(e){return console.log(e.message),console.log(e.error),Object(W.a)(e.message)}}]),e}();de.\u0275fac=function(e){return new(e||de)(d.gc(p.e),d.gc(C.a),d.gc(v.a),d.gc(d.j),d.gc(o.a))},de.\u0275cmp=d.ac({type:de,selectors:[["app-receipts"]],inputs:{tabChanged:"tabChanged"},features:[d.Rb],decls:4,vars:4,consts:[["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],["severity","warn",3,"text",4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],[4,"ngIf"],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["severity","warn",3,"text"],[3,"severity","text","styleClass"],["class","receipts-info",4,"ngIf"],[1,"receipts-info"],["header","\u03a6\u03af\u03bb\u03c4\u03c1\u03b1 \u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7\u03c2",3,"styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-sm-6","col-md-4"],["for","hmerominiaApodiksisRange"],["name","hmerominiaApodiksisRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["for","exchangeDatepicker"],["name","hmerominiaSinallagisRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["for","recType"],["name","recType","bindLabel","perigrafi","bindValue","id",3,"items","ngModel","searchable","clearable","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"d-flex","flex-wrap","mb-1",2,"font-size","14px"],[1,"mr-1"],[1,"fas","fa-desktop","fa-fw"],[1,"far","fa-building","fa-fw"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"mt-1"],[1,"d-flex","flex-wrap","mt-1","mb-1",2,"font-size","14px"],[1,"fixed-width-col-40"],[1,"fixed-width-col-60"],[1,"fixed-width-col-150"],["class","fixed-width-col-60",4,"ngIf"],[1,"fixed-width-col-40","text-center"],[1,"p-column-title"],["aria-hidden","true"],[1,"fixed-width-col-60","text-right"],["class","fixed-width-col-60 text-center",4,"ngIf"],[1,"fixed-width-col-60","text-center"],["target","_blank","aria-label","\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03bc\u03bf\u03c2 \u03b3\u03b9\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03bf \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7\u03c2","rel","noopener",3,"href",4,"ngIf"],["target","_blank","aria-label","\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03bc\u03bf\u03c2 \u03b3\u03b9\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03bf \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7\u03c2","rel","noopener",3,"href"],["aria-hidden","true",1,"far","fa-file-pdf"],["colspan","6",1,"fixed-width-col-430","text-right"],[1,"fixed-width-col-120"]],template:function(e,t){1&e&&(d.gd(0,X,3,0,"div",0),d.gd(1,Y,1,1,"p-message",1),d.gd(2,Q,1,3,"p-message",2),d.gd(3,le,2,1,"ng-container",3)),2&e&&(d.Hc("ngIf",!t.receipts||t.isLoading),d.Tb(1),d.Hc("ngIf",t.receiptsMessage&&""!=t.receiptsMessage),d.Tb(1),d.Hc("ngIf",!t.isLoading&&t.bankStatusMessage&&""!=t.bankStatusMessage),d.Tb(1),d.Hc("ngIf",t.receipts&&!t.isLoading))},directives:[u.p,h.b,f.a,S.w,S.n,S.o,G.a,S.m,S.p,O.a,w.d,x.j],pipes:[u.f,u.d],encapsulation:2,changeDetection:0});var pe=c("iHy+");function ue(e,t){1&e&&d.hc(0,"p-message",3)}function he(e,t){if(1&e&&(d.mc(0,"p-panel",4),d.hc(1,"div",5),d.zc(2,"decodeHtmlString"),d.lc()),2&e){var i=d.yc();d.Hc("styleClass","tab-msg mb-3")("toggleable",!0),d.Tb(1),d.Hc("innerHTML",d.Ac(2,3,i.tabMsg),d.ad)}}function fe(e,t){if(1&e&&d.hc(0,"app-receipts",10),2&e){var i=d.yc(2);d.Hc("tabChanged",i.onTbChanged)}}function me(e,t){if(1&e){var i=d.nc();d.mc(0,"p-tabView",6),d.wc("onChange",function(e){return d.Zc(i),d.yc().onTabChanged(e)}),d.mc(1,"p-tabPanel",7),d.hc(2,"app-debits"),d.lc(),d.mc(3,"p-tabPanel",8),d.gd(4,fe,1,1,"ng-template",9),d.lc(),d.lc()}if(2&e){var n=d.yc();d.Hc("activeIndex",n.index)}}var ge=function(){function e(t,n,s,c){i(this,e),this.oidcSecuritySrv=t,this.location=n,this.router=s,this.route=c,this.onDestroy=new l.a,this.index=0,this.onTbChanged=!1}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.oidcSecuritySrv.isAuthenticated$.subscribe(function(t){e.isAuthorized=t,AppConfOptions&&AppConfOptions.epayments_debits_tab_info&&""!=AppConfOptions.epayments_debits_tab_info&&e.router.url.includes("debits")&&(e.tabMsg=AppConfOptions.epayments_debits_tab_info),AppConfOptions&&AppConfOptions.epayments_receipts_tab_info&&""!=AppConfOptions.epayments_receipts_tab_info&&e.router.url.includes("receipts")&&(e.tabMsg=AppConfOptions.epayments_receipts_tab_info)}),"receipts"===this.route.children[0].snapshot.url[0].path?this.index=1:this.index=0}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onTabChanged",value:function(e){0==e.index?(this.router.navigate(["./debits"],{relativeTo:this.route}),AppConfOptions&&AppConfOptions.epayments_debits_tab_info&&""!=AppConfOptions.epayments_debits_tab_info&&(this.tabMsg=AppConfOptions.epayments_debits_tab_info)):(this.router.navigate(["./receipts"],{relativeTo:this.route}),this.onTbChanged=!0,AppConfOptions&&AppConfOptions.epayments_receipts_tab_info&&""!=AppConfOptions.epayments_receipts_tab_info&&(this.tabMsg=AppConfOptions.epayments_receipts_tab_info))}}]),e}();ge.\u0275fac=function(e){return new(e||ge)(d.gc(p.e),d.gc(u.k),d.gc(o.d),d.gc(o.a))},ge.\u0275cmp=d.ac({type:ge,selectors:[["app-epayments-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:3,vars:3,consts:[["severity","warn","text","\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c5\u03bd\u03b4\u03b5\u03b8\u03b5\u03af\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b7\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03c5\u03c0\u03b7\u03c1\u03b5\u03c3\u03b9\u03ce\u03bd.",4,"ngIf"],["header","\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2",3,"styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],["severity","warn","text","\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c5\u03bd\u03b4\u03b5\u03b8\u03b5\u03af\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b7\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03c5\u03c0\u03b7\u03c1\u03b5\u03c3\u03b9\u03ce\u03bd."],["header","\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2",3,"styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],["header","\u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ad\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd"],["header","\u0399\u03c3\u03c4\u03bf\u03c1\u03b9\u03ba\u03cc \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ce\u03bd"],["pTemplate","content"],[3,"tabChanged"]],template:function(e,t){1&e&&(d.gd(0,ue,1,0,"p-message",0),d.gd(1,he,3,5,"p-panel",1),d.gd(2,me,5,1,"p-tabView",2)),2&e&&(d.Hc("ngIf",!t.isAuthorized),d.Tb(1),d.Hc("ngIf",t.tabMsg),d.Tb(1),d.Hc("ngIf",t.isAuthorized))},directives:[u.p,h.b,f.a,m.b,m.a,q,x.j,de],pipes:[pe.a],encapsulation:2});var be=[{path:"",component:ge,children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:q},{path:"receipts",component:de}]}],ye=function e(){i(this,e)};ye.\u0275fac=function(e){return new(e||ye)},ye.\u0275mod=d.ec({type:ye}),ye.\u0275inj=d.dc({imports:[[o.g.forChild(be)],o.g]});var ve=function e(){i(this,e)};ve.\u0275fac=function(e){return new(e||ve)},ve.\u0275mod=d.ec({type:ve}),ve.\u0275inj=d.dc({providers:[C.a],imports:[[ye,r.a,a.d]]})}}])}();