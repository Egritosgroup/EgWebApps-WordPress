"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[906],{35906:function(t,s,e){e.r(s),e.d(s,{TautotitaOfeilisModule:function(){return G}});var i=e(43645),n=e(29790),r=e(23292),o=e(35660),a=e(54655),u=e(68214),p=e(79765),l=e(46782),c=e(43190),h=e(37716),d=e(74868),m=e(12622),g=e(38583),f=e(60394),_=e(3379),y=e(9112),b=e(21571),A=(()=>((A||(A={})).paymentCode="\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2",A))(),Z=(()=>((Z||(Z={})).paymentCode="Payment Code",Z))(),x=e(84608),w=e(88002),C=e(5304),v=e(91841);let q=(()=>{class t{constructor(t,s){this.http=t,this.toasterSrv=s,this.apiUrl=AppConfOptions.eidopoiitiria_api+"api/"}getYpoloipoKodikouPliromisDias(t){return this.http.get(this.apiUrl+`PraxeisEidopoiisis/GetYpoloipoKodikouPliromisDias/${t}`).pipe((0,w.U)(t=>t),(0,C.K)(t=>(0,u.Zj)(t,this.toasterSrv)))}}return t.\u0275fac=function(s){return new(s||t)(h.LFG(v.eN),h.LFG(u.MJ))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac}),t})();var S=e(3679);const k=["tautotitaOfeilisForm"];function T(t,s){if(1&t&&h._UZ(0,"p-message",16),2&t){const t=h.oxw(2);h.Q6J("severity",t.bankStatusMessageClass)("text",t.bankStatusMessage)("styleClass","mb-2")}}function O(t,s){if(1&t&&h._UZ(0,"p-message",17),2&t){const t=h.oxw(2);h.Q6J("styleClass","mt-2 form-msgs")("escape",!1)("text",t.formErrorsMsg)}}function J(t,s){if(1&t){const t=h.EpF();h.ynx(0),h.YNc(1,T,1,3,"p-message",2),h.TgZ(2,"form",3,4),h.TgZ(4,"div",5),h.TgZ(5,"div",6),h.TgZ(6,"label",7),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.TgZ(9,"input",8),h.NdJ("ngModelChange",function(s){return h.CHM(t),h.oxw().request.kodikos=s}),h.ALo(10,"translate"),h.qZA(),h.TgZ(11,"div",9),h._uU(12),h.ALo(13,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(14,"div",10),h.TgZ(15,"button",11),h.NdJ("click",function(){return h.CHM(t),h.oxw().onSubmit()}),h._UZ(16,"span",12),h._uU(17),h.ALo(18,"translate"),h.qZA(),h.TgZ(19,"button",13),h.NdJ("click",function(){return h.CHM(t),h.oxw().onClear()}),h._UZ(20,"span",14),h._uU(21),h.ALo(22,"translate"),h.qZA(),h.qZA(),h.YNc(23,O,1,3,"p-message",15),h.qZA(),h.BQk()}if(2&t){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.bankStatusMessage&&""!==t.bankStatusMessage),h.xp6(6),h.hij("",h.lcZ(8,11,null==t.translation?null:t.translation.eidopoiitiria.code),"*"),h.xp6(2),h.Q6J("placeholder",h.lcZ(10,13,null==t.translation?null:t.translation.eidopoiitiria.code))("ngModel",t.request.kodikos)("disabled",t.response||t.isLoading),h.xp6(2),h.Q6J("hidden",!t.isFormSubmitted||t.isFormSubmitted&&t.request.kodikos&&""!==t.request.kodikos),h.xp6(1),h.hij(" *",h.lcZ(13,15,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),h.xp6(3),h.Q6J("disabled",t.response),h.xp6(2),h.hij(" ",h.lcZ(18,17,null==t.translation?null:t.translation.egwebapps.egrSearchBtn)," "),h.xp6(4),h.hij(" ",h.lcZ(22,19,null==t.translation?null:t.translation.egwebapps.egrClearBtn)," "),h.xp6(2),h.Q6J("ngIf",t.formErrorsMsg&&""!==t.formErrorsMsg)}}function L(t,s){1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"span",24),h._uU(2,"\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2:"),h.qZA(),h.qZA())}function M(t,s){1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"span",24),h._uU(2,"\u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),h.qZA(),h.qZA())}function I(t,s){1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"span",24),h._uU(2,"\u03a0\u03bf\u03c3\u03cc \u03a0\u03c1\u03bf\u03c3\u03b1\u03c5\u03be\u03ae\u03c3\u03b5\u03c9\u03bd:"),h.qZA(),h.qZA())}function Y(t,s){1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"strong",24),h._uU(2,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),h.qZA(),h.qZA())}function E(t,s){if(1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"span",25),h._uU(2),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(t.response.remittanceInfo)}}const Q=function(t){return[t,"\u20ac","symbol","1.2","el"]};function P(t,s){if(1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"span",25),h._uU(2),h.ALo(3,"currency"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(h.G7q(3,1,h.VKq(7,Q,t.response.currentKatharoPoso)))}}function U(t,s){if(1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"span",25),h._uU(2),h.ALo(3,"currency"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(h.G7q(3,1,h.VKq(7,Q,t.response.currentProsafksisi)))}}function N(t,s){if(1&t&&(h.TgZ(0,"p",23),h.TgZ(1,"strong",25),h._uU(2),h.ALo(3,"currency"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(h.G7q(3,1,h.VKq(7,Q,t.response.ypoloipoProsPliromi)))}}function F(t,s){if(1&t){const t=h.EpF();h.ynx(0),h._UZ(1,"hr"),h.TgZ(2,"h5",18),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",19),h.TgZ(6,"div",20),h.TgZ(7,"div"),h.YNc(8,L,3,0,"p",21),h.YNc(9,M,3,0,"p",21),h.YNc(10,I,3,0,"p",21),h.YNc(11,Y,3,0,"p",21),h.qZA(),h.TgZ(12,"div"),h.YNc(13,E,3,1,"p",21),h.YNc(14,P,4,9,"p",21),h.YNc(15,U,4,9,"p",21),h.YNc(16,N,4,9,"p",21),h.qZA(),h.qZA(),h.TgZ(17,"app-checkout",22),h.NdJ("onPayBtnClick",function(s){return h.CHM(t),h.oxw().onCreatePaymentRequest(s)}),h.qZA(),h.qZA(),h.BQk()}if(2&t){const t=h.oxw();h.xp6(3),h.Oqu(h.lcZ(4,14,null==t.translation?null:t.translation.egwebapps.egrResults)),h.xp6(5),h.Q6J("ngIf",t.response.remittanceInfo),h.xp6(1),h.Q6J("ngIf",t.response.currentKatharoPoso),h.xp6(1),h.Q6J("ngIf",t.response.remittanceInfo),h.xp6(1),h.Q6J("ngIf",t.response.remittanceInfo),h.xp6(2),h.Q6J("ngIf",t.response.remittanceInfo),h.xp6(1),h.Q6J("ngIf",t.response.currentKatharoPoso),h.xp6(1),h.Q6J("ngIf",t.response.currentProsafksisi),h.xp6(1),h.Q6J("ngIf",t.response.ypoloipoProsPliromi),h.xp6(1),h.Q6J("isPaymentFormValid",!0)("doPaymentSubscription",t.onDoPaymentSubject.asObservable())("finApiUrl",t.financeApiUrl)("buttonText",t.translation.egwebapps.egrPaymentBtnText)("cancelButtonText",t.translation.egwebapps.egrCancelBtn)}}let D=(()=>{class t{constructor(t,s,e,i,n,r,o,a,u){this.oidcSecuritySrv=t,this.epaymentsSrv=s,this.egPaymentSrv=e,this.tautotitaOfeilisSrv=i,this.cookieSrv=n,this.toasterSrv=r,this.appCacheSv=o,this.cdr=a,this.route=u,this.request={},this.countriesList=[],this.onDoPaymentSubject=new p.xQ,this.onDestroy=new p.xQ,this.isLoading=!1,this.isLoadingInit=!1,this.errorMessageProfile=null,this.oikonomikiBankMessagesEn=x.Px,this.isFormSubmitted=!1}ngOnInit(){(0,y.aj)([this.appCacheSv.translation$,this.appCacheSv.selectedLang$]).pipe((0,l.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t[0],this.selectedLang=t[1],this.formDictionaryEnum="el"==this.selectedLang?A:Z,(0,u.RA)(this.cdr))}),this.isLoadingInit=!0,(0,u.RA)(this.cdr),"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=(0,u.Qj)(AppConfOptions.epayments_api)),this.route.queryParams.pipe((0,l.R)(this.onDestroy)).subscribe(t=>{var s;if(t){let s=t;if(s.messagecode||s.paymentStatus){let t=s.messagecode?s.messagecode:s.paymentStatus;this.bankStatusMessage="el"==this.selectedLang?this.oikonomikiBankMessages[t]:this.oikonomikiBankMessagesEn[t],this.bankStatusMessageClass="TRANSACTION_COMPLETED"==t||"APPROVED"==t?"success":"error"}}else this.toasterSrv.showError("",null===(s=this.translation)||void 0===s?void 0:s.egwebapps.egrProblemFound);(0,u.RA)(this.cdr)}),this.appCacheSv.initCountries(AuthConfOptions.stsServer+"/api/general/GetCountries"),(0,b.$R)(this.epaymentsSrv.getBankMessages(),this.oidcSecuritySrv.userData$,this.appCacheSv.countries$).subscribe(t=>{t&&(this.oikonomikiBankMessages=t[0]?t[0]:null,t[1]&&(this.user=t[1].userData,this.user&&(this.user.email=(0,u.Ew)(this.user.email)?this.user.email:this.user.email.trim(),this.user.username=(0,u.Ew)(this.user.username)?this.user.username:this.user.username.trim(),this.user.tin=(0,u.Ew)(this.user.tin)?this.user.tin:this.user.tin.trim(),this.user.family_name=(0,u.Ew)(this.user.family_name)?this.user.family_name:this.user.family_name.trim(),this.user.given_name=(0,u.Ew)(this.user.given_name)?this.user.given_name:this.user.given_name.trim(),this.user.fathers_name=(0,u.Ew)(this.user.fathers_name)?this.user.fathers_name:this.user.fathers_name.trim(),this.user.mothers_name=(0,u.Ew)(this.user.mothers_name)?this.user.mothers_name:this.user.mothers_name.trim(),this.user.name=(0,u.Ew)(this.user.name)?this.user.name:this.user.name.trim(),this.user.address_city=(0,u.Ew)(this.user.address_city)?this.user.address_city:this.user.address_city.trim(),this.user.address_country_code=(0,u.Ew)(this.user.address_country_code)?this.user.address_country_code:this.user.address_country_code.trim(),this.user.address_country_num=(0,u.Ew)(this.user.address_country_num)?this.user.address_country_num:this.user.address_country_num.trim(),this.user.address_zip=(0,u.Ew)(this.user.address_zip)?this.user.address_zip:this.user.address_zip.trim(),this.user.address=(0,u.Ew)(this.user.address)?this.user.address:this.user.address.trim(),this.user.adt=(0,u.Ew)(this.user.adt)?this.user.adt:this.user.adt.trim(),this.user.phone_number=(0,u.Ew)(this.user.phone_number)?this.user.phone_number:this.user.phone_number.trim())),t[2]&&(this.countriesList=t[2],this.user&&this.user.address_country_code&&""!=this.user.address_country_code&&(this.user.address_country_num=this.countriesList.find(t=>t.Alpha2Code==this.user.address_country_code).NumericCode.toString()))),this.isLoadingInit=!1,(0,u.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSubmit(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,u.RA)(this.cdr),this.isFormSubmitted&&this.tautotitaOfeilisForm.valid?(this.response=null,this.isLoading=!0,(0,u.RA)(this.cdr),this.tautotitaOfeilisSrv.getYpoloipoKodikouPliromisDias(this.request.kodikos).subscribe(t=>{t&&t.statusCode==u.WE.Ok?this.response=t:(this.toasterSrv.showError("",t.message),this.errorMessage=t.message),this.isLoading=!1,(0,u.RA)(this.cdr)})):(this.formErrorsMsg=(0,u.CD)(this.tautotitaOfeilisForm,this.formDictionaryEnum,""),(0,u.RA)(this.cdr))}onCreatePaymentRequest(t){}onClear(){this.isFormSubmitted=!1,this.request=null,this.response=null,(0,u.RA)(this.cdr)}}return t.\u0275fac=function(s){return new(s||t)(h.Y36(d.J_),h.Y36(r.C),h.Y36(u.te),h.Y36(q),h.Y36(u.N_),h.Y36(u.MJ),h.Y36(m.g),h.Y36(h.sBO),h.Y36(a.gz))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-tautotita-ofeilis-debits"]],viewQuery:function(t,s){if(1&t&&h.Gf(k,5),2&t){let t;h.iGM(t=h.CRH())&&(s.tautotitaOfeilisForm=t.first)}},inputs:{isAuthorized:"isAuthorized"},decls:3,vars:4,consts:[[3,"condition","customClass"],[4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],[1,"form"],["tautotitaOfeilisForm","ngForm"],[1,"row"],[1,"form-group","col-12"],["for","paymentCode"],["name","paymentCode","type","text","required","",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],[1,"d-flex","align-items-center","justify-content-center","flex-wrap"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"severity","text","styleClass"],["severity","error",3,"styleClass","escape","text"],[1,"mt-4","text-center"],[1,"debits-info","d-flex","justify-content-between"],[1,"debits-info_left","d-flex","mr-1"],["class","mb-0",4,"ngIf"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","cancelButtonText","onPayBtnClick"],[1,"mb-0"],[1,"mr-1",2,"width","220px","line-height","1.7"],[1,"totalPoso",2,"line-height","1.7"]],template:function(t,s){1&t&&(h._UZ(0,"lib-egr-loading",0),h.YNc(1,J,24,21,"ng-container",1),h.YNc(2,F,18,16,"ng-container",1)),2&t&&(h.Q6J("condition",s.isLoadingInit||s.isLoading)("customClass","egr-load-small"),h.xp6(1),h.Q6J("ngIf",!s.isLoadingInit),h.xp6(1),h.Q6J("ngIf",s.response&&!s.isLoading))},directives:[u.IE,g.O5,S._Y,S.JL,S.F,S.Fj,S.Q7,S.JJ,S.On,_.q,u.Hl],pipes:[n.X$,g.H9],encapsulation:2,changeDetection:0}),t})();var R=e(24020),B=e(41886);function z(t,s){if(1&t&&h._UZ(0,"p-message",4),2&t){const t=h.oxw();h.Q6J("text",null==t.translation?null:t.translation.egwebapps.egwebappsLoginMesg)}}function j(t,s){if(1&t&&(h.TgZ(0,"p-panel",7),h._UZ(1,"div",8),h.ALo(2,"decodeHtmlString"),h.qZA()),2&t){const t=h.oxw(2);h.Q6J("header",null==t.translation?null:t.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),h.xp6(1),h.Q6J("innerHTML",h.lcZ(2,4,t.tabMsg),h.oJD)}}function $(t,s){if(1&t&&(h.ynx(0),h.YNc(1,j,3,6,"p-panel",5),h.TgZ(2,"div",6),h._UZ(3,"app-tautotita-ofeilis-debits"),h.qZA(),h.BQk()),2&t){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.tabMsg)}}const H=[{path:"",component:(()=>{class t{constructor(t,s,e,i,n,r){this.oidcSecuritySrv=t,this.appCacheSv=s,this.location=e,this.cdr=i,this.router=n,this.route=r,this.onDestroy=new p.xQ,this.afmNotFound=!1,this.index=0,this.isUnauthorizedAllowed=AppConfOptions.unauthorized_allowed,this.selectedLang="el"}ngOnInit(){this.appCacheSv.translation$.pipe((0,l.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t,(0,u.RA)(this.cdr))}),this.appCacheSv.selectedLang$.pipe((0,l.R)(this.onDestroy)).subscribe(t=>{t&&(this.selectedLang=t),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.eidopoiitiria_tab_info_en&&""!=AppConfOptions.eidopoiitiria_tab_info_en?this.tabMsg=AppConfOptions.eidopoiitiria_tab_info_en:AppConfOptions.eidopoiitiria_tab_info&&""!=AppConfOptions.eidopoiitiria_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.eidopoiitiria_tab_info),(0,u.RA)(this.cdr)}),this.oidcSecuritySrv.isAuthenticated$.pipe((0,c.w)(t=>(this.isAuthorized=null!=t&&t.isAuthenticated,this.oidcSecuritySrv.userData$))).subscribe(t=>{let s=null==t?void 0:t.userData;this.isAuthorized&&s&&(!s.tin||(0,u.Ew)(s.tin))&&1==AppConfOptions.eidopoiitiria_afm_required&&(this.afmNotFound=!0)}),this.index="receipts"===this.route.children[0].snapshot.url[0].path?1:0,(0,u.RA)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(t){this.router.navigate(0==t.index?["./debits"]:["./receipts"],{relativeTo:this.route})}}return t.\u0275fac=function(s){return new(s||t)(h.Y36(d.J_),h.Y36(m.g),h.Y36(g.Ye),h.Y36(h.sBO),h.Y36(a.F0),h.Y36(a.gz))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-tautotita-ofeilis-layout"]],decls:5,vars:4,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[3,"afmNotFound"],[4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[1,"bg-white","p-2"],[3,"header","styleClass","toggleable"],[3,"innerHTML"]],template:function(t,s){1&t&&(h.TgZ(0,"h3",0),h._uU(1),h.qZA(),h.YNc(2,z,1,1,"p-message",1),h._UZ(3,"app-afmnotfound",2),h.YNc(4,$,4,1,"ng-container",3)),2&t&&(h.xp6(1),h.Oqu(null==s.translation?null:s.translation.menu.eidopoiitiriaMenuItem),h.xp6(1),h.Q6J("ngIf",!s.isAuthorized&&!s.isUnauthorizedAllowed),h.xp6(1),h.Q6J("afmNotFound",s.afmNotFound),h.xp6(1),h.Q6J("ngIf",!s.afmNotFound))},directives:[g.O5,f.d,_.q,D,R.s],pipes:[B.o],encapsulation:2,changeDetection:0}),t})(),children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:D}]}];let K=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[a.Bz.forChild(H)],a.Bz]}),t})(),G=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({providers:[q,r.C],imports:[[o.m,i.IJ,K,n.aw.forChild()]]}),t})()}}]);