"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[906],{35906:function(t,e,s){s.r(e),s.d(e,{TautotitaOfeilisModule:function(){return tt}});var i=s(46019),n=s(29790),r=s(23292),o=s(35660),a=s(54655),u=s(68214),l=s(79765),d=s(46782),p=s(43190),h=s(37716),c=s(74868),g=s(12622),m=s(38583),f=s(60394),A=s(3379),y=s(9112),b=s(25917),Z=(()=>((Z||(Z={})).paymentCode="\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2",Z))(),_=(()=>((_||(_={})).paymentCode="Payment Code",_))(),x=s(84608),C=s(88002),w=s(5304),q=s(91841);let v=(()=>{class t{constructor(t,e){this.http=t,this.toasterSrv=e,this.apiUrl=AppConfOptions.eidopoiitiria_api+"api/"}getYpoloipoKodikouPliromis(t){return this.http.get(this.apiUrl+`PraxeisEidopoiisis/GetYpoloipoKodikouPliromis/${t}`).pipe((0,C.U)(t=>t),(0,w.K)(t=>(0,u.Zj)(t,this.toasterSrv)))}addPaymentRequestKodikouPliromis(t){return this.http.post(this.apiUrl+"PraxeisEidopoiisis/AddPaymentRequestKodikouPliromis",t).pipe((0,C.U)(t=>t),(0,w.K)(t=>(0,u.Zj)(t,this.toasterSrv)))}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(q.eN),h.LFG(u.MJ))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac}),t})();var T=s(3679),S=s(86640);const k=["tautotitaOfeilisForm"];function M(t,e){if(1&t&&h._UZ(0,"p-message",17),2&t){const t=h.oxw(2);h.Q6J("severity",t.bankStatusMessageClass)("text",t.bankStatusMessage)("styleClass","mb-2")}}function P(t,e){if(1&t&&h._UZ(0,"p-message",18),2&t){const t=h.oxw(2);h.Q6J("text",t.errorMessage)("styleClass","mt-2")}}function J(t,e){if(1&t&&h._UZ(0,"p-message",19),2&t){const t=h.oxw(2);h.Q6J("styleClass","mt-2 form-msgs")("escape",!1)("text",t.formErrorsMsg)}}function L(t,e){if(1&t){const t=h.EpF();h.ynx(0),h.YNc(1,M,1,3,"p-message",2),h.YNc(2,P,1,2,"p-message",3),h.TgZ(3,"form",4,5),h.TgZ(5,"div",6),h.TgZ(6,"div",7),h.TgZ(7,"label",8),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.TgZ(10,"input",9),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw().request.kodikos=e}),h.ALo(11,"translate"),h.qZA(),h.TgZ(12,"div",10),h._uU(13),h.ALo(14,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(15,"div",11),h.TgZ(16,"button",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().onSubmit()}),h._UZ(17,"span",13),h._uU(18),h.ALo(19,"translate"),h.qZA(),h.TgZ(20,"button",14),h.NdJ("click",function(){return h.CHM(t),h.oxw().onClear()}),h._UZ(21,"span",15),h._uU(22),h.ALo(23,"translate"),h.qZA(),h.qZA(),h.YNc(24,J,1,3,"p-message",16),h.qZA(),h.BQk()}if(2&t){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.bankStatusMessage&&""!==t.bankStatusMessage),h.xp6(1),h.Q6J("ngIf",t.errorMessage&&""!==t.errorMessage),h.xp6(6),h.hij("",h.lcZ(9,12,null==t.translation?null:t.translation.eidopoiitiria.code),"*"),h.xp6(2),h.Q6J("placeholder",h.lcZ(11,14,null==t.translation?null:t.translation.eidopoiitiria.code))("ngModel",t.request.kodikos)("disabled",t.response||t.isLoading),h.xp6(2),h.Q6J("hidden",!t.isFormSubmitted||t.isFormSubmitted&&t.request.kodikos&&""!==t.request.kodikos),h.xp6(1),h.hij(" *",h.lcZ(14,16,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),h.xp6(3),h.Q6J("disabled",t.response),h.xp6(2),h.hij(" ",h.lcZ(19,18,null==t.translation?null:t.translation.egwebapps.egrSearchBtn)," "),h.xp6(4),h.hij(" ",h.lcZ(23,20,null==t.translation?null:t.translation.egwebapps.egrClearBtn)," "),h.xp6(2),h.Q6J("ngIf",t.formErrorsMsg&&""!==t.formErrorsMsg)}}function I(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",6),h.TgZ(1,"div",27),h.TgZ(2,"label"),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"input",28),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw(2).unAuthorizedAddress=e}),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"div",10),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.qZA(),h.TgZ(10,"div",29),h.TgZ(11,"label"),h._uU(12),h.ALo(13,"translate"),h.qZA(),h.TgZ(14,"input",30),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw(2).unAuthorizedTk=e}),h.ALo(15,"translate"),h.qZA(),h.TgZ(16,"div",10),h._uU(17),h.ALo(18,"translate"),h.qZA(),h.qZA(),h.TgZ(19,"div",31),h.TgZ(20,"label"),h._uU(21),h.ALo(22,"translate"),h.qZA(),h.TgZ(23,"input",32),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw(2).unAuthorizedPoli=e}),h.ALo(24,"translate"),h.qZA(),h.TgZ(25,"div",10),h._uU(26),h.ALo(27,"translate"),h.qZA(),h.qZA(),h.TgZ(28,"div",33),h.TgZ(29,"label"),h._uU(30),h.ALo(31,"translate"),h.qZA(),h.TgZ(32,"ng-select",34),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw(2).unAuthorizedCountryId=e}),h.qZA(),h.TgZ(33,"div",10),h._uU(34),h.ALo(35,"translate"),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.xp6(3),h.hij("",h.lcZ(4,22,null==t.translation?null:t.translation.egwebapps.egrAddress),"*"),h.xp6(2),h.Q6J("placeholder",h.lcZ(6,24,null==t.translation?null:t.translation.egwebapps.egrAddress))("ngModel",t.unAuthorizedAddress),h.xp6(2),h.Q6J("hidden",!t.isFormPaySubmitted||t.isFormPaySubmitted&&t.unAuthorizedAddress&&""!==t.unAuthorizedAddress),h.xp6(1),h.hij(" *",h.lcZ(9,26,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),h.xp6(4),h.hij("",h.lcZ(13,28,null==t.translation?null:t.translation.egwebapps.egrTk),"*"),h.xp6(2),h.Q6J("placeholder",h.lcZ(15,30,null==t.translation?null:t.translation.egwebapps.egrTk))("ngModel",t.unAuthorizedTk),h.xp6(2),h.Q6J("hidden",!t.isFormPaySubmitted||t.isFormPaySubmitted&&t.unAuthorizedTk&&""!==t.unAuthorizedTk),h.xp6(1),h.hij(" *",h.lcZ(18,32,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),h.xp6(4),h.hij("",h.lcZ(22,34,null==t.translation?null:t.translation.egwebapps.egrPoli),"*"),h.xp6(2),h.Q6J("placeholder",h.lcZ(24,36,null==t.translation?null:t.translation.egwebapps.egrPoli))("ngModel",t.unAuthorizedPoli),h.xp6(2),h.Q6J("hidden",!t.isFormPaySubmitted||t.isFormPaySubmitted&&t.unAuthorizedPoli&&""!==t.unAuthorizedPoli),h.xp6(1),h.hij(" *",h.lcZ(27,38,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),h.xp6(4),h.hij("",h.lcZ(31,40,null==t.translation?null:t.translation.egwebapps.egrEgsCountry),"*"),h.xp6(2),h.Q6J("items",t.countriesList)("virtualScroll",!0)("searchable",!0)("ngModel",t.unAuthorizedCountryId),h.xp6(1),h.Q6J("hidden",!t.isFormPaySubmitted||t.isFormPaySubmitted&&t.unAuthorizedCountryId&&""!==t.unAuthorizedCountryId),h.xp6(1),h.hij(" *",h.lcZ(35,42,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," ")}}function Q(t,e){1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"span",36),h._uU(2,"\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2:"),h.qZA(),h.qZA())}function O(t,e){1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"span",36),h._uU(2,"\u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),h.qZA(),h.qZA())}function z(t,e){1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"span",36),h._uU(2,"\u03a0\u03bf\u03c3\u03cc \u03a0\u03c1\u03bf\u03c3\u03b1\u03c5\u03be\u03ae\u03c3\u03b5\u03c9\u03bd:"),h.qZA(),h.qZA())}function U(t,e){1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"strong",36),h._uU(2,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),h.qZA(),h.qZA())}function E(t,e){if(1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"span",37),h._uU(2),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(t.response.remittanceInfo)}}const F=function(t){return[t,"\u20ac","symbol","1.2","el"]};function R(t,e){if(1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"span",37),h._uU(2),h.ALo(3,"currency"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(h.G7q(3,1,h.VKq(7,F,t.response.currentKatharoPoso)))}}function Y(t,e){if(1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"span",37),h._uU(2),h.ALo(3,"currency"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(h.G7q(3,1,h.VKq(7,F,t.response.currentProsafksisi)))}}function N(t,e){if(1&t&&(h.TgZ(0,"p",35),h.TgZ(1,"strong",37),h._uU(2),h.ALo(3,"currency"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(2),h.Oqu(h.G7q(3,1,h.VKq(7,F,t.response.ypoloipoProsPliromi)))}}function D(t,e){if(1&t){const t=h.EpF();h.ynx(0),h._UZ(1,"hr"),h.TgZ(2,"form",4,20),h.YNc(4,I,36,44,"div",21),h.qZA(),h.TgZ(5,"h5",22),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.TgZ(8,"div",23),h.TgZ(9,"div",24),h.TgZ(10,"div"),h.YNc(11,Q,3,0,"p",25),h.YNc(12,O,3,0,"p",25),h.YNc(13,z,3,0,"p",25),h.YNc(14,U,3,0,"p",25),h.qZA(),h.TgZ(15,"div"),h.YNc(16,E,3,1,"p",25),h.YNc(17,R,4,9,"p",25),h.YNc(18,Y,4,9,"p",25),h.YNc(19,N,4,9,"p",25),h.qZA(),h.qZA(),h.TgZ(20,"app-checkout",26),h.NdJ("onPayBtnClick",function(e){return h.CHM(t),h.oxw().onCreatePaymentRequest(e)}),h.qZA(),h.qZA(),h.BQk()}if(2&t){const t=h.MAs(3),e=h.oxw();h.xp6(4),h.Q6J("ngIf",!e.isAuthorized),h.xp6(2),h.Oqu(h.lcZ(7,15,null==e.translation?null:e.translation.egwebapps.egrResults)),h.xp6(5),h.Q6J("ngIf",e.response.remittanceInfo),h.xp6(1),h.Q6J("ngIf",null!==e.response.currentKatharoPoso),h.xp6(1),h.Q6J("ngIf",null!==e.response.remittanceInfo),h.xp6(1),h.Q6J("ngIf",null!==e.response.remittanceInfo),h.xp6(2),h.Q6J("ngIf",e.response.remittanceInfo),h.xp6(1),h.Q6J("ngIf",null!==e.response.currentKatharoPoso),h.xp6(1),h.Q6J("ngIf",null!==e.response.currentProsafksisi),h.xp6(1),h.Q6J("ngIf",null!==e.response.ypoloipoProsPliromi),h.xp6(1),h.Q6J("isPaymentFormValid",t.valid)("doPaymentSubscription",e.onDoPaymentSubject.asObservable())("finApiUrl",e.financeApiUrl)("buttonText",e.translation.egwebapps.egrPaymentBtnText)("cancelButtonText",e.translation.egwebapps.egrCancelBtn)}}let j=(()=>{class t{constructor(t,e,s,i,n,r,o,a,u){this.oidcSecuritySrv=t,this.epaymentsSrv=e,this.egPaymentSrv=s,this.tautotitaOfeilisSrv=i,this.cookieSrv=n,this.toasterSrv=r,this.appCacheSv=o,this.cdr=a,this.route=u,this.request={},this.countriesList=[],this.onDoPaymentSubject=new l.xQ,this.onDestroy=new l.xQ,this.isLoading=!1,this.isLoadingInit=!1,this.errorMessageProfile=null,this.oikonomikiBankMessagesEn=x.Px,this.isFormPaySubmitted=!1,this.isFormSubmitted=!1}ngOnInit(){(0,y.aj)([this.appCacheSv.translation$,this.appCacheSv.selectedLang$]).pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t[0],this.selectedLang=t[1],this.formDictionaryEnum="el"==this.selectedLang?Z:_,(0,u.RA)(this.cdr))}),this.isLoadingInit=!0,(0,u.RA)(this.cdr),"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=(0,u.Qj)(AppConfOptions.epayments_api)),this.appCacheSv.initCountries(AuthConfOptions.stsServer+"/api/general/GetCountries"),(0,y.aj)([this.oidcSecuritySrv.userData$,this.appCacheSv.countries$]).subscribe(t=>{t&&(t[0]&&(this.user=t[0].userData,this.user&&(this.user.email=(0,u.Ew)(this.user.email)?this.user.email:this.user.email.trim(),this.user.username=(0,u.Ew)(this.user.username)?this.user.username:this.user.username.trim(),this.user.tin=(0,u.Ew)(this.user.tin)?this.user.tin:this.user.tin.trim(),this.user.family_name=(0,u.Ew)(this.user.family_name)?this.user.family_name:this.user.family_name.trim(),this.user.given_name=(0,u.Ew)(this.user.given_name)?this.user.given_name:this.user.given_name.trim(),this.user.fathers_name=(0,u.Ew)(this.user.fathers_name)?this.user.fathers_name:this.user.fathers_name.trim(),this.user.mothers_name=(0,u.Ew)(this.user.mothers_name)?this.user.mothers_name:this.user.mothers_name.trim(),this.user.name=(0,u.Ew)(this.user.name)?this.user.name:this.user.name.trim(),this.user.address_city=(0,u.Ew)(this.user.address_city)?this.user.address_city:this.user.address_city.trim(),this.user.address_country_code=(0,u.Ew)(this.user.address_country_code)?this.user.address_country_code:this.user.address_country_code.trim(),this.user.address_country_num=(0,u.Ew)(this.user.address_country_num)?this.user.address_country_num:this.user.address_country_num.trim(),this.user.address_zip=(0,u.Ew)(this.user.address_zip)?this.user.address_zip:this.user.address_zip.trim(),this.user.address=(0,u.Ew)(this.user.address)?this.user.address:this.user.address.trim(),this.user.adt=(0,u.Ew)(this.user.adt)?this.user.adt:this.user.adt.trim(),this.user.phone_number=(0,u.Ew)(this.user.phone_number)?this.user.phone_number:this.user.phone_number.trim())),t[1]&&(this.countriesList=t[1],this.user&&this.user.address_country_code&&""!=this.user.address_country_code&&(this.user.address_country_num=this.countriesList.find(t=>t.Alpha2Code==this.user.address_country_code).NumericCode.toString()))),this.isLoadingInit=!1,(0,u.RA)(this.cdr)}),this.epaymentsSrv.getBankMessages().pipe((0,p.w)(t=>t?(this.oikonomikiBankMessages=t,this.route.queryParams.pipe((0,d.R)(this.onDestroy))):(0,b.of)(!1))).subscribe(t=>{var e;if(t){let e=t;if(e.messagecode||e.paymentStatus){let t=e.messagecode?e.messagecode:e.paymentStatus;this.bankStatusMessage="el"==this.selectedLang?this.oikonomikiBankMessages[t]:this.oikonomikiBankMessagesEn[t],this.bankStatusMessageClass="TRANSACTION_COMPLETED"==t||"APPROVED"==t?"success":"error"}}else this.toasterSrv.showError("",null===(e=this.translation)||void 0===e?void 0:e.egwebapps.egrProblemFound);(0,u.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSubmit(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,u.RA)(this.cdr),this.isFormSubmitted&&this.tautotitaOfeilisForm.valid?(this.response=null,this.isLoading=!0,(0,u.RA)(this.cdr),this.tautotitaOfeilisSrv.getYpoloipoKodikouPliromis(this.request.kodikos).subscribe(t=>{t&&t.statusCode==u.WE.Ok?this.response=t:(this.toasterSrv.showError("",t.message),this.errorMessage=t.message),this.isLoading=!1,(0,u.RA)(this.cdr)})):(this.formErrorsMsg=(0,u.CD)(this.tautotitaOfeilisForm,this.formDictionaryEnum,""),(0,u.RA)(this.cdr))}onCreatePaymentRequest(t){if(this.isAuthorized&&this.user&&(0,u.Ew)(this.user.email))return void this.toasterSrv.showWarning("","\u0395\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf \u03c4\u03bf email \u03c3\u03b1\u03c2 \u03c3\u03c4\u03b7 \u03c3\u03b5\u03bb\u03af\u03b4\u03b1 \u03c4\u03bf\u03c5 \u03c0\u03c1\u03bf\u03c6\u03af\u03bb \u03c3\u03b1\u03c2.");let e={remittanceInfo:this.response.remittanceInfo,amount:this.response.ypoloipoProsPliromi},s={relatedCallbackUrl:AppConfOptions.application_url+"/tautotita-ofeilis/debits",paymentMethodKey:t.key,kodikosDias:this.response.remittanceInfo,entries:[]};"PIRBGRAA"===t.key&&(s.billingAddressCountryCode=null),this.isAuthorized&&this.user&&!(0,u.Ew)(this.user.email)&&this.response?(e.debtorName=this.user.family_name+" "+this.user.fathers_name+" "+this.user.mothers_name+" "+this.user.name,e.tin=this.user.tin,s.tinRelated=this.user.tin,s.billingAddressCity=this.user.address_city,s.billingAddressCountryCode=this.user.address_country_code,s.billingAddressZip=this.user.address_zip,s.billingAddress=this.user.address,s.userEmail=this.user.email,s.userPhone=this.user.phone_number):!this.isAuthorized&&this.response&&AppConfOptions.unauthorized_allowed&&(s.billingAddress=this.unAuthorizedAddress,s.billingAddressZip=this.unAuthorizedTk,s.billingAddressCity=this.unAuthorizedPoli,s.billingAddressCountryCode=this.unAuthorizedCountryId),s.entries.push(e),this.paymentRequestDto=s,this.tautotitaOfeilisSrv.addPaymentRequestKodikouPliromis(this.paymentRequestDto).subscribe(t=>{t&&t.statusCode==u.WE.Ok?(this.paymentResponseDto=t.model,this.onDoPaymentSubject.next(this.paymentResponseDto)):(this.toasterSrv.showError("",t.message),this.errorMessage=t.message)})}onClear(){this.isFormSubmitted=!1,this.request={},this.response=null,this.errorMessage=null,(0,u.RA)(this.cdr)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(c.J_),h.Y36(r.C),h.Y36(u.te),h.Y36(v),h.Y36(u.N_),h.Y36(u.MJ),h.Y36(g.g),h.Y36(h.sBO),h.Y36(a.gz))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-tautotita-ofeilis-debits"]],viewQuery:function(t,e){if(1&t&&h.Gf(k,5),2&t){let t;h.iGM(t=h.CRH())&&(e.tautotitaOfeilisForm=t.first)}},inputs:{isAuthorized:"isAuthorized"},decls:3,vars:4,consts:[[3,"condition","customClass"],[4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],["severity","danger",3,"text","styleClass",4,"ngIf"],[1,"form"],["tautotitaOfeilisForm","ngForm"],[1,"row"],[1,"form-group","col-12"],["for","paymentCode"],["name","paymentCode","type","text","required","",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],[1,"d-flex","align-items-center","justify-content-center","flex-wrap"],["type","button",1,"btn","btn-primary","mr-1",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"severity","text","styleClass"],["severity","danger",3,"text","styleClass"],["severity","error",3,"styleClass","escape","text"],["tautotitaOfeilisExtraInfoForm","ngForm"],["class","row",4,"ngIf"],[1,"mt-4","text-center"],[1,"debits-info","d-flex","justify-content-between"],[1,"debits-info_left","d-flex","mr-1"],["class","mb-0",4,"ngIf"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","cancelButtonText","onPayBtnClick"],[1,"col-12","col-md-9"],["name","address","type","text","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"col-12","col-md-3"],["name","tk","type","text","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"col-12","col-md-6"],["name","poli","type","text","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"form-group","col-12","col-md-6"],["name","egsCountry","bindLabel","Perigrafi","bindValue","Id","required","",3,"items","virtualScroll","searchable","ngModel","ngModelChange"],[1,"mb-0"],[1,"mr-1",2,"width","220px","line-height","1.7"],[1,"totalPoso",2,"line-height","1.7"]],template:function(t,e){1&t&&(h._UZ(0,"lib-egr-loading",0),h.YNc(1,L,25,22,"ng-container",1),h.YNc(2,D,21,17,"ng-container",1)),2&t&&(h.Q6J("condition",e.isLoadingInit||e.isLoading)("customClass","egr-load-small"),h.xp6(1),h.Q6J("ngIf",!e.isLoadingInit),h.xp6(1),h.Q6J("ngIf",e.response&&!e.isLoading))},directives:[u.IE,m.O5,T._Y,T.JL,T.F,T.Fj,T.Q7,T.JJ,T.On,A.q,u.Hl,S.w9],pipes:[n.X$,m.H9],encapsulation:2,changeDetection:0}),t})();var B=s(24020),K=s(41886);function H(t,e){if(1&t&&h._UZ(0,"p-message",5),2&t){const t=h.oxw(2);h.Q6J("text",null==t.translation?null:t.translation.egwebapps.egwebappsLoginMesg)}}function G(t,e){if(1&t&&(h.TgZ(0,"p-panel",9),h._UZ(1,"div",10),h.ALo(2,"decodeHtmlString"),h.qZA()),2&t){const t=h.oxw(3);h.Q6J("header",null==t.translation?null:t.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),h.xp6(1),h.Q6J("innerHTML",h.lcZ(2,4,t.tabMsg),h.oJD)}}function $(t,e){if(1&t&&(h.ynx(0),h.YNc(1,G,3,6,"p-panel",6),h.TgZ(2,"div",7),h._UZ(3,"app-tautotita-ofeilis-debits",8),h.qZA(),h.BQk()),2&t){const t=h.oxw(2);h.xp6(1),h.Q6J("ngIf",t.tabMsg),h.xp6(2),h.Q6J("isAuthorized",t.isAuthorized)}}function V(t,e){if(1&t&&(h.ynx(0),h.YNc(1,H,1,1,"p-message",3),h._UZ(2,"app-afmnotfound",4),h.YNc(3,$,4,2,"ng-container",2),h.BQk()),2&t){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",!t.isAuthorized&&!t.isUnauthorizedAllowed),h.xp6(1),h.Q6J("afmNotFound",t.afmNotFound),h.xp6(1),h.Q6J("ngIf",!t.afmNotFound)}}const W=[{path:"",component:(()=>{class t{constructor(t,e,s,i,n,r){this.oidcSecuritySrv=t,this.appCacheSv=e,this.location=s,this.cdr=i,this.router=n,this.route=r,this.onDestroy=new l.xQ,this.isLoading=!1,this.afmNotFound=!1,this.index=0,this.isUnauthorizedAllowed=AppConfOptions.unauthorized_allowed,this.selectedLang="el"}ngOnInit(){this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t,(0,u.RA)(this.cdr))}),this.appCacheSv.selectedLang$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.selectedLang=t),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.eidopoiitiria_tab_info_en&&""!=AppConfOptions.eidopoiitiria_tab_info_en?this.tabMsg=AppConfOptions.eidopoiitiria_tab_info_en:AppConfOptions.eidopoiitiria_tab_info&&""!=AppConfOptions.eidopoiitiria_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.eidopoiitiria_tab_info),(0,u.RA)(this.cdr)}),this.isLoading=!0,(0,u.RA)(this.cdr),this.oidcSecuritySrv.isAuthenticated$.pipe((0,p.w)(t=>(this.isAuthorized=null!=t&&t.isAuthenticated,this.oidcSecuritySrv.userData$))).subscribe(t=>{if(t){let e=null==t?void 0:t.userData;this.isAuthorized&&e&&(!e.tin||(0,u.Ew)(e.tin))&&1==AppConfOptions.eidopoiitiria_afm_required&&(this.afmNotFound=!0)}this.isLoading=!1,(0,u.RA)(this.cdr)}),this.index="receipts"===this.route.children[0].snapshot.url[0].path?1:0,(0,u.RA)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(t){this.router.navigate(0==t.index?["./debits"]:["./receipts"],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(c.J_),h.Y36(g.g),h.Y36(m.Ye),h.Y36(h.sBO),h.Y36(a.F0),h.Y36(a.gz))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-tautotita-ofeilis-layout"]],decls:4,vars:4,consts:[[1,"module-title"],[3,"condition","customClass"],[4,"ngIf"],["severity","warn",3,"text",4,"ngIf"],[3,"afmNotFound"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[1,"bg-white","p-2"],[3,"isAuthorized"],[3,"header","styleClass","toggleable"],[3,"innerHTML"]],template:function(t,e){1&t&&(h.TgZ(0,"h3",0),h._uU(1),h.qZA(),h._UZ(2,"lib-egr-loading",1),h.YNc(3,V,4,3,"ng-container",2)),2&t&&(h.xp6(1),h.Oqu(null==e.translation?null:e.translation.menu.eidopoiitiriaMenuItem),h.xp6(1),h.Q6J("condition",e.isLoading)("customClass","egr-load-small"),h.xp6(1),h.Q6J("ngIf",!e.isLoading))},directives:[u.IE,m.O5,f.d,A.q,j,B.s],pipes:[K.o],encapsulation:2,changeDetection:0}),t})(),children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:j}]}];let X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[a.Bz.forChild(W)],a.Bz]}),t})(),tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({providers:[v,r.C],imports:[[o.m,i.IJ,X,n.aw.forChild()]]}),t})()}}]);