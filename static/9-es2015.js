(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"8BaW":function(e,t,i){"use strict";i.r(t),i.d(t,"DimotikosForosModule",(function(){return et}));var s=i("fXoL"),o=i("mrSG"),n=i("tk/3"),c=i("LRne"),a=i("2Vo4"),r=i("XNiG"),d=i("cp0P"),l=i("lJxs"),p=i("JIr8"),f=i("eIep"),h=i("1G5W"),u=i("pLZG"),m=i("5eHb"),g=i("tyNb"),b=i("3Pt+"),y=i("ofXK"),k=i("3u8h"),I=i("ZOsW"),U=i("9nqD"),O=i("eO1q"),P=i("rEr+"),v=i("dPl2"),j=i("Ji6n"),R=i("C7T5"),V=i.n(R),S=i("7zfz");function D(e,t){1&e&&(s.Tc(0),s.Vc(1,"div",4),s.Vc(2,"div",5),s.Vc(3,"div",6),s.Rd(4," \u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03ce \u03b4\u03bf\u03ba\u03b9\u03bc\u03ac\u03c3\u03c4\u03b5 \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1! "),s.Uc(),s.Uc(),s.Uc(),s.Sc())}function C(e,t){if(1&e&&(s.Vc(0,"p",15),s.Vc(1,"strong"),s.Rd(2,"\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1 \u0395\u03c0\u03b9\u03c7\u03b5\u03af\u03c1\u03b7\u03c3\u03b7\u03c2:"),s.Uc(),s.Rd(3),s.Uc()),2&e){const e=s.jd(3);s.Bc(3),s.Td("\xa0",e.epixeirisiInfo.eponimia," ")}}function w(e,t){if(1&e){const e=s.Wc();s.Vc(0,"button",16),s.hd("click",(function(){s.Hd(e);return s.jd(3).onCreateNewDilosiClicked()})),s.Rd(1,"\u039a\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b7\u03c3\u03b7\u03c2 \u039d\u03ad\u03b1\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2"),s.Uc()}}function x(e,t){if(1&e&&(s.Vc(0,"div",12),s.Pd(1,C,4,1,"p",13),s.Pd(2,w,2,0,"button",14),s.Uc()),2&e){const e=s.jd(2);s.Bc(1),s.sd("ngIf",e.epixeirisiInfo),s.Bc(1),s.sd("ngIf",e.diloseisInfoResponse&&e.diloseisInfoResponse.length>0)}}function B(e,t){if(1&e){const e=s.Wc();s.Vc(0,"app-katastimata-receipts",17),s.hd("reloadData",(function(){s.Hd(e);return s.jd(2)._loadData()})),s.Uc()}if(2&e){const e=s.jd(2);s.sd("diloseisReceipts",e.model)("userInfo",e.userInfo)("isLoading",e.isLoading)("diloseisInfoResponse",e.diloseisInfoResponse)}}function A(e,t){if(1&e){const e=s.Wc();s.Vc(0,"app-katastimata-saved",20),s.hd("reloadData",(function(){s.Hd(e);return s.jd(3)._loadData()})),s.Uc()}if(2&e){const e=s.jd(3);s.sd("dilosiInfoSaved",e.diloseisInfoSaved)("userInfo",e.userInfo)("isLoading",e.isLoading)("diloseisInfoResponse",e.diloseisInfoResponse)}}function M(e,t){1&e&&(s.Vc(0,"p-tabPanel",18),s.Pd(1,A,1,4,"ng-template",19),s.Uc())}function F(e,t){if(1&e){const e=s.Wc();s.Tc(0),s.Pd(1,x,3,2,"div",7),s.Vc(2,"p-tabView",8),s.hd("onChange",(function(t){s.Hd(e);return s.jd().onTabChanged(t)})),s.Vc(3,"p-tabPanel",9),s.Pd(4,B,1,4,"app-katastimata-receipts",10),s.Uc(),s.Pd(5,M,2,0,"p-tabPanel",11),s.Uc(),s.Sc()}if(2&e){const e=s.jd();s.Bc(1),s.sd("ngIf",e.epixeirisiInfo||e.diloseisInfoResponse&&e.diloseisInfoResponse.length>0),s.Bc(1),s.sd("activeIndex",e.index),s.Bc(2),s.sd("ngIf",e.model),s.Bc(1),s.sd("ngIf",e.diloseisInfoSaved&&e.diloseisInfoSaved.length)}}function T(e,t){if(1&e){const e=s.Wc();s.Vc(0,"app-katastimata-create-dilosi",21),s.hd("updateSaved",(function(t){s.Hd(e);return s.jd().onReloadSaved(t)})),s.Uc()}if(2&e){const e=s.jd();s.sd("diloseisInfoResponse",e.diloseisInfoResponse)("dilosi",null)}}const E=["dimotikosForosForm"];function _(e,t){if(1&e&&(s.Vc(0,"div",19),s.Vc(1,"label"),s.Rd(2,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),s.Uc(),s.Qc(3,"input",20),s.kd(4,"date"),s.Uc()),2&e){const e=s.jd(2);s.Bc(3),s.sd("ngModel",s.md(4,1,e.dilosiCopy.hmeromiaLixisDilosis,"dd/MM/yyyy"))}}function W(e,t){if(1&e){const e=s.Wc();s.Vc(0,"li"),s.Rd(1),s.Vc(2,"small"),s.Qc(3,"i",25),s.Rd(4),s.kd(5,"date"),s.Uc(),s.Rd(6,"\xa0 "),s.Vc(7,"button",26),s.hd("click",(function(){s.Hd(e);const i=t.$implicit;return s.jd(3).downloadFile(i.dmsId)})),s.Qc(8,"i",27),s.Rd(9," \u039a\u03b1\u03c4\u03ad\u03b2\u03b1\u03c3\u03bc\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03bf\u03c5 "),s.Uc(),s.Uc()}if(2&e){const e=t.$implicit;s.Bc(1),s.Ud(" ",e.perigrafi," (",e.fileName,")\xa0 "),s.Bc(3),s.Td(" ",s.md(5,3,e.creationTime,"dd/MM/yyyy"),"")}}function L(e,t){if(1&e){const e=s.Wc();s.Vc(0,"div",5),s.Vc(1,"div",21),s.Vc(2,"h5"),s.Rd(3,"\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03b1"),s.Uc(),s.Vc(4,"ul"),s.Pd(5,W,10,6,"li",22),s.Uc(),s.Vc(6,"button",23),s.hd("click",(function(){s.Hd(e);const t=s.jd(2);return t.toggleEditFiles=!t.toggleEditFiles})),s.Qc(7,"i",24),s.Rd(8," \u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd "),s.Uc(),s.Uc(),s.Uc()}if(2&e){const e=s.jd(2);s.Bc(5),s.sd("ngForOf",e.dilosiFiles)}}function N(e,t){1&e&&(s.Vc(0,"div",35),s.Qc(1,"i",36),s.Rd(2," \u03a3\u03b5 \u03c0\u03b5\u03c1\u03af\u03c0\u03c4\u03c9\u03c3\u03b7 \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf, \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03bf\u03cd\u03bd \u03cc\u03bb\u03b1 \u03c4\u03b1 \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 \u03ba\u03b1\u03b9 \u03b8\u03b1 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c4\u03b1 \u03b1\u03bd\u03b5\u03b2\u03ac\u03c3\u03b5\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac."),s.Uc())}function q(e,t){if(1&e){const e=s.Wc();s.Vc(0,"div",5),s.Pd(1,N,3,0,"div",28),s.Vc(2,"div",29),s.Vc(3,"label",30),s.Rd(4,"\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)*"),s.Uc(),s.Vc(5,"input",31,32),s.hd("ngModelChange",(function(t){s.Hd(e);return s.jd(2).periodikiDilosiFPA=t}))("change",(function(t){s.Hd(e);return s.jd(2).onFileChange(t,"periodikiDilosiFPA")})),s.Uc(),s.Vc(7,"div",9),s.Rd(8," *\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),s.Uc(),s.Uc(),s.Vc(9,"div",29),s.Vc(10,"label",33),s.Rd(11,"\u0395\u03c0\u03b9\u03c0\u03bb\u03ad\u03bf\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03bf"),s.Uc(),s.Vc(12,"input",34),s.hd("ngModelChange",(function(t){s.Hd(e);return s.jd(2).extraFile=t}))("change",(function(t){s.Hd(e);return s.jd(2).onFileChange(t,"extraFile")})),s.Uc(),s.Uc(),s.Uc()}if(2&e){const e=s.jd(2);s.Bc(1),s.sd("ngIf",e.toggleEditFiles),s.Bc(4),s.sd("ngModel",e.periodikiDilosiFPA),s.Bc(2),s.sd("hidden",!e.isFormSubmitted||e.isFormSubmitted&&e.periodikiDilosiFPA),s.Bc(5),s.sd("ngModel",e.extraFile)}}function H(e,t){if(1&e&&s.Qc(0,"div",37),2&e){const e=s.jd(2);s.sd("innerHTML",e.formErrorsMsg,s.Id)}}function $(e,t){if(1&e&&(s.Vc(0,"div",38),s.Vc(1,"p"),s.Rd(2),s.Uc(),s.Uc()),2&e){const e=s.jd(2);s.Bc(2),s.Sd(e.errorMessageProfile)}}function z(e,t){if(1&e){const e=s.Wc();s.Vc(0,"form",3,4),s.Vc(2,"div",5),s.Vc(3,"div",6),s.Vc(4,"label"),s.Rd(5,"\u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2*"),s.Uc(),s.Vc(6,"ng-select",7,8),s.hd("ngModelChange",(function(t){s.Hd(e);return s.jd().dilosiCopy.dilosiId=t}))("change",(function(t){s.Hd(e);const i=s.jd();return i.onSelectedDilosiChanged(t),i.isFormDirty=!0})),s.Uc(),s.Vc(8,"div",9),s.Rd(9," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),s.Uc(),s.Uc(),s.Pd(10,_,5,4,"div",10),s.Uc(),s.Vc(11,"div",5),s.Vc(12,"div",11),s.Vc(13,"label"),s.Rd(14,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc*"),s.Uc(),s.Vc(15,"input",12,13),s.hd("ngModelChange",(function(t){s.Hd(e);return s.jd().dilosiCopy.ypokeimenoPoso=t}))("ngModelChange",(function(){s.Hd(e);return s.jd().isFormDirty=!0})),s.Uc(),s.Vc(17,"div",9),s.Rd(18," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),s.Uc(),s.Uc(),s.Uc(),s.Pd(19,L,9,1,"div",14),s.Pd(20,q,13,4,"div",14),s.Vc(21,"button",15),s.hd("click",(function(){s.Hd(e);return s.jd().onSubmit()})),s.Qc(22,"i",16),s.Rd(23," \u03a5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc\u03c2 \u03a0\u03bf\u03c3\u03ce\u03bd "),s.Uc(),s.Pd(24,H,1,1,"div",17),s.Pd(25,$,3,1,"div",18),s.Uc()}if(2&e){const e=s.Gd(7),t=s.Gd(16),i=s.jd();s.Bc(6),s.sd("items",i.diloseisInfoResponse)("ngModel",i.dilosiCopy.dilosiId)("searchable",!0)("clearable",!1),s.Bc(2),s.sd("hidden",!i.isFormSubmitted||i.isFormSubmitted&&e.valid),s.Bc(2),s.sd("ngIf",i.dilosiCopy&&i.dilosiCopy.dilosiId),s.Bc(5),s.sd("ngModel",i.dilosiCopy.ypokeimenoPoso),s.Bc(2),s.sd("hidden",!i.isFormSubmitted||i.isFormSubmitted&&t.valid),s.Bc(2),s.sd("ngIf",i.dilosiFiles&&i.dilosiFiles.length),s.Bc(1),s.sd("ngIf",i.toggleEditFiles||!i.dilosiFiles||i.dilosiFiles&&0==i.dilosiFiles.length),s.Bc(4),s.sd("ngIf",i.formErrorsMsg&&""!=i.formErrorsMsg),s.Bc(1),s.sd("ngIf",i.errorMessageProfile)}}function G(e,t){1&e&&(s.Vc(0,"div",39),s.Vc(1,"span",40),s.Qc(2,"i",41),s.Uc(),s.Uc())}const Q=function(e){return[e,"\u20ac","symbol","1.2","el"]};function J(e,t){if(1&e){const e=s.Wc();s.Tc(0),s.Vc(1,"h4",42),s.Rd(2,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u03a5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03bf\u03cd"),s.Uc(),s.Vc(3,"div",43),s.Vc(4,"div",44),s.Vc(5,"div"),s.Vc(6,"p",45),s.Vc(7,"span",46),s.Rd(8,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),s.Uc(),s.Uc(),s.Vc(9,"p",45),s.Vc(10,"span",46),s.Rd(11,"\u03a0\u03bf\u03c3\u03cc \u03a4\u03ad\u03bb\u03bf\u03c5\u03c2:"),s.Uc(),s.Uc(),s.Vc(12,"p",45),s.Vc(13,"span",46),s.Rd(14,"\u039c\u03ae\u03bd\u03b5\u03c2 \u039a\u03b1\u03b8\u03c5\u03c3\u03c4\u03ad\u03c1\u03b7\u03c3\u03b7\u03c2:"),s.Uc(),s.Uc(),s.Vc(15,"p",45),s.Vc(16,"span",46),s.Rd(17,"\u03a0\u03bf\u03c3\u03cc \u03a0\u03c1\u03bf\u03c3\u03c4\u03af\u03bc\u03bf\u03c5:"),s.Uc(),s.Uc(),s.Vc(18,"p",45),s.Vc(19,"span",46),s.Rd(20,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),s.Uc(),s.Uc(),s.Vc(21,"p",45),s.Vc(22,"span",46),s.Rd(23,"\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),s.Uc(),s.Uc(),s.Uc(),s.Vc(24,"div"),s.Vc(25,"p",45),s.Vc(26,"span",47),s.Rd(27),s.Uc(),s.Uc(),s.Vc(28,"p",45),s.Vc(29,"span",47),s.Rd(30),s.kd(31,"currency"),s.Uc(),s.Uc(),s.Vc(32,"p",45),s.Vc(33,"span",47),s.Rd(34),s.Uc(),s.Uc(),s.Vc(35,"p",45),s.Vc(36,"span",47),s.Rd(37),s.kd(38,"currency"),s.Uc(),s.Uc(),s.Vc(39,"p",45),s.Vc(40,"span",47),s.Rd(41),s.kd(42,"currency"),s.Uc(),s.Uc(),s.Vc(43,"p",45),s.Vc(44,"span",47),s.Rd(45),s.Uc(),s.Uc(),s.Uc(),s.Uc(),s.Vc(46,"app-payment",48),s.hd("errorMsg",(function(t){s.Hd(e);return s.jd().errorMessageProfile=t})),s.Uc(),s.Uc(),s.Sc()}if(2&e){const e=s.jd();s.Bc(27),s.Sd(e.dilosiWebPaymentInfo.paymentCaption),s.Bc(3),s.Sd(s.pd(31,10,s.yd(28,Q,e.dilosiWebPaymentInfo.telosPoso))),s.Bc(4),s.Sd(e.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines),s.Bc(3),s.Sd(s.pd(38,16,s.yd(30,Q,e.dilosiWebPaymentInfo.prostimoPoso))),s.Bc(4),s.Sd(s.pd(42,22,s.yd(32,Q,e.dilosiWebPaymentInfo.paymentAmount))),s.Bc(4),s.Sd(e.kodikosPliromis),s.Bc(1),s.sd("userInfo",e.userInfo)("requestObs",null)("createWebPaymentInfo",e.dilosiWebPaymentInfo)("canPay",!e.isFormDirty)}}function Y(e,t){1&e&&(s.Vc(0,"div",5),s.Vc(1,"p",6),s.Rd(2," \u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2. \u0395\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf\u03bd \u03bf\u03c1\u03b3\u03b1\u03bd\u03b9\u03c3\u03bc\u03cc. "),s.Uc(),s.Uc())}function K(e,t){1&e&&(s.Vc(0,"div",7),s.Vc(1,"p",8),s.Rd(2,"\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b5\u03be\u03bf\u03c6\u03bb\u03b7\u03bc\u03ad\u03bd\u03b5\u03c2 \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2 \u03c3\u03c4\u03bf \u03b9\u03c3\u03c4\u03bf\u03c1\u03b9\u03ba\u03cc \u03c3\u03b1\u03c2."),s.Uc(),s.Uc())}function X(e,t){if(1&e){const e=s.Wc();s.Vc(0,"div"),s.Vc(1,"button",9),s.hd("click",(function(){s.Hd(e);return s.jd().btnBankStatusMessageClicked()})),s.Qc(2,"i",10),s.Uc(),s.Rd(3),s.Uc()}if(2&e){const e=s.jd();s.Ec("bank-msg badge w-100 mb-2 position-relative ",e.bankStatusMessageClass,""),s.Bc(3),s.Td(" ",e.bankStatusMessage,"\n")}}function Z(e,t){1&e&&(s.Vc(0,"div",11),s.Vc(1,"span",12),s.Qc(2,"i",13),s.Uc(),s.Uc())}function ee(e,t){1&e&&(s.Vc(0,"tr"),s.Vc(1,"th",19),s.Rd(2,"\u0391/\u0391"),s.Uc(),s.Vc(3,"th",20),s.Rd(4,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),s.Uc(),s.Vc(5,"th",21),s.Rd(6,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),s.Uc(),s.Vc(7,"th",21),s.Rd(8,"\u03a4\u03ad\u03bb\u03bf\u03c2"),s.Uc(),s.Vc(9,"th",21),s.Rd(10,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),s.Uc(),s.Vc(11,"th",22),s.Rd(12,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),s.Uc(),s.Uc())}function te(e,t){if(1&e&&(s.Vc(0,"tr"),s.Vc(1,"td",19),s.Vc(2,"span",23),s.Rd(3,"\u0391/\u0391"),s.Uc(),s.Rd(4),s.Uc(),s.Vc(5,"td",20),s.Vc(6,"span",23),s.Rd(7,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),s.Uc(),s.Rd(8),s.Uc(),s.Vc(9,"td",24),s.Vc(10,"span",23),s.Rd(11,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),s.Uc(),s.Rd(12),s.kd(13,"currency"),s.Uc(),s.Vc(14,"td",24),s.Vc(15,"span",23),s.Rd(16,"\u03a4\u03ad\u03bb\u03bf\u03c2"),s.Uc(),s.Rd(17),s.kd(18,"currency"),s.Uc(),s.Vc(19,"td",24),s.Vc(20,"span",23),s.Rd(21,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),s.Uc(),s.Rd(22),s.kd(23,"currency"),s.Uc(),s.Vc(24,"td",22),s.Vc(25,"span",23),s.Rd(26,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),s.Uc(),s.Rd(27),s.Uc(),s.Uc()),2&e){const e=t.$implicit,i=t.rowIndex;s.Bc(4),s.Td(" ",i+1," "),s.Bc(4),s.Td(" ",e.dilosiCaption," "),s.Bc(4),s.Td(" ",s.od(13,6,e.ypokeimenoPoso,"\u20ac","symbol","1.2")," "),s.Bc(5),s.Td(" ",s.od(18,11,e.telosPoso,"\u20ac","symbol","1.2")," "),s.Bc(5),s.Td(" ",s.od(23,16,e.prostimoPoso,"\u20ac","symbol","1.2")," "),s.Bc(5),s.Td(" ",e.stoixeiaApodixis," ")}}const ie=function(e){return[e,"EUR","symbol","1.2-2","el"]};function se(e,t){if(1&e&&(s.Vc(0,"tr"),s.Vc(1,"td",25),s.Vc(2,"strong"),s.Rd(3,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf:"),s.Uc(),s.Uc(),s.Vc(4,"td",24),s.Vc(5,"strong"),s.Rd(6),s.kd(7,"currency"),s.Uc(),s.Uc(),s.Vc(8,"td",24),s.Vc(9,"strong"),s.Rd(10),s.kd(11,"currency"),s.Uc(),s.Uc(),s.Vc(12,"td",24),s.Vc(13,"strong"),s.Rd(14),s.kd(15,"currency"),s.Uc(),s.Uc(),s.Vc(16,"td",22),s.Rd(17,"\xa0"),s.Uc(),s.Uc()),2&e){const e=s.jd(2);s.Bc(6),s.Sd(s.pd(7,3,s.yd(21,ie,e.sumYpokeimeno))),s.Bc(4),s.Sd(s.pd(11,9,s.yd(23,ie,e.sumTelos))),s.Bc(4),s.Sd(s.pd(15,15,s.yd(25,ie,e.sumProstimo)))}}function oe(e,t){if(1&e&&(s.Tc(0),s.Vc(1,"p",14),s.Vc(2,"strong"),s.Rd(3),s.Uc(),s.Uc(),s.Vc(4,"p-table",15),s.Pd(5,ee,13,0,"ng-template",16),s.Pd(6,te,28,21,"ng-template",17),s.Pd(7,se,18,27,"ng-template",18),s.Uc(),s.Vc(8,"p",14),s.Vc(9,"strong"),s.Rd(10),s.Uc(),s.Uc(),s.Sc()),2&e){const e=s.jd();s.Bc(3),s.Td("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd: ",e.diloseisReceipts.length,""),s.Bc(1),s.sd("value",e.diloseisReceipts)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",e.diloseisReceipts.length),s.Bc(6),s.Td("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd: ",e.diloseisReceipts.length,"")}}function ne(e,t){if(1&e){const e=s.Wc();s.Vc(0,"div"),s.Vc(1,"button",7),s.hd("click",(function(){s.Hd(e);return s.jd().onBankStatusMessage()})),s.Qc(2,"i",8),s.Uc(),s.Rd(3),s.Uc()}if(2&e){const e=s.jd();s.Ec("bank-msg badge w-100 mb-2 position-relative ",e.bankStatusMessageClass,""),s.Bc(3),s.Td(" ",e.bankStatusMessage,"\n")}}function ce(e,t){1&e&&(s.Vc(0,"div",9),s.Vc(1,"span",10),s.Qc(2,"i",11),s.Uc(),s.Uc())}function ae(e,t){1&e&&s.Rc(0)}function re(e,t){if(1&e&&(s.Vc(0,"div",19),s.Pd(1,ae,1,0,"ng-container",20),s.Uc()),2&e){s.jd(2);const e=s.Gd(4);s.Bc(1),s.sd("ngTemplateOutlet",e)}}function de(e,t){if(1&e){const e=s.Wc();s.Vc(0,"tr"),s.Vc(1,"th",21),s.Vc(2,"p-checkbox",22),s.hd("ngModelChange",(function(t){s.Hd(e);return s.jd(2).isAllDebitsChecked=t}))("onChange",(function(){s.Hd(e);return s.jd(2).onAllDebitsSelected()})),s.Uc(),s.Uc(),s.Vc(3,"th",23),s.Rd(4,"A/A"),s.Uc(),s.Vc(5,"th",24),s.Rd(6,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),s.Uc(),s.Vc(7,"th",25),s.Rd(8,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),s.Uc(),s.Vc(9,"th",25),s.Rd(10,"\u03a4\u03ad\u03bb\u03bf\u03c2"),s.Uc(),s.Vc(11,"th",25),s.Rd(12,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),s.Uc(),s.Vc(13,"th",25),s.Rd(14,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),s.Uc(),s.Vc(15,"th",26),s.Rd(16,"\xa0"),s.Uc(),s.Uc()}if(2&e){const e=s.jd(2);s.Bc(2),s.sd("binary",!0)("ngModel",e.isAllDebitsChecked)}}function le(e,t){if(1&e){const e=s.Wc();s.Vc(0,"tr"),s.Vc(1,"td",21),s.Vc(2,"span",27),s.Rd(3,"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae"),s.Uc(),s.Vc(4,"p-checkbox",22),s.hd("ngModelChange",(function(i){s.Hd(e);return t.$implicit.isChecked=i}))("onChange",(function(){s.Hd(e);return s.jd(2)._calculateTotalAmounts()})),s.Uc(),s.Uc(),s.Vc(5,"td",23),s.Vc(6,"span",27),s.Rd(7,"A/A"),s.Uc(),s.Rd(8),s.Uc(),s.Vc(9,"td",24),s.Vc(10,"span",27),s.Rd(11,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),s.Uc(),s.Rd(12),s.Uc(),s.Vc(13,"td",28),s.Vc(14,"span",27),s.Rd(15,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),s.Uc(),s.Rd(16),s.kd(17,"currency"),s.Uc(),s.Vc(18,"td",28),s.Vc(19,"span",27),s.Rd(20,"\u03a4\u03ad\u03bb\u03bf\u03c2"),s.Uc(),s.Rd(21),s.kd(22,"currency"),s.Uc(),s.Vc(23,"td",28),s.Vc(24,"span",27),s.Rd(25,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),s.Uc(),s.Rd(26),s.kd(27,"currency"),s.Uc(),s.Vc(28,"td",28),s.Vc(29,"span",27),s.Rd(30,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),s.Uc(),s.Rd(31),s.kd(32,"currency"),s.Uc(),s.Vc(33,"td",29),s.Vc(34,"span",27),s.Rd(35,"\u0395\u03bd\u03ad\u03c1\u03b3\u03b5\u03b9\u03b5\u03c2"),s.Uc(),s.Vc(36,"button",30),s.hd("click",(function(){s.Hd(e);const i=t.$implicit;return s.jd(2).onEdit(i)})),s.Qc(37,"i",31),s.Uc(),s.Uc(),s.Uc()}if(2&e){const e=t.$implicit,i=t.rowIndex;s.Bc(4),s.sd("binary",!0)("ngModel",e.isChecked),s.Bc(4),s.Td(" ",i+1," "),s.Bc(4),s.Td(" ",e.dilosiDescription," "),s.Bc(4),s.Td(" ",s.od(17,8,e.ypokeimenoPoso,"\u20ac","symbol","1.2")," "),s.Bc(5),s.Td(" ",s.od(22,13,e.telosPoso,"\u20ac","symbol","1.2")," "),s.Bc(5),s.Td(" ",s.od(27,18,e.prostimoPoso,"\u20ac","symbol","1.2")," "),s.Bc(5),s.Td(" ",s.od(32,23,e.telosPoso+e.prostimoPoso,"\u20ac","symbol","1.2")," ")}}function pe(e,t){if(1&e&&(s.Vc(0,"tr"),s.Vc(1,"td",32),s.Vc(2,"strong"),s.Rd(3,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf:"),s.Uc(),s.Uc(),s.Vc(4,"td",28),s.Vc(5,"strong"),s.Rd(6),s.kd(7,"currency"),s.Uc(),s.Uc(),s.Vc(8,"td",28),s.Vc(9,"strong"),s.Rd(10),s.kd(11,"currency"),s.Uc(),s.Uc(),s.Vc(12,"td",28),s.Vc(13,"strong"),s.Rd(14),s.kd(15,"currency"),s.Uc(),s.Uc(),s.Vc(16,"td",28),s.Vc(17,"strong"),s.Rd(18),s.kd(19,"currency"),s.Uc(),s.Uc(),s.Vc(20,"td",26),s.Rd(21,"\xa0"),s.Uc(),s.Uc()),2&e){const e=s.jd(2);s.Bc(6),s.Sd(s.pd(7,4,s.yd(28,ie,e.sumYpokeimeno))),s.Bc(4),s.Sd(s.pd(11,10,s.yd(30,ie,e.sumTelos))),s.Bc(4),s.Sd(s.pd(15,16,s.yd(32,ie,e.sumProstimo))),s.Bc(4),s.Sd(s.pd(19,22,s.yd(34,ie,e.sumToPay)))}}function fe(e,t){1&e&&s.Rc(0)}function he(e,t){if(1&e){const e=s.Wc();s.Tc(0),s.Vc(1,"div",19),s.Pd(2,fe,1,0,"ng-container",20),s.Uc(),s.Vc(3,"app-payment",33),s.hd("errorMsg",(function(t){s.Hd(e);return s.jd(2).errorMessageProfile=t})),s.Uc(),s.Sc()}if(2&e){const e=s.jd(2),t=s.Gd(4);s.Bc(2),s.sd("ngTemplateOutlet",t),s.Bc(1),s.sd("userInfo",e.userInfo)("requestObs",e.requestObs)}}function ue(e,t){if(1&e&&(s.Vc(0,"div",34),s.Vc(1,"p"),s.Rd(2),s.Uc(),s.Uc()),2&e){const e=s.jd(2);s.Bc(2),s.Sd(e.errorMessageProfile)}}function me(e,t){if(1&e&&(s.Tc(0),s.Pd(1,re,2,1,"div",12),s.Vc(2,"p",13),s.Vc(3,"strong"),s.Rd(4),s.Uc(),s.Uc(),s.Vc(5,"p-table",14),s.Pd(6,de,17,2,"ng-template",15),s.Pd(7,le,38,28,"ng-template",16),s.Pd(8,pe,22,36,"ng-template",17),s.Uc(),s.Vc(9,"p",13),s.Vc(10,"strong"),s.Rd(11),s.Uc(),s.Uc(),s.Pd(12,he,4,3,"ng-container",2),s.Pd(13,ue,3,1,"div",18),s.Sc()),2&e){const e=s.jd();s.Bc(1),s.sd("ngIf",e.calculatedChecked.countChecked>0),s.Bc(3),s.Td("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd: ",e.dilosiInfoSaved.length,""),s.Bc(1),s.sd("value",e.dilosiInfoSaved)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",e.dilosiInfoSaved.length),s.Bc(6),s.Td("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd: ",e.dilosiInfoSaved.length,""),s.Bc(1),s.sd("ngIf",e.calculatedChecked.countChecked>0),s.Bc(1),s.sd("ngIf",e.errorMessageProfile)}}function ge(e,t){if(1&e&&(s.Vc(0,"p"),s.Rd(1,"\u0388\u03c7\u03b5\u03c4\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03b9 "),s.Vc(2,"span",35),s.Rd(3),s.Uc(),s.Uc(),s.Vc(4,"div",36),s.Vc(5,"p"),s.Rd(6,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a4\u03ad\u03bb\u03bf\u03c2: "),s.Vc(7,"span",35),s.Rd(8),s.kd(9,"currency"),s.Uc(),s.Uc(),s.Vc(10,"p"),s.Rd(11,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf: "),s.Vc(12,"span",35),s.Rd(13),s.kd(14,"currency"),s.Uc(),s.Uc(),s.Vc(15,"p"),s.Rd(16,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd: "),s.Vc(17,"span",37),s.Rd(18),s.kd(19,"currency"),s.Uc(),s.Uc(),s.Uc()),2&e){const e=s.jd();s.Bc(3),s.Ud("",e.calculatedChecked.countChecked," ",e.calculatedChecked.countText,""),s.Bc(5),s.Sd(s.od(9,5,e.calculatedChecked.checkedTelos,"\u20ac","symbol","1.2")),s.Bc(5),s.Sd(s.od(14,10,e.calculatedChecked.checkedProstimo,"\u20ac","symbol","1.2")),s.Bc(5),s.Sd(s.od(19,15,e.calculatedChecked.checkedTelos+e.calculatedChecked.checkedProstimo,"\u20ac","symbol","1.2"))}}function be(e,t){if(1&e){const e=s.Wc();s.Vc(0,"app-katastimata-create-dilosi",38),s.hd("updateSaved",(function(t){s.Hd(e);return s.jd().updateDilosiInTable(t)})),s.Uc()}if(2&e){const e=s.jd();s.sd("diloseisInfoResponse",e.diloseisInfoResponse)("dilosi",e.selectedDilosi)}}function ye(e,t){if(1&e&&(s.Vc(0,"div"),s.Rd(1),s.Qc(2,"input",9),s.Uc()),2&e){const e=t.$implicit;s.Bc(1),s.Td(" ",e.key," : "),s.Bc(1),s.td("name",e.key),s.td("value",e.value)}}function ke(e,t){if(1&e&&(s.Tc(0),s.Pd(1,ye,3,3,"div",8),s.Sc()),2&e){const e=s.jd();s.Bc(1),s.sd("ngForOf",e.paymentResponseDto.postFields)}}let Ie=class{constructor(e){this.toastr=e}show(e,t,i){t&&this.toastr[i](t,e,{progressBar:!0,onActivateTick:!0})}showError(e,t){this.show(e,t,"error")}showInfo(e,t){this.show(e,t,"info")}showSuccess(e,t){this.show(e,t,"success")}};Ie.\u0275fac=function(e){return new(e||Ie)(s.dd(m.b))},Ie.ctorParameters=()=>[{type:m.b}],Ie.\u0275prov=Object(s.Lc)({factory:function(){return new Ie(Object(s.dd)(m.b))},token:Ie,providedIn:"root"}),Ie=Object(o.b)([Object(o.c)("design:paramtypes",[m.b])],Ie);let Ue=class{constructor(e){this.toastService=e,this.catchBadResponse=e=>{let t="";if(e.error instanceof Error)t="\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: "+e.message;else if(void 0!==e.error)t="\u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: "+e.message;else switch(e.status){case 403:t="\u0394\u03b5\u03bd \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b4\u03b9\u03ba\u03b1\u03af\u03c9\u03bc\u03b1 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7\u03c2 \u03c3\u03b5 \u03b1\u03c5\u03c4\u03ae \u03c4\u03b7\u03bd \u03bf\u03bd\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1. error "+e.status;break;case 401:t="\u0394\u03b5\u03bd \u03ad\u03c7\u03b5\u03c4\u03b5 \u03b4\u03b9\u03ba\u03b1\u03af\u03c9\u03bc\u03b1 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7\u03c2. error  \n "+e.status;break;default:t=`Backend returned code ${e.status}, body was: ${void 0!==e.body?e.body.error:void 0!==e.message?e.message:""}`}return this.toastService.showError("",""+t),Object(c.a)(!1)}}};Ue.\u0275fac=function(e){return new(e||Ue)(s.dd(Ie))},Ue.ctorParameters=()=>[{type:Ie}],Ue.\u0275prov=Object(s.Lc)({factory:function(){return new Ue(Object(s.dd)(Ie))},token:Ue,providedIn:"root"}),Ue=Object(o.b)([Object(o.c)("design:paramtypes",[Ie])],Ue);let Oe=class extends class{constructor(e,t){this.http=e,this.exceptionService=t,this.getBaseUrl=()=>this.baseUrl,AppConfOptions&&AppConfOptions.katastimata_api?(this.baseUrl=AppConfOptions.katastimata_api,this.financeUrl=AppConfOptions.epayments_api):(this.baseUrl="/",this.financeUrl=AppConfOptions.financeApi),this.baseUrl+="api",this.financeUrl+="api"}}{constructor(e,t){super(t,e),this.exceptionSrv=e,this.http=t,this.katastimataUrl=this.baseUrl+"/DiloseisWeb",this.dmsUrl=this.baseUrl+"/DocDms",this.userInfoSubject=new a.a(null),this.userInfo$=this.userInfoSubject.asObservable(),this.egOnInit()}egOnInit(){this.userInfo$.subscribe(e=>{this.userInfo=e})}initUserInfo(){if(!this.userInfo){let e=null;for(let t=0;t<window.localStorage.length;t++){const i=window.localStorage.key(t);"userData"===i.slice(0,8)&&(e=JSON.parse(window.localStorage.getItem(i)),this.userInfoSubject.next({email:e.email,username:e.given_name,tin:e.tin,family_name:e.family_name,given_name:e.given_name,name:e.name,address_city:e.address_city,address_country_code:e.address_country_code,address_zip:e.address_zip,address:e.address}))}}}getDiloseis(e){return this.http.get(`${this.katastimataUrl}/DiloseisWebInfo/${e}`).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}getDilosiPaymentInfo(e){return this.http.post(this.katastimataUrl+"/DilosiWebPaymentInfo",e).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}uploadPeriodikiDilosi(e){let t=new n.e;return t=t.append("isForm","true"),this.http.post(this.katastimataUrl+"/DilosiWebScan",e,{headers:t,responseType:"arraybuffer"}).pipe(Object(l.a)(e=>e),Object(p.a)(()=>Object(c.a)(!1)))}getPayedInfo(e){return this.http.get(`${this.katastimataUrl}/DiloseisWebPayedInfo/${e}`).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}getEpixeirisiInfo(e){return this.http.get(`${this.katastimataUrl}/DiloseisWebEpixirisiInfo/${e}`).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}deleteDocDmsByDilosiId(e){const t=this.katastimataUrl+"/DeleteDocDmsByDilosiId/"+e;return this.http.get(t).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}markDilosiWebExoflisi(e){const t=this.katastimataUrl+"/MarkDilosiWebExoflisi";return this.http.post(t,e).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionService.catchBadResponse))}addPaymentRequest(e){const t=this.financeUrl+"/Banks/AddPaymentRequest";return this.http.post(t,e).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}getDocDmsByDilosiId(e){const t=`${this.dmsUrl}/GetDocDmsByDilosiId/${e}`;return this.http.get(t).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}getDownloadFile(e){const t=`${this.dmsUrl}/DownloadFile/${e}`;return this.http.get(t).pipe(Object(l.a)(e=>e),Object(p.a)(this.exceptionSrv.catchBadResponse))}};function Pe(e){const t=[],i=e.control;return Object.keys(i.controls).forEach(e=>{const s=i.get(e);s instanceof b.c&&t.push(...function e(t){const i=[];return Object.keys(t.controls).forEach(s=>{const o=t.get(s);o instanceof b.c&&i.push(...e(o));const n=o.errors;n&&Object.keys(n).forEach(e=>{i.push({control:s,error:e,value:n[e]})})}),i}(s));const o=s.errors;o&&Object.keys(o).forEach(i=>{t.push({control:e,error:i,value:o[i]})})}),t}function ve(e){try{e.detectChanges()}catch(t){console.error("View already destroyed")}}function je(e){try{return JSON.parse(JSON.stringify(e))}catch(t){console.error(t)}}Oe.\u0275fac=function(e){return new(e||Oe)(s.dd(Ue),s.dd(n.b))},Oe.ctorParameters=()=>[{type:Ue},{type:n.b}],Oe.\u0275prov=Object(s.Lc)({factory:function(){return new Oe(Object(s.dd)(Ue),Object(s.dd)(n.b))},token:Oe,providedIn:"root"}),Oe=Object(o.b)([Object(o.c)("design:paramtypes",[Ue,n.b])],Oe);let Re=class{constructor(e,t,i,s,o){this.katastimataNgSrv=e,this.toasterSrv=t,this.cdr=i,this.router=s,this.route=o,this.model=[],this.index=0,this.isLoading=!0,this.isAddingNewDilosi=!1,this.onDestroy=new r.a}ngOnInit(){this.katastimataNgSrv.initUserInfo(),this.katastimataNgSrv.userInfo$.pipe(Object(h.a)(this.onDestroy)).subscribe(e=>{this.userInfo=e,ve(this.cdr)}),this.router.events.pipe(Object(u.a)(e=>e instanceof g.b),Object(h.a)(this.onDestroy)).subscribe(e=>{e&&e.url&&e.url.includes("receipts")?this.index=0:e&&e.url&&e.url.includes("saved")&&(this.index=1),ve(this.cdr)}),Object(d.a)([this.katastimataNgSrv.getEpixeirisiInfo(this.userInfo.tin),this.katastimataNgSrv.getDiloseis(this.userInfo.tin)]).subscribe(e=>{e&&(this.epixeirisiInfo=e[0],this.diloseisInfoResponse=e[1],this.diloseisInfoSaved=this.diloseisInfoResponse.filter(e=>6==e.statusId),ve(this.cdr),this._loadData())})}ngOnDestroy(){this.onDestroy.next()}_loadData(){this.katastimataNgSrv.getPayedInfo(this.userInfo.tin).subscribe(e=>{e&&(this.model=e),this.isLoading=!1,ve(this.cdr)})}onCreateNewDilosiClicked(){this.isAddingNewDilosi=!0,ve(this.cdr)}onTabChanged(e){0==e.index?this.router.navigate(["./receipts"],{relativeTo:this.route}):this.router.navigate(["./saved"],{relativeTo:this.route})}onReloadSaved(e){this.katastimataNgSrv.getDiloseis(this.userInfo.tin).subscribe(e=>{e&&(this.diloseisInfoResponse=e,this.diloseisInfoSaved=this.diloseisInfoResponse.filter(e=>6==e.statusId),ve(this.cdr),this._loadData())})}};Re.\u0275fac=function(e){return new(e||Re)(s.Pc(Oe),s.Pc(Ie),s.Pc(s.k),s.Pc(g.d),s.Pc(g.a))},Re.\u0275cmp=s.Jc({type:Re,selectors:[["lib-katastimata-ng"]],decls:7,vars:9,consts:[[4,"ngIf"],["title","\u039d\u03ad\u03b1 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7",3,"isOpen","size","isOpenChange"],[1,"modal-body"],[3,"diloseisInfoResponse","dilosi","updateSaved",4,"ngIf"],[1,"d-flex",2,"height","100vh !important"],[1,"justify-content-center","align-self-start","w-100","mt-2"],["role","alert",1,"bg-danger","text-light","p-2"],["class","bg-light mb-3 px-2 py-1 d-flex flex-wrap",4,"ngIf"],[3,"activeIndex","onChange"],["header","\u0399\u03c3\u03c4\u03bf\u03c1\u03b9\u03ba\u03cc \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ce\u03bd"],[3,"diloseisReceipts","userInfo","isLoading","diloseisInfoResponse","reloadData",4,"ngIf"],["header","\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",4,"ngIf"],[1,"bg-light","mb-3","px-2","py-1","d-flex","flex-wrap"],["class","m-0 mr-1 d-inline-flex align-items-center eponimia-title",4,"ngIf"],["type","button","class","btn btn-primary m-0 ml-auto",3,"click",4,"ngIf"],[1,"m-0","mr-1","d-inline-flex","align-items-center","eponimia-title"],["type","button",1,"btn","btn-primary","m-0","ml-auto",3,"click"],[3,"diloseisReceipts","userInfo","isLoading","diloseisInfoResponse","reloadData"],["header","\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2"],["pTemplate","content"],[3,"dilosiInfoSaved","userInfo","isLoading","diloseisInfoResponse","reloadData"],[3,"diloseisInfoResponse","dilosi","updateSaved"]],template:function(e,t){1&e&&(s.Pd(0,D,5,0,"ng-container",0),s.kd(1,"async"),s.Pd(2,F,6,4,"ng-container",0),s.kd(3,"async"),s.Vc(4,"eg-modal",1),s.hd("isOpenChange",(function(e){return t.isAddingNewDilosi=e})),s.Vc(5,"div",2),s.Pd(6,T,1,2,"app-katastimata-create-dilosi",3),s.Uc(),s.Uc()),2&e&&(s.sd("ngIf",!s.ld(1,5,t.katastimataNgSrv.userInfo$)),s.Bc(2),s.sd("ngIf",s.ld(3,7,t.katastimataNgSrv.userInfo$)),s.Bc(2),s.sd("isOpen",t.isAddingNewDilosi)("size","xl"),s.Bc(2),s.sd("ngIf",t.isAddingNewDilosi))},directives:function(){return[y.n,k.a,v.b,v.a,Be,S.c,Ae,xe]},pipes:function(){return[y.b]},encapsulation:2,changeDetection:0}),Re.ctorParameters=()=>[{type:Oe},{type:Ie},{type:s.k},{type:g.d},{type:g.a}],Re=Object(o.b)([Object(o.c)("design:paramtypes",[Oe,Ie,s.k,g.d,g.a])],Re);class Ve{constructor(){this.dilosiId=0,this.dilosiDescription=null,this.hmeromiaLixisDilosis=null}}class Se{constructor(){this.bankTransactionId=null}}var De,Ce,we;!function(e){e[e.Ok=1]="Ok",e[e.Error=2]="Error",e[e.Warning=3]="Warning",e[e.UndefinedError=4]="UndefinedError"}(De||(De={})),function(e){e[e.aplirotes=1]="aplirotes",e[e.pliromenes=2]="pliromenes"}(Ce||(Ce={})),function(e){e.dilosiDescription="\u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2",e.ypokeimenoPoso="\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc",e.periodikiDilosiFPA="\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)"}(we||(we={}));let xe=class{constructor(e,t,i){this.katastimataNgSrv=e,this.toasterSrv=t,this.cdr=i,this.updateSaved=new s.x,this.requestObs=[],this.onDestroy=new r.a,this.toggleEditFiles=!1,this.periodikiDilosiFPA=null,this.extraFile=null,this.uploadedFiles=[],this.errorMessageProfile=null,this.isLoading=!1,this.isFormSubmitted=!1,this.isFormDirty=!1,this.formDictionaryEnum=we}ngOnInit(){this.dilosi?this.katastimataNgSrv.getDocDmsByDilosiId(this.dilosiCopy.dilosiId).subscribe(e=>{e&&(this.dilosiFiles=e,ve(this.cdr))}):(this.dilosi=new Ve,this.dilosiCopy=je(this.dilosi),ve(this.cdr)),this.katastimataNgSrv.userInfo$.pipe(Object(h.a)(this.onDestroy)).subscribe(e=>{e&&(this.userInfo=e,ve(this.cdr))})}ngOnDestroy(){this.onDestroy.next()}ngOnChanges(e){e&&e.dilosi&&(this.dilosiCopy=e.dilosi.currentValue,ve(this.cdr))}onSelectedDilosiChanged(e){e&&(this.dilosiCopy=this.diloseisInfoResponse.filter(e=>e.dilosiId===+this.dilosiCopy.dilosiId)[0],ve(this.cdr))}downloadFile(e){e&&this.katastimataNgSrv.getDownloadFile(e).subscribe()}onFileChange(e,t){e&&e.srcElement.files.length>0?V()(e,!0).then(e=>{this.uploadedFiles[t]=e}):delete this.uploadedFiles[t],this.isFormDirty=!0,ve(this.cdr)}onSubmit(){if(this.formErrorsMsg="",this.dimotikosForosForm.valid&&this.dilosiCopy.ypokeimenoPoso>0){this.isFormSubmitted=!0,this.isFormDirty=!1,this.isLoading=!0;let e=[];if(!this.dilosiFiles||0==this.dilosiFiles.length||this.uploadedFiles&&this.uploadedFiles.length){let t=[];const i=Object.values(this.uploadedFiles);for(let e=0;e<i.length;e++){const s=i[e];let o=s.name.substr(s.name.lastIndexOf(".")+1);t.push({language:"el",dilosiId:+this.dilosiCopy.dilosiId,fileContent:s.base64,fileLength:s.size,fileExtension:o,fileDescription:e,fileName:s.name})}e=[...e,this.katastimataNgSrv.deleteDocDmsByDilosiId(this.dilosiCopy.dilosiId)],t.length>0&&t.forEach(t=>{e=[...e,this.katastimataNgSrv.uploadPeriodikiDilosi(t)]})}let t={language:"el",ypokeimenoPoso:+this.dilosiCopy.ypokeimenoPoso,dilosiId:+this.dilosiCopy.dilosiId};this.requestObs=[...this.requestObs,this.katastimataNgSrv.getDilosiPaymentInfo(t)],e=[...e,this.katastimataNgSrv.getDilosiPaymentInfo(t)],ve(this.cdr),function(e,t=(()=>{})){const i=Object(f.a)(()=>Object(c.a)(!0));let s=[];return e.forEach(e=>{s=[...s,Object(f.a)(i=>i?e:(t(),Object(c.a)(!1)))]}),Object(c.a)(!0).pipe(i,i,i,i,i,i,i,i,i,...s)}(e,()=>this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03bc\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd.")).subscribe(e=>{e?(this.dilosiWebPaymentInfo=e,this.dilosiWebPaymentInfo&&(this.updateSaved.emit({dilosiId:this.dilosiWebPaymentInfo.dilosiId,dilosiDescription:this.dilosiWebPaymentInfo.paymentCaption,statusId:this.dilosiCopy.statusId,akatharistoPoso:this.dilosiCopy.akatharistoPoso,ypokeimenoPoso:this.dilosiCopy.ypokeimenoPoso,telosPoso:this.dilosiWebPaymentInfo.telosPoso,prostimoPoso:this.dilosiWebPaymentInfo.prostimoPoso,hmeromiaLixisDilosis:this.dilosiCopy.hmeromiaLixisDilosis,isChecked:!1}),this.kodikosPliromis=this.dilosiWebPaymentInfo.paymentCode,this.kodikosPliromis&&this.kodikosPliromis.length>15&&(this.kodikosPliromis=this.dilosiWebPaymentInfo.paymentCode.match(/(.|[\r\n]){1,4}/g).toString(),this.kodikosPliromis=this.kodikosPliromis.replace(new RegExp(",","g")," "))),this.isLoading=!1,this.isFormSubmitted=!1,ve(this.cdr)):this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03bf\u03bd \u03c5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc \u03c4\u03c9\u03bd \u03c0\u03bf\u03c3\u03ce\u03bd.")})}else this.formErrors=Pe(this.dimotikosForosForm),this.formErrors&&(this.formErrorsMsg="<ul>",this.formErrors.forEach(e=>{let t,i=e.control.split("-")[0];"required"==e.error?t="\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf":"pattern"==e.error&&(t="\u039b\u03b1\u03bd\u03b8\u03b1\u03c3\u03bc\u03ad\u03bd\u03b7 \u03bc\u03bf\u03c1\u03c6\u03ae \u03c0\u03b5\u03b4\u03af\u03bf\u03c5"),this.formErrorsMsg+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: "+this.formDictionaryEnum[i]+" | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: "+t+"</li>"}),this.dilosiCopy.dilosiId||(this.formErrorsMsg+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: \u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf</li>"),0==this.dilosiCopy.ypokeimenoPoso&&(this.formErrorsMsg+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: \u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf \u03ba\u03b1\u03b9 \u03bc\u03b5\u03b3\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03bf \u03c4\u03bf\u03c5 0</li>"),this.formErrorsMsg+="<ul>",ve(this.cdr))}};xe.\u0275fac=function(e){return new(e||xe)(s.Pc(Oe),s.Pc(Ie),s.Pc(s.k))},xe.\u0275cmp=s.Jc({type:xe,selectors:[["app-katastimata-create-dilosi"]],viewQuery:function(e,t){var i;(1&e&&s.Xd(E,!0),2&e)&&(s.Fd(i=s.id())&&(t.dimotikosForosForm=i.first))},inputs:{dilosi:"dilosi",diloseisInfoResponse:"diloseisInfoResponse"},outputs:{updateSaved:"updateSaved"},features:[s.zc],decls:3,vars:3,consts:[["class","form w-100",4,"ngIf"],["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],[4,"ngIf"],[1,"form","w-100"],["dimotikosForosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-sm-9"],["bindLabel","dilosiDescription","bindValue","dilosiId","placeholder","\u0395\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7","name","dilosiDescription","required","",3,"items","ngModel","searchable","clearable","ngModelChange","change"],["dilosiDescription","ngModel"],[1,"text-danger",3,"hidden"],["class","form-group col-12 col-sm-3",4,"ngIf"],[1,"form-group","col-12","col-sm-12"],["type","text","currencyMask","","lang","el-GR","placeholder","\u039c\u03bf\u03c1\u03c6\u03ae \u03c3\u03c5\u03bc\u03c0\u03bb\u03ae\u03c1\u03c9\u03c3\u03b7\u03c2: 1000,1","name","ypokeimenoPoso","required","",1,"form-control",3,"ngModel","ngModelChange"],["ypokeimenoPosoInput","ngModel"],["class","row",4,"ngIf"],["type","button",1,"btn","btn-primary","d-block","mt-2","mx-auto",3,"click"],[1,"fas","fa-calculator"],["class","alert alert-danger form-msgs","style","font-size: 13px; color: #ffffff !important;",3,"innerHTML",4,"ngIf"],["class","screen-msg",4,"ngIf"],[1,"form-group","col-12","col-sm-3"],["type","text","name","hmeromiaLixisDilosis","disabled","",1,"form-control",3,"ngModel"],[1,"col-12"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"far","fa-edit"],[1,"far","fa-calendar-alt"],["type","button",1,"btn","btn-sm","btn-success","m-0",3,"click"],[1,"fas","fa-download"],["class","col-12 alert alert-warning",4,"ngIf"],[1,"form-group","col-12","col-sm-6"],["for","periodikiDilosiFPA"],["type","file","name","periodikiDilosiFPA","required","",1,"form-control-file",3,"ngModel","ngModelChange","change"],["periodikiDilosiFPAInput","ngModel"],["for","extraFile"],["type","file","name","extraFile",1,"form-control-file",3,"ngModel","ngModelChange","change"],[1,"col-12","alert","alert-warning"],[1,"fas","fa-exclamation-circle"],[1,"alert","alert-danger","form-msgs",2,"font-size","13px","color","#ffffff !important",3,"innerHTML"],[1,"screen-msg"],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],[1,"w-100","pb-2"],[1,"debits-info","d-flex","justify-content-between"],[1,"debits-info_left","d-flex","mr-1"],[1,"mb-0"],[1,"mr-1",2,"width","220px"],[1,"totalPoso"],[3,"userInfo","requestObs","createWebPaymentInfo","canPay","errorMsg"]],template:function(e,t){1&e&&(s.Pd(0,z,26,12,"form",0),s.Pd(1,G,3,0,"div",1),s.Pd(2,J,47,34,"ng-container",2)),2&e&&(s.sd("ngIf",t.dilosiCopy&&t.diloseisInfoResponse&&t.diloseisInfoResponse.length>0),s.Bc(1),s.sd("ngIf",t.isLoading),s.Bc(1),s.sd("ngIf",t.dilosiWebPaymentInfo&&!t.isLoading))},directives:function(){return[y.n,b.r,b.j,b.k,I.a,b.p,b.i,b.l,b.b,U.b,y.m,Te]},pipes:function(){return[y.f,y.d]},encapsulation:2,changeDetection:0}),xe.ctorParameters=()=>[{type:Oe},{type:Ie},{type:s.k}],Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Array)],xe.prototype,"diloseisInfoResponse",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Ve)],xe.prototype,"dilosi",void 0),Object(o.b)([Object(s.S)(),Object(o.c)("design:type",Object)],xe.prototype,"updateSaved",void 0),Object(o.b)([Object(s.lb)("dimotikosForosForm"),Object(o.c)("design:type",b.k)],xe.prototype,"dimotikosForosForm",void 0),xe=Object(o.b)([Object(o.c)("design:paramtypes",[Oe,Ie,s.k])],xe);let Be=class{constructor(e,t,i){this.katastimataNgSrv=e,this.route=t,this._http=i,this.reloadData=new s.x,this.onDestroy=new r.a,this.applicationUrl="",this.katastimataApiUrl="",this.financeApiUrl="",this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.applicationUrl=AuthConfOptions.redirect_url,this.katastimataApiUrl=AppConfOptions.katastimata_api,this.financeApiUrl=AppConfOptions.epayments_api):(this.applicationUrl=AppConfOptions.applicationUrl,this.katastimataApiUrl=AppConfOptions.applicationUrl,this.financeApiUrl=AppConfOptions.financeApi)}ngOnChanges(e){e&&e.diloseisReceipts&&(this.diloseisReceipts=e.diloseisReceipts.currentValue,this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.diloseisReceipts.forEach(e=>{this.sumYpokeimeno+=e.ypokeimenoPoso,this.sumTelos+=e.telosPoso,this.sumProstimo+=e.prostimoPoso}))}ngOnInit(){this.katastimataNgSrv.userInfo$.pipe(Object(h.a)(this.onDestroy)).subscribe(e=>this.userInfo=e),this._getBankMessages().pipe(Object(f.a)(e=>e?(this.oikonomikiBankMessages=e,this.route.queryParams.pipe(Object(h.a)(this.onDestroy))):Object(c.a)(!1))).subscribe(e=>{if(e){let t=e,i=t.messagecode,s=t.btId;if(i)if(this.bankStatusMessage=this.oikonomikiBankMessages[i],"TRANSACTION_COMPLETED"==i){if(this.bankStatusMessageClass="badge-success",s){let e=new Se;e.bankTransactionId=s,this.katastimataNgSrv.markDilosiWebExoflisi(e).subscribe(()=>{this.reloadData.emit(!0)})}}else this.bankStatusMessageClass="badge-danger"}})}ngOnDestroy(){this.onDestroy.next()}_getBankMessages(){let e=this.financeApiUrl+"api/Banks/BankMessages";return this._http.get(e)}btnBankStatusMessageClicked(){this.bankStatusMessage=null}};Be.\u0275fac=function(e){return new(e||Be)(s.Pc(Oe),s.Pc(g.a),s.Pc(n.b))},Be.\u0275cmp=s.Jc({type:Be,selectors:[["app-katastimata-receipts"]],inputs:{diloseisReceipts:"diloseisReceipts",userInfo:"userInfo",diloseisInfoResponse:"diloseisInfoResponse",isLoading:"isLoading"},outputs:{reloadData:"reloadData"},features:[s.zc],decls:5,vars:5,consts:[["class","d-flex w-100 justify-content-center",4,"ngIf"],["class","d-flex justify-content-center w-100",4,"ngIf"],[3,"class",4,"ngIf"],["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],[4,"ngIf"],[1,"d-flex","w-100","justify-content-center"],[1,"badge","badge-warning","p-1"],[1,"d-flex","justify-content-center","w-100"],[1,"badge","badge-warning"],[1,"close-bank-msg","position-absolute",2,"right","5px","top","5px","background-color","transparent","border","0 none","color","#ffffff",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],[1,"mt-1"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"fixed-width-col-60","text-center"],[1,"fixed-width-col-170"],[1,"fixed-width-col-100"],[1,"fixed-width-col-120"],[1,"ui-column-title"],[1,"fixed-width-col-100","text-right"],["colspan","2",1,"fixed-width-col-230","text-right"]],template:function(e,t){1&e&&(s.Pd(0,Y,3,0,"div",0),s.Pd(1,K,3,0,"div",1),s.Pd(2,X,4,4,"div",2),s.Pd(3,Z,3,0,"div",3),s.Pd(4,oe,11,11,"ng-container",4)),2&e&&(s.sd("ngIf",!(t.diloseisInfoResponse&&0!=t.diloseisInfoResponse.length||t.isLoading)),s.Bc(1),s.sd("ngIf",!(t.diloseisReceipts&&0!=t.diloseisReceipts.length||t.isLoading)),s.Bc(1),s.sd("ngIf",t.bankStatusMessage),s.Bc(1),s.sd("ngIf",t.isLoading),s.Bc(1),s.sd("ngIf",!t.isLoading))},directives:[y.n,P.a,S.c],pipes:[y.d],encapsulation:2}),Be.ctorParameters=()=>[{type:Oe},{type:g.a},{type:n.b}],Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Array)],Be.prototype,"diloseisReceipts",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Array)],Be.prototype,"diloseisInfoResponse",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Object)],Be.prototype,"userInfo",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Boolean)],Be.prototype,"isLoading",void 0),Object(o.b)([Object(s.S)(),Object(o.c)("design:type",Object)],Be.prototype,"reloadData",void 0),Be=Object(o.b)([Object(o.c)("design:paramtypes",[Oe,g.a,n.b])],Be);let Ae=class{constructor(e,t,i,o){this.katastimataNgSrv=e,this.cdr=t,this.route=i,this._http=o,this.reloadData=new s.x,this.modelPaymentInfo=[],this.onDestroy=new r.a,this.errorMessageProfile=null,this.applicationUrl="",this.katastimataApiUrl="",this.financeApiUrl="",this.isAllDebitsChecked=!1,this.calculatedChecked={countChecked:0,countText:"\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",checkedYpokeimeno:0,checkedTelos:0,checkedProstimo:0},this.requestObs=[],this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumToPay=0,this.isEditModalOpen=!1,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.applicationUrl=AuthConfOptions.redirect_url,this.katastimataApiUrl=AppConfOptions.katastimata_api,this.financeApiUrl=AppConfOptions.epayments_api):(this.applicationUrl=AppConfOptions.applicationUrl,this.katastimataApiUrl=AppConfOptions.applicationUrl,this.financeApiUrl=AppConfOptions.financeApi)}ngOnChanges(e){e&&e.dilosiInfoSaved&&(this.dilosiInfoSaved=e.dilosiInfoSaved.currentValue,this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumToPay=0,this.dilosiInfoSaved.forEach(e=>{this.sumYpokeimeno+=e.ypokeimenoPoso,this.sumTelos+=e.telosPoso,this.sumProstimo+=e.prostimoPoso,this.sumToPay+=e.telosPoso+e.prostimoPoso}),ve(this.cdr))}ngOnInit(){this.katastimataNgSrv.userInfo$.pipe(Object(h.a)(this.onDestroy)).subscribe(e=>this.userInfo=e),this._getBankMessages().pipe(Object(f.a)(e=>e?(this.oikonomikiBankMessages=e,this.route.queryParams.pipe(Object(h.a)(this.onDestroy))):Object(c.a)(!1))).subscribe(e=>{if(e){let t=e,i=t.messagecode,s=t.btId;if(i)if(this.bankStatusMessage=this.oikonomikiBankMessages[i],"TRANSACTION_COMPLETED"==i){if(this.bankStatusMessageClass="badge-success",s){let e=new Se;e.bankTransactionId=s,this.katastimataNgSrv.markDilosiWebExoflisi(e).subscribe(()=>{this.reloadData.emit(!0)})}}else this.bankStatusMessageClass="badge-danger"}ve(this.cdr)})}ngOnDestroy(){this.onDestroy.next()}_getBankMessages(){let e=this.financeApiUrl+"api/Banks/BankMessages";return this._http.get(e)}_calculateTotalAmounts(){this.requestObs=[];let e=0,t=0,i=0,s=0,o="\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2";this.dilosiInfoSaved.forEach(o=>{if(o.isChecked){s++,e+=o.ypokeimenoPoso,t+=o.telosPoso,i+=o.prostimoPoso;let n={language:"el",ypokeimenoPoso:+o.ypokeimenoPoso,dilosiId:+o.dilosiId};this.requestObs=[...this.requestObs,this.katastimataNgSrv.getDilosiPaymentInfo(n)]}}),o=1==s?"\u03b4\u03ae\u03bb\u03c9\u03c3\u03b7":"\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",this.calculatedChecked={countChecked:s,countText:o,checkedYpokeimeno:e,checkedTelos:t,checkedProstimo:i},ve(this.cdr)}_createPaymentInfo(){this.modelPaymentInfo=[],Object(d.a)(this.requestObs).subscribe(e=>{e&&(e.forEach(e=>{this.modelPaymentInfo=[...this.modelPaymentInfo,e]}),ve(this.cdr))})}onAllDebitsSelected(){this.dilosiInfoSaved.forEach(e=>{e.isChecked=this.isAllDebitsChecked}),ve(this.cdr),this._calculateTotalAmounts()}onEdit(e){this.isEditModalOpen=!0,this.selectedDilosi=je(e),ve(this.cdr)}updateDilosiInTable(e){if(e){let t=this.dilosiInfoSaved.findIndex(t=>t.dilosiId==e.dilosiId);this.dilosiInfoSaved[t]=e,ve(this.cdr)}}onBankStatusMessage(){this.bankStatusMessage=null,ve(this.cdr)}};Ae.\u0275fac=function(e){return new(e||Ae)(s.Pc(Oe),s.Pc(s.k),s.Pc(g.a),s.Pc(n.b))},Ae.\u0275cmp=s.Jc({type:Ae,selectors:[["app-katastimata-saved"]],inputs:{dilosiInfoSaved:"dilosiInfoSaved",userInfo:"userInfo",diloseisInfoResponse:"diloseisInfoResponse",isLoading:"isLoading"},outputs:{reloadData:"reloadData"},features:[s.zc],decls:8,vars:6,consts:[[3,"class",4,"ngIf"],["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],[4,"ngIf"],["selectedDebits",""],["title","\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2",3,"isOpen","size","isOpenChange"],[1,"p-2"],[3,"diloseisInfoResponse","dilosi","updateSaved",4,"ngIf"],[1,"close-bank-msg","position-absolute",2,"right","5px","top","5px","background-color","transparent","border","0 none","color","#ffffff",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["class","debits-info__selected-debits",4,"ngIf"],[1,"mt-1"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["class","screen-msg",4,"ngIf"],[1,"debits-info__selected-debits"],[4,"ngTemplateOutlet"],[1,"fixed-width-col-40","text-center"],[3,"binary","ngModel","ngModelChange","onChange"],[1,"fixed-width-col-60","text-center"],[1,"fixed-width-col-170"],[1,"fixed-width-col-100"],[1,"fixed-width-col-120"],[1,"ui-column-title"],[1,"fixed-width-col-100","text-right"],[1,"fixed-width-col-120","text-center"],["type","button",1,"btn","btn-primary","btn-sm","m-0",3,"click"],[1,"far","fa-edit"],["colspan","3",1,"fixed-width-col-270","text-right"],[3,"userInfo","requestObs","errorMsg"],[1,"screen-msg"],[1,"totalPoso"],[1,"d-flex","total-selected-cost"],["id","sumTotalToBank",1,"totalPoso"],[3,"diloseisInfoResponse","dilosi","updateSaved"]],template:function(e,t){1&e&&(s.Pd(0,ne,4,4,"div",0),s.Pd(1,ce,3,0,"div",1),s.Pd(2,me,14,14,"ng-container",2),s.Pd(3,ge,20,20,"ng-template",null,3,s.Qd),s.Vc(5,"eg-modal",4),s.hd("isOpenChange",(function(e){return t.isEditModalOpen=e}))("isOpenChange",(function(){return t.isEditModalOpen=!1,t.selectedDilosi=null})),s.Vc(6,"div",5),s.Pd(7,be,1,2,"app-katastimata-create-dilosi",6),s.Uc(),s.Uc()),2&e&&(s.sd("ngIf",t.bankStatusMessage),s.Bc(1),s.sd("ngIf",t.isLoading),s.Bc(1),s.sd("ngIf",!t.isLoading),s.Bc(3),s.sd("isOpen",t.isEditModalOpen)("size","xl"),s.Bc(2),s.sd("ngIf",t.isEditModalOpen&&t.selectedDilosi))},directives:function(){return[y.n,k.a,P.a,S.c,y.s,j.a,b.i,b.l,Te,xe]},pipes:function(){return[y.d]},encapsulation:2,changeDetection:0}),Ae.ctorParameters=()=>[{type:Oe},{type:s.k},{type:g.a},{type:n.b}],Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Array)],Ae.prototype,"dilosiInfoSaved",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Array)],Ae.prototype,"diloseisInfoResponse",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Object)],Ae.prototype,"userInfo",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Boolean)],Ae.prototype,"isLoading",void 0),Object(o.b)([Object(s.S)(),Object(o.c)("design:type",Object)],Ae.prototype,"reloadData",void 0),Ae=Object(o.b)([Object(o.c)("design:paramtypes",[Oe,s.k,g.a,n.b])],Ae);const Me=[{path:"",component:Re,children:[{path:"",pathMatch:"full",redirectTo:"receipts"},{path:"receipts",component:Be},{path:"saved",component:Ae}]}];let Fe=class{};Fe.\u0275mod=s.Nc({type:Fe}),Fe.\u0275inj=s.Mc({factory:function(e){return new(e||Fe)},imports:[[g.e.forChild(Me)],g.e]});let Te=class{constructor(e,t,i){this.katastimataNgSrv=e,this.toasterSrv=t,this.cdr=i,this.requestObs=null,this.canPay=!0,this.errorMsg=new s.x,this.dilosiWebPaymentInfo=[],this.paymentResponseDto=null,this.applicationUrl="",this.katastimataApiUrl="",this.financeApiUrl="",this.returnUrl="",this.assetsUrl="",this.isLoading=!1}ngOnInit(){"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.applicationUrl=AuthConfOptions.redirect_url,this.katastimataApiUrl=AppConfOptions.katastimata_api,this.financeApiUrl=AppConfOptions.epayments_api,this.assetsUrl=AuthConfOptions.assets_base_href,this.returnUrl=encodeURI(this.applicationUrl+"/dimotikos-foros/receipts")):(this.applicationUrl=AppConfOptions.applicationUrl,this.katastimataApiUrl=AppConfOptions.applicationUrl,this.financeApiUrl=AppConfOptions.financeApi,this.assetsUrl=AppConfOptions.assets_base_href,this.returnUrl=encodeURI(this.applicationUrl+"/plugin/receipts")),ve(this.cdr),this.createWebPaymentInfo&&(this.dilosiWebPaymentInfo=[...this.dilosiWebPaymentInfo,this.createWebPaymentInfo],ve(this.cdr))}ngOnChanges(e){e&&e.requestObs&&(this.requestObs=e.requestObs.currentValue,ve(this.cdr)),e&&e.createWebPaymentInfo&&(this.createWebPaymentInfo=e.createWebPaymentInfo.currentValue,ve(this.cdr)),e&&e.canPay&&(this.canPay=e.canPay.currentValue,ve(this.cdr))}onPay(){this.requestObs&&this.requestObs.length?(this.isLoading=!0,ve(this.cdr),Object(d.a)(this.requestObs).subscribe(e=>{e&&(e.forEach(e=>{this.dilosiWebPaymentInfo=[...this.dilosiWebPaymentInfo,e]}),this._createPaymentRequest(),ve(this.cdr))})):this.dilosiWebPaymentInfo&&this.dilosiWebPaymentInfo.length>0&&this._createPaymentRequest()}_createPaymentRequest(){let e={tinRelated:this.userInfo.tin,relatedCallbackUrl:this.returnUrl,entries:[],billingAddressCity:this.userInfo.address_city,billingAddressCountryCode:this.userInfo.address_country_code,billingAddressZip:this.userInfo.address_zip,billingAddress:this.userInfo.address};this.dilosiWebPaymentInfo.forEach(t=>{let i={remittanceInfo:t.paymentCode,amount:t.paymentAmount,debtorName:t.epixirisiOfeiletisEponimia,tin:this.userInfo.tin,description:t.paymentCaption};e.entries.push(i)}),this.katastimataNgSrv.addPaymentRequest(e).subscribe(e=>{if(e){let t=e;t.statusCode==De.Ok?this._postBankForm(t.model):t.statusCode==De.Error&&"DEBTOR_ADDRESS_REQUIRED"==t.messageId&&(this.errorMsg.emit("\u0397 \u03c3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u0394\u0395\u039d \u03bf\u03bb\u03bf\u03ba\u03bb\u03b7\u03c1\u03ce\u03b8\u03b7\u03ba\u03b5! \u03a0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c3\u03c5\u03bc\u03c0\u03bb\u03b7\u03c1\u03ce\u03c3\u03b5\u03c4\u03b5 \u03c4\u03b1 \u03c0\u03b5\u03b4\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7\u03c2 \u03c3\u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c0\u03c1\u03bf\u03c6\u03af\u03bb."),this.toasterSrv.showError("","\u0397 \u03c3\u03c5\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u0394\u0395\u039d \u03bf\u03bb\u03bf\u03ba\u03bb\u03b7\u03c1\u03ce\u03b8\u03b7\u03ba\u03b5! \u03a0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c3\u03c5\u03bc\u03c0\u03bb\u03b7\u03c1\u03ce\u03c3\u03b5\u03c4\u03b5 \u03c4\u03b1 \u03c0\u03b5\u03b4\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7\u03c2 \u03c3\u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c0\u03c1\u03bf\u03c6\u03af\u03bb."))}this.isLoading=!1,ve(this.cdr)})}_postBankForm(e){const t=Object.keys(e.postFields).map((function(t){return{key:t,value:e.postFields[t]}}));e.postFields=t,this.paymentResponseDto=e,setTimeout(()=>{const t=document.getElementById("bankPaymentForm");document.getElementById("bankPaymentForm").setAttribute("action",e.postUrl),t.submit()},100)}};Te.\u0275fac=function(e){return new(e||Te)(s.Pc(Oe),s.Pc(Ie),s.Pc(s.k))},Te.\u0275cmp=s.Jc({type:Te,selectors:[["app-payment"]],inputs:{requestObs:"requestObs",canPay:"canPay",createWebPaymentInfo:"createWebPaymentInfo",userInfo:"userInfo"},outputs:{errorMsg:"errorMsg"},features:[s.zc],decls:10,vars:5,consts:[[1,"debits-info_right","d-flex","align-items-center","justify-content-center","flex-column"],["type","button",1,"btn","btn-primary","mb-2","mt-2",3,"disabled","click"],[1,"far","fa-credit-card"],["alt","Visa","width","40",1,"mr-1",3,"src"],["alt","Mastercard","width","40",1,"mr-1",3,"src"],["alt","Maestro","width","40",3,"src"],["id","bankPaymentForm","method","POST",1,"d-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","text",1,"d-hidden",3,"name","value"]],template:function(e,t){1&e&&(s.Vc(0,"div",0),s.Vc(1,"button",1),s.hd("click",(function(){return t.onPay()})),s.Qc(2,"i",2),s.Rd(3," \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae "),s.Uc(),s.Vc(4,"div"),s.Qc(5,"img",3),s.Qc(6,"img",4),s.Qc(7,"img",5),s.Uc(),s.Uc(),s.Vc(8,"form",6),s.Pd(9,ke,2,1,"ng-container",7),s.Uc()),2&e&&(s.Bc(1),s.sd("disabled",!t.canPay),s.Bc(4),s.ud("src","",t.assetsUrl,"images/visa.jpg",s.Jd),s.Bc(1),s.ud("src","",t.assetsUrl,"images/mastercard.jpg",s.Jd),s.Bc(1),s.ud("src","",t.assetsUrl,"images/maestro.jpg",s.Jd),s.Bc(2),s.sd("ngIf",t.paymentResponseDto))},directives:[b.r,b.j,b.k,y.n,y.m],encapsulation:2}),Te.ctorParameters=()=>[{type:Oe},{type:Ie},{type:s.k}],Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Array)],Te.prototype,"requestObs",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Object)],Te.prototype,"createWebPaymentInfo",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Object)],Te.prototype,"userInfo",void 0),Object(o.b)([Object(s.G)(),Object(o.c)("design:type",Boolean)],Te.prototype,"canPay",void 0),Object(o.b)([Object(s.S)(),Object(o.c)("design:type",Object)],Te.prototype,"errorMsg",void 0),Te=Object(o.b)([Object(o.c)("design:paramtypes",[Oe,Ie,s.k])],Te);const Ee={align:"right",allowNegative:!1,decimal:",",precision:2,prefix:"",suffix:"\u20ac",thousands:"."};let _e=class{};_e.\u0275mod=s.Nc({type:_e}),_e.\u0275inj=s.Mc({factory:function(e){return new(e||_e)},providers:[{provide:U.a,useValue:Ee}],imports:[[y.c,b.d,Fe,k.b,v.c,O.b,P.b,j.b,U.c,I.c]]}),("undefined"==typeof ngJitMode||ngJitMode)&&s.Kd(Fe,{imports:function(){return[g.e]},exports:function(){return[g.e]}}),("undefined"==typeof ngJitMode||ngJitMode)&&s.Kd(_e,{declarations:function(){return[Re,xe,Be,Ae,Te]},imports:function(){return[y.c,b.d,Fe,k.b,v.c,O.b,P.b,j.b,U.c,I.c]},exports:function(){return[Re]}});var We=i("1kSV"),Le=i("PCNd"),Ne=i("zazq"),qe=function(e,t,i,s){var o,n=arguments.length,c=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(n<3?o(c):n>3?o(t,i,c):o(t,i))||c);return n>3&&c&&Object.defineProperty(t,i,c),c},He=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$e=function(e){return e&&e.__esModule?e:{default:e}};let ze=class{constructor(e){this.oidcSecuritySrv=e,this.onDestroy=new r.a,this.oidcSecuritySrv.getIsAuthorized().pipe(Object(h.a)(this.onDestroy)).subscribe(e=>{this.isAuthorized=e})}ngOnDestroy(){this.onDestroy.next()}};ze.ctorParameters=()=>[{type:Ne.c}],ze=qe([Object(s.n)({selector:"app-dimotikos-foros",template:$e(i("Qjlr")).default}),He("design:paramtypes",[Ne.c])],ze);var Ge=function(e,t,i,s){var o,n=arguments.length,c=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(n<3?o(c):n>3?o(t,i,c):o(t,i))||c);return n>3&&c&&Object.defineProperty(t,i,c),c};const Qe=[{path:"",component:ze}];let Je=class{};Je=Ge([Object(s.L)({imports:[g.e.forChild(Qe)],exports:[g.e]})],Je);var Ye=function(e,t,i,s){var o,n=arguments.length,c=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(n<3?o(c):n>3?o(t,i,c):o(t,i))||c);return n>3&&c&&Object.defineProperty(t,i,c),c},Ke=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Xe=class{constructor(e){this.http=e,this.apiUrl=AppConfOptions.dimotikos_foros_api+"/api/"}getDiloseis(e){const t=this.apiUrl+"Atm/DiloseisInfo";return this.http.post(t,e)}};Xe.ctorParameters=()=>[{type:n.b}],Xe=Ye([Object(s.D)(),Ke("design:paramtypes",[n.b])],Xe);var Ze=function(e,t,i,s){var o,n=arguments.length,c=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(n<3?o(c):n>3?o(t,i,c):o(t,i))||c);return n>3&&c&&Object.defineProperty(t,i,c),c};let et=class{};et=Ze([Object(s.L)({declarations:[ze],imports:[Le.a,We.d,Je,_e],providers:[Xe]})],et)},C7T5:function(e,t){e.exports=function(e){return new Promise((t,s)=>{let o=new FileReader,n=e.target.files;if(n.length>1)s(new DOMException("Only one file can be uploaded at a time"));else{o.onerror=()=>{o.abort(),s(new DOMException("Problem parsing input file."))};let e=n[0];o.onload=s=>{const n=new Uint8Array(s.target.result);let c=[];n.map(e=>{c.push(e.toString(16))});const a=c.join("").toUpperCase();let r=o.result.split(",")[1];e.base64=r,e.binaryFileType=i(a),t(e)},o.readAsDataURL(e)}})};const i=e=>{switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";default:return"Unknown filetype"}}},Qjlr:function(e,t,i){"use strict";i.r(t),t.default='<ng-container *ngIf="isAuthorized">\r\n\t<div class="katastimata-container bg-white"\r\n\t\t  style="padding: 30px;">\r\n\t\t<lib-katastimata-ng></lib-katastimata-ng>\r\n\t</div>\r\n</ng-container>\r\n'}}]);