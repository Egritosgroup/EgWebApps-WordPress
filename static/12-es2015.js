(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{kpNr:function(e,t,s){"use strict";s.r(t),s.d(t,"EpaymentsModule",function(){return fe});var i=s("1kSV"),n=s("sYmb"),a=s("PCNd"),r=s("tyNb"),c=s("3u8h"),o=s("oXA7"),l=s("bk9D"),b=s("wmmr"),p=s("fXoL"),d=s("zazq"),h=s("ofXK"),g=s("FMpt"),u=s("7CaW"),f=s("dPl2"),m=s("4krO"),y=s("1q39"),T=s("Sy1n"),C=s("AEAu"),B=s("KsmB"),R=s("tk/3"),S=s("rEr+"),w=s("7zfz"),U=s("3Pt+"),k=s("ZOsW"),O=s("Ji6n");function P(e,t){1&e&&(p.Ub(0,"div",4),p.Ub(1,"span",5),p.Pb(2,"i",6),p.Tb(),p.Tb())}function v(e,t){if(1&e&&p.Pb(0,"p-message",7),2&e){const e=p.gc();p.pc("text",e.bankStatusMessage)("styleClass","mt-2")}}function x(e,t){if(1&e&&p.Pb(0,"p-message",7),2&e){const e=p.gc(2);p.pc("text",e.translation.epayments.noCheckedDebits)("styleClass","my-2")}}function _(e,t){1&e&&p.Qb(0)}function D(e,t){if(1&e&&(p.Ub(0,"div",17),p.Pc(1,_,1,0,"ng-container",18),p.Tb()),2&e){p.gc(3);const e=p.Fc(4);p.Bb(1),p.pc("ngTemplateOutlet",e)}}function M(e,t){if(1&e){const e=p.Vb();p.Ub(0,"form",19),p.Ub(1,"label"),p.Rc(2),p.hc(3,"translate"),p.Tb(),p.Ub(4,"ng-select",20),p.ec("ngModelChange",function(t){return p.Hc(e),p.gc(3).selectedEidosId=t})("ngModelChange",function(t){return p.Hc(e),p.gc(3).onSelectedPersistedTypeChanged(t)}),p.Tb(),p.Tb()}if(2&e){const e=p.gc(3);p.Bb(2),p.Sc(p.ic(3,4,e.translation.epayments.debitType)),p.Bb(2),p.pc("items",e.eidosDebit)("ngModel",e.selectedEidosId)("clearable",!1)}}function I(e,t){if(1&e&&(p.Ub(0,"legend",21),p.Ub(1,"span",22),p.Pb(2,"i",23),p.Rc(3),p.hc(4,"translate"),p.Tb(),p.Ub(5,"span",22),p.Pb(6,"i",24),p.Rc(7),p.hc(8,"translate"),p.Tb(),p.Tb()),2&e){const e=p.gc(3);p.Bb(3),p.Tc(" ",p.ic(4,2,e.translation.epayments.persistedDebit),""),p.Bb(4),p.Tc(" ",p.ic(8,4,e.translation.epayments.nonPersistedDebit),"")}}function A(e,t){1&e&&(p.Ub(0,"th",28),p.Rc(1,"\xa0"),p.Tb())}function j(e,t){if(1&e){const e=p.Vb();p.Ub(0,"tr"),p.Ub(1,"th",25),p.Ub(2,"p-checkbox",26),p.ec("ngModelChange",function(t){return p.Hc(e),p.gc(3).isAllDebitsChecked=t})("onChange",function(){return p.Hc(e),p.gc(3).onAllDebitsSelected()}),p.Tb(),p.Tb(),p.Pc(3,A,2,0,"th",27),p.Ub(4,"th",28),p.Rc(5),p.hc(6,"translate"),p.Tb(),p.Ub(7,"th",29),p.Rc(8),p.hc(9,"translate"),p.Tb(),p.Ub(10,"th",30),p.Rc(11),p.hc(12,"translate"),p.Tb(),p.Ub(13,"th",31),p.Rc(14),p.hc(15,"translate"),p.Tb(),p.Ub(16,"th",31),p.Rc(17),p.hc(18,"translate"),p.Tb(),p.Ub(19,"th",31),p.Rc(20),p.hc(21,"translate"),p.Tb(),p.Ub(22,"th",31),p.Rc(23),p.hc(24,"translate"),p.Tb(),p.Tb()}if(2&e){const e=p.gc(3);p.Bb(2),p.pc("binary",!0)("ngModel",e.isAllDebitsChecked),p.Bb(1),p.pc("ngIf",e.isNonPersistedEnabled),p.Bb(2),p.Sc(p.ic(6,10,e.translation.egwebapps.egrAA)),p.Bb(3),p.Sc(p.ic(9,12,e.translation.egwebapps.egrXK)),p.Bb(3),p.Sc(p.ic(12,14,e.translation.egwebapps.desciption)),p.Bb(3),p.Sc(p.ic(15,16,e.translation.egwebapps.egrExpDate)),p.Bb(3),p.Sc(p.ic(18,18,e.translation.epayments.netPoso)),p.Bb(3),p.Tc("",p.ic(21,20,e.translation.egwebapps.egrOngoingCharges),"*"),p.Bb(3),p.Sc(p.ic(24,22,e.translation.egwebapps.egrTotalCost))}}function L(e,t){if(1&e&&(p.Ub(0,"td",25),p.Ub(1,"span",32),p.Rc(2,"\xa0"),p.Tb(),p.Pb(3,"i",35),p.Tb()),2&e){const e=p.gc().$implicit;p.Bb(3),p.pc("ngClass",e.isBebaiomeno?"far fa-dot-circle":"fas fa-dot-circle")}}function E(e,t){if(1&e){const e=p.Vb();p.Ub(0,"tr"),p.Ub(1,"td",25),p.Ub(2,"span",32),p.Rc(3),p.hc(4,"translate"),p.Tb(),p.Ub(5,"p-checkbox",26),p.ec("ngModelChange",function(e){return t.$implicit.isChecked=e})("onChange",function(){return p.Hc(e),p.gc(3)._calculateTotalAmounts()}),p.Tb(),p.Tb(),p.Pc(6,L,4,1,"td",33),p.Ub(7,"td",28),p.Ub(8,"span",32),p.Rc(9),p.hc(10,"translate"),p.Tb(),p.Rc(11),p.Tb(),p.Ub(12,"td",29),p.Ub(13,"span",32),p.Rc(14),p.hc(15,"translate"),p.Tb(),p.Rc(16),p.Tb(),p.Ub(17,"td",30),p.Ub(18,"span",32),p.Rc(19),p.hc(20,"translate"),p.Tb(),p.Rc(21),p.Tb(),p.Ub(22,"td",31),p.Ub(23,"span",32),p.Rc(24),p.hc(25,"translate"),p.Tb(),p.Rc(26),p.hc(27,"date"),p.Tb(),p.Ub(28,"td",34),p.Ub(29,"span",32),p.Rc(30),p.hc(31,"translate"),p.Tb(),p.Rc(32),p.hc(33,"currency"),p.Tb(),p.Ub(34,"td",34),p.Ub(35,"span",32),p.Rc(36),p.hc(37,"translate"),p.Tb(),p.Rc(38),p.hc(39,"currency"),p.Tb(),p.Ub(40,"td",34),p.Ub(41,"span",32),p.Rc(42),p.hc(43,"translate"),p.Tb(),p.Rc(44),p.hc(45,"currency"),p.Tb(),p.Tb()}if(2&e){const e=t.$implicit,s=t.rowIndex,i=p.gc(3);p.Bb(3),p.Sc(p.ic(4,18,i.translation.egwebapps.egrSelect)),p.Bb(2),p.pc("binary",!0)("ngModel",e.isChecked),p.Bb(1),p.pc("ngIf",i.isNonPersistedEnabled),p.Bb(3),p.Sc(p.ic(10,20,i.translation.egwebapps.egrAA)),p.Bb(2),p.Tc(" ",s+1," "),p.Bb(3),p.Sc(p.ic(15,22,i.translation.egwebapps.egrXK)),p.Bb(2),p.Tc(" ",e.aaEggrafis," "),p.Bb(3),p.Sc(p.ic(20,24,i.translation.egwebapps.desciption)),p.Bb(2),p.Tc(" ",e.perigrafi," "),p.Bb(3),p.Sc(p.ic(25,26,i.translation.egwebapps.egrExpDate)),p.Bb(2),p.Tc(" ",p.jc(27,28,e.hmerominiaLixis,"dd/LL/yyyy")," "),p.Bb(4),p.Sc(p.ic(31,31,i.translation.epayments.netPoso)),p.Bb(2),p.Tc(" ",p.lc(33,33,e.currentKatharoPoso,"\u20ac","symbol","1.2")," "),p.Bb(4),p.Sc(p.ic(37,38,i.translation.egwebapps.egrOngoingCharges)),p.Bb(2),p.Tc(" ",p.lc(39,40,e.currentProsafksisi+e.currentKrathseis,"\u20ac","symbol","1.2")," "),p.Bb(4),p.Sc(p.ic(43,45,i.translation.egwebapps.egrTotalCost)),p.Bb(2),p.Tc(" ",p.lc(45,47,e.currentSynolo,"\u20ac","symbol","1.2")," ")}}function N(e,t){if(1&e&&(p.Ub(0,"td",39),p.Ub(1,"strong"),p.Rc(2),p.hc(3,"translate"),p.Tb(),p.Tb()),2&e){const e=p.gc(4);p.Bb(2),p.Tc("",p.ic(3,1,e.translation.egwebapps.egrTotal),":")}}function F(e,t){if(1&e&&(p.Ub(0,"td",40),p.Ub(1,"strong"),p.Rc(2),p.hc(3,"translate"),p.Tb(),p.Tb()),2&e){const e=p.gc(4);p.Bb(2),p.Tc("",p.ic(3,1,e.translation.egwebapps.egrTotal),":")}}function z(e,t){if(1&e&&(p.Ub(0,"tr"),p.Pc(1,N,4,3,"td",36),p.Pc(2,F,4,3,"td",37),p.Ub(3,"td",38),p.Ub(4,"strong"),p.Rc(5),p.hc(6,"currency"),p.Tb(),p.Tb(),p.Ub(7,"td",38),p.Ub(8,"strong"),p.Rc(9),p.hc(10,"currency"),p.Tb(),p.Tb(),p.Ub(11,"td",38),p.Ub(12,"strong"),p.Rc(13),p.hc(14,"currency"),p.Tb(),p.Tb(),p.Tb()),2&e){const e=p.gc(3);p.Bb(1),p.pc("ngIf",!e.isNonPersistedEnabled),p.Bb(1),p.pc("ngIf",e.isNonPersistedEnabled),p.Bb(3),p.Sc(p.lc(6,5,e.totalCurrentKatharo,"\u20ac","symbol","1.2")),p.Bb(4),p.Sc(p.lc(10,10,e.totalCurrentProsafksisi,"\u20ac","symbol","1.2")),p.Bb(4),p.Sc(p.lc(14,15,e.totalcurrentSynolo,"\u20ac","symbol","1.2"))}}function H(e,t){if(1&e&&(p.Sb(0),p.Pc(1,D,2,1,"div",8),p.Pc(2,M,5,6,"form",9),p.Pc(3,I,9,6,"legend",10),p.Ub(4,"p",11),p.Ub(5,"strong"),p.Rc(6),p.hc(7,"translate"),p.Tb(),p.Tb(),p.Ub(8,"p-table",12),p.Pc(9,j,25,24,"ng-template",13),p.Pc(10,E,46,52,"ng-template",14),p.Pc(11,z,15,20,"ng-template",15),p.Tb(),p.Ub(12,"p",16),p.Ub(13,"strong"),p.Rc(14),p.hc(15,"translate"),p.Tb(),p.Tb(),p.Ub(16,"p"),p.Ub(17,"small"),p.Ub(18,"em"),p.Rc(19),p.hc(20,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Rb()),2&e){const e=p.gc(2);p.Bb(1),p.pc("ngIf",e.calculatedChecked.countChecked>0),p.Bb(1),p.pc("ngIf",e.isNonPersistedEnabled),p.Bb(1),p.pc("ngIf",e.isNonPersistedEnabled),p.Bb(3),p.Uc("",p.ic(7,18,e.translation.epayments.totalDebits),": ",null==e.filteredDebits.entries?null:e.filteredDebits.entries.length,""),p.Bb(2),p.pc("value",e.filteredDebits.entries)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",e.filteredDebits.entries.length)("loading",e.isLoading),p.Bb(6),p.Uc("",p.ic(15,20,e.translation.epayments.totalDebits),": ",null==e.filteredDebits.entries?null:e.filteredDebits.entries.length,""),p.Bb(5),p.Tc("* ",p.ic(20,22,e.translation.egwebapps.egrOngoingChargesAndDeductions),"")}}function K(e,t){if(1&e&&(p.Ub(0,"div"),p.Pc(1,x,1,2,"p-message",1),p.Pc(2,H,21,24,"ng-container",2),p.Tb()),2&e){const e=p.gc();p.Bb(1),p.pc("ngIf",0==e.calculatedChecked.countChecked&&e.debits.entries),p.Bb(1),p.pc("ngIf",e.debits.entries&&e.debits.entries.length)}}function V(e,t){if(1&e){const e=p.Vb();p.Ub(0,"div",41),p.Ub(1,"div"),p.Ub(2,"p",42),p.Rc(3),p.hc(4,"translate"),p.Ub(5,"span",43),p.Rc(6),p.hc(7,"translate"),p.hc(8,"translate"),p.Tb(),p.Tb(),p.Ub(9,"p",42),p.Rc(10),p.hc(11,"translate"),p.Ub(12,"span",43),p.Rc(13),p.hc(14,"currency"),p.Tb(),p.Tb(),p.Ub(15,"p",42),p.Rc(16),p.hc(17,"translate"),p.Ub(18,"span",43),p.Rc(19),p.hc(20,"currency"),p.Tb(),p.Tb(),p.Ub(21,"p",42),p.Rc(22),p.hc(23,"translate"),p.Ub(24,"span",44),p.Rc(25),p.hc(26,"currency"),p.Tb(),p.Tb(),p.Tb(),p.Ub(27,"app-checkout",45),p.ec("onPayBtnClick",function(t){return p.Hc(e),p.gc().onCreatePaymentRequest(t)}),p.Tb(),p.Tb()}if(2&e){const e=p.gc();p.Bb(3),p.Tc("",p.ic(4,14,e.translation.egwebapps.egrSelected)," "),p.Bb(3),p.Uc("",e.calculatedChecked.countChecked," ",1==e.calculatedChecked.countChecked?p.ic(7,16,e.translation.epayments.debit):p.ic(8,18,e.translation.epayments.debits),""),p.Bb(4),p.Tc("",p.ic(11,20,e.translation.epayments.netPoso),": "),p.Bb(3),p.Sc(p.lc(14,22,e.calculatedChecked.checkedKatharo,"\u20ac","symbol","1.2")),p.Bb(3),p.Tc("",p.ic(17,27,e.translation.egwebapps.egrOngoingCharges),": "),p.Bb(3),p.Sc(p.lc(20,29,e.calculatedChecked.checkedEpivarinseis,"\u20ac","symbol","1.2")),p.Bb(3),p.Tc("",p.ic(23,34,e.translation.epayments.totalChecked),": "),p.Bb(3),p.Sc(p.lc(26,36,e.calculatedChecked.checkedSum,"\u20ac","symbol","1.2")),p.Bb(2),p.pc("isPaymentFormValid",!0)("doPaymentSubscription",e.onDoPaymentSubject.asObservable())("finApiUrl",e.financeApiUrl)("buttonText",e.translation.egwebapps.egrPaymentBtnText)("cancelButtonText",e.translation.egwebapps.egrCancelBtn)}}let $=(()=>{class e{constructor(e,t,s,i,n,a,r){this.toasterSrv=e,this.oidcSecuritySrv=t,this.epaymentsSrv=s,this.appCacheSv=i,this.cdr=n,this._http=a,this._parent=r,this.countriesList=[],this.onDoPaymentSubject=new o.a,this.isMobile=!1,this.bankStatusMessage=null,this.calculatedChecked={countChecked:0,countText:"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2",checkedSum:0,checkedKatharo:0,checkedProsafksisis:0},this.isAllDebitsChecked=!1,this.isLoading=!0,this.eidosDebit=[],this.selectedEidosId=0,this.onDestroy=new o.a,this.oikonomikiBankMessagesEn=B.b}ngOnInit(){this.appCacheSv.translation$.pipe(Object(l.a)(this.onDestroy)).subscribe(e=>{e&&(this.translation=e,Object(c.r)(this.cdr))}),this.appCacheSv.selectedLang$.pipe(Object(l.a)(this.onDestroy)).subscribe(e=>{if(e)switch(this.selectedLang=e,e){case"en":this.eidosDebit=[{value:0,perigrafi:"All"},{value:1,perigrafi:"Persisted Debits"},{value:2,perigrafi:"Non Persisted Debits"}];break;default:this.eidosDebit=[{value:0,perigrafi:"\u038c\u03bb\u03b5\u03c2"},{value:1,perigrafi:"\u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b5\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2"},{value:2,perigrafi:"\u039c\u03b7 \u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b5\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2"}]}}),this.isMobile=this._parent.isMobile,this.isNonPersistedEnabled=AppConfOptions.show_non_persisted_debits,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=Object(c.w)(AppConfOptions.epayments_api));let e=Object(c.w)(AuthConfOptions.stsServer);e+="/api/general/GetCountries",this._http.get(e).pipe(Object(y.a)(e=>e?(this.countriesList=e,this.oidcSecuritySrv.userData$):Object(m.a)(!1))).subscribe(e=>{e&&(this.user=e,this.user.address_country_code&&""!=this.user.address_country_code&&(this.user.address_country_num=this.countriesList.find(e=>e.Alpha2Code==this.user.address_country_code).NumericCode.toString()),this._initDebitsByTin()),Object(c.r)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onCreatePaymentRequest(e){this.paymentRequestDto=void 0,Object(c.r)(this.cdr);let t=this.debits.entries.filter(e=>e.isChecked);if(t&&t.length){let s={tinRelated:this.user.tin,relatedCallbackUrl:AppConfOptions.application_url+"/epayments/receipts",billingAddressCity:this.user.address_city,billingAddressCountryCode:this.user.address_country_code,billingAddressZip:this.user.address_zip,billingAddress:this.user.address,userEmail:this.user.email,userPhone:this.user.phone_number,paymentMethodKey:e.key,entries:[]};"PIRBGRAA"===e.key&&(s.billingAddressCountryCode=null);for(let e of t.filter(e=>e.isChecked)){let t={remittanceInfo:this._createRemittanceInfo(e),amount:e.currentSynolo,debtorName:e.eponymia,tin:this.user.tin,description:e.perigrafi,metadata:e.metadata};s.entries.push(t)}this.paymentRequestDto=s,Object(c.r)(this.cdr),this.epaymentsSrv.addPaymentRequest(this.paymentRequestDto).subscribe(e=>{e&&1==e.statusCode?(this.paymentResponseDto=e.model,this.onDoPaymentSubject.next(this.paymentResponseDto)):this.toasterSrv.showError("",2!=e.statusCode&&3!=e.statusCode||!e.message?this.translation.egwebapps.egrPaymentProblemFound:e.message)})}}onAllDebitsSelected(){this.debits.entries.forEach(e=>{e.isChecked=this.isAllDebitsChecked}),Object(c.r)(this.cdr),this._calculateTotalAmounts()}onSelectedPersistedTypeChanged(e){this.selectedEidosId=+e,this.filteredDebits=JSON.parse(JSON.stringify(this.debits)),this.filteredDebits.entries=1===this.selectedEidosId?this.debits.entries.filter(e=>!0===e.isBebaiomeno):2===this.selectedEidosId?this.debits.entries.filter(e=>!1===e.isBebaiomeno):this.debits.entries,Object(c.r)(this.cdr),this._fillDebitsTable(this.filteredDebits)}_initDebitsByTin(){this.isLoading=!0;let e={tin:this.user.tin};this.epaymentsSrv.getBankMessages().pipe(Object(y.a)(t=>(this.oikonomikiBankMessages=t,this.epaymentsSrv.getDebitsByTin(e)))).subscribe(e=>{e&&(e.entries&&e.entries.length>=0?(this.debits=e,this.filteredDebits=e,this._fillDebitsTable(this.debits)):(e.message||e.messageId)&&(this.bankStatusMessage="el"==this.selectedLang?this.oikonomikiBankMessages[e.messageId]?this.oikonomikiBankMessages[e.messageId]:e.message:this.oikonomikiBankMessagesEn[e.messageId]?this.oikonomikiBankMessagesEn[e.messageId]:e.message,this.toasterSrv.showError("",this.bankStatusMessage)),this.isLoading=!1)})}_fillDebitsTable(e){if(this.isLoading=!0,Object(c.r)(this.cdr),2==e.statusCode)return this.toasterSrv.showWarning("",this.translation.epayments.duplicateTin),void(this.bankStatusMessage=this.translation.epayments.duplicateTin);if(4==e.statusCode)return this.toasterSrv.showWarning("",this.translation.epayments.loadPaymentsError),void(this.bankStatusMessage=this.translation.epayments.loadPaymentsError);0===e.entries.length&&(this.bankStatusMessage=this.translation.epayments.noDebitsFound),!1===this.isNonPersistedEnabled&&(e.entries=e.entries.filter(e=>!0===e.isBebaiomeno)),e.entries.forEach(e=>{e.isChecked=!1});let t=e.entries.map(e=>e.currentKatharoPoso);this.totalCurrentKatharo=t.reduce((e,t)=>e+t,0);let s=e.entries.map(e=>e.currentProsafksisi),i=e.entries.map(e=>e.currentKrathseis);this.totalCurrentProsafksisi=s.reduce((e,t)=>e+t,0)+i.reduce((e,t)=>e+t,0);let n=e.entries.map(e=>e.currentSynolo);this.totalcurrentSynolo=n.reduce((e,t)=>e+t,0),e.entries.sort(function(e,t){return Date.parse(e.hmerominiaLixis)/1e3-Date.parse(t.hmerominiaLixis)/1e3}),this.isLoading=!1,Object(c.r)(this.cdr)}_calculateTotalAmounts(){let e=0,t=0,s=0,i=0,n=this.translation.epayments.debits;this.debits.entries.forEach(n=>{n.isChecked&&(i++,e+=n.currentSynolo,t+=n.currentKatharoPoso,s+=n.currentProsafksisi+n.currentKrathseis)}),n=1==i?this.translation.epayments.debit:this.translation.epayments.debits,this.calculatedChecked={countChecked:i,countText:n,checkedSum:e,checkedKatharo:t,checkedEpivarinseis:s}}_createRemittanceInfo(e){return e.remittanceInfo}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(c.l),p.Ob(d.e),p.Ob(C.a),p.Ob(b.a),p.Ob(p.h),p.Ob(R.b),p.Ob(T.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-debits"]],inputs:{isAuthorized:"isAuthorized"},decls:5,vars:3,consts:[["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[4,"ngIf"],["selectedDebits",""],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["severity","warn",3,"text","styleClass"],["class","debits-info__selected-debits",4,"ngIf"],["class","form",4,"ngIf"],["class","iconTooltips d-flex flex-wrap mt-4 mb-2","style","font-size: 14px;",4,"ngIf"],[1,"mt-2","mb-1"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"mt-1"],[1,"debits-info__selected-debits"],[4,"ngTemplateOutlet"],[1,"form"],["name","perstType","bindLabel","perigrafi","bindValue","value",3,"items","ngModel","clearable","ngModelChange"],[1,"iconTooltips","d-flex","flex-wrap","mt-4","mb-2",2,"font-size","14px"],[1,"mr-1"],[1,"far","fa-dot-circle","fa-fw"],[1,"fas","fa-dot-circle","fa-fw"],[1,"fixed-width-col-40","text-center"],[3,"binary","ngModel","ngModelChange","onChange"],["class","fixed-width-col-40",4,"ngIf"],[1,"fixed-width-col-40"],[1,"fixed-width-col-120"],[1,"fixed-width-col-170"],[1,"fixed-width-col-100"],[1,"p-column-title"],["class","fixed-width-col-40 text-center",4,"ngIf"],[1,"fixed-width-col-100","text-right"],["aria-hidden","true",1,"fa-fw",3,"ngClass"],["class","fixed-width-col-470 text-right","colspan","5",4,"ngIf"],["class","fixed-width-col-510 text-right","colspan","6",4,"ngIf"],["colspan","1",1,"fixed-width-col-100","text-right"],["colspan","5",1,"fixed-width-col-470","text-right"],["colspan","6",1,"fixed-width-col-510","text-right"],[1,"debits-info","d-flex","flex-wrap","justify-content-around","w-100","align-items-center","mb-1"],[1,"mb-0"],[1,"totalPoso"],["id","sumTotalToBank",1,"totalPoso"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","cancelButtonText","onPayBtnClick"]],template:function(e,t){1&e&&(p.Pc(0,P,3,0,"div",0),p.Pc(1,v,1,2,"p-message",1),p.Pc(2,K,3,2,"div",2),p.Pc(3,V,28,41,"ng-template",null,3,p.Qc)),2&e&&(p.pc("ngIf",t.isLoading),p.Bb(1),p.pc("ngIf",t.bankStatusMessage),p.Bb(1),p.pc("ngIf",t.debits&&!t.isLoading))},directives:[h.p,g.b,S.d,w.j,h.u,U.w,U.n,U.o,k.a,U.m,U.p,O.a,h.n,c.b],pipes:[n.c,h.f,h.d],encapsulation:2}),e})();var q=s("wd/R"),W=s("lhB6"),J=s("eO1q");function Z(e,t){1&e&&(p.Ub(0,"div",4),p.Ub(1,"span",5),p.Pb(2,"i",6),p.Tb(),p.Tb())}function X(e,t){if(1&e&&p.Pb(0,"p-message",7),2&e){const e=p.gc();p.pc("text",e.receiptsMessage)}}function G(e,t){if(1&e&&p.Pb(0,"p-message",8),2&e){const e=p.gc();p.pc("severity",e.bankStatusMessageClass)("text",e.bankStatusMessage)("styleClass","mb-2")}}function Q(e,t){if(1&e&&(p.Ub(0,"th",38),p.Rc(1),p.hc(2,"translate"),p.Tb()),2&e){const e=p.gc(4);p.Bb(1),p.Sc(p.ic(2,1,e.translation.epayments.receipt))}}function Y(e,t){if(1&e&&(p.Ub(0,"tr"),p.Ub(1,"th",37),p.Rc(2),p.hc(3,"translate"),p.Tb(),p.Ub(4,"th",38),p.Rc(5),p.hc(6,"translate"),p.Tb(),p.Ub(7,"th",38),p.Rc(8),p.hc(9,"translate"),p.Tb(),p.Ub(10,"th",38),p.Rc(11),p.hc(12,"translate"),p.Tb(),p.Ub(13,"th",38),p.Rc(14),p.hc(15,"translate"),p.Tb(),p.Ub(16,"th",39),p.Rc(17),p.hc(18,"translate"),p.Tb(),p.Ub(19,"th",38),p.Rc(20),p.hc(21,"translate"),p.Tb(),p.Pc(22,Q,3,3,"th",40),p.Tb()),2&e){const e=p.gc(3);p.Bb(2),p.Sc(p.ic(3,8,e.translation.egwebapps.egrType)),p.Bb(3),p.Sc(p.ic(6,10,e.translation.epayments.receiptNbr)),p.Bb(3),p.Sc(p.ic(9,12,e.translation.epayments.receiptDate)),p.Bb(3),p.Sc(p.ic(12,14,e.translation.epayments.transactionNbr)),p.Bb(3),p.Sc(p.ic(15,16,e.translation.epayments.transactionDate)),p.Bb(3),p.Sc(p.ic(18,18,e.translation.egwebapps.description)),p.Bb(3),p.Sc(p.ic(21,20,e.translation.epayments.poso)),p.Bb(2),p.pc("ngIf",!(null!=e.paymentsSettings&&e.paymentsSettings.isProviderThirdParty))}}function ee(e,t){if(1&e&&(p.Ub(0,"a",48),p.Pb(1,"i",49),p.Tb()),2&e){const e=p.gc(2).$implicit,t=p.gc(3);p.sc("href","",t.receiptsUrlBase,"api/PersistedDebits/GetPaymentFile/",e.bankTxnUid,"",p.Jc)}}function te(e,t){if(1&e&&(p.Ub(0,"td",46),p.Ub(1,"span",42),p.Rc(2),p.hc(3,"translate"),p.Tb(),p.Pc(4,ee,2,2,"a",47),p.Tb()),2&e){const e=p.gc().$implicit,t=p.gc(3);p.Bb(2),p.Sc(p.ic(3,2,t.translation.epayments.receipt)),p.Bb(2),p.pc("ngIf",e.receiptId&&e.bankTxnUid)}}function se(e,t){if(1&e&&(p.Ub(0,"tr"),p.Ub(1,"td",41),p.Ub(2,"span",42),p.Rc(3),p.hc(4,"translate"),p.Tb(),p.Pb(5,"i",43),p.Tb(),p.Ub(6,"td",38),p.Ub(7,"span",42),p.Rc(8),p.hc(9,"translate"),p.Tb(),p.Rc(10),p.Tb(),p.Ub(11,"td",38),p.Ub(12,"span",42),p.Rc(13),p.hc(14,"translate"),p.Tb(),p.Rc(15),p.hc(16,"date"),p.Tb(),p.Ub(17,"td",38),p.Ub(18,"span",42),p.Rc(19),p.hc(20,"translate"),p.Tb(),p.Rc(21),p.Tb(),p.Ub(22,"td",38),p.Ub(23,"span",42),p.Rc(24),p.hc(25,"translate"),p.Tb(),p.Rc(26),p.hc(27,"date"),p.Tb(),p.Ub(28,"td",39),p.Ub(29,"span",42),p.Rc(30),p.hc(31,"translate"),p.Tb(),p.Rc(32),p.Tb(),p.Ub(33,"td",44),p.Ub(34,"span",42),p.Rc(35),p.hc(36,"translate"),p.Tb(),p.Rc(37),p.hc(38,"currency"),p.Tb(),p.Pc(39,te,5,4,"td",45),p.Tb()),2&e){const e=t.$implicit,s=p.gc(3);p.Bb(3),p.Sc(p.ic(4,17,s.translation.egwebapps.egrType)),p.Bb(2),p.Db(e.icon),p.Bb(3),p.Sc(p.ic(9,19,s.translation.epayments.receiptNbr)),p.Bb(2),p.Tc(" ",e.receiptIncrNr," "),p.Bb(3),p.Sc(p.ic(14,21,s.translation.epayments.receiptDate)),p.Bb(2),p.Tc(" ",p.jc(16,23,e.receiptDateCreated,"dd/LL/yyyy")," "),p.Bb(4),p.Sc(p.ic(20,26,s.translation.epayments.transactionNbr)),p.Bb(2),p.Tc(" ",e.bankTxnPaymentRef," "),p.Bb(3),p.Sc(p.ic(25,28,s.translation.epayments.transactionDate)),p.Bb(2),p.Tc(" ",p.jc(27,30,e.bankTxnDateCreated,"dd/LL/yyyy")," "),p.Bb(4),p.Sc(p.ic(31,33,s.translation.egwebapps.description)),p.Bb(2),p.Tc(" ",e.description," "),p.Bb(3),p.Sc(p.ic(36,35,s.translation.epayments.poso)),p.Bb(2),p.Tc(" ",p.lc(38,37,e.paymentTotal,"\u20ac","symbol","1.2")," "),p.Bb(2),p.pc("ngIf",!(null!=s.paymentsSettings&&s.paymentsSettings.isProviderThirdParty))}}function ie(e,t){if(1&e&&(p.Ub(0,"tr"),p.Ub(1,"td",50),p.Ub(2,"strong"),p.Rc(3),p.hc(4,"translate"),p.Tb(),p.Tb(),p.Ub(5,"td",51),p.Ub(6,"strong"),p.Rc(7),p.hc(8,"currency"),p.Tb(),p.Tb(),p.Tb()),2&e){const e=p.gc(3);p.Bb(3),p.Sc(p.ic(4,3,e.translation.egwebapps.egrTotalCost)),p.Bb(2),p.Cb("colspan",null!=e.paymentsSettings&&e.paymentsSettings.isProviderThirdParty?1:2),p.Bb(2),p.Sc(p.lc(8,5,e.totalPoso,"\u20ac","symbol","1.2"))}}function ne(e,t){if(1&e&&(p.Ub(0,"tr"),p.Ub(1,"td"),p.Rc(2),p.hc(3,"translate"),p.Tb(),p.Tb()),2&e){const e=p.gc(3);p.Bb(1),p.Cb("colspan",null!=e.paymentsSettings&&e.paymentsSettings.isProviderThirdParty?7:8),p.Bb(1),p.Tc(" ",p.ic(3,2,e.translation.egwebapps.egrNoResultsFound)," ")}}const ae=function(){return{width:"100%"}};function re(e,t){if(1&e){const e=p.Vb();p.Ub(0,"div",10),p.Ub(1,"p-panel",11),p.Ub(2,"form",12),p.Ub(3,"div",13),p.Ub(4,"div",14),p.Ub(5,"label",15),p.Rc(6),p.hc(7,"translate"),p.Tb(),p.Ub(8,"p-calendar",16),p.ec("ngModelChange",function(t){return p.Hc(e),p.gc(2).hmerominiaApodiksisRange=t}),p.Tb(),p.Tb(),p.Ub(9,"div",14),p.Ub(10,"label",17),p.Rc(11),p.hc(12,"translate"),p.Tb(),p.Ub(13,"p-calendar",18),p.ec("ngModelChange",function(t){return p.Hc(e),p.gc(2).hmerominiaSinallagisRange=t}),p.Tb(),p.Tb(),p.Ub(14,"div",14),p.Ub(15,"label",19),p.Rc(16),p.hc(17,"translate"),p.Tb(),p.Ub(18,"ng-select",20),p.ec("ngModelChange",function(t){return p.Hc(e),p.gc(2).receiptType=t})("ngModelChange",function(t){return p.Hc(e),p.gc(2).onReceiptTypeChanged(t)}),p.Tb(),p.Tb(),p.Tb(),p.Ub(19,"div",21),p.Ub(20,"button",22),p.ec("click",function(){return p.Hc(e),p.gc(2).onSearch()}),p.Pb(21,"i",23),p.Rc(22),p.hc(23,"translate"),p.Tb(),p.Ub(24,"button",24),p.ec("click",function(){return p.Hc(e),p.gc(2).onClear()}),p.Pb(25,"i",25),p.Rc(26),p.hc(27,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(28,"legend",26),p.Ub(29,"span",27),p.Pb(30,"i",28),p.Rc(31),p.hc(32,"translate"),p.Tb(),p.Ub(33,"span",27),p.Pb(34,"i",29),p.Rc(35),p.hc(36,"translate"),p.Tb(),p.Tb(),p.Ub(37,"p"),p.Ub(38,"strong"),p.Rc(39),p.hc(40,"translate"),p.Tb(),p.Tb(),p.Ub(41,"p-table",30),p.Pc(42,Y,23,22,"ng-template",31),p.Pc(43,se,40,42,"ng-template",32),p.Pc(44,ie,9,10,"ng-template",33),p.Pc(45,ne,4,4,"ng-template",34),p.Tb(),p.Ub(46,"p",35),p.Ub(47,"strong"),p.Rc(48),p.hc(49,"translate"),p.Tb(),p.Tb(),p.Ub(50,"legend",36),p.Ub(51,"span",27),p.Pb(52,"i",28),p.Rc(53),p.hc(54,"translate"),p.Tb(),p.Ub(55,"span",27),p.Pb(56,"i",29),p.Rc(57),p.hc(58,"translate"),p.Tb(),p.Tb(),p.Tb()}if(2&e){const e=p.gc(2);p.Bb(1),p.pc("header",e.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),p.Bb(5),p.Sc(p.ic(7,53,e.translation.epayments.receiptDateRange)),p.Bb(2),p.Mc(p.vc(75,ae)),p.pc("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",e.hmerominiaApodiksisRange),p.Bb(3),p.Sc(p.ic(12,55,e.translation.epayments.transactionDateRange)),p.Bb(2),p.Mc(p.vc(76,ae)),p.pc("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",e.hmerominiaSinallagisRange),p.Bb(3),p.Sc(p.ic(17,57,e.translation.egwebapps.egrPaymentMethod)),p.Bb(2),p.pc("items",e.tropoiPliromis)("ngModel",e.receiptType)("searchable",!1)("clearable",!1),p.Bb(4),p.Tc(" ",p.ic(23,59,e.translation.egwebapps.egrSearchBtn)," "),p.Bb(4),p.Tc(" ",p.ic(27,61,e.translation.egwebapps.egrClearBtn)," "),p.Bb(5),p.Tc(" ",p.ic(32,63,e.translation.epayments.waiverOnline),""),p.Bb(4),p.Tc(" ",p.ic(36,65,e.translation.epayments.waiverOffline),""),p.Bb(4),p.Uc("",p.ic(40,67,e.translation.epayments.totalReceipts),": ",null==e.orderedReceiptsFiltered?null:e.orderedReceiptsFiltered.length,""),p.Bb(2),p.pc("value",e.orderedReceiptsFiltered)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",e.orderedReceiptsFiltered.length)("loading",e.isLoading),p.Bb(7),p.Uc("",p.ic(49,69,e.translation.epayments.totalReceipts),": ",null==e.orderedReceiptsFiltered?null:e.orderedReceiptsFiltered.length,""),p.Bb(5),p.Tc(" ",p.ic(54,71,e.translation.epayments.waiverOnline),""),p.Bb(4),p.Tc(" ",p.ic(58,73,e.translation.epayments.waiverOffline),"")}}function ce(e,t){if(1&e&&(p.Sb(0),p.Pc(1,re,59,77,"div",9),p.Rb()),2&e){const e=p.gc();p.Bb(1),p.pc("ngIf",e.receipts.entries&&e.receipts.entries.length)}}let oe=(()=>{class e{constructor(e,t,s,i,n,a){this.oidcSecuritySrv=e,this.epaymentsSrv=t,this.appCacheSv=s,this.toasterSrv=i,this.cdr=n,this.route=a,this.onDestroy=new o.a,this.totalPoso=0,this.bankStatusMessageClass=void 0,this.oikonomikiBankMessagesEn=B.b,this.receiptsUrlBase=AppConfOptions.epayments_api,this.receiptType=0,this.isLoading=!0,this.hmerominiaApodiksisRange=null,this.hmerominiaSinallagisRange=null,this.today=new Date,this.yearRange=Object(c.x)(50,50),this.tropoiPliromis=[]}ngOnInit(){this.appCacheSv.translation$.pipe(Object(l.a)(this.onDestroy)).subscribe(e=>{e&&(this.translation=e,Object(c.r)(this.cdr))}),this.appCacheSv.selectedLang$.pipe(Object(l.a)(this.onDestroy)).subscribe(e=>{if(e)switch(this.selectedLang=e,e){case"en":this.tropoiPliromis=[{value:0,perigrafi:"All"},{value:1,perigrafi:"Organization's Fund Office"},{value:2,perigrafi:"E-Services"}];break;default:this.tropoiPliromis=[{id:0,perigrafi:"\u038c\u03bb\u03bf\u03b9"},{id:1,perigrafi:"\u03a4\u03b1\u03bc\u03b5\u03af\u03bf \u0394\u03ae\u03bc\u03bf\u03c5"},{id:2,perigrafi:"Online"}]}}),this.isLoading=!0,this.epaymentsSrv.getPaymentSettings().subscribe(e=>this.paymentsSettings=e),this.epaymentsSrv.getBankMessages().pipe(Object(y.a)(e=>e?(this.oikonomikiBankMessages=e,this.oidcSecuritySrv.userData$.pipe(Object(l.a)(this.onDestroy))):Object(m.a)(!1)),Object(y.a)(e=>e?(this.user=e,this.route.queryParams.pipe(Object(l.a)(this.onDestroy))):Object(m.a)(!1))).subscribe(e=>{if(e){let t=e;if(t.messagecode||t.paymentStatus){let e=t.messagecode?t.messagecode:t.paymentStatus;this.bankStatusMessage="el"==this.selectedLang?this.oikonomikiBankMessages[e]:this.oikonomikiBankMessagesEn[e],"TRANSACTION_COMPLETED"==e||"APPROVED"==e?(this.toasterSrv.showSuccess("",this.bankStatusMessage),this.bankStatusMessageClass="success"):(this.bankStatusMessageClass="error",this.toasterSrv.showError("",this.bankStatusMessage))}Object(c.r)(this.cdr),this._initReceiptsByTin()}else this.toasterSrv.showError("",this.translation.egwebapps.egrProblemFound),this.isLoading=!1,Object(c.r)(this.cdr)})}ngOnChanges(e){e&&e.tabChanged&&(this.bankStatusMessage=void 0,Object(c.r)(this.cdr))}ngOnDestroy(){this.onDestroy.next(null)}_initReceiptsByTin(){this.isLoading=!0;let e=new Date,t={tin:this.user.tin,year:e.getFullYear()};this.epaymentsSrv.getPaymentsByTin(t).subscribe(e=>{e&&(this.receipts=e,this.totalPoso=0,this.receipts.entries&&this.receipts.entries.length>0&&this.receipts.entries.forEach(e=>{this.totalPoso+=e.receiptAmount}),!this.receipts.statusCode||2!=this.receipts.statusCode&&3!=this.receipts.statusCode?1==this.receipts.statusCode&&0==this.receipts.entries.length?this.receiptsMessage=this.translation.epayments.revDebtorNotFound:this._fillOrderedReceipts(this.receipts):this.receipts.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(this.toasterSrv.showWarning("",this.translation.epayments.revDebtorNotFound),this.receiptsMessage=this.translation.epayments.revDebtorNotFound):this.receipts.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")&&(this.toasterSrv.showError("error",this.translation.epayments.duplicateTin),this.receiptsMessage=this.translation.epayments.duplicateTin)),this.isLoading=!1,Object(c.r)(this.cdr)})}onReceiptTypeChanged(e){this.receiptType=e,Object(c.r)(this.cdr)}onSearch(){let e;this.isLoading=!0,this.orderedReceiptsFiltered=Object(c.q)(this.orderedReceipts),this.hmerominiaApodiksisRange&&(e=this.orderedReceiptsFiltered.filter(e=>!!q.utc(e.receiptDateCreated).isBetween(q.utc(this.hmerominiaApodiksisRange[0]),q.utc(this.hmerominiaApodiksisRange[1]).add(1,"day")))),this.hmerominiaSinallagisRange&&(e=this.orderedReceiptsFiltered.filter(e=>!!q(e.bankTxnDateCreated).isBetween(q(this.hmerominiaSinallagisRange[0]),q(this.hmerominiaSinallagisRange[1]).add(1,"day")))),this.hmerominiaApodiksisRange||this.hmerominiaSinallagisRange||(e=Object(c.q)(this.orderedReceipts)),Object(c.r)(this.cdr),this._filterByType(e)}onClear(){this.orderedReceiptsFiltered=Object(c.q)(this.orderedReceipts),this.hmerominiaApodiksisRange=null,this.hmerominiaSinallagisRange=null,this.receiptType=0,Object(c.r)(this.cdr)}_filterByType(e){e&&(2===this.receiptType?this.orderedReceiptsFiltered=e.filter(e=>!0===e.isOnline):1===this.receiptType&&(this.orderedReceiptsFiltered=e.filter(e=>!1===e.isOnline||!e.isOnline))),this.isLoading=!1,Object(c.r)(this.cdr)}_fillOrderedReceipts(e=null){null==e&&(e=this.receipts);let t=this.receipts.entries.filter(e=>null===e.receiptDateCreated),s=this.receipts.entries.filter(e=>null!=e.receiptDateCreated);this.orderedReceipts=s.sort(function(e,t){return t.receiptDateCreated!==e.receiptDateCreated?t.receiptDateCreated>e.receiptDateCreated:parseInt(t.receiptIncrNr.split("/").pop())>parseInt(e.receiptIncrNr.split("/").pop())}),0!=t.length&&t.forEach(e=>{this.orderedReceipts.unshift(e)}),this.orderedReceipts.forEach(e=>{e.icon=0==e.isOnline?"far fa-building":"fas fa-desktop",e.description=null==e.bankTxnDescr?e.receiptDescr:e.bankTxnDescr,e.paymentTotal=null==e.bankTxnPaymentTotal?e.receiptAmount:e.bankTxnPaymentTotal,e.link=null!=e.receiptId&&null!=e.bankTxnUid?'<a href="'+AppConfOptions.epayments_api+"/api/PersistedDebits/GetPaymentFile/"+e.bankTxnUid+'" target="_blank"><i class="far fa-file-pdf"></i></a>':""}),this.orderedReceiptsFiltered=Object(c.q)(this.orderedReceipts),Object(c.r)(this.cdr)}handleError(e){return console.log(e.message),console.log(e.error),Object(W.a)(e.message)}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(d.e),p.Ob(C.a),p.Ob(b.a),p.Ob(c.l),p.Ob(p.h),p.Ob(r.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-receipts"]],inputs:{tabChanged:"tabChanged"},features:[p.zb],decls:4,vars:4,consts:[["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],["severity","warn",3,"text",4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],[4,"ngIf"],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["severity","warn",3,"text"],[3,"severity","text","styleClass"],["class","receipts-info",4,"ngIf"],[1,"receipts-info"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-sm-6","col-md-4"],["for","hmerominiaApodiksisRange"],["name","hmerominiaApodiksisRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["for","exchangeDatepicker"],["name","hmerominiaSinallagisRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["for","recType"],["name","recType","bindLabel","perigrafi","bindValue","value",3,"items","ngModel","searchable","clearable","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"d-flex","flex-wrap","mb-1",2,"font-size","14px"],[1,"mr-1"],[1,"fas","fa-desktop","fa-fw"],[1,"far","fa-building","fa-fw"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"mt-1"],[1,"d-flex","flex-wrap","mt-1","mb-1",2,"font-size","14px"],[1,"fixed-width-col-40"],[1,"fixed-width-col-60"],[1,"fixed-width-col-150"],["class","fixed-width-col-60",4,"ngIf"],[1,"fixed-width-col-40","text-center"],[1,"p-column-title"],["aria-hidden","true"],[1,"fixed-width-col-60","text-right"],["class","fixed-width-col-60 text-center",4,"ngIf"],[1,"fixed-width-col-60","text-center"],["target","_blank","aria-label","\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03bc\u03bf\u03c2 \u03b3\u03b9\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03bf \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7\u03c2","rel","noopener",3,"href",4,"ngIf"],["target","_blank","aria-label","\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03bc\u03bf\u03c2 \u03b3\u03b9\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03bf \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7\u03c2","rel","noopener",3,"href"],["aria-hidden","true",1,"far","fa-file-pdf"],["colspan","6",1,"fixed-width-col-430","text-right"],[1,"fixed-width-col-120"]],template:function(e,t){1&e&&(p.Pc(0,Z,3,0,"div",0),p.Pc(1,X,1,1,"p-message",1),p.Pc(2,G,1,3,"p-message",2),p.Pc(3,ce,2,1,"ng-container",3)),2&e&&(p.pc("ngIf",!t.receipts||t.isLoading),p.Bb(1),p.pc("ngIf",t.receiptsMessage&&""!=t.receiptsMessage),p.Bb(1),p.pc("ngIf",!t.isLoading&&t.bankStatusMessage&&""!=t.bankStatusMessage),p.Bb(1),p.pc("ngIf",t.receipts&&!t.isLoading))},directives:[h.p,g.b,u.a,U.w,U.n,U.o,J.a,U.m,U.p,k.a,S.d,w.j],pipes:[n.c,h.f,h.d],encapsulation:2,changeDetection:0}),e})();var le=s("iHy+");function be(e,t){if(1&e&&p.Pb(0,"p-message",3),2&e){const e=p.gc();p.pc("text",null==e.translation?null:e.translation.egwebapps.egwebappsLoginMesg)}}function pe(e,t){if(1&e&&(p.Ub(0,"p-panel",4),p.Pb(1,"div",5),p.hc(2,"decodeHtmlString"),p.Tb()),2&e){const e=p.gc();p.pc("header",null==e.translation?null:e.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),p.Bb(1),p.pc("innerHTML",p.ic(2,4,e.tabMsg),p.Ic)}}function de(e,t){if(1&e&&p.Pb(0,"app-receipts",9),2&e){const e=p.gc(2);p.pc("tabChanged",e.onTbChanged)}}function he(e,t){if(1&e){const e=p.Vb();p.Ub(0,"p-tabView",6),p.ec("onChange",function(t){return p.Hc(e),p.gc().onTabChanged(t)}),p.Ub(1,"p-tabPanel",7),p.Pb(2,"app-debits"),p.Tb(),p.Ub(3,"p-tabPanel",7),p.Pc(4,de,1,1,"ng-template",8),p.Tb(),p.Tb()}if(2&e){const e=p.gc();p.pc("activeIndex",e.index),p.Bb(1),p.pc("header",null==e.translation?null:e.translation.epayments.debitsTab),p.Bb(2),p.pc("header",null==e.translation?null:e.translation.epayments.paymentsTab)}}const ge=[{path:"",component:(()=>{class e{constructor(e,t,s,i,n,a){this.oidcSecuritySrv=e,this.appCacheSv=t,this.location=s,this.router=i,this.route=n,this.cdr=a,this.onDestroy=new o.a,this.index=0,this.onTbChanged=!1,this.selectedLang="el"}ngOnInit(){this.appCacheSv.translation$.pipe(Object(l.a)(this.onDestroy)).subscribe(e=>{e&&(this.translation=e,Object(c.r)(this.cdr))}),this.appCacheSv.selectedLang$.pipe(Object(l.a)(this.onDestroy)).subscribe(e=>{e&&(this.selectedLang=e),AppConfOptions&&1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.epayments_debits_tab_info_en&&""!=AppConfOptions.epayments_debits_tab_info_en&&this.router.url.includes("debits")?this.tabMsg=AppConfOptions.epayments_debits_tab_info_en:AppConfOptions.epayments_debits_tab_info&&""!=AppConfOptions.epayments_debits_tab_info&&"el"==this.selectedLang&&this.router.url.includes("debits")&&(this.tabMsg=AppConfOptions.epayments_debits_tab_info),AppConfOptions&&1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.epayments_receipts_tab_info_en&&""!=AppConfOptions.epayments_receipts_tab_info_en&&this.router.url.includes("receipts")?this.tabMsg=AppConfOptions.epayments_receipts_tab_info_en:AppConfOptions.epayments_receipts_tab_info&&""!=AppConfOptions.epayments_receipts_tab_info&&"el"==this.selectedLang&&this.router.url.includes("receipts")&&(this.tabMsg=AppConfOptions.epayments_receipts_tab_info),Object(c.r)(this.cdr)}),this.oidcSecuritySrv.isAuthenticated$.subscribe(e=>{this.isAuthorized=e,Object(c.r)(this.cdr)}),this.index="receipts"===this.route.children[0].snapshot.url[0].path?1:0,Object(c.r)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(e){0==e.index?(this.router.navigate(["./debits"],{relativeTo:this.route}),AppConfOptions&&AppConfOptions.epayments_debits_tab_info&&""!=AppConfOptions.epayments_debits_tab_info&&(this.tabMsg=AppConfOptions.epayments_debits_tab_info)):(this.router.navigate(["./receipts"],{relativeTo:this.route}),this.onTbChanged=!0,AppConfOptions&&AppConfOptions.epayments_receipts_tab_info&&""!=AppConfOptions.epayments_receipts_tab_info&&(this.tabMsg=AppConfOptions.epayments_receipts_tab_info)),Object(c.r)(this.cdr)}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(d.e),p.Ob(b.a),p.Ob(h.k),p.Ob(r.d),p.Ob(r.a),p.Ob(p.h))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-epayments-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:3,vars:3,consts:[["severity","warn",3,"text",4,"ngIf"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"],["pTemplate","content"],[3,"tabChanged"]],template:function(e,t){1&e&&(p.Pc(0,be,1,1,"p-message",0),p.Pc(1,pe,3,6,"p-panel",1),p.Pc(2,he,5,3,"p-tabView",2)),2&e&&(p.pc("ngIf",!t.isAuthorized),p.Bb(1),p.pc("ngIf",t.tabMsg),p.Bb(1),p.pc("ngIf",t.isAuthorized))},directives:[h.p,g.b,u.a,f.b,f.a,$,w.j,oe],pipes:[le.a],encapsulation:2}),e})(),children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:$},{path:"receipts",component:oe}]}];let ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({imports:[[r.g.forChild(ge)],r.g]}),e})(),fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({providers:[C.a],imports:[[ue,a.a,i.d,n.b.forChild()]]}),e})()}}]);