!function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function i(n,i,o){return i&&t(n.prototype,i),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[922],{11922:function(t,o,e){e.r(o),e.d(o,{DiakanonismoiModule:function(){return tn}});var a,s=e(43645),l=e(29790),r=e(35660),u=e(54655),d=e(37716),p=e(68214),c=e(79765),g=e(46782),h=((a=h||(h={})).xreosiMode="\u0395\u03af\u03b4\u03bf\u03c2 \u03a7\u03c1\u03b5\u03ce\u03c3\u03b5\u03c9\u03bd",a.arithmosDoseon="\u0391\u03c1\u03b9\u03b8\u03bc\u03cc\u03c2 \u0394\u03cc\u03c3\u03b5\u03c9\u03bd",h),m=function(){return(n=m||(m={})).xreosiMode="Debits Type",n.arithmosDoseon="Instalments Count",m;var n}(),f=e(91841),Z=function(){var t=function(){function t(i){n(this,t),this.http=i,this.apiUrl=AppConfOptions.epayments_api+"api/profile/ofeiletis/"}return i(t,[{key:"getDiakanonismous",value:function(){return this.http.get("".concat(this.apiUrl,"diakanonismoi"))}},{key:"getAitisiDiakanonismouStatus",value:function(n){return this.http.post("".concat(this.apiUrl,"diakanonismoi/info"),n)}},{key:"oristikopoiisiDiakanonismou",value:function(n){return this.http.post("".concat(this.apiUrl,"diakanonismoi"),n)}},{key:"getXreoseisSelections",value:function(){return this.http.get("".concat(this.apiUrl,"diakanonismoi/xreoseisSelections"))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(d.LFG(f.eN))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac}),t}(),A=e(12622),x=e(3679),k=e(38583),b=e(3379),y=["diakanonismosForm"];function v(n,t){if(1&n&&(d.TgZ(0,"option",16),d._uU(1),d.qZA()),2&n){var i=t.$implicit;d.Q6J("value",i.mode),d.xp6(1),d.hij(" ",i.perigrafi," ")}}function w(n,t){if(1&n&&(d.TgZ(0,"div",17),d.TgZ(1,"h5",18),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"p",19),d.TgZ(5,"span",20),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.TgZ(8,"span",21),d._uU(9),d.ALo(10,"currency"),d.qZA(),d.qZA(),d.TgZ(11,"p",19),d.TgZ(12,"span",20),d._uU(13),d.ALo(14,"translate"),d.qZA(),d.TgZ(15,"span",21),d._uU(16),d.ALo(17,"currency"),d.qZA(),d.qZA(),d.TgZ(18,"p",19),d.TgZ(19,"span",20),d._uU(20),d.ALo(21,"translate"),d.qZA(),d.TgZ(22,"span",21),d._uU(23),d.ALo(24,"currency"),d.qZA(),d.qZA(),d.qZA()),2&n){var i=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,7,null==i.translation?null:i.translation.diakanonismoi.initialDebits)),d.xp6(4),d.hij("",d.lcZ(7,9,null==i.translation?null:i.translation.diakanonismoi.amountRemaining),":"),d.xp6(3),d.Oqu(d.gM2(10,11,i.selectedEidosXreosis.ypoloipoKatharo,"\u20ac","symbol","1.2")),d.xp6(4),d.hij("",d.lcZ(14,16,null==i.translation?null:i.translation.egwebapps.egrOngoingCharges),":"),d.xp6(3),d.Oqu(d.gM2(17,18,i.selectedEidosXreosis.prosafksiseis,"\u20ac","symbol","1.2")),d.xp6(4),d.hij("",d.lcZ(21,23,null==i.translation?null:i.translation.egwebapps.egrTotalCost),":"),d.xp6(3),d.Oqu(d.gM2(24,25,i.selectedEidosXreosis.synolo,"\u20ac","symbol","1.2"))}}function q(n,t){if(1&n&&d._UZ(0,"p-message",22),2&n){var i=d.oxw();d.Q6J("styleClass","mt-2 form-msgs")("escape",!1)("text",i.formErrorsMsg)}}function T(n,t){if(1&n&&(d.TgZ(0,"li"),d._uU(1),d.qZA()),2&n){var i=t.$implicit;d.xp6(1),d.hij(" ",i," ")}}function _(n,t){if(1&n){var i=d.EpF();d.TgZ(0,"div",23),d.TgZ(1,"h5",24),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"p"),d._uU(5),d.ALo(6,"translate"),d.TgZ(7,"span",25),d._uU(8),d.ALo(9,"currency"),d.qZA(),d.qZA(),d.TgZ(10,"ul"),d.TgZ(11,"li",26),d._uU(12),d.ALo(13,"translate"),d.TgZ(14,"span",27),d._uU(15),d.ALo(16,"date"),d.qZA(),d.qZA(),d.YNc(17,T,2,1,"li",28),d.qZA(),d.TgZ(18,"p",29),d._uU(19),d.ALo(20,"translate"),d.qZA(),d.TgZ(21,"button",30),d.NdJ("click",function(){return d.CHM(i),d.oxw().onOristikopoiisiDiakanonismou()}),d._UZ(22,"span",31),d._uU(23),d.ALo(24,"translate"),d.qZA(),d.qZA()}if(2&n){var o=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,8,null==o.translation?null:o.translation.diakanonismoi.formulateSettlement)),d.xp6(3),d.hij("",d.lcZ(6,10,null==o.translation?null:o.translation.diakanonismoi.totalCostAfter),": "),d.xp6(3),d.Oqu(d.gM2(9,12,null==o.oikonomikiResponse||null==o.oikonomikiResponse.model?null:o.oikonomikiResponse.model.sinolikoPoso,"\u20ac","symbol","1.2")),d.xp6(4),d.hij("",d.lcZ(13,17,null==o.translation?null:o.translation.diakanonismoi.firstInstalmentExpire),": "),d.xp6(3),d.hij("",d.xi3(16,19,null==o.oikonomikiResponse||null==o.oikonomikiResponse.model?null:o.oikonomikiResponse.model.hmLixisProtisDosis,"dd/LL/yyyy"),"*"),d.xp6(2),d.Q6J("ngForOf",o.oikonomikiResponse.model.doseisInfo),d.xp6(2),d.hij("* ",d.lcZ(20,22,null==o.translation?null:o.translation.diakanonismoi.info),""),d.xp6(4),d.hij(" ",d.lcZ(24,24,null==o.translation?null:o.translation.egwebapps.egrSubmit)," ")}}var L=function(){var t=function(){function t(i,o,e,a){n(this,t),this.diakanonismoiSrv=i,this.appCacheSv=o,this.toasterSrv=e,this.cdr=a,this.oristikopoiisi=new d.vpe,this.onDestroy=new c.xQ,this.isFormSubmitted=!1,this.isLoading=!1}return i(t,[{key:"ngOnInit",value:function(){var n=this;this.model={xreoseisSelectionMode:0},this.appCacheSv.translation$.pipe((0,g.R)(this.onDestroy)).subscribe(function(t){t&&(n.translation=t,(0,p.RA)(n.cdr))}),this.appCacheSv.selectedLang$.pipe((0,g.R)(this.onDestroy)).subscribe(function(t){t&&(n.selectedLang=t),n.formDictionaryEnum="el"==n.selectedLang?h:m,(0,p.RA)(n.cdr)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onSubmit",value:function(){var n=this;this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,p.RA)(this.cdr),this.isFormSubmitted&&this.diakanonismosForm.valid?(this.isLoading=!0,(0,p.RA)(this.cdr),this.diakanonismoiSrv.getAitisiDiakanonismouStatus(this.model).subscribe(function(t){t&&1==t.statusCode?(n.oikonomikiResponse=t,n.model.infoHash=n.oikonomikiResponse.entry.infoHash):(2==t.statusCode||3==t.statusCode)&&(t.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(n.toasterSrv.showWarning("",n.translation.epayments.revDebtorNotFound),n.diakanonismosRequestMessage=n.translation.epayments.revDebtorNotFound):t.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")?(n.toasterSrv.showError("error",n.translation.epayments.duplicateTin),n.diakanonismosRequestMessage=n.translation.epayments.duplicateTin):n.formErrorsMsg=t.message),n.isLoading=!1,(0,p.RA)(n.cdr)})):(this.formErrorsMsg=(0,p.CD)(this.diakanonismosForm,this.formDictionaryEnum,""),(0,p.RA)(this.cdr))}},{key:"onSelectedEidosXreoseonChanged",value:function(n){this.selectedEidosXreosis=this.xreoseisSelections.filter(function(t){return t.mode==n.target.value})[0],(0,p.RA)(this.cdr)}},{key:"onOristikopoiisiDiakanonismou",value:function(){var n=this;this.isLoading=!0,(0,p.RA)(this.cdr),this.diakanonismoiSrv.oristikopoiisiDiakanonismou(this.model).subscribe(function(t){t?n.toasterSrv.showSuccess("",n.translation.diakanonismoi.finalised):n.toasterSrv.showError("",n.translation.diakanonismoi.finaliseError),n.isLoading=!1,(0,p.RA)(n.cdr),n.oristikopoiisi.emit(!0)})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(d.Y36(Z),d.Y36(A.g),d.Y36(p.MJ),d.Y36(d.sBO))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-diakanonismoi-create"]],viewQuery:function(n,t){var i;(1&n&&d.Gf(y,5),2&n)&&(d.iGM(i=d.CRH())&&(t.diakanonismosForm=i.first))},inputs:{xreoseisSelections:"xreoseisSelections"},outputs:{oristikopoiisi:"oristikopoiisi"},decls:33,vars:29,consts:[[1,"form"],["diakanonismosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-6"],["name","xreosiMode","required","",1,"form-control","custom-select",3,"ngModel","ngModelChange","change"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],["name","arithmosDoseon","placeholder","1","type","number","required","",1,"form-control",3,"ngModel","ngModelChange"],["arithmosDoseonInput","ngModel"],["class","my-2",4,"ngIf"],["type","button",1,"btn","btn-info","btn-sm","d-block","mx-auto",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-calculator"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"condition","customClass"],["class","col-12 py-3 bg-white debits-info_left",4,"ngIf"],[3,"value"],[1,"my-2"],[1,"text-primary","font-weight-bold"],[1,"mb-0"],[1,"mr-1","d-inline-block",2,"width","200px"],[1,"totalPoso",2,"width","220px"],["severity","error",3,"styleClass","escape","text"],[1,"col-12","py-3","bg-white","debits-info_left"],[1,"text-info","font-weight-bold"],[1,"totalPoso"],[1,"font-weight-bold"],[1,"text-danger"],[4,"ngFor","ngForOf"],[1,"text-danger","font-italic","font-weight-bold"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["aria-hidden","true",1,"far","fa-save"]],template:function(n,t){if(1&n&&(d.TgZ(0,"form",0,1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"label"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.TgZ(7,"select",4),d.NdJ("ngModelChange",function(n){return t.model.xreoseisSelectionMode=n})("change",function(n){return t.onSelectedEidosXreoseonChanged(n)}),d.TgZ(8,"option",5),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.YNc(11,v,2,2,"option",6),d.qZA(),d.TgZ(12,"div",7),d._uU(13),d.ALo(14,"translate"),d.qZA(),d.qZA(),d.TgZ(15,"div",3),d.TgZ(16,"label"),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.TgZ(19,"input",8,9),d.NdJ("ngModelChange",function(n){return t.model.arithmosDoseon=n}),d.qZA(),d.TgZ(21,"div",7),d._uU(22),d.ALo(23,"translate"),d.qZA(),d.qZA(),d.qZA(),d.YNc(24,w,25,30,"div",10),d.TgZ(25,"button",11),d.NdJ("click",function(){return t.onSubmit()}),d._UZ(26,"span",12),d._uU(27),d.ALo(28,"translate"),d.qZA(),d.YNc(29,q,1,3,"p-message",13),d.qZA(),d._UZ(30,"lib-egr-loading",14),d._UZ(31,"hr"),d.YNc(32,_,25,26,"div",15)),2&n){var i=d.MAs(1),o=d.MAs(20);d.xp6(5),d.hij("",d.lcZ(6,17,null==t.translation?null:t.translation.diakanonismoi.debitsType),"*"),d.xp6(2),d.Q6J("ngModel",t.model.xreoseisSelectionMode),d.xp6(2),d.Oqu(d.lcZ(10,19,null==t.translation?null:t.translation.egwebapps.egrSelect)),d.xp6(2),d.Q6J("ngForOf",t.xreoseisSelections),d.xp6(1),d.Q6J("hidden",!t.isFormSubmitted||t.isFormSubmitted&&t.model.xreoseisSelectionMode),d.xp6(1),d.hij(" *",d.lcZ(14,21,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),d.xp6(4),d.hij("",d.lcZ(18,23,null==t.translation?null:t.translation.diakanonismoi.instalmentsCount),"*"),d.xp6(2),d.Q6J("ngModel",t.model.arithmosDoseon),d.xp6(2),d.Q6J("hidden",!t.isFormSubmitted||t.isFormSubmitted&&o.valid),d.xp6(1),d.hij(" *",d.lcZ(23,25,null==t.translation?null:t.translation.egwebapps.egrRequiredField)," "),d.xp6(2),d.Q6J("ngIf",t.selectedEidosXreosis),d.xp6(1),d.Q6J("disabled",i.invalid),d.xp6(2),d.hij(" ",d.lcZ(28,27,null==t.translation?null:t.translation.diakanonismoi.calculateInstalments)," "),d.xp6(2),d.Q6J("ngIf",t.formErrorsMsg&&""!=t.formErrorsMsg),d.xp6(1),d.Q6J("condition",t.isLoading)("customClass","egr-load-small"),d.xp6(2),d.Q6J("ngIf",t.oikonomikiResponse&&!t.isLoading)}},directives:[x._Y,x.JL,x.F,x.EJ,x.Q7,x.JJ,x.On,x.YN,x.Kr,k.sg,x.wV,x.Fj,k.O5,p.IE,b.q],pipes:[l.X$,k.H9,k.uU],encapsulation:2,changeDetection:0}),t}(),S=e(24663),C=e(23815),D=e(25917),U=e(43190),O=e(24020),M=e(88598),R=e(84439),F=e(33013),J=e(45121);function N(n,t){if(1&n){var i=d.EpF();d.TgZ(0,"div",22),d.TgZ(1,"button",23),d.NdJ("click",function(){return d.CHM(i),d.oxw().onCreateNewAitisiDiakanonismou()}),d._UZ(2,"span",24),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.qZA()}if(2&n){var o=d.oxw();d.xp6(3),d.hij(" ",d.lcZ(4,1,null==o.translation?null:o.translation.diakanonismoi.addNew)," ")}}function I(n,t){if(1&n&&d._UZ(0,"p-message",25),2&n){var i=d.oxw();d.Q6J("text",null==i.translation?null:i.translation.diakanonismoi.noSettlementsFound)("styleClass","mb-2")}}function E(n,t){if(1&n&&(d.TgZ(0,"tr"),d.TgZ(1,"th",26),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"th",27),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.TgZ(7,"th",27),d._uU(8),d.ALo(9,"translate"),d.qZA(),d.TgZ(10,"th",28),d._uU(11),d.ALo(12,"translate"),d.qZA(),d.TgZ(13,"th",29),d._uU(14),d.ALo(15,"translate"),d.qZA(),d.TgZ(16,"th",29),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.TgZ(19,"th",29),d._uU(20),d.ALo(21,"translate"),d.qZA(),d.qZA()),2&n){var i=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,7,null==i.translation?null:i.translation.egwebapps.egrAA)),d.xp6(3),d.Oqu(d.lcZ(6,9,null==i.translation?null:i.translation.egwebapps.egrStatus)),d.xp6(3),d.Oqu(d.lcZ(9,11,null==i.translation?null:i.translation.egwebapps.egrDate)),d.xp6(3),d.Oqu(d.lcZ(12,13,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount)),d.xp6(3),d.Oqu(d.lcZ(15,15,null==i.translation?null:i.translation.egwebapps.egrTotalCost)),d.xp6(3),d.Oqu(d.lcZ(18,17,null==i.translation?null:i.translation.diakanonismoi.amountReceived)),d.xp6(3),d.Oqu(d.lcZ(21,19,null==i.translation?null:i.translation.diakanonismoi.amountRemaining))}}function j(n,t){if(1&n&&(d.TgZ(0,"tr"),d.TgZ(1,"td",26),d.TgZ(2,"span",30),d._uU(3),d.ALo(4,"translate"),d.qZA(),d._uU(5),d.qZA(),d.TgZ(6,"td",27),d.TgZ(7,"span",30),d._uU(8),d.ALo(9,"translate"),d.qZA(),d._uU(10),d.qZA(),d.TgZ(11,"td",31),d.TgZ(12,"span",30),d._uU(13),d.ALo(14,"translate"),d.qZA(),d._uU(15),d.ALo(16,"date"),d.qZA(),d.TgZ(17,"td",32),d.TgZ(18,"span",30),d._uU(19),d.ALo(20,"translate"),d.qZA(),d._uU(21),d.qZA(),d.TgZ(22,"td",33),d.TgZ(23,"span",30),d._uU(24),d.ALo(25,"translate"),d.qZA(),d._uU(26),d.ALo(27,"currency"),d.qZA(),d.TgZ(28,"td",33),d.TgZ(29,"span",30),d._uU(30),d.ALo(31,"translate"),d.qZA(),d._uU(32),d.ALo(33,"currency"),d.qZA(),d.TgZ(34,"td",33),d.TgZ(35,"span",30),d._uU(36),d.ALo(37,"translate"),d.qZA(),d._uU(38),d.ALo(39,"currency"),d.qZA(),d.qZA()),2&n){var i=t.$implicit,o=d.oxw();d.xp6(3),d.Oqu(d.lcZ(4,14,null==o.translation?null:o.translation.egwebapps.egrAA)),d.xp6(2),d.hij(" ",i.aa," "),d.xp6(3),d.Oqu(d.lcZ(9,16,null==o.translation?null:o.translation.egwebapps.egrStatus)),d.xp6(2),d.hij(" ",i.katastatsiPerigrafi," "),d.xp6(3),d.Oqu(d.lcZ(14,18,null==o.translation?null:o.translation.egwebapps.egrDate)),d.xp6(2),d.hij(" ",d.xi3(16,20,i.hmerominia,"dd/LL/yyyy")," "),d.xp6(4),d.Oqu(d.lcZ(20,23,null==o.translation?null:o.translation.diakanonismoi.instalmentsCount)),d.xp6(2),d.hij(" ",i.arithmosDoseon," "),d.xp6(3),d.Oqu(d.lcZ(25,25,null==o.translation?null:o.translation.egwebapps.egrTotalCost)),d.xp6(2),d.hij(" ",d.gM2(27,27,i.sinolikoPoso,"\u20ac","symbol","1.2")," "),d.xp6(4),d.Oqu(d.lcZ(31,32,null==o.translation?null:o.translation.diakanonismoi.amountReceived)),d.xp6(2),d.hij(" ",d.gM2(33,34,i.eispraxthen,"\u20ac","symbol","1.2")," "),d.xp6(4),d.Oqu(d.lcZ(37,39,null==o.translation?null:o.translation.diakanonismoi.amountRemaining)),d.xp6(2),d.hij(" ",d.gM2(39,41,i.ypoloipo,"\u20ac","symbol","1.2")," ")}}function Y(n,t){if(1&n&&(d.TgZ(0,"tr"),d.TgZ(1,"td",34),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.qZA()),2&n){var i=d.oxw();d.xp6(2),d.hij(" ",d.lcZ(3,1,null==i.translation?null:i.translation.egwebapps.egrNoResultsFound)," ")}}function Q(n,t){if(1&n&&(d.TgZ(0,"tr"),d.TgZ(1,"td",35),d.TgZ(2,"strong"),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"td",32),d.TgZ(5,"strong"),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.TgZ(8,"td",33),d.TgZ(9,"strong"),d._uU(10),d.ALo(11,"currency"),d.qZA(),d.qZA(),d.TgZ(12,"td",33),d.TgZ(13,"strong"),d._uU(14),d.ALo(15,"currency"),d.qZA(),d.qZA(),d.TgZ(16,"td",33),d.TgZ(17,"strong"),d._uU(18),d.ALo(19,"currency"),d.qZA(),d.qZA(),d.qZA()),2&n){var i=d.oxw();d.xp6(3),d.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==i.modelFiltered?null:i.modelFiltered.length,""),d.xp6(3),d.hij("",d.lcZ(7,5,null==i.translation?null:i.translation.egwebapps.egrTotalCost),":"),d.xp6(4),d.Oqu(d.gM2(11,7,i.totalSinolikoPoso,"\u20ac","symbol","1.2")),d.xp6(4),d.Oqu(d.gM2(15,12,i.totalEispraxthenPoso,"\u20ac","symbol","1.2")),d.xp6(4),d.Oqu(d.gM2(19,17,i.totalYpoloipoPoso,"\u20ac","symbol","1.2"))}}function P(n,t){if(1&n){var i=d.EpF();d.TgZ(0,"app-diakanonismoi-create",36),d.NdJ("oristikopoiisi",function(){return d.CHM(i),d.oxw().onOristikopoiisiAitisis()}),d.qZA()}if(2&n){var o=d.oxw();d.Q6J("xreoseisSelections",o.xreoseisSelections)}}var z=function(){return{width:"100%"}},B=function(){var t=function(){function t(i,o,e,a){n(this,t),this.diakanonismoiSrv=i,this.appCacheSv=o,this.toasterSrv=e,this.cdr=a,this.onDestroy=new c.xQ,this.modelFiltered=[],this.isLoading=!0,this.isAddingNewDiakanonismo=!1,this.providerKey="AB375F23-B94C-45C3-BF8F-5A9FFF350EC0",this.diakanonismosDateRange=null,this.katastasiFilter=null,this.totalSinolikoPoso=0,this.totalEispraxthenPoso=0,this.totalYpoloipoPoso=0,this.today=new Date,this.yearRange=(0,p.ug)(50,50)}return i(t,[{key:"ngOnInit",value:function(){var n=this;this.appCacheSv.translation$.pipe((0,g.R)(this.onDestroy)).subscribe(function(t){t&&(n.translation=t,(0,p.RA)(n.cdr))}),this.diakanonismoiSrv.getDiakanonismous().pipe((0,U.w)(function(t){return t?(n.model=t,n.modelFiltered=(0,p.p$)(n.model),n.model.forEach(function(t){n.totalSinolikoPoso+=t.sinolikoPoso,n.totalEispraxthenPoso+=t.eispraxthen,n.totalYpoloipoPoso+=t.ypoloipo}),n._orderDiakanonismous(n.modelFiltered),n.diakanonismoiSrv.getXreoseisSelections()):(0,D.of)(!1)})).subscribe(function(t){t?(n.xreoseisSelections=t,n.xreoseisSelections=n.xreoseisSelections.filter(function(n){return n.synolo>0}),n.isLoading=!1):n.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2."),(0,p.RA)(n.cdr)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onSearch",value:function(){var n=this;this.isLoading=!0,this.modelFiltered=(0,p.p$)(this.model);var t=[];if(this.katastasiFilter){var i=this.modelFiltered.filter(function(t){return t.katastatsiPerigrafi.toLowerCase().includes(n.katastasiFilter.toLowerCase())});i&&i.length&&i.forEach(function(n){t.push(n)})}if(this.diakanonismosDateRange){var o=this.modelFiltered.filter(function(t){return(0,S.Z)(new Date(t.hmerominia),{start:new Date(n.diakanonismosDateRange[0]),end:new Date(n.diakanonismosDateRange[1])})});o&&o.length&&o.forEach(function(n){t.push(n)})}this.modelFiltered=C.intersection(t),this.isLoading=!1,(0,p.RA)(this.cdr)}},{key:"onClearSearch",value:function(){this.modelFiltered=(0,p.p$)(this.model),this.diakanonismosDateRange=null,(0,p.RA)(this.cdr)}},{key:"onCreateNewAitisiDiakanonismou",value:function(){this.isAddingNewDiakanonismo=!0,(0,p.RA)(this.cdr)}},{key:"onOristikopoiisiAitisis",value:function(){this.isAddingNewDiakanonismo=!1,(0,p.RA)(this.cdr)}},{key:"_orderDiakanonismous",value:function(n){this.isLoading=!0,(0,p.RA)(this.cdr),n=n.sort(function(n,t){return n.hmerominia!=t.hmerominia?new Date(t.hmerominia).getTime()-new Date(n.hmerominia).getTime():+t.aa-+n.aa}),this.isLoading=!1,(0,p.RA)(this.cdr)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(d.Y36(Z),d.Y36(A.g),d.Y36(p.MJ),d.Y36(d.sBO))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-diakanonismoi-list"]],inputs:{isAuthorized:"isAuthorized"},decls:31,vars:45,consts:[["class","d-flex justify-content-end",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","diakanonismosPerigrafi"],["name","diakanonismosPerigrafi","type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","diakanonismoDateRange"],["name","diakanonismoDateRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["appendTo","body","resizable","false","modal","true",3,"header","visible","draggable","closable","visibleChange"],[3,"xreoseisSelections","oristikopoiisi",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-plus","fa-fw"],["severity","warn",3,"text","styleClass"],[1,"fixed-width-col-40"],[1,"fixed-width-col-100"],[1,"fixed-width-col-60"],[1,"fixed-width-col-120"],[1,"p-column-title"],[1,"fixed-width-col-100","text-center"],[1,"fixed-width-col-60","text-right"],[1,"fixed-width-col-120","text-right"],["colspan","7"],["colspan","3",1,"fixed-width-col-240"],[3,"xreoseisSelections","oristikopoiisi"]],template:function(n,t){1&n&&(d.YNc(0,N,5,3,"div",0),d.YNc(1,I,1,2,"p-message",1),d.TgZ(2,"p-panel",2),d.TgZ(3,"form",3),d.TgZ(4,"div",4),d.TgZ(5,"div",5),d.TgZ(6,"label",6),d._uU(7),d.ALo(8,"translate"),d.qZA(),d.TgZ(9,"input",7),d.NdJ("ngModelChange",function(n){return t.katastasiFilter=n}),d.qZA(),d.qZA(),d.TgZ(10,"div",5),d.TgZ(11,"label",8),d._uU(12),d.ALo(13,"translate"),d.qZA(),d.TgZ(14,"p-calendar",9),d.NdJ("ngModelChange",function(n){return t.diakanonismosDateRange=n}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"div",10),d.TgZ(16,"button",11),d.NdJ("click",function(){return t.onSearch()}),d._UZ(17,"span",12),d._uU(18),d.ALo(19,"translate"),d.qZA(),d.TgZ(20,"button",13),d.NdJ("click",function(){return t.onClearSearch()}),d._UZ(21,"span",14),d._uU(22),d.ALo(23,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(24,"p-table",15),d.YNc(25,E,22,21,"ng-template",16),d.YNc(26,j,40,46,"ng-template",17),d.YNc(27,Y,4,3,"ng-template",18),d.YNc(28,Q,20,22,"ng-template",19),d.qZA(),d.TgZ(29,"p-dialog",20),d.NdJ("visibleChange",function(n){return t.isAddingNewDiakanonismo=n}),d.YNc(30,P,1,1,"app-diakanonismoi-create",21),d.qZA()),2&n&&(d.Q6J("ngIf",t.xreoseisSelections&&t.xreoseisSelections.length>0&&!t.isLoading),d.xp6(1),d.Q6J("ngIf",!(t.model&&0!=t.model.length||t.isLoading)),d.xp6(1),d.Q6J("header",null==t.translation?null:t.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),d.xp6(5),d.Oqu(d.lcZ(8,36,null==t.translation?null:t.translation.egwebapps.egrStatus)),d.xp6(2),d.Q6J("placeholder",null==t.translation?null:t.translation.egwebapps.egrStatus)("ngModel",t.katastasiFilter),d.xp6(3),d.Oqu(d.lcZ(13,38,null==t.translation?null:t.translation.egwebapps.egrDate)),d.xp6(2),d.Akn(d.DdM(44,z)),d.Q6J("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",t.diakanonismosDateRange),d.xp6(4),d.hij(" ",d.lcZ(19,40,null==t.translation?null:t.translation.egwebapps.egrSearchBtn)," "),d.xp6(4),d.hij(" ",d.lcZ(23,42,null==t.translation?null:t.translation.egwebapps.egrClearBtn)," "),d.xp6(2),d.Q6J("value",t.modelFiltered)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",t.isLoading)("totalRecords",null==t.modelFiltered?null:t.modelFiltered.length),d.xp6(5),d.Q6J("header",null==t.translation?null:t.translation.diakanonismoi.addNew)("visible",t.isAddingNewDiakanonismo)("draggable",!1)("closable",!0),d.xp6(1),d.Q6J("ngIf",t.isAddingNewDiakanonismo))},directives:[k.O5,O.s,x._Y,x.JL,x.F,x.Fj,x.JJ,x.On,M.f,R.iA,F.jx,J.V,b.q,L],pipes:[l.X$,k.uU,k.H9],encapsulation:2,changeDetection:0}),t}(),X=e(74868),$=e(44748),H=e(41886);function V(n,t){if(1&n&&d._UZ(0,"p-message",4),2&n){var i=d.oxw();d.Q6J("text",null==i.translation?null:i.translation.egwebapps.egwebappsLoginMesg)}}function G(n,t){if(1&n&&(d.TgZ(0,"p-panel",5),d.ALo(1,"translate"),d._UZ(2,"div",6),d.ALo(3,"decodeHtmlString"),d.qZA()),2&n){var i=d.oxw();d.Q6J("header",d.lcZ(1,4,null==i.translation?null:i.translation.egwebapps.information))("styleClass","tab-msg mb-3")("toggleable",!0),d.xp6(2),d.Q6J("innerHTML",d.lcZ(3,6,i.tabMsg),d.oJD)}}function K(n,t){if(1&n){var i=d.EpF();d.TgZ(0,"p-tabView",7),d.NdJ("onChange",function(n){return d.CHM(i),d.oxw().onTabChanged(n)}),d.TgZ(1,"p-tabPanel",8),d._UZ(2,"app-diakanonismoi-list"),d.qZA(),d.qZA()}if(2&n){var o=d.oxw();d.Q6J("activeIndex",o.index),d.xp6(1),d.Q6J("header",null==o.translation?null:o.translation.egwebapps.history)}}var W=[{path:"",component:function(){var t=function(){function t(i,o,e,a,s,l){n(this,t),this.oidcSecuritySrv=i,this.appCacheSv=o,this.location=e,this.router=a,this.route=s,this.cdr=l,this.onDestroy=new c.xQ,this.index=0,this.selectedLang="el"}return i(t,[{key:"ngOnInit",value:function(){var n=this;this.appCacheSv.translation$.pipe((0,g.R)(this.onDestroy)).subscribe(function(t){t&&(n.translation=t,(0,p.RA)(n.cdr))}),this.appCacheSv.selectedLang$.pipe((0,g.R)(this.onDestroy)).subscribe(function(t){t&&(n.selectedLang=t),1==AppConfOptions.multilingual&&"el"!=n.selectedLang&&AppConfOptions.diakanonismoi_tab_info_en&&""!=AppConfOptions.diakanonismoi_tab_info_en?n.tabMsg=AppConfOptions.diakanonismoi_tab_info_en:AppConfOptions.diakanonismoi_tab_info&&""!=AppConfOptions.diakanonismoi_tab_info&&"el"==n.selectedLang&&(n.tabMsg=AppConfOptions.diakanonismoi_tab_info),(0,p.RA)(n.cdr)}),this.oidcSecuritySrv.isAuthenticated$.subscribe(function(t){n.isAuthorized=null!=t&&t.isAuthenticated,(0,p.RA)(n.cdr)}),this.index="create"===this.route.children[0].snapshot.url[0].path?1:0,(0,p.RA)(this.cdr)}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onTabChanged",value:function(n){this.router.navigate(0==n.index?["./list"]:["./create"],{relativeTo:this.route})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(d.Y36(X.J_),d.Y36(A.g),d.Y36(k.Ye),d.Y36(u.F0),d.Y36(u.gz),d.Y36(d.sBO))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-diakanonismoi-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:5,vars:4,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"]],template:function(n,t){1&n&&(d.TgZ(0,"h3",0),d._uU(1),d.qZA(),d.YNc(2,V,1,1,"p-message",1),d.YNc(3,G,4,8,"p-panel",2),d.YNc(4,K,3,2,"p-tabView",3)),2&n&&(d.xp6(1),d.Oqu(null==t.translation?null:t.translation.menu.diakanonismoiMenuItem),d.xp6(1),d.Q6J("ngIf",!t.isAuthorized),d.xp6(1),d.Q6J("ngIf",t.isAuthorized&&t.tabMsg&&""!=t.tabMsg),d.xp6(1),d.Q6J("ngIf",t.isAuthorized))},directives:[k.O5,b.q,O.s,$.xf,$.x4,B],pipes:[l.X$,H.o],encapsulation:2,changeDetection:0}),t}(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:B},{path:"create",component:L}]}],nn=function(){var t=i(function t(){n(this,t)});return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[u.Bz.forChild(W)],u.Bz]}),t}(),tn=function(){var t=i(function t(){n(this,t)});return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[Z],imports:[[r.m,s.IJ,nn,l.aw.forChild()]]}),t}()}}])}();