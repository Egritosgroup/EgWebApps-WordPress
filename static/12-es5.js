!function(){function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return c=e.done,e},e:function(e){o=!0,r=e},f:function(){try{c||null==i.return||i.return()}finally{if(o)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{kpNr:function(t,i,s){"use strict";s.r(i),s.d(i,"EpaymentsModule",function(){return Re});var r=s("1kSV"),c=s("sYmb"),o=s("PCNd"),l=s("tyNb"),b=s("3u8h"),p=s("oXA7"),d=s("bk9D"),h=s("wmmr"),u=s("fXoL"),g=s("zazq"),f=s("ofXK"),m=s("FMpt"),y=s("7CaW"),T=s("dPl2"),v=s("4krO"),C=s("1q39"),k=s("Sy1n"),S=s("AEAu"),R=s("KsmB"),w=s("tk/3"),B=s("rEr+"),U=s("7zfz"),O=s("3Pt+"),P=s("ZOsW"),x=s("Ji6n");function _(e,t){1&e&&(u.Ub(0,"div",4),u.Ub(1,"span",5),u.Pb(2,"i",6),u.Tb(),u.Tb())}function D(e,t){if(1&e&&u.Pb(0,"p-message",7),2&e){var n=u.gc();u.pc("text",n.bankStatusMessage)("styleClass","mt-2")}}function I(e,t){if(1&e&&u.Pb(0,"p-message",7),2&e){var n=u.gc(2);u.pc("text",n.translation.epayments.noCheckedDebits)("styleClass","my-2")}}function A(e,t){1&e&&u.Qb(0)}function M(e,t){if(1&e&&(u.Ub(0,"div",17),u.Pc(1,A,1,0,"ng-container",18),u.Tb()),2&e){u.gc(3);var n=u.Fc(4);u.Bb(1),u.pc("ngTemplateOutlet",n)}}function j(e,t){if(1&e){var n=u.Vb();u.Ub(0,"form",19),u.Ub(1,"label"),u.Rc(2),u.hc(3,"translate"),u.Tb(),u.Ub(4,"ng-select",20),u.ec("ngModelChange",function(e){return u.Hc(n),u.gc(3).selectedEidosId=e})("ngModelChange",function(e){return u.Hc(n),u.gc(3).onSelectedPersistedTypeChanged(e)}),u.Tb(),u.Tb()}if(2&e){var i=u.gc(3);u.Bb(2),u.Sc(u.ic(3,4,i.translation.epayments.debitType)),u.Bb(2),u.pc("items",i.eidosDebit)("ngModel",i.selectedEidosId)("clearable",!1)}}function L(e,t){if(1&e&&(u.Ub(0,"legend",21),u.Ub(1,"span",22),u.Pb(2,"i",23),u.Rc(3),u.hc(4,"translate"),u.Tb(),u.Ub(5,"span",22),u.Pb(6,"i",24),u.Rc(7),u.hc(8,"translate"),u.Tb(),u.Tb()),2&e){var n=u.gc(3);u.Bb(3),u.Tc(" ",u.ic(4,2,n.translation.epayments.persistedDebit),""),u.Bb(4),u.Tc(" ",u.ic(8,4,n.translation.epayments.nonPersistedDebit),"")}}function E(e,t){1&e&&(u.Ub(0,"th",28),u.Rc(1,"\xa0"),u.Tb())}function N(e,t){if(1&e){var n=u.Vb();u.Ub(0,"tr"),u.Ub(1,"th",25),u.Ub(2,"p-checkbox",26),u.ec("ngModelChange",function(e){return u.Hc(n),u.gc(3).isAllDebitsChecked=e})("onChange",function(){return u.Hc(n),u.gc(3).onAllDebitsSelected()}),u.Tb(),u.Tb(),u.Pc(3,E,2,0,"th",27),u.Ub(4,"th",28),u.Rc(5),u.hc(6,"translate"),u.Tb(),u.Ub(7,"th",29),u.Rc(8),u.hc(9,"translate"),u.Tb(),u.Ub(10,"th",30),u.Rc(11),u.hc(12,"translate"),u.Tb(),u.Ub(13,"th",31),u.Rc(14),u.hc(15,"translate"),u.Tb(),u.Ub(16,"th",31),u.Rc(17),u.hc(18,"translate"),u.Tb(),u.Ub(19,"th",31),u.Rc(20),u.hc(21,"translate"),u.Tb(),u.Ub(22,"th",31),u.Rc(23),u.hc(24,"translate"),u.Tb(),u.Tb()}if(2&e){var i=u.gc(3);u.Bb(2),u.pc("binary",!0)("ngModel",i.isAllDebitsChecked),u.Bb(1),u.pc("ngIf",i.isNonPersistedEnabled),u.Bb(2),u.Sc(u.ic(6,10,i.translation.egwebapps.egrAA)),u.Bb(3),u.Sc(u.ic(9,12,i.translation.egwebapps.egrXK)),u.Bb(3),u.Sc(u.ic(12,14,i.translation.egwebapps.desciption)),u.Bb(3),u.Sc(u.ic(15,16,i.translation.egwebapps.egrExpDate)),u.Bb(3),u.Sc(u.ic(18,18,i.translation.epayments.netPoso)),u.Bb(3),u.Tc("",u.ic(21,20,i.translation.egwebapps.egrOngoingCharges),"*"),u.Bb(3),u.Sc(u.ic(24,22,i.translation.egwebapps.egrTotalCost))}}function q(e,t){if(1&e&&(u.Ub(0,"td",25),u.Ub(1,"span",32),u.Rc(2,"\xa0"),u.Tb(),u.Pb(3,"i",35),u.Tb()),2&e){var n=u.gc().$implicit;u.Bb(3),u.pc("ngClass",n.isBebaiomeno?"far fa-dot-circle":"fas fa-dot-circle")}}function F(e,t){if(1&e){var n=u.Vb();u.Ub(0,"tr"),u.Ub(1,"td",25),u.Ub(2,"span",32),u.Rc(3),u.hc(4,"translate"),u.Tb(),u.Ub(5,"p-checkbox",26),u.ec("ngModelChange",function(e){return t.$implicit.isChecked=e})("onChange",function(){return u.Hc(n),u.gc(3)._calculateTotalAmounts()}),u.Tb(),u.Tb(),u.Pc(6,q,4,1,"td",33),u.Ub(7,"td",28),u.Ub(8,"span",32),u.Rc(9),u.hc(10,"translate"),u.Tb(),u.Rc(11),u.Tb(),u.Ub(12,"td",29),u.Ub(13,"span",32),u.Rc(14),u.hc(15,"translate"),u.Tb(),u.Rc(16),u.Tb(),u.Ub(17,"td",30),u.Ub(18,"span",32),u.Rc(19),u.hc(20,"translate"),u.Tb(),u.Rc(21),u.Tb(),u.Ub(22,"td",31),u.Ub(23,"span",32),u.Rc(24),u.hc(25,"translate"),u.Tb(),u.Rc(26),u.hc(27,"date"),u.Tb(),u.Ub(28,"td",34),u.Ub(29,"span",32),u.Rc(30),u.hc(31,"translate"),u.Tb(),u.Rc(32),u.hc(33,"currency"),u.Tb(),u.Ub(34,"td",34),u.Ub(35,"span",32),u.Rc(36),u.hc(37,"translate"),u.Tb(),u.Rc(38),u.hc(39,"currency"),u.Tb(),u.Ub(40,"td",34),u.Ub(41,"span",32),u.Rc(42),u.hc(43,"translate"),u.Tb(),u.Rc(44),u.hc(45,"currency"),u.Tb(),u.Tb()}if(2&e){var i=t.$implicit,a=t.rowIndex,s=u.gc(3);u.Bb(3),u.Sc(u.ic(4,18,s.translation.egwebapps.egrSelect)),u.Bb(2),u.pc("binary",!0)("ngModel",i.isChecked),u.Bb(1),u.pc("ngIf",s.isNonPersistedEnabled),u.Bb(3),u.Sc(u.ic(10,20,s.translation.egwebapps.egrAA)),u.Bb(2),u.Tc(" ",a+1," "),u.Bb(3),u.Sc(u.ic(15,22,s.translation.egwebapps.egrXK)),u.Bb(2),u.Tc(" ",i.aaEggrafis," "),u.Bb(3),u.Sc(u.ic(20,24,s.translation.egwebapps.desciption)),u.Bb(2),u.Tc(" ",i.perigrafi," "),u.Bb(3),u.Sc(u.ic(25,26,s.translation.egwebapps.egrExpDate)),u.Bb(2),u.Tc(" ",u.jc(27,28,i.hmerominiaLixis,"dd/LL/yyyy")," "),u.Bb(4),u.Sc(u.ic(31,31,s.translation.epayments.netPoso)),u.Bb(2),u.Tc(" ",u.lc(33,33,i.currentKatharoPoso,"\u20ac","symbol","1.2")," "),u.Bb(4),u.Sc(u.ic(37,38,s.translation.egwebapps.egrOngoingCharges)),u.Bb(2),u.Tc(" ",u.lc(39,40,i.currentProsafksisi+i.currentKrathseis,"\u20ac","symbol","1.2")," "),u.Bb(4),u.Sc(u.ic(43,45,s.translation.egwebapps.egrTotalCost)),u.Bb(2),u.Tc(" ",u.lc(45,47,i.currentSynolo,"\u20ac","symbol","1.2")," ")}}function z(e,t){if(1&e&&(u.Ub(0,"td",39),u.Ub(1,"strong"),u.Rc(2),u.hc(3,"translate"),u.Tb(),u.Tb()),2&e){var n=u.gc(4);u.Bb(2),u.Tc("",u.ic(3,1,n.translation.egwebapps.egrTotal),":")}}function H(e,t){if(1&e&&(u.Ub(0,"td",40),u.Ub(1,"strong"),u.Rc(2),u.hc(3,"translate"),u.Tb(),u.Tb()),2&e){var n=u.gc(4);u.Bb(2),u.Tc("",u.ic(3,1,n.translation.egwebapps.egrTotal),":")}}function K(e,t){if(1&e&&(u.Ub(0,"tr"),u.Pc(1,z,4,3,"td",36),u.Pc(2,H,4,3,"td",37),u.Ub(3,"td",38),u.Ub(4,"strong"),u.Rc(5),u.hc(6,"currency"),u.Tb(),u.Tb(),u.Ub(7,"td",38),u.Ub(8,"strong"),u.Rc(9),u.hc(10,"currency"),u.Tb(),u.Tb(),u.Ub(11,"td",38),u.Ub(12,"strong"),u.Rc(13),u.hc(14,"currency"),u.Tb(),u.Tb(),u.Tb()),2&e){var n=u.gc(3);u.Bb(1),u.pc("ngIf",!n.isNonPersistedEnabled),u.Bb(1),u.pc("ngIf",n.isNonPersistedEnabled),u.Bb(3),u.Sc(u.lc(6,5,n.totalCurrentKatharo,"\u20ac","symbol","1.2")),u.Bb(4),u.Sc(u.lc(10,10,n.totalCurrentProsafksisi,"\u20ac","symbol","1.2")),u.Bb(4),u.Sc(u.lc(14,15,n.totalcurrentSynolo,"\u20ac","symbol","1.2"))}}function V(e,t){if(1&e&&(u.Sb(0),u.Pc(1,M,2,1,"div",8),u.Pc(2,j,5,6,"form",9),u.Pc(3,L,9,6,"legend",10),u.Ub(4,"p",11),u.Ub(5,"strong"),u.Rc(6),u.hc(7,"translate"),u.Tb(),u.Tb(),u.Ub(8,"p-table",12),u.Pc(9,N,25,24,"ng-template",13),u.Pc(10,F,46,52,"ng-template",14),u.Pc(11,K,15,20,"ng-template",15),u.Tb(),u.Ub(12,"p",16),u.Ub(13,"strong"),u.Rc(14),u.hc(15,"translate"),u.Tb(),u.Tb(),u.Ub(16,"p"),u.Ub(17,"small"),u.Ub(18,"em"),u.Rc(19),u.hc(20,"translate"),u.Tb(),u.Tb(),u.Tb(),u.Rb()),2&e){var n=u.gc(2);u.Bb(1),u.pc("ngIf",n.calculatedChecked.countChecked>0),u.Bb(1),u.pc("ngIf",n.isNonPersistedEnabled),u.Bb(1),u.pc("ngIf",n.isNonPersistedEnabled),u.Bb(3),u.Uc("",u.ic(7,18,n.translation.epayments.totalDebits),": ",null==n.filteredDebits.entries?null:n.filteredDebits.entries.length,""),u.Bb(2),u.pc("value",n.filteredDebits.entries)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",n.filteredDebits.entries.length)("loading",n.isLoading),u.Bb(6),u.Uc("",u.ic(15,20,n.translation.epayments.totalDebits),": ",null==n.filteredDebits.entries?null:n.filteredDebits.entries.length,""),u.Bb(5),u.Tc("* ",u.ic(20,22,n.translation.egwebapps.egrOngoingChargesAndDeductions),"")}}function $(e,t){if(1&e&&(u.Ub(0,"div"),u.Pc(1,I,1,2,"p-message",1),u.Pc(2,V,21,24,"ng-container",2),u.Tb()),2&e){var n=u.gc();u.Bb(1),u.pc("ngIf",0==n.calculatedChecked.countChecked&&n.debits.entries),u.Bb(1),u.pc("ngIf",n.debits.entries&&n.debits.entries.length)}}function W(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",41),u.Ub(1,"div"),u.Ub(2,"p",42),u.Rc(3),u.hc(4,"translate"),u.Ub(5,"span",43),u.Rc(6),u.hc(7,"translate"),u.hc(8,"translate"),u.Tb(),u.Tb(),u.Ub(9,"p",42),u.Rc(10),u.hc(11,"translate"),u.Ub(12,"span",43),u.Rc(13),u.hc(14,"currency"),u.Tb(),u.Tb(),u.Ub(15,"p",42),u.Rc(16),u.hc(17,"translate"),u.Ub(18,"span",43),u.Rc(19),u.hc(20,"currency"),u.Tb(),u.Tb(),u.Ub(21,"p",42),u.Rc(22),u.hc(23,"translate"),u.Ub(24,"span",44),u.Rc(25),u.hc(26,"currency"),u.Tb(),u.Tb(),u.Tb(),u.Ub(27,"app-checkout",45),u.ec("onPayBtnClick",function(e){return u.Hc(n),u.gc().onCreatePaymentRequest(e)}),u.Tb(),u.Tb()}if(2&e){var i=u.gc();u.Bb(3),u.Tc("",u.ic(4,13,i.translation.egwebapps.egrSelected)," "),u.Bb(3),u.Uc("",i.calculatedChecked.countChecked," ",1==i.calculatedChecked.countChecked?u.ic(7,15,i.translation.epayments.debit):u.ic(8,17,i.translation.epayments.debits),""),u.Bb(4),u.Tc("",u.ic(11,19,i.translation.epayments.netPoso),": "),u.Bb(3),u.Sc(u.lc(14,21,i.calculatedChecked.checkedKatharo,"\u20ac","symbol","1.2")),u.Bb(3),u.Tc("",u.ic(17,26,i.translation.egwebapps.egrOngoingCharges),": "),u.Bb(3),u.Sc(u.lc(20,28,i.calculatedChecked.checkedEpivarinseis,"\u20ac","symbol","1.2")),u.Bb(3),u.Tc("",u.ic(23,33,i.translation.epayments.totalChecked),": "),u.Bb(3),u.Sc(u.lc(26,35,i.calculatedChecked.checkedSum,"\u20ac","symbol","1.2")),u.Bb(2),u.pc("isPaymentFormValid",!0)("doPaymentSubscription",i.onDoPaymentSubject.asObservable())("finApiUrl",i.financeApiUrl)("buttonText",i.translation.egwebapps.egrPaymentBtnText)}}var J,Z=((J=function(){function t(e,i,a,s,r,c,o){n(this,t),this.toasterSrv=e,this.oidcSecuritySrv=i,this.epaymentsSrv=a,this.appCacheSv=s,this.cdr=r,this._http=c,this._parent=o,this.countriesList=[],this.onDoPaymentSubject=new p.a,this.isMobile=!1,this.bankStatusMessage=null,this.calculatedChecked={countChecked:0,countText:"\u03bf\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2",checkedSum:0,checkedKatharo:0,checkedProsafksisis:0},this.isAllDebitsChecked=!1,this.isLoading=!0,this.eidosDebit=[],this.selectedEidosId=0,this.onDestroy=new p.a,this.oikonomikiBankMessagesEn=R.b}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.appCacheSv.translation$.pipe(Object(d.a)(this.onDestroy)).subscribe(function(t){t&&(e.translation=t,Object(b.q)(e.cdr))}),this.appCacheSv.selectedLang$.pipe(Object(d.a)(this.onDestroy)).subscribe(function(t){if(t)switch(e.selectedLang=t,t){case"en":e.eidosDebit=[{value:0,perigrafi:"All"},{value:1,perigrafi:"Persisted Debits"},{value:2,perigrafi:"Non Persisted Debits"}];break;default:e.eidosDebit=[{value:0,perigrafi:"\u038c\u03bb\u03b5\u03c2"},{value:1,perigrafi:"\u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b5\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2"},{value:2,perigrafi:"\u039c\u03b7 \u0392\u03b5\u03b2\u03b1\u03b9\u03c9\u03bc\u03ad\u03bd\u03b5\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ad\u03c2"}]}}),this.isMobile=this._parent.isMobile,this.isNonPersistedEnabled=AppConfOptions.show_non_persisted_debits,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.epayments_api&&(this.financeApiUrl=Object(b.u)(AppConfOptions.epayments_api));var t=Object(b.u)(AuthConfOptions.stsServer);t+="/api/general/GetCountries",this._http.get(t).pipe(Object(C.a)(function(t){return t?(e.countriesList=t,e.oidcSecuritySrv.userData$):Object(v.a)(!1)})).subscribe(function(t){t&&(e.user=t,e.user.address_country_code&&""!=e.user.address_country_code&&(e.user.address_country_num=e.countriesList.find(function(t){return t.Alpha2Code==e.user.address_country_code}).NumericCode.toString()),e._initDebitsByTin()),Object(b.q)(e.cdr)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onCreatePaymentRequest",value:function(t){var n=this;this.paymentRequestDto=void 0,Object(b.q)(this.cdr);var i=this.debits.entries.filter(function(e){return e.isChecked});if(i&&i.length){var a={tinRelated:this.user.tin,relatedCallbackUrl:AppConfOptions.application_url+"/epayments/receipts",billingAddressCity:this.user.address_city,billingAddressCountryCode:this.user.address_country_code,billingAddressZip:this.user.address_zip,billingAddress:this.user.address,userEmail:this.user.email,userPhone:this.user.phone_number,paymentMethodKey:t.key,entries:[]};"PIRBGRAA"===t.key&&(a.billingAddressCountryCode=null);var s,r=e(i.filter(function(e){return e.isChecked}));try{for(r.s();!(s=r.n()).done;){var c=s.value,o={remittanceInfo:this._createRemittanceInfo(c),amount:c.currentSynolo,debtorName:c.eponymia,tin:this.user.tin,description:c.perigrafi,metadata:c.metadata};a.entries.push(o)}}catch(l){r.e(l)}finally{r.f()}this.paymentRequestDto=a,Object(b.q)(this.cdr),this.epaymentsSrv.addPaymentRequest(this.paymentRequestDto).subscribe(function(e){e?(n.paymentResponseDto=e.model,n.onDoPaymentSubject.next(n.paymentResponseDto)):n.toasterSrv.showError("",n.translation.egwebapps.egrPaymentProblemFound)})}}},{key:"onAllDebitsSelected",value:function(){var e=this;this.debits.entries.forEach(function(t){t.isChecked=e.isAllDebitsChecked}),Object(b.q)(this.cdr),this._calculateTotalAmounts()}},{key:"onSelectedPersistedTypeChanged",value:function(e){this.selectedEidosId=+e,this.filteredDebits=JSON.parse(JSON.stringify(this.debits)),this.filteredDebits.entries=1===this.selectedEidosId?this.debits.entries.filter(function(e){return!0===e.isBebaiomeno}):2===this.selectedEidosId?this.debits.entries.filter(function(e){return!1===e.isBebaiomeno}):this.debits.entries,Object(b.q)(this.cdr),this._fillDebitsTable(this.filteredDebits)}},{key:"_initDebitsByTin",value:function(){var e=this;this.isLoading=!0;var t={tin:this.user.tin};this.epaymentsSrv.getBankMessages().pipe(Object(C.a)(function(n){return e.oikonomikiBankMessages=n,e.epaymentsSrv.getDebitsByTin(t)})).subscribe(function(t){t&&(t.entries&&t.entries.length>=0?(e.debits=t,e.filteredDebits=t,e._fillDebitsTable(e.debits)):(t.message||t.messageId)&&(e.bankStatusMessage="el"==e.selectedLang?e.oikonomikiBankMessages[t.messageId]?e.oikonomikiBankMessages[t.messageId]:t.message:e.oikonomikiBankMessagesEn[t.messageId]?e.oikonomikiBankMessagesEn[t.messageId]:t.message,e.toasterSrv.showError("",e.bankStatusMessage)),e.isLoading=!1)})}},{key:"_fillDebitsTable",value:function(e){if(this.isLoading=!0,Object(b.q)(this.cdr),2==e.statusCode)return this.toasterSrv.showWarning("",this.translation.epayments.duplicateTin),void(this.bankStatusMessage=this.translation.epayments.duplicateTin);if(4==e.statusCode)return this.toasterSrv.showWarning("",this.translation.epayments.loadPaymentsError),void(this.bankStatusMessage=this.translation.epayments.loadPaymentsError);0===e.entries.length&&(this.bankStatusMessage=this.translation.epayments.noDebitsFound),!1===this.isNonPersistedEnabled&&(e.entries=e.entries.filter(function(e){return!0===e.isBebaiomeno})),e.entries.forEach(function(e){e.isChecked=!1});var t=e.entries.map(function(e){return e.currentKatharoPoso});this.totalCurrentKatharo=t.reduce(function(e,t){return e+t},0);var n=e.entries.map(function(e){return e.currentProsafksisi}),i=e.entries.map(function(e){return e.currentKrathseis});this.totalCurrentProsafksisi=n.reduce(function(e,t){return e+t},0)+i.reduce(function(e,t){return e+t},0);var a=e.entries.map(function(e){return e.currentSynolo});this.totalcurrentSynolo=a.reduce(function(e,t){return e+t},0),e.entries.sort(function(e,t){return Date.parse(e.hmerominiaLixis)/1e3-Date.parse(t.hmerominiaLixis)/1e3}),this.isLoading=!1,Object(b.q)(this.cdr)}},{key:"_calculateTotalAmounts",value:function(){var e=0,t=0,n=0,i=0,a=this.translation.epayments.debits;this.debits.entries.forEach(function(a){a.isChecked&&(i++,e+=a.currentSynolo,t+=a.currentKatharoPoso,n+=a.currentProsafksisi+a.currentKrathseis)}),a=1==i?this.translation.epayments.debit:this.translation.epayments.debits,this.calculatedChecked={countChecked:i,countText:a,checkedSum:e,checkedKatharo:t,checkedEpivarinseis:n}}},{key:"_createRemittanceInfo",value:function(e){return e.remittanceInfo}}]),t}()).\u0275fac=function(e){return new(e||J)(u.Ob(b.k),u.Ob(g.e),u.Ob(S.a),u.Ob(h.a),u.Ob(u.h),u.Ob(w.b),u.Ob(k.a))},J.\u0275cmp=u.Ib({type:J,selectors:[["app-debits"]],inputs:{isAuthorized:"isAuthorized"},decls:5,vars:3,consts:[["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[4,"ngIf"],["selectedDebits",""],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["severity","warn",3,"text","styleClass"],["class","debits-info__selected-debits",4,"ngIf"],["class","form",4,"ngIf"],["class","iconTooltips d-flex flex-wrap mt-4 mb-2","style","font-size: 14px;",4,"ngIf"],[1,"mt-2","mb-1"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"mt-1"],[1,"debits-info__selected-debits"],[4,"ngTemplateOutlet"],[1,"form"],["name","perstType","bindLabel","perigrafi","bindValue","value",3,"items","ngModel","clearable","ngModelChange"],[1,"iconTooltips","d-flex","flex-wrap","mt-4","mb-2",2,"font-size","14px"],[1,"mr-1"],[1,"far","fa-dot-circle","fa-fw"],[1,"fas","fa-dot-circle","fa-fw"],[1,"fixed-width-col-40","text-center"],[3,"binary","ngModel","ngModelChange","onChange"],["class","fixed-width-col-40",4,"ngIf"],[1,"fixed-width-col-40"],[1,"fixed-width-col-120"],[1,"fixed-width-col-170"],[1,"fixed-width-col-100"],[1,"p-column-title"],["class","fixed-width-col-40 text-center",4,"ngIf"],[1,"fixed-width-col-100","text-right"],["aria-hidden","true",1,"fa-fw",3,"ngClass"],["class","fixed-width-col-470 text-right","colspan","5",4,"ngIf"],["class","fixed-width-col-510 text-right","colspan","6",4,"ngIf"],["colspan","1",1,"fixed-width-col-100","text-right"],["colspan","5",1,"fixed-width-col-470","text-right"],["colspan","6",1,"fixed-width-col-510","text-right"],[1,"debits-info","d-flex","flex-wrap","justify-content-around","w-100","align-items-center","mb-1"],[1,"mb-0"],[1,"totalPoso"],["id","sumTotalToBank",1,"totalPoso"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","onPayBtnClick"]],template:function(e,t){1&e&&(u.Pc(0,_,3,0,"div",0),u.Pc(1,D,1,2,"p-message",1),u.Pc(2,$,3,2,"div",2),u.Pc(3,W,28,40,"ng-template",null,3,u.Qc)),2&e&&(u.pc("ngIf",t.isLoading),u.Bb(1),u.pc("ngIf",t.bankStatusMessage),u.Bb(1),u.pc("ngIf",t.debits&&!t.isLoading))},directives:[f.p,m.b,B.d,U.j,f.u,O.w,O.n,O.o,P.a,O.m,O.p,x.a,f.n,b.b],pipes:[c.c,f.f,f.d],encapsulation:2}),J),X=s("wd/R"),G=s("lhB6"),Q=s("eO1q");function Y(e,t){1&e&&(u.Ub(0,"div",4),u.Ub(1,"span",5),u.Pb(2,"i",6),u.Tb(),u.Tb())}function ee(e,t){if(1&e&&u.Pb(0,"p-message",7),2&e){var n=u.gc();u.pc("text",n.receiptsMessage)}}function te(e,t){if(1&e&&u.Pb(0,"p-message",8),2&e){var n=u.gc();u.pc("severity",n.bankStatusMessageClass)("text",n.bankStatusMessage)("styleClass","mb-2")}}function ne(e,t){if(1&e&&(u.Ub(0,"th",38),u.Rc(1),u.hc(2,"translate"),u.Tb()),2&e){var n=u.gc(4);u.Bb(1),u.Sc(u.ic(2,1,n.translation.epayments.receipt))}}function ie(e,t){if(1&e&&(u.Ub(0,"tr"),u.Ub(1,"th",37),u.Rc(2),u.hc(3,"translate"),u.Tb(),u.Ub(4,"th",38),u.Rc(5),u.hc(6,"translate"),u.Tb(),u.Ub(7,"th",38),u.Rc(8),u.hc(9,"translate"),u.Tb(),u.Ub(10,"th",38),u.Rc(11),u.hc(12,"translate"),u.Tb(),u.Ub(13,"th",38),u.Rc(14),u.hc(15,"translate"),u.Tb(),u.Ub(16,"th",39),u.Rc(17),u.hc(18,"translate"),u.Tb(),u.Ub(19,"th",38),u.Rc(20),u.hc(21,"translate"),u.Tb(),u.Pc(22,ne,3,3,"th",40),u.Tb()),2&e){var n=u.gc(3);u.Bb(2),u.Sc(u.ic(3,8,n.translation.egwebapps.egrType)),u.Bb(3),u.Sc(u.ic(6,10,n.translation.epayments.receiptNbr)),u.Bb(3),u.Sc(u.ic(9,12,n.translation.epayments.receiptDate)),u.Bb(3),u.Sc(u.ic(12,14,n.translation.epayments.transactionNbr)),u.Bb(3),u.Sc(u.ic(15,16,n.translation.epayments.transactionDate)),u.Bb(3),u.Sc(u.ic(18,18,n.translation.egwebapps.description)),u.Bb(3),u.Sc(u.ic(21,20,n.translation.epayments.poso)),u.Bb(2),u.pc("ngIf",!(null!=n.paymentsSettings&&n.paymentsSettings.isProviderThirdParty))}}function ae(e,t){if(1&e&&(u.Ub(0,"a",48),u.Pb(1,"i",49),u.Tb()),2&e){var n=u.gc(2).$implicit,i=u.gc(3);u.sc("href","",i.receiptsUrlBase,"api/PersistedDebits/GetPaymentFile/",n.bankTxnUid,"",u.Jc)}}function se(e,t){if(1&e&&(u.Ub(0,"td",46),u.Ub(1,"span",42),u.Rc(2),u.hc(3,"translate"),u.Tb(),u.Pc(4,ae,2,2,"a",47),u.Tb()),2&e){var n=u.gc().$implicit,i=u.gc(3);u.Bb(2),u.Sc(u.ic(3,2,i.translation.epayments.receipt)),u.Bb(2),u.pc("ngIf",n.receiptId&&n.bankTxnUid)}}function re(e,t){if(1&e&&(u.Ub(0,"tr"),u.Ub(1,"td",41),u.Ub(2,"span",42),u.Rc(3),u.hc(4,"translate"),u.Tb(),u.Pb(5,"i",43),u.Tb(),u.Ub(6,"td",38),u.Ub(7,"span",42),u.Rc(8),u.hc(9,"translate"),u.Tb(),u.Rc(10),u.Tb(),u.Ub(11,"td",38),u.Ub(12,"span",42),u.Rc(13),u.hc(14,"translate"),u.Tb(),u.Rc(15),u.hc(16,"date"),u.Tb(),u.Ub(17,"td",38),u.Ub(18,"span",42),u.Rc(19),u.hc(20,"translate"),u.Tb(),u.Rc(21),u.Tb(),u.Ub(22,"td",38),u.Ub(23,"span",42),u.Rc(24),u.hc(25,"translate"),u.Tb(),u.Rc(26),u.hc(27,"date"),u.Tb(),u.Ub(28,"td",39),u.Ub(29,"span",42),u.Rc(30),u.hc(31,"translate"),u.Tb(),u.Rc(32),u.Tb(),u.Ub(33,"td",44),u.Ub(34,"span",42),u.Rc(35),u.hc(36,"translate"),u.Tb(),u.Rc(37),u.hc(38,"currency"),u.Tb(),u.Pc(39,se,5,4,"td",45),u.Tb()),2&e){var n=t.$implicit,i=u.gc(3);u.Bb(3),u.Sc(u.ic(4,17,i.translation.egwebapps.egrType)),u.Bb(2),u.Db(n.icon),u.Bb(3),u.Sc(u.ic(9,19,i.translation.epayments.receiptNbr)),u.Bb(2),u.Tc(" ",n.receiptIncrNr," "),u.Bb(3),u.Sc(u.ic(14,21,i.translation.epayments.receiptDate)),u.Bb(2),u.Tc(" ",u.jc(16,23,n.receiptDateCreated,"dd/LL/yyyy")," "),u.Bb(4),u.Sc(u.ic(20,26,i.translation.epayments.transactionNbr)),u.Bb(2),u.Tc(" ",n.bankTxnPaymentRef," "),u.Bb(3),u.Sc(u.ic(25,28,i.translation.epayments.transactionDate)),u.Bb(2),u.Tc(" ",u.jc(27,30,n.bankTxnDateCreated,"dd/LL/yyyy")," "),u.Bb(4),u.Sc(u.ic(31,33,i.translation.egwebapps.description)),u.Bb(2),u.Tc(" ",n.description," "),u.Bb(3),u.Sc(u.ic(36,35,i.translation.epayments.poso)),u.Bb(2),u.Tc(" ",u.lc(38,37,n.paymentTotal,"\u20ac","symbol","1.2")," "),u.Bb(2),u.pc("ngIf",!(null!=i.paymentsSettings&&i.paymentsSettings.isProviderThirdParty))}}function ce(e,t){if(1&e&&(u.Ub(0,"tr"),u.Ub(1,"td",50),u.Ub(2,"strong"),u.Rc(3),u.hc(4,"translate"),u.Tb(),u.Tb(),u.Ub(5,"td",51),u.Ub(6,"strong"),u.Rc(7),u.hc(8,"currency"),u.Tb(),u.Tb(),u.Tb()),2&e){var n=u.gc(3);u.Bb(3),u.Sc(u.ic(4,3,n.translation.egwebapps.egrTotalCost)),u.Bb(2),u.Cb("colspan",null!=n.paymentsSettings&&n.paymentsSettings.isProviderThirdParty?1:2),u.Bb(2),u.Sc(u.lc(8,5,n.totalPoso,"\u20ac","symbol","1.2"))}}function oe(e,t){if(1&e&&(u.Ub(0,"tr"),u.Ub(1,"td"),u.Rc(2),u.hc(3,"translate"),u.Tb(),u.Tb()),2&e){var n=u.gc(3);u.Bb(1),u.Cb("colspan",null!=n.paymentsSettings&&n.paymentsSettings.isProviderThirdParty?7:8),u.Bb(1),u.Tc(" ",u.ic(3,2,n.translation.egwebapps.egrNoResultsFound)," ")}}var le=function(){return{width:"100%"}};function be(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",10),u.Ub(1,"p-panel",11),u.Ub(2,"form",12),u.Ub(3,"div",13),u.Ub(4,"div",14),u.Ub(5,"label",15),u.Rc(6),u.hc(7,"translate"),u.Tb(),u.Ub(8,"p-calendar",16),u.ec("ngModelChange",function(e){return u.Hc(n),u.gc(2).hmerominiaApodiksisRange=e}),u.Tb(),u.Tb(),u.Ub(9,"div",14),u.Ub(10,"label",17),u.Rc(11),u.hc(12,"translate"),u.Tb(),u.Ub(13,"p-calendar",18),u.ec("ngModelChange",function(e){return u.Hc(n),u.gc(2).hmerominiaSinallagisRange=e}),u.Tb(),u.Tb(),u.Ub(14,"div",14),u.Ub(15,"label",19),u.Rc(16),u.hc(17,"translate"),u.Tb(),u.Ub(18,"ng-select",20),u.ec("ngModelChange",function(e){return u.Hc(n),u.gc(2).receiptType=e})("ngModelChange",function(e){return u.Hc(n),u.gc(2).onReceiptTypeChanged(e)}),u.Tb(),u.Tb(),u.Tb(),u.Ub(19,"div",21),u.Ub(20,"button",22),u.ec("click",function(){return u.Hc(n),u.gc(2).onSearch()}),u.Pb(21,"i",23),u.Rc(22),u.hc(23,"translate"),u.Tb(),u.Ub(24,"button",24),u.ec("click",function(){return u.Hc(n),u.gc(2).onClear()}),u.Pb(25,"i",25),u.Rc(26),u.hc(27,"translate"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(28,"legend",26),u.Ub(29,"span",27),u.Pb(30,"i",28),u.Rc(31),u.hc(32,"translate"),u.Tb(),u.Ub(33,"span",27),u.Pb(34,"i",29),u.Rc(35),u.hc(36,"translate"),u.Tb(),u.Tb(),u.Ub(37,"p"),u.Ub(38,"strong"),u.Rc(39),u.hc(40,"translate"),u.Tb(),u.Tb(),u.Ub(41,"p-table",30),u.Pc(42,ie,23,22,"ng-template",31),u.Pc(43,re,40,42,"ng-template",32),u.Pc(44,ce,9,10,"ng-template",33),u.Pc(45,oe,4,4,"ng-template",34),u.Tb(),u.Ub(46,"p",35),u.Ub(47,"strong"),u.Rc(48),u.hc(49,"translate"),u.Tb(),u.Tb(),u.Ub(50,"legend",36),u.Ub(51,"span",27),u.Pb(52,"i",28),u.Rc(53),u.hc(54,"translate"),u.Tb(),u.Ub(55,"span",27),u.Pb(56,"i",29),u.Rc(57),u.hc(58,"translate"),u.Tb(),u.Tb(),u.Tb()}if(2&e){var i=u.gc(2);u.Bb(1),u.pc("header",i.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),u.Bb(5),u.Sc(u.ic(7,53,i.translation.epayments.receiptDateRange)),u.Bb(2),u.Mc(u.vc(75,le)),u.pc("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",i.hmerominiaApodiksisRange),u.Bb(3),u.Sc(u.ic(12,55,i.translation.epayments.transactionDateRange)),u.Bb(2),u.Mc(u.vc(76,le)),u.pc("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("ngModel",i.hmerominiaSinallagisRange),u.Bb(3),u.Sc(u.ic(17,57,i.translation.egwebapps.egrPaymentMethod)),u.Bb(2),u.pc("items",i.tropoiPliromis)("ngModel",i.receiptType)("searchable",!1)("clearable",!1),u.Bb(4),u.Tc(" ",u.ic(23,59,i.translation.egwebapps.egrSearchBtn)," "),u.Bb(4),u.Tc(" ",u.ic(27,61,i.translation.egwebapps.egrClearBtn)," "),u.Bb(5),u.Tc(" ",u.ic(32,63,i.translation.epayments.waiverOnline),""),u.Bb(4),u.Tc(" ",u.ic(36,65,i.translation.epayments.waiverOffline),""),u.Bb(4),u.Uc("",u.ic(40,67,i.translation.epayments.totalReceipts),": ",null==i.orderedReceiptsFiltered?null:i.orderedReceiptsFiltered.length,""),u.Bb(2),u.pc("value",i.orderedReceiptsFiltered)("autoLayout",!0)("responsive",!0)("scrollable",!0)("lazy",!1)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("totalRecords",i.orderedReceiptsFiltered.length)("loading",i.isLoading),u.Bb(7),u.Uc("",u.ic(49,69,i.translation.epayments.totalReceipts),": ",null==i.orderedReceiptsFiltered?null:i.orderedReceiptsFiltered.length,""),u.Bb(5),u.Tc(" ",u.ic(54,71,i.translation.epayments.waiverOnline),""),u.Bb(4),u.Tc(" ",u.ic(58,73,i.translation.epayments.waiverOffline),"")}}function pe(e,t){if(1&e&&(u.Sb(0),u.Pc(1,be,59,77,"div",9),u.Rb()),2&e){var n=u.gc();u.Bb(1),u.pc("ngIf",n.receipts.entries&&n.receipts.entries.length)}}var de,he=((de=function(){function e(t,i,a,s,r,c){n(this,e),this.oidcSecuritySrv=t,this.epaymentsSrv=i,this.appCacheSv=a,this.toasterSrv=s,this.cdr=r,this.route=c,this.onDestroy=new p.a,this.totalPoso=0,this.bankStatusMessageClass=void 0,this.oikonomikiBankMessagesEn=R.b,this.receiptsUrlBase=AppConfOptions.epayments_api,this.receiptType=0,this.isLoading=!0,this.hmerominiaApodiksisRange=null,this.hmerominiaSinallagisRange=null,this.today=new Date,this.yearRange=Object(b.v)(50,50),this.tropoiPliromis=[]}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.appCacheSv.translation$.pipe(Object(d.a)(this.onDestroy)).subscribe(function(t){t&&(e.translation=t,Object(b.q)(e.cdr))}),this.appCacheSv.selectedLang$.pipe(Object(d.a)(this.onDestroy)).subscribe(function(t){if(t)switch(e.selectedLang=t,t){case"en":e.tropoiPliromis=[{value:0,perigrafi:"All"},{value:1,perigrafi:"Organization's Fund Office"},{value:2,perigrafi:"E-Services"}];break;default:e.tropoiPliromis=[{id:0,perigrafi:"\u038c\u03bb\u03bf\u03b9"},{id:1,perigrafi:"\u03a4\u03b1\u03bc\u03b5\u03af\u03bf \u0394\u03ae\u03bc\u03bf\u03c5"},{id:2,perigrafi:"Online"}]}}),this.isLoading=!0,this.epaymentsSrv.getPaymentSettings().subscribe(function(t){return e.paymentsSettings=t}),this.epaymentsSrv.getBankMessages().pipe(Object(C.a)(function(t){return t?(e.oikonomikiBankMessages=t,e.oidcSecuritySrv.userData$.pipe(Object(d.a)(e.onDestroy))):Object(v.a)(!1)}),Object(C.a)(function(t){return t?(e.user=t,e.route.queryParams.pipe(Object(d.a)(e.onDestroy))):Object(v.a)(!1)})).subscribe(function(t){if(t){var n=t;if(n.messagecode||n.paymentStatus){var i=n.messagecode?n.messagecode:n.paymentStatus;e.bankStatusMessage="el"==e.selectedLang?e.oikonomikiBankMessages[i]:e.oikonomikiBankMessagesEn[i],e.toasterSrv.showError("",e.bankStatusMessage),e.bankStatusMessageClass="TRANSACTION_COMPLETED"==i||"APPROVED"==i?"success":"error"}Object(b.q)(e.cdr),e._initReceiptsByTin()}else e.toasterSrv.showError("",e.translation.egwebapps.egrProblemFound),e.isLoading=!1,Object(b.q)(e.cdr)})}},{key:"ngOnChanges",value:function(e){e&&e.tabChanged&&(this.bankStatusMessage=void 0,Object(b.q)(this.cdr))}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"_initReceiptsByTin",value:function(){var e=this;this.isLoading=!0;var t=new Date,n={tin:this.user.tin,year:t.getFullYear()};this.epaymentsSrv.getPaymentsByTin(n).subscribe(function(t){t&&(e.receipts=t,e.totalPoso=0,e.receipts.entries&&e.receipts.entries.length>0&&e.receipts.entries.forEach(function(t){e.totalPoso+=t.receiptAmount}),!e.receipts.statusCode||2!=e.receipts.statusCode&&3!=e.receipts.statusCode?1==e.receipts.statusCode&&0==e.receipts.entries.length?e.receiptsMessage=e.translation.epayments.revDebtorNotFound:e._fillOrderedReceipts(e.receipts):e.receipts.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(e.toasterSrv.showWarning("",e.translation.epayments.revDebtorNotFound),e.receiptsMessage=e.translation.epayments.revDebtorNotFound):e.receipts.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")&&(e.toasterSrv.showError("error",e.translation.epayments.duplicateTin),e.receiptsMessage=e.translation.epayments.duplicateTin)),e.isLoading=!1,Object(b.q)(e.cdr)})}},{key:"onReceiptTypeChanged",value:function(e){this.receiptType=e,Object(b.q)(this.cdr)}},{key:"onSearch",value:function(){var e,t=this;this.isLoading=!0,this.orderedReceiptsFiltered=Object(b.p)(this.orderedReceipts),this.hmerominiaApodiksisRange&&(e=this.orderedReceiptsFiltered.filter(function(e){return!!X.utc(e.receiptDateCreated).isBetween(X.utc(t.hmerominiaApodiksisRange[0]),X.utc(t.hmerominiaApodiksisRange[1]).add(1,"day"))})),this.hmerominiaSinallagisRange&&(e=this.orderedReceiptsFiltered.filter(function(e){return!!X(e.bankTxnDateCreated).isBetween(X(t.hmerominiaSinallagisRange[0]),X(t.hmerominiaSinallagisRange[1]).add(1,"day"))})),this.hmerominiaApodiksisRange||this.hmerominiaSinallagisRange||(e=Object(b.p)(this.orderedReceipts)),Object(b.q)(this.cdr),this._filterByType(e)}},{key:"onClear",value:function(){this.orderedReceiptsFiltered=Object(b.p)(this.orderedReceipts),this.hmerominiaApodiksisRange=null,this.hmerominiaSinallagisRange=null,this.receiptType=0,Object(b.q)(this.cdr)}},{key:"_filterByType",value:function(e){e&&(2===this.receiptType?this.orderedReceiptsFiltered=e.filter(function(e){return!0===e.isOnline}):1===this.receiptType&&(this.orderedReceiptsFiltered=e.filter(function(e){return!1===e.isOnline||!e.isOnline}))),this.isLoading=!1,Object(b.q)(this.cdr)}},{key:"_fillOrderedReceipts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==t&&(t=this.receipts);var n=this.receipts.entries.filter(function(e){return null===e.receiptDateCreated}),i=this.receipts.entries.filter(function(e){return null!=e.receiptDateCreated});this.orderedReceipts=i.sort(function(e,t){return t.receiptDateCreated!==e.receiptDateCreated?t.receiptDateCreated>e.receiptDateCreated:parseInt(t.receiptIncrNr.split("/").pop())>parseInt(e.receiptIncrNr.split("/").pop())}),0!=n.length&&n.forEach(function(t){e.orderedReceipts.unshift(t)}),this.orderedReceipts.forEach(function(e){e.icon=0==e.isOnline?"far fa-building":"fas fa-desktop",e.description=null==e.bankTxnDescr?e.receiptDescr:e.bankTxnDescr,e.paymentTotal=null==e.bankTxnPaymentTotal?e.receiptAmount:e.bankTxnPaymentTotal,e.link=null!=e.receiptId&&null!=e.bankTxnUid?'<a href="'+AppConfOptions.epayments_api+"/api/PersistedDebits/GetPaymentFile/"+e.bankTxnUid+'" target="_blank"><i class="far fa-file-pdf"></i></a>':""}),this.orderedReceiptsFiltered=Object(b.p)(this.orderedReceipts),Object(b.q)(this.cdr)}},{key:"handleError",value:function(e){return console.log(e.message),console.log(e.error),Object(G.a)(e.message)}}]),e}()).\u0275fac=function(e){return new(e||de)(u.Ob(g.e),u.Ob(S.a),u.Ob(h.a),u.Ob(b.k),u.Ob(u.h),u.Ob(l.a))},de.\u0275cmp=u.Ib({type:de,selectors:[["app-receipts"]],inputs:{tabChanged:"tabChanged"},features:[u.zb],decls:4,vars:4,consts:[["class","bg-white","style","width: 100%; height: 300px",4,"ngIf"],["severity","warn",3,"text",4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],[4,"ngIf"],[1,"bg-white",2,"width","100%","height","300px"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"fas","fa-circle-notch","fa-3x","fa-pulse"],["severity","warn",3,"text"],[3,"severity","text","styleClass"],["class","receipts-info",4,"ngIf"],[1,"receipts-info"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-sm-6","col-md-4"],["for","hmerominiaApodiksisRange"],["name","hmerominiaApodiksisRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["for","exchangeDatepicker"],["name","hmerominiaSinallagisRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","ngModel","ngModelChange"],["for","recType"],["name","recType","bindLabel","perigrafi","bindValue","value",3,"items","ngModel","searchable","clearable","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","mr-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"d-flex","flex-wrap","mb-1",2,"font-size","14px"],[1,"mr-1"],[1,"fas","fa-desktop","fa-fw"],[1,"far","fa-building","fa-fw"],[3,"value","autoLayout","responsive","scrollable","lazy","paginator","alwaysShowPaginator","rows","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"mt-1"],[1,"d-flex","flex-wrap","mt-1","mb-1",2,"font-size","14px"],[1,"fixed-width-col-40"],[1,"fixed-width-col-60"],[1,"fixed-width-col-150"],["class","fixed-width-col-60",4,"ngIf"],[1,"fixed-width-col-40","text-center"],[1,"p-column-title"],["aria-hidden","true"],[1,"fixed-width-col-60","text-right"],["class","fixed-width-col-60 text-center",4,"ngIf"],[1,"fixed-width-col-60","text-center"],["target","_blank","aria-label","\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03bc\u03bf\u03c2 \u03b3\u03b9\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03bf \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7\u03c2","rel","noopener",3,"href",4,"ngIf"],["target","_blank","aria-label","\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03bc\u03bf\u03c2 \u03b3\u03b9\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03bf \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7\u03c2","rel","noopener",3,"href"],["aria-hidden","true",1,"far","fa-file-pdf"],["colspan","6",1,"fixed-width-col-430","text-right"],[1,"fixed-width-col-120"]],template:function(e,t){1&e&&(u.Pc(0,Y,3,0,"div",0),u.Pc(1,ee,1,1,"p-message",1),u.Pc(2,te,1,3,"p-message",2),u.Pc(3,pe,2,1,"ng-container",3)),2&e&&(u.pc("ngIf",!t.receipts||t.isLoading),u.Bb(1),u.pc("ngIf",t.receiptsMessage&&""!=t.receiptsMessage),u.Bb(1),u.pc("ngIf",!t.isLoading&&t.bankStatusMessage&&""!=t.bankStatusMessage),u.Bb(1),u.pc("ngIf",t.receipts&&!t.isLoading))},directives:[f.p,m.b,y.a,O.w,O.n,O.o,Q.a,O.m,O.p,P.a,B.d,U.j],pipes:[c.c,f.f,f.d],encapsulation:2,changeDetection:0}),de),ue=s("iHy+");function ge(e,t){if(1&e&&u.Pb(0,"p-message",3),2&e){var n=u.gc();u.pc("text",null==n.translation?null:n.translation.egwebapps.egwebappsLoginMesg)}}function fe(e,t){if(1&e&&(u.Ub(0,"p-panel",4),u.Pb(1,"div",5),u.hc(2,"decodeHtmlString"),u.Tb()),2&e){var n=u.gc();u.pc("header",null==n.translation?null:n.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),u.Bb(1),u.pc("innerHTML",u.ic(2,4,n.tabMsg),u.Ic)}}function me(e,t){if(1&e&&u.Pb(0,"app-receipts",9),2&e){var n=u.gc(2);u.pc("tabChanged",n.onTbChanged)}}function ye(e,t){if(1&e){var n=u.Vb();u.Ub(0,"p-tabView",6),u.ec("onChange",function(e){return u.Hc(n),u.gc().onTabChanged(e)}),u.Ub(1,"p-tabPanel",7),u.Pb(2,"app-debits"),u.Tb(),u.Ub(3,"p-tabPanel",7),u.Pc(4,me,1,1,"ng-template",8),u.Tb(),u.Tb()}if(2&e){var i=u.gc();u.pc("activeIndex",i.index),u.Bb(1),u.pc("header",null==i.translation?null:i.translation.epayments.debitsTab),u.Bb(2),u.pc("header",null==i.translation?null:i.translation.epayments.paymentsTab)}}var Te,ve,Ce,ke=[{path:"",component:(Te=function(){function e(t,i,a,s,r,c){n(this,e),this.oidcSecuritySrv=t,this.appCacheSv=i,this.location=a,this.router=s,this.route=r,this.cdr=c,this.onDestroy=new p.a,this.index=0,this.onTbChanged=!1,this.selectedLang="el"}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.appCacheSv.translation$.pipe(Object(d.a)(this.onDestroy)).subscribe(function(t){t&&(e.translation=t,Object(b.q)(e.cdr))}),this.appCacheSv.selectedLang$.pipe(Object(d.a)(this.onDestroy)).subscribe(function(t){t&&(e.selectedLang=t),AppConfOptions&&1==AppConfOptions.multilingual&&"el"!=e.selectedLang&&AppConfOptions.epayments_debits_tab_info_en&&""!=AppConfOptions.epayments_debits_tab_info_en&&e.router.url.includes("debits")?e.tabMsg=AppConfOptions.epayments_debits_tab_info_en:AppConfOptions.epayments_debits_tab_info&&""!=AppConfOptions.epayments_debits_tab_info&&"el"==e.selectedLang&&e.router.url.includes("debits")&&(e.tabMsg=AppConfOptions.epayments_debits_tab_info),AppConfOptions&&1==AppConfOptions.multilingual&&"el"!=e.selectedLang&&AppConfOptions.epayments_receipts_tab_info_en&&""!=AppConfOptions.epayments_receipts_tab_info_en&&e.router.url.includes("receipts")?e.tabMsg=AppConfOptions.epayments_receipts_tab_info_en:AppConfOptions.epayments_receipts_tab_info&&""!=AppConfOptions.epayments_receipts_tab_info&&"el"==e.selectedLang&&e.router.url.includes("receipts")&&(e.tabMsg=AppConfOptions.epayments_receipts_tab_info),Object(b.q)(e.cdr)}),this.oidcSecuritySrv.isAuthenticated$.subscribe(function(t){e.isAuthorized=t,Object(b.q)(e.cdr)}),this.index="receipts"===this.route.children[0].snapshot.url[0].path?1:0,Object(b.q)(this.cdr)}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}},{key:"onTabChanged",value:function(e){0==e.index?(this.router.navigate(["./debits"],{relativeTo:this.route}),AppConfOptions&&AppConfOptions.epayments_debits_tab_info&&""!=AppConfOptions.epayments_debits_tab_info&&(this.tabMsg=AppConfOptions.epayments_debits_tab_info)):(this.router.navigate(["./receipts"],{relativeTo:this.route}),this.onTbChanged=!0,AppConfOptions&&AppConfOptions.epayments_receipts_tab_info&&""!=AppConfOptions.epayments_receipts_tab_info&&(this.tabMsg=AppConfOptions.epayments_receipts_tab_info)),Object(b.q)(this.cdr)}}]),e}(),Te.\u0275fac=function(e){return new(e||Te)(u.Ob(g.e),u.Ob(h.a),u.Ob(f.k),u.Ob(l.d),u.Ob(l.a),u.Ob(u.h))},Te.\u0275cmp=u.Ib({type:Te,selectors:[["app-epayments-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:3,vars:3,consts:[["severity","warn",3,"text",4,"ngIf"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"],["pTemplate","content"],[3,"tabChanged"]],template:function(e,t){1&e&&(u.Pc(0,ge,1,1,"p-message",0),u.Pc(1,fe,3,6,"p-panel",1),u.Pc(2,ye,5,3,"p-tabView",2)),2&e&&(u.pc("ngIf",!t.isAuthorized),u.Bb(1),u.pc("ngIf",t.tabMsg),u.Bb(1),u.pc("ngIf",t.isAuthorized))},directives:[f.p,m.b,y.a,T.b,T.a,Z,U.j,he],pipes:[ue.a],encapsulation:2}),Te),children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:Z},{path:"receipts",component:he}]}],Se=((Ce=function e(){n(this,e)}).\u0275fac=function(e){return new(e||Ce)},Ce.\u0275mod=u.Mb({type:Ce}),Ce.\u0275inj=u.Lb({imports:[[l.g.forChild(ke)],l.g]}),Ce),Re=((ve=function e(){n(this,e)}).\u0275fac=function(e){return new(e||ve)},ve.\u0275mod=u.Mb({type:ve}),ve.\u0275inj=u.Lb({providers:[S.a],imports:[[Se,o.a,r.d,c.b.forChild()]]}),ve)}}])}();