"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[978],{6978:(dt,y,l)=>{l.r(y),l.d(y,{DiakanonismoiModule:()=>rt});var T=l(1201),m=l(1062),w=l(7951),c=l(1083),t=l(5e3),a=l(9238),k=l(7579),d=l(2722),h=(()=>{return(o=h||(h={})).xreosiMode="\u0395\u03af\u03b4\u03bf\u03c2 \u03a7\u03c1\u03b5\u03ce\u03c3\u03b5\u03c9\u03bd",o.arithmosDoseon="\u0391\u03c1\u03b9\u03b8\u03bc\u03cc\u03c2 \u0394\u03cc\u03c3\u03b5\u03c9\u03bd",h;var o})(),g=(()=>{return(o=g||(g={})).xreosiMode="Debits Type",o.arithmosDoseon="Instalments Count",g;var o})(),f=l(4004),A=l(262),S=l(520);let _=(()=>{class o{constructor(n,i){this.http=n,this.toasterSrv=i,AppConfOptions.finance_api?this.apiUrl=(0,a.Qj)(AppConfOptions.finance_api)+"/api/profile/ofeiletis":AppConfOptions.epayments_api&&(this.apiUrl=(0,a.Qj)(AppConfOptions.epayments_api)+"/api/profile/ofeiletis")}getDiakanonismous(){return this.http.get(`${this.apiUrl}/diakanonismoi`).pipe((0,f.U)(i=>i),(0,A.K)(i=>(0,a.Zj)(i,this.toasterSrv)))}getAitisiDiakanonismouStatus(n){return this.http.post(`${this.apiUrl}/diakanonismoi/info`,n).pipe((0,f.U)(e=>e),(0,A.K)(e=>(0,a.Zj)(e,this.toasterSrv)))}oristikopoiisiDiakanonismou(n){return this.http.post(`${this.apiUrl}/diakanonismoi`,n).pipe((0,f.U)(e=>e),(0,A.K)(e=>(0,a.Zj)(e,this.toasterSrv)))}getXreoseisSelections(){return this.http.get(`${this.apiUrl}/diakanonismoi/xreoseisSelections`).pipe((0,f.U)(i=>i),(0,A.K)(i=>(0,a.Zj)(i,this.toasterSrv)))}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(S.eN),t.LFG(a.MJ))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var C=l(2622),p=l(3075),U=l(4376),u=l(9808),Z=l(3724);const M=["diakanonismosForm"];function O(o,s){if(1&o&&(t.TgZ(0,"div",14)(1,"h5",15),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",16)(5,"span",17),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"span",18),t._uU(9),t.ALo(10,"currency"),t.qZA()(),t.TgZ(11,"p",16)(12,"span",17),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span",18),t._uU(16),t.ALo(17,"currency"),t.qZA()(),t.TgZ(18,"p",16)(19,"span",17),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span",18),t._uU(23),t.ALo(24,"currency"),t.qZA()()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,7,null==n.translation?null:n.translation.diakanonismoi.initialDebits)),t.xp6(4),t.hij("",t.lcZ(7,9,null==n.translation?null:n.translation.diakanonismoi.amountRemaining),":"),t.xp6(3),t.Oqu(t.gM2(10,11,n.selectedEidosXreosis.ypoloipoKatharo,"\u20ac","symbol","1.2")),t.xp6(4),t.hij("",t.lcZ(14,16,null==n.translation?null:n.translation.egwebapps.egrOngoingCharges),":"),t.xp6(3),t.Oqu(t.gM2(17,18,n.selectedEidosXreosis.prosafksiseis,"\u20ac","symbol","1.2")),t.xp6(4),t.hij("",t.lcZ(21,23,null==n.translation?null:n.translation.egwebapps.egrTotalCost),":"),t.xp6(3),t.Oqu(t.gM2(24,25,n.selectedEidosXreosis.synolo,"\u20ac","symbol","1.2"))}}function R(o,s){if(1&o&&t._UZ(0,"p-message",19),2&o){const n=t.oxw();t.Q6J("styleClass","mt-2 form-msgs")("escape",!1)("text",n.formErrorsMsg)}}function F(o,s){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const n=s.$implicit;t.xp6(1),t.hij(" ",n," ")}}function q(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div",20)(1,"h5",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"span",22),t._uU(8),t.ALo(9,"currency"),t.qZA()(),t.TgZ(10,"ul")(11,"li",23),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"span",24),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.YNc(17,F,2,1,"li",25),t.qZA(),t._UZ(18,"p-message",26),t.ALo(19,"translate"),t.TgZ(20,"button",27),t.NdJ("click",function(){return t.CHM(n),t.oxw().onOristikopoiisiDiakanonismou()}),t._UZ(21,"span",28),t._uU(22),t.ALo(23,"translate"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,9,null==n.translation?null:n.translation.diakanonismoi.formulateSettlement)),t.xp6(3),t.hij("",t.lcZ(6,11,null==n.translation?null:n.translation.diakanonismoi.totalCostAfter),": "),t.xp6(3),t.Oqu(t.gM2(9,13,null==n.oikonomikiResponse||null==n.oikonomikiResponse.model?null:n.oikonomikiResponse.model.sinolikoPoso,"\u20ac","symbol","1.2")),t.xp6(4),t.hij("",t.lcZ(13,18,null==n.translation?null:n.translation.diakanonismoi.firstInstalmentExpire),": "),t.xp6(3),t.hij("",t.xi3(16,20,null==n.oikonomikiResponse||null==n.oikonomikiResponse.entry?null:n.oikonomikiResponse.entry.hmLixisProtisDosis,"dd/LL/yyyy"),"*"),t.xp6(2),t.Q6J("ngForOf",n.oikonomikiResponse.entry.doseisInfo),t.xp6(1),t.Q6J("styleClass","mb-2")("text",t.lcZ(19,23,null==n.translation?null:n.translation.diakanonismoi.info)),t.xp6(4),t.hij(" ",t.lcZ(23,25,null==n.translation?null:n.translation.egwebapps.egrSubmit)," ")}}let x=(()=>{class o{constructor(n,i,e,r){this.diakanonismoiSrv=n,this.appCacheSv=i,this.toasterSrv=e,this.cdr=r,this.oristikopoiisi=new t.vpe,this.onDestroy=new k.x,this.isFormSubmitted=!1,this.isLoading=!1}ngOnInit(){this.model={xreoseisSelectionMode:0},this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(n=>{n&&(this.translation=n),(0,a.RA)(this.cdr)}),this.appCacheSv.selectedLang$.pipe((0,d.R)(this.onDestroy)).subscribe(n=>{n&&(this.selectedLang=n),this.formDictionaryEnum="el"==this.selectedLang?h:g,(0,a.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSubmit(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,a.RA)(this.cdr),this.isFormSubmitted&&this.diakanonismosForm.valid?(this.isLoading=!0,(0,a.RA)(this.cdr),this.diakanonismoiSrv.getAitisiDiakanonismouStatus(this.model).subscribe(n=>{n&&1==n.statusCode?(this.oikonomikiResponse=n,this.model.infoHash=this.oikonomikiResponse.entry.infoHash):(2==n.statusCode||3==n.statusCode)&&(n.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(this.toasterSrv.showWarning("",this.translation.epayments.revDebtorNotFound),this.diakanonismosRequestMessage=this.translation.epayments.revDebtorNotFound):n.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")?(this.toasterSrv.showError("error",this.translation.epayments.duplicateTin),this.diakanonismosRequestMessage=this.translation.epayments.duplicateTin):this.formErrorsMsg=n.message),this.isLoading=!1,(0,a.RA)(this.cdr)})):(this.formErrorsMsg=(0,a.CD)(this.diakanonismosForm,this.formDictionaryEnum,""),(0,a.RA)(this.cdr))}onSelectedEidosXreoseonChanged(n){this.selectedEidosXreosis=this.xreoseisSelections.filter(i=>i.mode==n.target.value)[0],(0,a.RA)(this.cdr)}onOristikopoiisiDiakanonismou(){this.isLoading=!0,(0,a.RA)(this.cdr),this.diakanonismoiSrv.oristikopoiisiDiakanonismou(this.model).subscribe(n=>{n&&n.statusCode===a.WE.Ok?this.toasterSrv.showSuccess("",this.translation.diakanonismoi.finalised):this.toasterSrv.showError("",this.translation.diakanonismoi.finaliseError),this.isLoading=!1,(0,a.RA)(this.cdr),this.oristikopoiisi.emit(!0)})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(_),t.Y36(C.g),t.Y36(a.MJ),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diakanonismoi-create"]],viewQuery:function(n,i){if(1&n&&t.Gf(M,5),2&n){let e;t.iGM(e=t.CRH())&&(i.diakanonismosForm=e.first)}},inputs:{xreoseisSelections:"xreoseisSelections"},outputs:{oristikopoiisi:"oristikopoiisi"},decls:29,vars:30,consts:[[1,"form"],["diakanonismosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-6"],["name","xreosiMode","bindLabel","perigrafi","bindValue","mode",1,"ontop-select",2,"flex","1",3,"appendTo","searchable","virtualScroll","clearable","items","ngModel","ngModelChange"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],["name","arithmosDoseon","placeholder","1","type","number","required","",1,"form-control",3,"ngModel","ngModelChange"],["arithmosDoseonInput","ngModel"],["class","my-2",4,"ngIf"],["type","button",1,"btn","btn-info","btn-sm","d-block","mx-auto",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-calculator"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"condition","customClass"],["class","col-12 py-3 bg-white debits-info_left",4,"ngIf"],[1,"my-2"],[1,"text-primary","font-weight-bold"],[1,"mb-0"],[1,"me-1","d-inline-block",2,"width","200px"],[1,"totalPoso",2,"width","220px"],["severity","error",3,"styleClass","escape","text"],[1,"col-12","py-3","bg-white","debits-info_left"],[1,"text-info","font-weight-bold"],[1,"totalPoso"],[1,"font-weight-bold"],[1,"text-danger"],[4,"ngFor","ngForOf"],["severity","warn",3,"styleClass","text"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"far","fa-save"]],template:function(n,i){if(1&n&&(t.TgZ(0,"form",0,1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ng-select",4),t.NdJ("ngModelChange",function(r){return i.model.xreoseisSelectionMode=r}),t.qZA(),t.TgZ(8,"div",5),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",3)(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"input",6,7),t.NdJ("ngModelChange",function(r){return i.model.arithmosDoseon=r}),t.qZA(),t.TgZ(17,"div",5),t._uU(18),t.ALo(19,"translate"),t.qZA()()(),t.YNc(20,O,25,30,"div",8),t.TgZ(21,"button",9),t.NdJ("click",function(){return i.onSubmit()}),t._UZ(22,"span",10),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.YNc(25,R,1,3,"p-message",11),t.qZA(),t._UZ(26,"eg-loading",12)(27,"hr"),t.YNc(28,q,24,27,"div",13)),2&n){const e=t.MAs(1),r=t.MAs(16);t.xp6(5),t.hij("",t.lcZ(6,20,null==i.translation?null:i.translation.diakanonismoi.debitsType),"*"),t.xp6(2),t.Q6J("appendTo","body")("searchable",!0)("virtualScroll",!0)("clearable",!1)("items",i.xreoseisSelections)("ngModel",i.model.xreoseisSelectionMode),t.xp6(1),t.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&i.model.xreoseisSelectionMode),t.xp6(1),t.hij(" *",t.lcZ(10,22,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),t.xp6(4),t.hij("",t.lcZ(14,24,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount),"*"),t.xp6(2),t.Q6J("ngModel",i.model.arithmosDoseon),t.xp6(2),t.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&r.valid),t.xp6(1),t.hij(" *",t.lcZ(19,26,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),t.xp6(2),t.Q6J("ngIf",i.selectedEidosXreosis),t.xp6(1),t.Q6J("disabled",e.invalid),t.xp6(2),t.hij(" ",t.lcZ(24,28,null==i.translation?null:i.translation.diakanonismoi.calculateInstalments)," "),t.xp6(2),t.Q6J("ngIf",i.formErrorsMsg&&""!==i.formErrorsMsg),t.xp6(1),t.Q6J("condition",i.isLoading)("customClass","egr-load-small"),t.xp6(2),t.Q6J("ngIf",i.oikonomikiResponse&&i.oikonomikiResponse.entry&&i.oikonomikiResponse.entry.doseisInfo&&!i.isLoading)}},directives:[p._Y,p.JL,p.F,U.w9,p.JJ,p.On,p.wV,p.Fj,p.Q7,u.O5,Z.q,a.IE,u.sg],pipes:[m.X$,u.H9,u.uU],encapsulation:2,changeDetection:0}),o})();var J=l(2215),N=l(7489),I=l(9646),b=l(3900),v=l(8061),j=l(5652),E=l(8708),Q=l(9783),Y=l(5315);function B(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw().onCreateNewAitisiDiakanonismou()}),t._UZ(2,"span",24),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,1,null==n.translation?null:n.translation.diakanonismoi.addNew)," ")}}function P(o,s){if(1&o&&t._UZ(0,"p-message",25),2&o){const n=t.oxw();t.Q6J("text",null==n.translation?null:n.translation.diakanonismoi.noSettlementsFound)("styleClass","mb-2")}}function $(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"th",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",27),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",28),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",29),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",29),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",29),t._uU(20),t.ALo(21,"translate"),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,7,null==n.translation?null:n.translation.egwebapps.egrAA)),t.xp6(3),t.Oqu(t.lcZ(6,9,null==n.translation?null:n.translation.egwebapps.egrStatus)),t.xp6(3),t.Oqu(t.lcZ(9,11,null==n.translation?null:n.translation.egwebapps.egrDate)),t.xp6(3),t.Oqu(t.lcZ(12,13,null==n.translation?null:n.translation.diakanonismoi.instalmentsCount)),t.xp6(3),t.Oqu(t.lcZ(15,15,null==n.translation?null:n.translation.egwebapps.egrTotalCost)),t.xp6(3),t.Oqu(t.lcZ(18,17,null==n.translation?null:n.translation.diakanonismoi.amountReceived)),t.xp6(3),t.Oqu(t.lcZ(21,19,null==n.translation?null:n.translation.diakanonismoi.amountRemaining))}}function z(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",30)(2,"span",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"td",27)(7,"span",31),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"td",32)(12,"span",31),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td",33)(18,"span",31),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"td",34)(23,"span",31),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._uU(26),t.ALo(27,"currency"),t.qZA(),t.TgZ(28,"td",34)(29,"span",31),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._uU(32),t.ALo(33,"currency"),t.qZA(),t.TgZ(34,"td",34)(35,"span",31),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._uU(38),t.ALo(39,"currency"),t.qZA()()),2&o){const n=s.$implicit,i=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,14,null==i.translation?null:i.translation.egwebapps.egrAA)),t.xp6(2),t.hij(" ",n.aa," "),t.xp6(3),t.Oqu(t.lcZ(9,16,null==i.translation?null:i.translation.egwebapps.egrStatus)),t.xp6(2),t.hij(" ",n.katastatsiPerigrafi," "),t.xp6(3),t.Oqu(t.lcZ(14,18,null==i.translation?null:i.translation.egwebapps.egrDate)),t.xp6(2),t.hij(" ",t.xi3(16,20,n.hmerominia,"dd/LL/yyyy")," "),t.xp6(4),t.Oqu(t.lcZ(20,23,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount)),t.xp6(2),t.hij(" ",n.arithmosDoseon," "),t.xp6(3),t.Oqu(t.lcZ(25,25,null==i.translation?null:i.translation.egwebapps.egrTotalCost)),t.xp6(2),t.hij(" ",t.gM2(27,27,n.sinolikoPoso,"\u20ac","symbol","1.2")," "),t.xp6(4),t.Oqu(t.lcZ(31,32,null==i.translation?null:i.translation.diakanonismoi.amountReceived)),t.xp6(2),t.hij(" ",t.gM2(33,34,n.eispraxthen,"\u20ac","symbol","1.2")," "),t.xp6(4),t.Oqu(t.lcZ(37,39,null==i.translation?null:i.translation.diakanonismoi.amountRemaining)),t.xp6(2),t.hij(" ",t.gM2(39,41,n.ypoloipo,"\u20ac","symbol","1.2")," ")}}function H(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",35),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,1,null==n.translation?null:n.translation.egwebapps.egrNoResultsFound)," ")}}function X(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",36)(2,"strong"),t._uU(3),t.qZA()(),t.TgZ(4,"td",33)(5,"strong"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"td",34)(9,"strong"),t._uU(10),t.ALo(11,"currency"),t.qZA()(),t.TgZ(12,"td",34)(13,"strong"),t._uU(14),t.ALo(15,"currency"),t.qZA()(),t.TgZ(16,"td",34)(17,"strong"),t._uU(18),t.ALo(19,"currency"),t.qZA()()()),2&o){const n=t.oxw();t.xp6(3),t.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==n.modelFiltered?null:n.modelFiltered.length,""),t.xp6(3),t.hij("",t.lcZ(7,5,null==n.translation?null:n.translation.egwebapps.egrTotalCost),":"),t.xp6(4),t.Oqu(t.gM2(11,7,n.totalSinolikoPoso,"\u20ac","symbol","1.2")),t.xp6(4),t.Oqu(t.gM2(15,12,n.totalEispraxthenPoso,"\u20ac","symbol","1.2")),t.xp6(4),t.Oqu(t.gM2(19,17,n.totalYpoloipoPoso,"\u20ac","symbol","1.2"))}}function V(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"app-diakanonismoi-create",37),t.NdJ("oristikopoiisi",function(){return t.CHM(n),t.oxw().onOristikopoiisiAitisis()}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("xreoseisSelections",n.xreoseisSelections)}}const W=function(){return{width:"100%"}},K=function(){return{minWidth:"40vw"}};let D=(()=>{class o{constructor(n,i,e,r){this.diakanonismoiSrv=n,this.appCacheSv=i,this.toasterSrv=e,this.cdr=r,this.onDestroy=new k.x,this.modelFiltered=[],this.isLoading=!0,this.isAddingNewDiakanonismo=!1,this.diakanonismosDateRange=null,this.katastasiFilter=null,this.totalSinolikoPoso=0,this.totalEispraxthenPoso=0,this.totalYpoloipoPoso=0,this.today=new Date,this.yearRange=(0,a.ug)(50,50)}ngOnInit(){this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(n=>{n&&(this.translation=n),(0,a.RA)(this.cdr)}),this.diakanonismoiSrv.getDiakanonismous().pipe((0,b.w)(n=>n?(this.model=n,this.modelFiltered=(0,a.p$)(this.model),this.model.forEach(i=>{this.totalSinolikoPoso+=i.sinolikoPoso,this.totalEispraxthenPoso+=i.eispraxthen,this.totalYpoloipoPoso+=i.ypoloipo}),this._orderDiakanonismous(this.modelFiltered),this.diakanonismoiSrv.getXreoseisSelections()):(0,I.of)(!1))).subscribe(n=>{n?(this.xreoseisSelections=n,this.xreoseisSelections=this.xreoseisSelections.filter(i=>i.synolo>0),this.isLoading=!1):this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2."),(0,a.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSearch(){this.isLoading=!0,this.modelFiltered=(0,a.p$)(this.model);let n=[];if(this.katastasiFilter){let i=this.modelFiltered.filter(e=>e.katastatsiPerigrafi.toLowerCase().includes(this.katastasiFilter.toLowerCase()));i&&i.length&&i.forEach(e=>{n.push(e)})}if(this.diakanonismosDateRange){let i=this.modelFiltered.filter(e=>(0,J.Z)(new Date(e.hmerominia),{start:new Date(this.diakanonismosDateRange[0]),end:new Date(this.diakanonismosDateRange[1])}));i&&i.length&&i.forEach(e=>{n.push(e)})}this.modelFiltered=N.intersection(n),this.isLoading=!1,(0,a.RA)(this.cdr)}onClearSearch(){this.modelFiltered=(0,a.p$)(this.model),this.diakanonismosDateRange=null,(0,a.RA)(this.cdr)}onCreateNewAitisiDiakanonismou(){this.isAddingNewDiakanonismo=!0,(0,a.RA)(this.cdr)}onOristikopoiisiAitisis(){this.isAddingNewDiakanonismo=!1,(0,a.RA)(this.cdr)}_orderDiakanonismous(n){this.isLoading=!0,(0,a.RA)(this.cdr),n=n.sort(function(i,e){return i.hmerominia!=e.hmerominia?new Date(e.hmerominia).getTime()-new Date(i.hmerominia).getTime():+e.aa-+i.aa}),this.isLoading=!1,(0,a.RA)(this.cdr)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(_),t.Y36(C.g),t.Y36(a.MJ),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diakanonismoi-list"]],inputs:{isAuthorized:"isAuthorized"},decls:31,vars:49,consts:[["class","d-flex justify-content-end",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","diakanonismosPerigrafi"],["name","diakanonismosPerigrafi","type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","diakanonismoDateRange"],["name","diakanonismoDateRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","touchUI","ngModel","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","me-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["appendTo","body","resizable","false","modal","true",3,"header","visible","draggable","closable","visibleChange"],[3,"xreoseisSelections","oristikopoiisi",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-plus","fa-fw"],["severity","warn",3,"text","styleClass"],[1,"fixed-width-col-40"],[1,"fixed-width-col-100"],[1,"fixed-width-col-60"],[1,"fixed-width-col-120"],[1,"fixed-width-col-40","text-end"],[1,"p-column-title"],[1,"fixed-width-col-100","text-center"],[1,"fixed-width-col-60","text-end"],[1,"fixed-width-col-120","text-end"],["colspan","7"],["colspan","3",1,"fixed-width-col-240"],[3,"xreoseisSelections","oristikopoiisi"]],template:function(n,i){1&n&&(t.YNc(0,B,5,3,"div",0),t.YNc(1,P,1,2,"p-message",1),t.TgZ(2,"p-panel",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(r){return i.katastasiFilter=r}),t.qZA()(),t.TgZ(10,"div",5)(11,"label",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"p-calendar",9),t.NdJ("ngModelChange",function(r){return i.diakanonismosDateRange=r}),t.qZA()()(),t.TgZ(15,"div",10)(16,"button",11),t.NdJ("click",function(){return i.onSearch()}),t._UZ(17,"span",12),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",13),t.NdJ("click",function(){return i.onClearSearch()}),t._UZ(21,"span",14),t._uU(22),t.ALo(23,"translate"),t.qZA()()()(),t.TgZ(24,"p-table",15),t.YNc(25,$,22,21,"ng-template",16),t.YNc(26,z,40,46,"ng-template",17),t.YNc(27,H,4,3,"ng-template",18),t.YNc(28,X,20,22,"ng-template",19),t.qZA(),t.TgZ(29,"p-dialog",20),t.NdJ("visibleChange",function(r){return i.isAddingNewDiakanonismo=r}),t.YNc(30,V,1,1,"app-diakanonismoi-create",21),t.qZA()),2&n&&(t.Q6J("ngIf",i.xreoseisSelections&&i.xreoseisSelections.length>0&&!i.isLoading),t.xp6(1),t.Q6J("ngIf",!(i.model&&0!==i.model.length||i.isLoading)),t.xp6(1),t.Q6J("header",null==i.translation?null:i.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),t.xp6(5),t.Oqu(t.lcZ(8,39,null==i.translation?null:i.translation.egwebapps.egrStatus)),t.xp6(2),t.Q6J("placeholder",null==i.translation?null:i.translation.egwebapps.egrStatus)("ngModel",i.katastasiFilter),t.xp6(3),t.Oqu(t.lcZ(13,41,null==i.translation?null:i.translation.egwebapps.egrDate)),t.xp6(2),t.Akn(t.DdM(47,W)),t.Q6J("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("touchUI",!0)("ngModel",i.diakanonismosDateRange),t.xp6(4),t.hij(" ",t.lcZ(19,43,null==i.translation?null:i.translation.egwebapps.egrSearchBtn)," "),t.xp6(4),t.hij(" ",t.lcZ(23,45,null==i.translation?null:i.translation.egwebapps.egrClearBtn)," "),t.xp6(2),t.Q6J("value",i.modelFiltered)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",i.isLoading)("totalRecords",null==i.modelFiltered?null:i.modelFiltered.length),t.xp6(5),t.Akn(t.DdM(48,K)),t.Q6J("header",null==i.translation?null:i.translation.diakanonismoi.addNew)("visible",i.isAddingNewDiakanonismo)("draggable",!1)("closable",!0),t.xp6(1),t.Q6J("ngIf",i.isAddingNewDiakanonismo))},directives:[u.O5,Z.q,v.s,p._Y,p.JL,p.F,p.Fj,p.JJ,p.On,j.f,E.iA,Q.jx,Y.V,x],pipes:[m.X$,u.uU,u.H9],encapsulation:2,changeDetection:0}),o})();var G=l(6194),tt=l(394),L=l(3725),nt=l(1886);function it(o,s){if(1&o&&t._UZ(0,"p-message",4),2&o){const n=t.oxw();t.Q6J("text",null==n.translation?null:n.translation.egwebapps.egwebappsLoginMesg)}}function ot(o,s){if(1&o&&(t.TgZ(0,"p-panel",7),t.ALo(1,"translate"),t._UZ(2,"div",8),t.ALo(3,"decodeHtmlString"),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("header",t.lcZ(1,4,null==n.translation?null:n.translation.egwebapps.information))("styleClass","tab-msg mb-3")("toggleable",!0),t.xp6(2),t.Q6J("innerHTML",t.lcZ(3,6,n.tabMsg),t.oJD)}}function et(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"p-tabView",9),t.NdJ("onChange",function(e){return t.CHM(n),t.oxw(2).onTabChanged(e)}),t.TgZ(1,"p-tabPanel",10),t._UZ(2,"app-diakanonismoi-list"),t.qZA()()}if(2&o){const n=t.oxw(2);t.Q6J("activeIndex",n.index),t.xp6(1),t.Q6J("header",null==n.translation?null:n.translation.egwebapps.history)}}function at(o,s){if(1&o&&(t.ynx(0),t.YNc(1,ot,4,8,"p-panel",5),t.YNc(2,et,3,2,"p-tabView",6),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isAuthorized&&n.tabMsg&&""!==n.tabMsg),t.xp6(1),t.Q6J("ngIf",n.isAuthorized)}}const st=[{path:"",component:(()=>{class o{constructor(n,i,e,r,pt,ut){this.oidcSecuritySrv=n,this.appCacheSv=i,this.location=e,this.router=r,this.route=pt,this.cdr=ut,this.onDestroy=new k.x,this.afmNotFound=!1,this.index=0,this.selectedLang="el"}ngOnInit(){this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(n=>{n&&(this.translation=n),(0,a.RA)(this.cdr)}),this.appCacheSv.selectedLang$.pipe((0,d.R)(this.onDestroy)).subscribe(n=>{n&&(this.selectedLang=n),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.diakanonismoi_tab_info_en&&""!=AppConfOptions.diakanonismoi_tab_info_en?this.tabMsg=AppConfOptions.diakanonismoi_tab_info_en:AppConfOptions.diakanonismoi_tab_info&&""!=AppConfOptions.diakanonismoi_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.diakanonismoi_tab_info),(0,a.RA)(this.cdr)}),this.oidcSecuritySrv.isAuthenticated$.pipe((0,b.w)(n=>(this.isAuthorized=null!=n&&n.isAuthenticated,this.oidcSecuritySrv.userData$))).subscribe(n=>{n&&n.userData&&(!n.userData.tin||(0,a.Ew)(n.userData.tin))&&1==AppConfOptions.diakanonismoi_afm_required&&(this.afmNotFound=!0),(0,a.RA)(this.cdr)}),this.index="create"===this.route.children[0].snapshot.url[0].path?1:0,(0,a.RA)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(n){this.router.navigate(0==n.index?["./list"]:["./create"],{relativeTo:this.route})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(G.J_),t.Y36(C.g),t.Y36(u.Ye),t.Y36(c.F0),t.Y36(c.gz),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diakanonismoi-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:5,vars:4,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[3,"afmNotFound"],[4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"]],template:function(n,i){1&n&&(t.TgZ(0,"h3",0),t._uU(1),t.qZA(),t.YNc(2,it,1,1,"p-message",1),t._UZ(3,"app-afmnotfound",2),t.YNc(4,at,3,2,"ng-container",3)),2&n&&(t.xp6(1),t.Oqu(null==i.translation?null:i.translation.menu.diakanonismoiMenuItem),t.xp6(1),t.Q6J("ngIf",!i.isAuthorized),t.xp6(1),t.Q6J("afmNotFound",i.afmNotFound),t.xp6(1),t.Q6J("ngIf",!i.afmNotFound))},directives:[u.O5,Z.q,tt.d,v.s,L.xf,L.x4,D],pipes:[m.X$,nt.o],encapsulation:2,changeDetection:0}),o})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:D},{path:"create",component:x}]}];let lt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(st)],c.Bz]}),o})(),rt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[_],imports:[[w.m,T.IJ,lt,m.aw.forChild()]]}),o})()}}]);