"use strict";(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[978],{6978:(mn,y,l)=>{l.r(y),l.d(y,{DiakanonismoiModule:()=>pn});var T=l(2953),m=l(6188),w=l(5782),c=l(9197),n=l(4650),a=l(2346),k=l(7579),d=l(2722),h=(()=>{return(o=h||(h={})).xreosiMode="\u0395\u03af\u03b4\u03bf\u03c2 \u03a7\u03c1\u03b5\u03ce\u03c3\u03b5\u03c9\u03bd",o.arithmosDoseon="\u0391\u03c1\u03b9\u03b8\u03bc\u03cc\u03c2 \u0394\u03cc\u03c3\u03b5\u03c9\u03bd",h;var o})(),g=(()=>{return(o=g||(g={})).xreosiMode="Debits Type",o.arithmosDoseon="Instalments Count",g;var o})(),f=l(4004),A=l(262),S=l(529);let C=(()=>{class o{constructor(t,i){this.http=t,this.toasterSrv=i,AppConfOptions.finance_api?this.apiUrl=(0,a.Qj)(AppConfOptions.finance_api)+"/api/profile/ofeiletis":AppConfOptions.epayments_api&&(this.apiUrl=(0,a.Qj)(AppConfOptions.epayments_api)+"/api/profile/ofeiletis")}getDiakanonismous(){return this.http.get(`${this.apiUrl}/diakanonismoi`).pipe((0,f.U)(i=>i),(0,A.K)(i=>(0,a.Zj)(i,this.toasterSrv)))}getAitisiDiakanonismouStatus(t){return this.http.post(`${this.apiUrl}/diakanonismoi/info`,t).pipe((0,f.U)(e=>e),(0,A.K)(e=>(0,a.Zj)(e,this.toasterSrv)))}oristikopoiisiDiakanonismou(t){return this.http.post(`${this.apiUrl}/diakanonismoi`,t).pipe((0,f.U)(e=>e),(0,A.K)(e=>(0,a.Zj)(e,this.toasterSrv)))}getXreoseisSelections(){return this.http.get(`${this.apiUrl}/diakanonismoi/xreoseisSelections`).pipe((0,f.U)(i=>i),(0,A.K)(i=>(0,a.Zj)(i,this.toasterSrv)))}}return o.\u0275fac=function(t){return new(t||o)(n.LFG(S.eN),n.LFG(a.MJ))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac}),o})();var Z=l(2622),u=l(6895),p=l(4006),U=l(723),_=l(2665);const M=["diakanonismosForm"];function O(o,s){if(1&o&&(n.TgZ(0,"div",14)(1,"h5",15),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"p",16)(5,"span",17),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"span",18),n._uU(9),n.ALo(10,"currency"),n.qZA()(),n.TgZ(11,"p",16)(12,"span",17),n._uU(13),n.ALo(14,"translate"),n.qZA(),n.TgZ(15,"span",18),n._uU(16),n.ALo(17,"currency"),n.qZA()(),n.TgZ(18,"p",16)(19,"span",17),n._uU(20),n.ALo(21,"translate"),n.qZA(),n.TgZ(22,"span",18),n._uU(23),n.ALo(24,"currency"),n.qZA()()()),2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,7,null==t.translation?null:t.translation.diakanonismoi.initialDebits)),n.xp6(4),n.hij("",n.lcZ(7,9,null==t.translation?null:t.translation.diakanonismoi.amountRemaining),":"),n.xp6(3),n.Oqu(n.gM2(10,11,t.selectedEidosXreosis.ypoloipoKatharo,"\u20ac","symbol","1.2")),n.xp6(4),n.hij("",n.lcZ(14,16,null==t.translation?null:t.translation.egwebapps.egrOngoingCharges),":"),n.xp6(3),n.Oqu(n.gM2(17,18,t.selectedEidosXreosis.prosafksiseis,"\u20ac","symbol","1.2")),n.xp6(4),n.hij("",n.lcZ(21,23,null==t.translation?null:t.translation.egwebapps.egrTotalCost),":"),n.xp6(3),n.Oqu(n.gM2(24,25,t.selectedEidosXreosis.synolo,"\u20ac","symbol","1.2"))}}function R(o,s){if(1&o&&n._UZ(0,"p-message",19),2&o){const t=n.oxw();n.Q6J("styleClass","mt-2 form-msgs")("escape",!1)("text",t.formErrorsMsg)}}function F(o,s){if(1&o&&(n.TgZ(0,"li"),n._uU(1),n.qZA()),2&o){const t=s.$implicit;n.xp6(1),n.hij(" ",t," ")}}function q(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div",20)(1,"h5",21),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.ALo(6,"translate"),n.TgZ(7,"span",22),n._uU(8),n.ALo(9,"currency"),n.qZA()(),n.TgZ(10,"ul")(11,"li",23),n._uU(12),n.ALo(13,"translate"),n.TgZ(14,"span",24),n._uU(15),n.ALo(16,"date"),n.qZA()(),n.YNc(17,F,2,1,"li",25),n.qZA(),n._UZ(18,"p-message",26),n.ALo(19,"translate"),n.TgZ(20,"button",27),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.onOristikopoiisiDiakanonismou())}),n._UZ(21,"span",28),n._uU(22),n.ALo(23,"translate"),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,9,null==t.translation?null:t.translation.diakanonismoi.formulateSettlement)),n.xp6(3),n.hij("",n.lcZ(6,11,null==t.translation?null:t.translation.diakanonismoi.totalCostAfter),": "),n.xp6(3),n.Oqu(n.gM2(9,13,null==t.oikonomikiResponse||null==t.oikonomikiResponse.model?null:t.oikonomikiResponse.model.sinolikoPoso,"\u20ac","symbol","1.2")),n.xp6(4),n.hij("",n.lcZ(13,18,null==t.translation?null:t.translation.diakanonismoi.firstInstalmentExpire),": "),n.xp6(3),n.hij("",n.xi3(16,20,null==t.oikonomikiResponse||null==t.oikonomikiResponse.entry?null:t.oikonomikiResponse.entry.hmLixisProtisDosis,"dd/LL/yyyy"),"*"),n.xp6(2),n.Q6J("ngForOf",t.oikonomikiResponse.entry.doseisInfo),n.xp6(1),n.Q6J("styleClass","mb-2")("text",n.lcZ(19,23,null==t.translation?null:t.translation.diakanonismoi.info)),n.xp6(4),n.hij(" ",n.lcZ(23,25,null==t.translation?null:t.translation.egwebapps.egrSubmit)," ")}}let x=(()=>{class o{constructor(t,i,e,r){this.diakanonismoiSrv=t,this.appCacheSv=i,this.toasterSrv=e,this.cdr=r,this.oristikopoiisi=new n.vpe,this.onDestroy=new k.x,this.isFormSubmitted=!1,this.isLoading=!1}ngOnInit(){this.model={xreoseisSelectionMode:0},this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t),(0,a.RA)(this.cdr)}),this.appCacheSv.selectedLang$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.selectedLang=t),this.formDictionaryEnum="el"==this.selectedLang?h:g,(0,a.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSubmit(){this.isFormSubmitted=!0,this.formErrorsMsg=null,(0,a.RA)(this.cdr),this.isFormSubmitted&&this.diakanonismosForm.valid?(this.isLoading=!0,(0,a.RA)(this.cdr),this.diakanonismoiSrv.getAitisiDiakanonismouStatus(this.model).subscribe(t=>{t&&1==t.statusCode?(this.oikonomikiResponse=t,this.model.infoHash=this.oikonomikiResponse.entry.infoHash):(2==t.statusCode||3==t.statusCode)&&(t.responseMetadata.metadata.hasOwnProperty("REV_DEPTOR_NOT_FOUND")?(this.toasterSrv.showWarning("",this.translation.epayments.revDebtorNotFound),this.diakanonismosRequestMessage=this.translation.epayments.revDebtorNotFound):t.responseMetadata.metadata.hasOwnProperty("REV_MULTIPLE_DEPTORS_FOUND")?(this.toasterSrv.showError("error",this.translation.epayments.duplicateTin),this.diakanonismosRequestMessage=this.translation.epayments.duplicateTin):this.formErrorsMsg=t.message),this.isLoading=!1,(0,a.RA)(this.cdr)})):(this.formErrorsMsg=(0,a.CD)(this.diakanonismosForm,this.formDictionaryEnum,""),(0,a.RA)(this.cdr))}onSelectedEidosXreoseonChanged(t){this.selectedEidosXreosis=this.xreoseisSelections.filter(i=>i.mode==t.target.value)[0],(0,a.RA)(this.cdr)}onOristikopoiisiDiakanonismou(){this.isLoading=!0,(0,a.RA)(this.cdr),this.diakanonismoiSrv.oristikopoiisiDiakanonismou(this.model).subscribe(t=>{t&&t.statusCode===a.WE.Ok?this.toasterSrv.showSuccess("",this.translation.diakanonismoi.finalised):this.toasterSrv.showError("",this.translation.diakanonismoi.finaliseError),this.isLoading=!1,(0,a.RA)(this.cdr),this.oristikopoiisi.emit(!0)})}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(C),n.Y36(Z.g),n.Y36(a.MJ),n.Y36(n.sBO))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-diakanonismoi-create"]],viewQuery:function(t,i){if(1&t&&n.Gf(M,5),2&t){let e;n.iGM(e=n.CRH())&&(i.diakanonismosForm=e.first)}},inputs:{xreoseisSelections:"xreoseisSelections"},outputs:{oristikopoiisi:"oristikopoiisi"},decls:29,vars:30,consts:[[1,"form"],["diakanonismosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-6"],["name","xreosiMode","bindLabel","perigrafi","bindValue","mode",1,"ontop-select",2,"flex","1",3,"appendTo","searchable","virtualScroll","clearable","items","ngModel","ngModelChange"],[1,"validation-msg","text-danger","pt-1",3,"hidden"],["name","arithmosDoseon","placeholder","1","type","number","required","",1,"form-control",3,"ngModel","ngModelChange"],["arithmosDoseonInput","ngModel"],["class","my-2",4,"ngIf"],["type","button",1,"btn","btn-info","btn-sm","d-block","mx-auto",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-calculator"],["severity","error",3,"styleClass","escape","text",4,"ngIf"],[3,"condition","customClass"],["class","col-12 py-3 bg-white debits-info_left",4,"ngIf"],[1,"my-2"],[1,"text-primary","font-weight-bold"],[1,"mb-0"],[1,"me-1","d-inline-block",2,"width","200px"],[1,"totalPoso",2,"width","220px"],["severity","error",3,"styleClass","escape","text"],[1,"col-12","py-3","bg-white","debits-info_left"],[1,"text-info","font-weight-bold"],[1,"totalPoso"],[1,"font-weight-bold"],[1,"text-danger"],[4,"ngFor","ngForOf"],["severity","warn",3,"styleClass","text"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"far","fa-save"]],template:function(t,i){if(1&t&&(n.TgZ(0,"form",0,1)(2,"div",2)(3,"div",3)(4,"label"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"ng-select",4),n.NdJ("ngModelChange",function(r){return i.model.xreoseisSelectionMode=r}),n.qZA(),n.TgZ(8,"div",5),n._uU(9),n.ALo(10,"translate"),n.qZA()(),n.TgZ(11,"div",3)(12,"label"),n._uU(13),n.ALo(14,"translate"),n.qZA(),n.TgZ(15,"input",6,7),n.NdJ("ngModelChange",function(r){return i.model.arithmosDoseon=r}),n.qZA(),n.TgZ(17,"div",5),n._uU(18),n.ALo(19,"translate"),n.qZA()()(),n.YNc(20,O,25,30,"div",8),n.TgZ(21,"button",9),n.NdJ("click",function(){return i.onSubmit()}),n._UZ(22,"span",10),n._uU(23),n.ALo(24,"translate"),n.qZA(),n.YNc(25,R,1,3,"p-message",11),n.qZA(),n._UZ(26,"eg-loading",12)(27,"hr"),n.YNc(28,q,24,27,"div",13)),2&t){const e=n.MAs(1),r=n.MAs(16);n.xp6(5),n.hij("",n.lcZ(6,20,null==i.translation?null:i.translation.diakanonismoi.debitsType),"*"),n.xp6(2),n.Q6J("appendTo","body")("searchable",!0)("virtualScroll",!0)("clearable",!1)("items",i.xreoseisSelections)("ngModel",i.model.xreoseisSelectionMode),n.xp6(1),n.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&i.model.xreoseisSelectionMode),n.xp6(1),n.hij(" *",n.lcZ(10,22,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),n.xp6(4),n.hij("",n.lcZ(14,24,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount),"*"),n.xp6(2),n.Q6J("ngModel",i.model.arithmosDoseon),n.xp6(2),n.Q6J("hidden",!i.isFormSubmitted||i.isFormSubmitted&&r.valid),n.xp6(1),n.hij(" *",n.lcZ(19,26,null==i.translation?null:i.translation.egwebapps.egrRequiredField)," "),n.xp6(2),n.Q6J("ngIf",i.selectedEidosXreosis),n.xp6(1),n.Q6J("disabled",e.invalid),n.xp6(2),n.hij(" ",n.lcZ(24,28,null==i.translation?null:i.translation.diakanonismoi.calculateInstalments)," "),n.xp6(2),n.Q6J("ngIf",i.formErrorsMsg&&""!==i.formErrorsMsg),n.xp6(1),n.Q6J("condition",i.isLoading)("customClass","egr-load-small"),n.xp6(2),n.Q6J("ngIf",i.oikonomikiResponse&&i.oikonomikiResponse.entry&&i.oikonomikiResponse.entry.doseisInfo&&!i.isLoading)}},dependencies:[u.sg,u.O5,p._Y,p.Fj,p.wV,p.JJ,p.JL,p.Q7,p.On,p.F,U.w9,a.IE,_.q,u.H9,u.uU,m.X$],encapsulation:2,changeDetection:0}),o})();var J=l(2215),N=l(7489),I=l(9646),b=l(3900),j=l(3534),E=l(805),Q=l(585),Y=l(1493),v=l(9764);function B(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"div",22)(1,"button",23),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.onCreateNewAitisiDiakanonismou())}),n._UZ(2,"span",24),n._uU(3),n.ALo(4,"translate"),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(3),n.hij(" ",n.lcZ(4,1,null==t.translation?null:t.translation.diakanonismoi.addNew)," ")}}function P(o,s){if(1&o&&n._UZ(0,"p-message",25),2&o){const t=n.oxw();n.Q6J("text",null==t.translation?null:t.translation.diakanonismoi.noSettlementsFound)("styleClass","mb-2")}}function $(o,s){if(1&o&&(n.TgZ(0,"tr")(1,"th",26),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"th",27),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"th",27),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th",28),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"th",29),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.TgZ(16,"th",29),n._uU(17),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"th",29),n._uU(20),n.ALo(21,"translate"),n.qZA()()),2&o){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,7,null==t.translation?null:t.translation.egwebapps.egrAA)),n.xp6(3),n.Oqu(n.lcZ(6,9,null==t.translation?null:t.translation.egwebapps.egrStatus)),n.xp6(3),n.Oqu(n.lcZ(9,11,null==t.translation?null:t.translation.egwebapps.egrDate)),n.xp6(3),n.Oqu(n.lcZ(12,13,null==t.translation?null:t.translation.diakanonismoi.instalmentsCount)),n.xp6(3),n.Oqu(n.lcZ(15,15,null==t.translation?null:t.translation.egwebapps.egrTotalCost)),n.xp6(3),n.Oqu(n.lcZ(18,17,null==t.translation?null:t.translation.diakanonismoi.amountReceived)),n.xp6(3),n.Oqu(n.lcZ(21,19,null==t.translation?null:t.translation.diakanonismoi.amountRemaining))}}function z(o,s){if(1&o&&(n.TgZ(0,"tr")(1,"td",30)(2,"span",31),n._uU(3),n.ALo(4,"translate"),n.qZA(),n._uU(5),n.qZA(),n.TgZ(6,"td",27)(7,"span",31),n._uU(8),n.ALo(9,"translate"),n.qZA(),n._uU(10),n.qZA(),n.TgZ(11,"td",32)(12,"span",31),n._uU(13),n.ALo(14,"translate"),n.qZA(),n._uU(15),n.ALo(16,"date"),n.qZA(),n.TgZ(17,"td",33)(18,"span",31),n._uU(19),n.ALo(20,"translate"),n.qZA(),n._uU(21),n.qZA(),n.TgZ(22,"td",34)(23,"span",31),n._uU(24),n.ALo(25,"translate"),n.qZA(),n._uU(26),n.ALo(27,"currency"),n.qZA(),n.TgZ(28,"td",34)(29,"span",31),n._uU(30),n.ALo(31,"translate"),n.qZA(),n._uU(32),n.ALo(33,"currency"),n.qZA(),n.TgZ(34,"td",34)(35,"span",31),n._uU(36),n.ALo(37,"translate"),n.qZA(),n._uU(38),n.ALo(39,"currency"),n.qZA()()),2&o){const t=s.$implicit,i=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,14,null==i.translation?null:i.translation.egwebapps.egrAA)),n.xp6(2),n.hij(" ",t.aa," "),n.xp6(3),n.Oqu(n.lcZ(9,16,null==i.translation?null:i.translation.egwebapps.egrStatus)),n.xp6(2),n.hij(" ",t.katastatsiPerigrafi," "),n.xp6(3),n.Oqu(n.lcZ(14,18,null==i.translation?null:i.translation.egwebapps.egrDate)),n.xp6(2),n.hij(" ",n.xi3(16,20,t.hmerominia,"dd/LL/yyyy")," "),n.xp6(4),n.Oqu(n.lcZ(20,23,null==i.translation?null:i.translation.diakanonismoi.instalmentsCount)),n.xp6(2),n.hij(" ",t.arithmosDoseon," "),n.xp6(3),n.Oqu(n.lcZ(25,25,null==i.translation?null:i.translation.egwebapps.egrTotalCost)),n.xp6(2),n.hij(" ",n.gM2(27,27,t.sinolikoPoso,"\u20ac","symbol","1.2")," "),n.xp6(4),n.Oqu(n.lcZ(31,32,null==i.translation?null:i.translation.diakanonismoi.amountReceived)),n.xp6(2),n.hij(" ",n.gM2(33,34,t.eispraxthen,"\u20ac","symbol","1.2")," "),n.xp6(4),n.Oqu(n.lcZ(37,39,null==i.translation?null:i.translation.diakanonismoi.amountRemaining)),n.xp6(2),n.hij(" ",n.gM2(39,41,t.ypoloipo,"\u20ac","symbol","1.2")," ")}}function H(o,s){if(1&o&&(n.TgZ(0,"tr")(1,"td",35),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&o){const t=n.oxw();n.xp6(2),n.hij(" ",n.lcZ(3,1,null==t.translation?null:t.translation.egwebapps.egrNoResultsFound)," ")}}function X(o,s){if(1&o&&(n.TgZ(0,"tr")(1,"td",36)(2,"strong"),n._uU(3),n.qZA()(),n.TgZ(4,"td",33)(5,"strong"),n._uU(6),n.ALo(7,"translate"),n.qZA()(),n.TgZ(8,"td",34)(9,"strong"),n._uU(10),n.ALo(11,"currency"),n.qZA()(),n.TgZ(12,"td",34)(13,"strong"),n._uU(14),n.ALo(15,"currency"),n.qZA()(),n.TgZ(16,"td",34)(17,"strong"),n._uU(18),n.ALo(19,"currency"),n.qZA()()()),2&o){const t=n.oxw();n.xp6(3),n.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==t.modelFiltered?null:t.modelFiltered.length,""),n.xp6(3),n.hij("",n.lcZ(7,5,null==t.translation?null:t.translation.egwebapps.egrTotalCost),":"),n.xp6(4),n.Oqu(n.gM2(11,7,t.totalSinolikoPoso,"\u20ac","symbol","1.2")),n.xp6(4),n.Oqu(n.gM2(15,12,t.totalEispraxthenPoso,"\u20ac","symbol","1.2")),n.xp6(4),n.Oqu(n.gM2(19,17,t.totalYpoloipoPoso,"\u20ac","symbol","1.2"))}}function V(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"app-diakanonismoi-create",37),n.NdJ("oristikopoiisi",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.onOristikopoiisiAitisis())}),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("xreoseisSelections",t.xreoseisSelections)}}const K=function(){return{width:"100%"}},G=function(){return{minWidth:"40vw"}};let D=(()=>{class o{constructor(t,i,e,r){this.diakanonismoiSrv=t,this.appCacheSv=i,this.toasterSrv=e,this.cdr=r,this.onDestroy=new k.x,this.modelFiltered=[],this.isLoading=!0,this.isAddingNewDiakanonismo=!1,this.diakanonismosDateRange=null,this.katastasiFilter=null,this.totalSinolikoPoso=0,this.totalEispraxthenPoso=0,this.totalYpoloipoPoso=0,this.today=new Date,this.yearRange=(0,a.ug)(50,50)}ngOnInit(){this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t),(0,a.RA)(this.cdr)}),this.diakanonismoiSrv.getDiakanonismous().pipe((0,b.w)(t=>t?(this.model=t,this.modelFiltered=(0,a.p$)(this.model),this.model.forEach(i=>{this.totalSinolikoPoso+=i.sinolikoPoso,this.totalEispraxthenPoso+=i.eispraxthen,this.totalYpoloipoPoso+=i.ypoloipo}),this._orderDiakanonismous(this.modelFiltered),this.diakanonismoiSrv.getXreoseisSelections()):(0,I.of)(!1))).subscribe(t=>{t?(this.xreoseisSelections=t,this.xreoseisSelections=this.xreoseisSelections.filter(i=>i.synolo>0),this.isLoading=!1):this.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd \u03c3\u03b1\u03c2."),(0,a.RA)(this.cdr)})}ngOnDestroy(){this.onDestroy.next(null)}onSearch(){this.isLoading=!0,this.modelFiltered=(0,a.p$)(this.model);let t=[];if(this.katastasiFilter){let i=this.modelFiltered.filter(e=>e.katastatsiPerigrafi.toLowerCase().includes(this.katastasiFilter.toLowerCase()));i&&i.length&&i.forEach(e=>{t.push(e)})}if(this.diakanonismosDateRange){let i=this.modelFiltered.filter(e=>(0,J.Z)(new Date(e.hmerominia),{start:new Date(this.diakanonismosDateRange[0]),end:new Date(this.diakanonismosDateRange[1])}));i&&i.length&&i.forEach(e=>{t.push(e)})}this.modelFiltered=N.intersection(t),this.isLoading=!1,(0,a.RA)(this.cdr)}onClearSearch(){this.modelFiltered=(0,a.p$)(this.model),this.diakanonismosDateRange=null,(0,a.RA)(this.cdr)}onCreateNewAitisiDiakanonismou(){this.isAddingNewDiakanonismo=!0,(0,a.RA)(this.cdr)}onOristikopoiisiAitisis(){this.isAddingNewDiakanonismo=!1,(0,a.RA)(this.cdr)}_orderDiakanonismous(t){this.isLoading=!0,(0,a.RA)(this.cdr),t=t.sort(function(i,e){return i.hmerominia!=e.hmerominia?new Date(e.hmerominia).getTime()-new Date(i.hmerominia).getTime():+e.aa-+i.aa}),this.isLoading=!1,(0,a.RA)(this.cdr)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(C),n.Y36(Z.g),n.Y36(a.MJ),n.Y36(n.sBO))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-diakanonismoi-list"]],inputs:{isAuthorized:"isAuthorized"},decls:31,vars:49,consts:[["class","d-flex justify-content-end",4,"ngIf"],["severity","warn",3,"text","styleClass",4,"ngIf"],[3,"header","styleClass"],[1,"form"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","diakanonismosPerigrafi"],["name","diakanonismosPerigrafi","type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","diakanonismoDateRange"],["name","diakanonismoDateRange","dateFormat","dd/mm/yy","placeholder","\u03b7\u03b7/\u03bc\u03bc/\u03c7\u03c7\u03c7\u03c7","selectionMode","range","appendTo","body",3,"baseZIndex","firstDayOfWeek","selectOtherMonths","monthNavigator","yearNavigator","yearRange","showIcon","showButtonBar","readonlyInput","touchUI","ngModel","ngModelChange"],[1,"form-buttons","d-flex","flex-wrap"],["type","button",1,"btn","btn-primary","btn-sm","me-1",3,"click"],["aria-hidden","true",1,"fas","fa-search","fa-fw"],["type","button",1,"btn","btn-warning","btn-sm","text-white",3,"click"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["appendTo","body","resizable","false","modal","true",3,"header","visible","draggable","closable","visibleChange"],[3,"xreoseisSelections","oristikopoiisi",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-plus","fa-fw"],["severity","warn",3,"text","styleClass"],[1,"fixed-width-col-40"],[1,"fixed-width-col-100"],[1,"fixed-width-col-60"],[1,"fixed-width-col-120"],[1,"fixed-width-col-40","text-end"],[1,"p-column-title"],[1,"fixed-width-col-100","text-center"],[1,"fixed-width-col-60","text-end"],[1,"fixed-width-col-120","text-end"],["colspan","7"],["colspan","3",1,"fixed-width-col-240"],[3,"xreoseisSelections","oristikopoiisi"]],template:function(t,i){1&t&&(n.YNc(0,B,5,3,"div",0),n.YNc(1,P,1,2,"p-message",1),n.TgZ(2,"p-panel",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"label",6),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.TgZ(9,"input",7),n.NdJ("ngModelChange",function(r){return i.katastasiFilter=r}),n.qZA()(),n.TgZ(10,"div",5)(11,"label",8),n._uU(12),n.ALo(13,"translate"),n.qZA(),n.TgZ(14,"p-calendar",9),n.NdJ("ngModelChange",function(r){return i.diakanonismosDateRange=r}),n.qZA()()(),n.TgZ(15,"div",10)(16,"button",11),n.NdJ("click",function(){return i.onSearch()}),n._UZ(17,"span",12),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.TgZ(20,"button",13),n.NdJ("click",function(){return i.onClearSearch()}),n._UZ(21,"span",14),n._uU(22),n.ALo(23,"translate"),n.qZA()()()(),n.TgZ(24,"p-table",15),n.YNc(25,$,22,21,"ng-template",16),n.YNc(26,z,40,46,"ng-template",17),n.YNc(27,H,4,3,"ng-template",18),n.YNc(28,X,20,22,"ng-template",19),n.qZA(),n.TgZ(29,"p-dialog",20),n.NdJ("visibleChange",function(r){return i.isAddingNewDiakanonismo=r}),n.YNc(30,V,1,1,"app-diakanonismoi-create",21),n.qZA()),2&t&&(n.Q6J("ngIf",i.xreoseisSelections&&i.xreoseisSelections.length>0&&!i.isLoading),n.xp6(1),n.Q6J("ngIf",!(i.model&&0!==i.model.length||i.isLoading)),n.xp6(1),n.Q6J("header",null==i.translation?null:i.translation.egwebapps.egrSearchFilters)("styleClass","mb-3"),n.xp6(5),n.Oqu(n.lcZ(8,39,null==i.translation?null:i.translation.egwebapps.egrStatus)),n.xp6(2),n.Q6J("placeholder",null==i.translation?null:i.translation.egwebapps.egrStatus)("ngModel",i.katastasiFilter),n.xp6(3),n.Oqu(n.lcZ(13,41,null==i.translation?null:i.translation.egwebapps.egrDate)),n.xp6(2),n.Akn(n.DdM(47,K)),n.Q6J("baseZIndex",9999)("firstDayOfWeek",1)("selectOtherMonths",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",i.yearRange)("showIcon",!0)("showButtonBar",!0)("readonlyInput",!0)("touchUI",!0)("ngModel",i.diakanonismosDateRange),n.xp6(4),n.hij(" ",n.lcZ(19,43,null==i.translation?null:i.translation.egwebapps.egrSearchBtn)," "),n.xp6(4),n.hij(" ",n.lcZ(23,45,null==i.translation?null:i.translation.egwebapps.egrClearBtn)," "),n.xp6(2),n.Q6J("value",i.modelFiltered)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",i.isLoading)("totalRecords",null==i.modelFiltered?null:i.modelFiltered.length),n.xp6(5),n.Akn(n.DdM(48,G)),n.Q6J("header",null==i.translation?null:i.translation.diakanonismoi.addNew)("visible",i.isAddingNewDiakanonismo)("draggable",!1)("closable",!0),n.xp6(1),n.Q6J("ngIf",i.isAddingNewDiakanonismo))},dependencies:[u.O5,p._Y,p.Fj,p.JJ,p.JL,p.On,p.F,j.iA,E.jx,Q.f,Y.V,_.q,v.s,x,u.H9,u.uU,m.X$],encapsulation:2,changeDetection:0}),o})();var W=l(8930),nn=l(394),L=l(8783),tn=l(1886);function on(o,s){if(1&o&&n._UZ(0,"p-message",4),2&o){const t=n.oxw();n.Q6J("text",null==t.translation?null:t.translation.egwebapps.egwebappsLoginMesg)}}function en(o,s){if(1&o&&(n.TgZ(0,"p-panel",7),n.ALo(1,"translate"),n._UZ(2,"div",8),n.ALo(3,"decodeHtmlString"),n.qZA()),2&o){const t=n.oxw(2);n.Q6J("header",n.lcZ(1,4,null==t.translation?null:t.translation.egwebapps.information))("styleClass","tab-msg mb-3")("toggleable",!0),n.xp6(2),n.Q6J("innerHTML",n.lcZ(3,6,t.tabMsg),n.oJD)}}function an(o,s){if(1&o){const t=n.EpF();n.TgZ(0,"p-tabView",9),n.NdJ("onChange",function(e){n.CHM(t);const r=n.oxw(2);return n.KtG(r.onTabChanged(e))}),n.TgZ(1,"p-tabPanel",10),n._UZ(2,"app-diakanonismoi-list"),n.qZA()()}if(2&o){const t=n.oxw(2);n.Q6J("activeIndex",t.index),n.xp6(1),n.Q6J("header",null==t.translation?null:t.translation.egwebapps.history)}}function sn(o,s){if(1&o&&(n.ynx(0),n.YNc(1,en,4,8,"p-panel",5),n.YNc(2,an,3,2,"p-tabView",6),n.BQk()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.isAuthorized&&t.tabMsg&&""!==t.tabMsg),n.xp6(1),n.Q6J("ngIf",t.isAuthorized)}}const ln=[{path:"",component:(()=>{class o{constructor(t,i,e,r,un,dn){this.oidcSecuritySrv=t,this.appCacheSv=i,this.location=e,this.router=r,this.route=un,this.cdr=dn,this.onDestroy=new k.x,this.afmNotFound=!1,this.index=0,this.selectedLang="el"}ngOnInit(){this.appCacheSv.translation$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.translation=t),(0,a.RA)(this.cdr)}),this.appCacheSv.selectedLang$.pipe((0,d.R)(this.onDestroy)).subscribe(t=>{t&&(this.selectedLang=t),1==AppConfOptions.multilingual&&"el"!=this.selectedLang&&AppConfOptions.diakanonismoi_tab_info_en&&""!=AppConfOptions.diakanonismoi_tab_info_en?this.tabMsg=AppConfOptions.diakanonismoi_tab_info_en:AppConfOptions.diakanonismoi_tab_info&&""!=AppConfOptions.diakanonismoi_tab_info&&"el"==this.selectedLang&&(this.tabMsg=AppConfOptions.diakanonismoi_tab_info),(0,a.RA)(this.cdr)}),this.oidcSecuritySrv.isAuthenticated$.pipe((0,b.w)(t=>(this.isAuthorized=null!=t&&t.isAuthenticated,this.oidcSecuritySrv.getUserData()))).subscribe(t=>{t&&(!t.tin||(0,a.Ew)(t.tin))&&1==AppConfOptions.diakanonismoi_afm_required&&(this.afmNotFound=!0),(0,a.RA)(this.cdr)}),this.index="create"===this.route.children[0].snapshot.url[0].path?1:0,(0,a.RA)(this.cdr)}ngOnDestroy(){this.onDestroy.next(null)}onTabChanged(t){this.router.navigate(0==t.index?["./list"]:["./create"],{relativeTo:this.route})}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(W.J_),n.Y36(Z.g),n.Y36(u.Ye),n.Y36(c.F0),n.Y36(c.gz),n.Y36(n.sBO))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-diakanonismoi-layout"]],inputs:{isAuthorized:"isAuthorized"},decls:5,vars:4,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[3,"afmNotFound"],[4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"activeIndex","onChange",4,"ngIf"],[3,"header","styleClass","toggleable"],[3,"innerHTML"],[3,"activeIndex","onChange"],[3,"header"]],template:function(t,i){1&t&&(n.TgZ(0,"h3",0),n._uU(1),n.qZA(),n.YNc(2,on,1,1,"p-message",1),n._UZ(3,"app-afmnotfound",2),n.YNc(4,sn,3,2,"ng-container",3)),2&t&&(n.xp6(1),n.Oqu(null==i.translation?null:i.translation.menu.diakanonismoiMenuItem),n.xp6(1),n.Q6J("ngIf",!i.isAuthorized),n.xp6(1),n.Q6J("afmNotFound",i.afmNotFound),n.xp6(1),n.Q6J("ngIf",!i.afmNotFound))},dependencies:[u.O5,nn.d,L.xf,L.x4,_.q,v.s,D,tn.o,m.X$],encapsulation:2,changeDetection:0}),o})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:D},{path:"create",component:x}]}];let rn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[c.Bz.forChild(ln),c.Bz]}),o})(),pn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[C],imports:[w.m,T.IJ,rn,m.aw.forChild()]}),o})()}}]);