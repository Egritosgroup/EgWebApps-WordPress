(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{EumM:function(t,e,i){"use strict";i.r(e),i.d(e,"EidopoiitiriaModule",(function(){return B}));var n,s=i("fXoL"),r=i("1kSV"),a=i("AEAu"),o=i("PCNd"),c=i("tk/3"),d=i("3Pt+"),p=i("tyNb"),l=i("zazq"),u=i("XNiG"),f=i("LRne"),h=i("eIep"),m=i("1G5W"),g=i("Sy1n"),y=i("d08n"),b=i("/rUF"),v=i("iFvM");!function(t){t.paymentCode="\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2"}(n||(n={}));var O=function(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},j=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let S=class{constructor(t,e){this.http=t,this.toasterSrv=e,this.apiUrl=AppConfOptions.eidopoiitiria_api+"api/"}getEidopoiitiria(t){const e=this.apiUrl+"Atm/Eidopoiitiria";return this.http.post(e,t)}};S.ctorParameters=()=>[{type:c.b},{type:b.a}],S=O([Object(s.D)(),j("design:paramtypes",[c.b,b.a])],S);var C=function(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},w=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(t){return t&&t.__esModule?t:{default:t}};let M=class{constructor(t,e,i,s,r,a,o,c){this.oidcSecuritySrv=t,this.epaymentsSrv=e,this.eidopoiitiriaSrv=i,this.cdr=s,this.toasterSrv=r,this.route=a,this._parent=o,this._http=c,this.countriesList=[],this.onDestroy=new u.a,this.isLoading=!1,this.isLoadingInit=!1,this.isLoadingPaymentResponse=!1,this.isLoadingSimplifyModal=!1,this.isLoadingPaymentSettings=!1,this.isUserDataValid=!0,this.errorMessageProfile=null,this.isFormSubmitted=!1,this.formDictionaryEnum=n}ngOnInit(){this.assetsUrl=this._parent.assetsUrl;let t=AppConfOptions.epayments_api+"api/Banks/BankMessages";this.isLoadingInit=!0,Object(v.d)(this.cdr),this._http.get(t).pipe(Object(h.a)(t=>t?(this.oikonomikiBankMessages=t,this.oidcSecuritySrv.getUserData().pipe(Object(m.a)(this.onDestroy))):Object(f.a)(!1)),Object(h.a)(t=>t?(this.user=t,this._http.get(AuthConfOptions.stsServer+"/api/general/GetCountries")):Object(f.a)(!1)),Object(h.a)(t=>t?(this.countriesList=t,this.user.address_country_code&&""!=this.user.address_country_code&&(this.user.address_country_num=this.countriesList.find(t=>t.Alpha2Code==this.user.address_country_code).NumericCode.toString()),this.route.queryParams.pipe(Object(m.a)(this.onDestroy))):Object(f.a)(!1))).subscribe(t=>{if(t){let e=t;if(e.messagecode||e.paymentStatus){let t;t=e.messagecode?e.messagecode:e.paymentStatus,this.bankStatusMessage=this.oikonomikiBankMessages[t],this.bankStatusMessageClass="TRANSACTION_COMPLETED"==t||"APPROVED"==t?"success":"fail"}}else this.toasterSrv.showError("","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac...");this.isLoadingInit=!1,Object(v.d)(this.cdr)})}ngOnDestroy(){this.onDestroy.next()}isLoadingSimplifyModalChanged(t){this.isLoadingSimplifyModal=t,Object(v.d)(this.cdr)}isLoadingPaymentSettingsChanged(t){this.isLoadingPaymentSettings=t,Object(v.d)(this.cdr)}isUserDataValidChanged(t){this.isUserDataValid=t,Object(v.d)(this.cdr)}onSubmit(){if(this.isFormSubmitted=!0,this.formErrorsMsg=null,Object(v.d)(this.cdr),this.isFormSubmitted&&this.eidopoiitiriaForm.valid){this.model=null,this.isLoading=!0;let t={language:"el",kodikos:this.paymentCode};Object(v.d)(this.cdr),this.eidopoiitiriaSrv.getEidopoiitiria(t).subscribe(t=>{t&&t.isSuccessful?(this.model=t.result,this.model.paymentAmount=this.model.paymentAmount/100):(this.toasterSrv.showError("",t.errorDescription),this.errorMessage=t.errorDescription),this.isLoading=!1,Object(v.d)(this.cdr)})}else this.formErrorsMsg=Object(v.f)(this.eidopoiitiriaForm,this.formDictionaryEnum,""),Object(v.d)(this.cdr)}onClear(){this.isFormSubmitted=!1,this.paymentCode=null,this.model=null,Object(v.d)(this.cdr)}_payActions(){this.paymentRequestDto={tinRelated:this.user.tin,relatedCallbackUrl:AppConfOptions.application_url+"/eidopoiitiria/debits",billingAddressCity:this.user.address_city,billingAddressCountryCode:this.user.address_country_code,billingAddressZip:this.user.address_zip,billingAddress:this.user.address,userEmail:this.user.email,userPhone:this.user.phone_number,paymentMethodKey:"",entries:[]};let t={remittanceInfo:this.model.paymentCode,amount:this.model.paymentAmount,debtorName:this.user.family_name+" "+this.user.fathers_name+" "+this.user.mothers_name+" "+this.user.name,tin:this.user.tin,description:this.model.paymentCaption};this.paymentRequestDto.entries.push(t),this.isLoadingPaymentResponse=!0,this.paymentMethodsComp._addPaymentRequest(this.paymentRequestDto)}btnBankStatusMessageClicked(){this.bankStatusMessage=null}};M.ctorParameters=()=>[{type:l.c},{type:a.a},{type:S},{type:s.k},{type:b.a},{type:p.a},{type:g.a},{type:c.b}],C([Object(s.lb)("eidopoiitiriaForm"),w("design:type",d.l)],M.prototype,"eidopoiitiriaForm",void 0),C([Object(s.lb)(y.a,{static:!1}),w("design:type",y.a)],M.prototype,"paymentMethodsComp",void 0),C([Object(s.G)(),w("design:type",Boolean)],M.prototype,"isAuthorized",void 0),M=C([Object(s.n)({selector:"app-eidopoiitiria-debits",template:P(i("M/ON")).default,changeDetection:s.j.OnPush}),w("design:paramtypes",[l.c,a.a,S,s.k,b.a,p.a,g.a,c.b])],M);var R=function(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},_=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},A=function(t){return t&&t.__esModule?t:{default:t}};let k=class{constructor(){}ngOnInit(){}};k=R([Object(s.n)({selector:"app-eidopoiitiria-receipts",template:A(i("PKSQ")).default}),_("design:paramtypes",[])],k);var L=i("ofXK"),D=function(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},x=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},I=function(t){return t&&t.__esModule?t:{default:t}};let E=class{constructor(t,e,i,n){this.oidcSecuritySrv=t,this.location=e,this.router=i,this.route=n,this.onDestroy=new u.a,this.index=0,this.isUnauthorizedAllowed=AppConfOptions.unauthorized_allowed}ngOnInit(){this.oidcSecuritySrv.getIsAuthorized().subscribe(t=>{this.isAuthorized=t,AppConfOptions&&AppConfOptions.eidopoiitiria_tab_info&&""!=AppConfOptions.eidopoiitiria_tab_info&&(this.tabMsg=AppConfOptions.eidopoiitiria_tab_info)}),"receipts"===this.route.children[0].snapshot.url[0].path?this.index=1:this.index=0}ngOnDestroy(){this.onDestroy.next()}onTabChanged(t){0==t.index?this.router.navigate(["./debits"],{relativeTo:this.route}):this.router.navigate(["./receipts"],{relativeTo:this.route})}};E.ctorParameters=()=>[{type:l.c},{type:L.k},{type:p.d},{type:p.a}],D([Object(s.G)(),x("design:type",Boolean)],E.prototype,"isAuthorized",void 0),E=D([Object(s.n)({selector:"eidopoiitiria-app-layout",template:I(i("cZDI")).default}),x("design:paramtypes",[l.c,L.k,p.d,p.a])],E);var U=function(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const F=[{path:"",component:E,children:[{path:"",pathMatch:"full",redirectTo:"debits"},{path:"debits",component:M},{path:"receipts",component:k}]}];let z=class{};z=U([Object(s.L)({imports:[p.g.forChild(F)],exports:[p.g]})],z);var T=function(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let B=class{};B=T([Object(s.L)({declarations:[E,M,k],imports:[o.a,r.d,z],providers:[S,a.a]})],B)},"M/ON":function(t,e,i){"use strict";i.r(e),e.default='<div *ngIf="isLoadingInit"\r\n\t  class="bg-white"\r\n\t  style="width: 100%; height: 300px">\r\n\t<span class="d-flex justify-content-center align-items-center w-100 h-100">\r\n\t\t<i class="fas fa-circle-notch fa-3x fa-pulse"></i>\r\n\t</span>\r\n</div>\r\n\r\n<ng-container *ngIf="!isLoadingInit">\r\n\t<div *ngIf="bankStatusMessage"\r\n\t\t  class="bank-msg {{ bankStatusMessageClass }}">\r\n\t\t<button (click)=\'btnBankStatusMessageClicked()\'\r\n\t\t\t\t  class="close-bank-msg"><i class="fas fa-times"\r\n\t\t\t\taria-hidden="true"></i></button>\r\n\t\t{{ bankStatusMessage }}\r\n\t</div>\r\n\r\n\t<form #eidopoiitiriaForm="ngForm"\r\n\t\t\tclass="form">\r\n\t\t<div class="row">\r\n\t\t\t<div class="form-group col-12">\r\n\t\t\t\t<label>\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2*</label>\r\n\t\t\t\t<input name="paymentCode"\r\n\t\t\t\t\t\t #paymentCodeInput="ngModel"\r\n\t\t\t\t\t\t class="form-control"\r\n\t\t\t\t\t\t type="text"\r\n\t\t\t\t\t\t [(ngModel)]="paymentCode"\r\n\t\t\t\t\t\t required\r\n\t\t\t\t\t\t [disabled]="model" />\r\n\t\t\t\t<div [hidden]="!isFormSubmitted || (isFormSubmitted && paymentCode)"\r\n\t\t\t\t\t  class="text-danger pt-1">\r\n\t\t\t\t\t*\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf.\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="d-flex align-items-center justify-content-center flex-wrap">\r\n\t\t\t<button class="btn btn-primary mr-1"\r\n\t\t\t\t\t  type="button"\r\n\t\t\t\t\t  (click)="onSubmit()"\r\n\t\t\t\t\t  [disabled]="model"><span class="fas fa-search fa-fw"\r\n\t\t\t\t\t\taria-hidden="true"></span> \u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7\r\n\t\t\t</button>\r\n\t\t\t<button class="btn btn-warning"\r\n\t\t\t\t\t  type="button"\r\n\t\t\t\t\t  (click)="onClear()"><span class="fas fa-times fa-fw"\r\n\t\t\t\t\t\taria-hidden="true"></span> \u039a\u03b1\u03b8\u03b1\u03c1\u03b9\u03c3\u03bc\u03cc\u03c2\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div *ngIf="formErrorsMsg && formErrorsMsg != \'\'"\r\n\t\t\t  class="alert alert-danger form-msgs"\r\n\t\t\t  [innerHTML]="formErrorsMsg"></div>\r\n\t</form>\r\n\r\n\t<div *ngIf="isLoading"\r\n\t\t  class="bg-white"\r\n\t\t  style="width: 100%; height: 300px">\r\n\t\t<span class="d-flex justify-content-center align-items-center w-100 h-100">\r\n\t\t\t<i class="fas fa-circle-notch fa-3x fa-pulse"></i>\r\n\t\t</span>\r\n\t</div>\r\n\r\n\t<ng-container *ngIf="model && !isLoading">\r\n\t\t<h5 class="mt-4 text-center">\u0391\u03c0\u03bf\u03c4\u03b5\u03bb\u03ad\u03c3\u03bc\u03b1\u03c4\u03b1</h5>\r\n\t\t<div class="debits-info d-flex flex-wrap justify-content-between w-100 align-items-center">\r\n\t\t\t<div>\r\n\t\t\t\t<p *ngIf="model.paymentCode"\r\n\t\t\t\t\tclass="mb-0">\u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2: <span class="totalPoso">{{ model.paymentCode }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p *ngIf="model.paymentCaption"\r\n\t\t\t\t\tclass="mb-0">\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2: <span class="totalPoso">{{ model.paymentCaption }}</span></p>\r\n\t\t\t\t<p *ngIf="model.paymentAmount"\r\n\t\t\t\t\tclass="mb-0">\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2: <span\r\n\t\t\t\t\t\t\tclass="totalPoso">{{ model.paymentAmount | currency:\'\u20ac\':\'symbol\':\'1.2\' }}</span></p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="d-flex flex-wrap align-items-center justify-content-center">\r\n\t\t\t\t<button *ngIf="!isLoadingPaymentSettings"\r\n\t\t\t\t\t\t  id="btnPayDebits"\r\n\t\t\t\t\t\t  class="paymentBtn btn btn-info btn-sm mb-0 mr-1"\r\n\t\t\t\t\t\t  type="button"\r\n\t\t\t\t\t\t  (click)="_payActions()">\r\n\t\t\t\t\t<i class="fas fa-money-check fa-fw"\r\n\t\t\t\t\t\taria-hidden="true"></i> \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae \u039f\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd\r\n\t\t\t\t</button>\r\n\t\t\t\t<span *ngIf="isLoadingPaymentSettings"\r\n\t\t\t\t\t\tclass="d-flex justify-content-center align-items-center">\r\n\t\t\t\t\t<i class="fas fa-circle-notch fa-2x fa-pulse"></i>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="d-flex align-items-center justify-content-between">\r\n\t\t\t\t<img src="https://egritosgroup.gr/wp-content/uploads/2020/10/visa.jpg"\r\n\t\t\t\t\t  alt="visa"\r\n\t\t\t\t\t  width="40"\r\n\t\t\t\t\t  class="mr-1" />\r\n\t\t\t\t<img src="https://egritosgroup.gr/wp-content/uploads/2020/10/mastercard.jpg"\r\n\t\t\t\t\t  alt="mastercard"\r\n\t\t\t\t\t  width="40"\r\n\t\t\t\t\t  class="mr-1" />\r\n\t\t\t\t<img src="https://egritosgroup.gr/wp-content/uploads/2020/10/maestro.jpg"\r\n\t\t\t\t\t  alt="maestro"\r\n\t\t\t\t\t  width="40" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<app-payment-methods [assetsUrl]="assetsUrl"\r\n\t\t\t\t\t\t\t\t\t[isLoadingPaymentResponse]="isLoadingPaymentResponse"\r\n\t\t\t\t\t\t\t\t\t[user]="user"\r\n\t\t\t\t\t\t\t\t\t(createRequest)="_payActions()"\r\n\t\t\t\t\t\t\t\t\t(loadingSimplifyModal)="isLoadingSimplifyModalChanged($event)"\r\n\t\t\t\t\t\t\t\t\t(isLoadingPaymentSettings)="isLoadingPaymentSettingsChanged($event)"\r\n\t\t\t\t\t\t\t\t\t(isUserDataValid)="isUserDataValidChanged($event)">\r\n\t\t</app-payment-methods>\r\n\t</ng-container>\r\n</ng-container>\r\n'},PKSQ:function(t,e,i){"use strict";i.r(e),e.default=""},cZDI:function(t,e,i){"use strict";i.r(e),e.default='<div *ngIf="!isAuthorized && !isUnauthorizedAllowed"\r\n\t  class="screen-msg">\r\n\t<p class="alert alert-warning w-100 text-center p-1">\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c5\u03bd\u03b4\u03b5\u03b8\u03b5\u03af\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b7\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bd\u03b9\u03ba\u03ce\u03bd \u03c5\u03c0\u03b7\u03c1\u03b5\u03c3\u03b9\u03ce\u03bd</p>\r\n</div>\r\n\r\n<p-tabView *ngIf="isAuthorized || isUnauthorizedAllowed"\r\n\t\t\t  [activeIndex]="index"\r\n\t\t\t  (onChange)="onTabChanged($event)">\r\n\t<div *ngIf="tabMsg"\r\n\t\t  class="tab-msg"\r\n\t\t  [innerHTML]="tabMsg | decodeHtmlString"></div>\r\n\t<p-tabPanel header="\u0395\u03be\u03cc\u03c6\u03bb\u03b7\u03c3\u03b7 \u03a4\u03b1\u03c5\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1\u03c2 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2">\r\n\t\t<app-eidopoiitiria-debits></app-eidopoiitiria-debits>\r\n\t</p-tabPanel>\r\n\t\x3c!-- <p-tabPanel header="\u0399\u03c3\u03c4\u03bf\u03c1\u03b9\u03ba\u03cc \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ce\u03bd \u03a4\u03b1\u03c5\u03c4\u03bf\u03c4\u03ae\u03c4\u03c9\u03bd \u039f\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd">\r\n\t\t<app-eidopoiitiria-receipts></app-eidopoiitiria-receipts>\r\n\t</p-tabPanel> --\x3e\r\n</p-tabView>\r\n'}}]);