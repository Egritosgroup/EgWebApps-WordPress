!function(){function i(i){return function(i){if(Array.isArray(i))return e(i)}(i)||function(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function(i,t){if(!i)return;if("string"==typeof i)return e(i,t);var o=Object.prototype.toString.call(i).slice(8,-1);"Object"===o&&i.constructor&&(o=i.constructor.name);if("Map"===o||"Set"===o)return Array.from(i);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(i,t)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(i,e){(null==e||e>i.length)&&(e=i.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=i[t];return o}function t(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function o(i,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function s(i,e,t){return e&&o(i.prototype,e),t&&o(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function n(i,e){return(n=Object.setPrototypeOf||function(i,e){return i.__proto__=e,i})(i,e)}function a(i){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}();return function(){var t,o=l(i);if(e){var s=l(this).constructor;t=Reflect.construct(o,arguments,s)}else t=o.apply(this,arguments);return r(this,t)}}function r(i,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(i)}function l(i){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}(self.webpackChunkegritos_group_eg_web_apps=self.webpackChunkegritos_group_eg_web_apps||[]).push([[394],{62247:function(i){i.exports=function(i){return new Promise(function(t,o){var s=new FileReader,n=i.target.files;if(n.length>1)o(new DOMException("Only one file can be uploaded at a time"));else{s.onerror=function(){s.abort(),o(new DOMException("Problem parsing input file."))};var a=n[0];s.onload=function(i){var o=new Uint8Array(i.target.result),n=[];o.map(function(i){n.push(i.toString(16))});var r=n.join("").toUpperCase(),l=s.result.split(",")[1];a.base64=l,a.binaryFileType=e(r),t(a)},s.readAsDataURL(a)}})};var e=function(i){switch(i){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";default:return"Unknown filetype"}}},97394:function(e,o,r){"use strict";r.r(o),r.d(o,{KatastimataModule:function(){return te},PublicLibLoader:function(){return oe}});var l=r(91841),d=r(37716),u=r(68214),p=r(26215),c=r(25917),f=r(79765),m=r(35758),h=r(88002),g=r(5304),y=r(46782),b=r(43190),I=r(54655),v=r(74868),k=r(3379),x=r(44748),A=r(84439),Z=r(38583),P=r(33013),C=r(12332),_=r(45121),T=r(3679),w=r(86640),U=r(65835),q=r(39075),D=r(27745),S=r(24020);function M(i,e){1&i&&d._UZ(0,"p-message",7)}function O(i,e){if(1&i&&d._UZ(0,"p-message",8),2&i){var t=d.oxw();d.Q6J("severity",t.bankStatusMessageClass)("text",t.bankStatusMessage)("styleClass","my-1")}}function E(i,e){1&i&&(d.TgZ(0,"tr"),d.TgZ(1,"th",9),d._uU(2,"\u0391/\u0391"),d.qZA(),d.TgZ(3,"th",10),d._uU(4,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),d.qZA(),d.TgZ(5,"th",9),d._uU(6,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),d.qZA(),d.TgZ(7,"th",11),d._uU(8,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),d.qZA(),d.TgZ(9,"th",11),d._uU(10,"\u03a4\u03ad\u03bb\u03bf\u03c2"),d.qZA(),d.TgZ(11,"th",11),d._uU(12,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),d.qZA(),d.TgZ(13,"th",11),d._uU(14,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),d.qZA(),d.TgZ(15,"th",12),d._uU(16,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.qZA(),d.qZA())}function F(i,e){1&i&&d._UZ(0,"i",17)}function R(i,e){if(1&i&&(d.TgZ(0,"tr"),d.TgZ(1,"td",13),d.TgZ(2,"span",14),d._uU(3,"\u0391/\u0391"),d.qZA(),d._uU(4),d.qZA(),d.TgZ(5,"td",10),d.TgZ(6,"span",14),d._uU(7,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),d.qZA(),d._uU(8),d.qZA(),d.TgZ(9,"td",13),d.TgZ(10,"span",14),d._uU(11,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),d.qZA(),d.YNc(12,F,1,0,"i",15),d.qZA(),d.TgZ(13,"td",16),d.TgZ(14,"span",14),d._uU(15,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),d.qZA(),d._uU(16),d.ALo(17,"currency"),d.qZA(),d.TgZ(18,"td",16),d.TgZ(19,"span",14),d._uU(20,"\u03a4\u03ad\u03bb\u03bf\u03c2"),d.qZA(),d._uU(21),d.ALo(22,"currency"),d.qZA(),d.TgZ(23,"td",16),d.TgZ(24,"span",14),d._uU(25,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),d.qZA(),d._uU(26),d.ALo(27,"currency"),d.qZA(),d.TgZ(28,"td",16),d.TgZ(29,"span",14),d._uU(30,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf"),d.qZA(),d._uU(31),d.ALo(32,"currency"),d.qZA(),d.TgZ(33,"td",12),d.TgZ(34,"span",14),d._uU(35,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u0391\u03c0\u03cc\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"),d.qZA(),d._uU(36),d.qZA(),d.qZA()),2&i){var t=e.$implicit,o=e.rowIndex;d.xp6(4),d.hij(" ",o+1," "),d.xp6(4),d.hij(" ",t.dilosiCaption," "),d.xp6(4),d.Q6J("ngIf",t.midenikiDilosi),d.xp6(4),d.hij(" ",d.gM2(17,8,t.ypokeimenoPoso,"\u20ac","symbol","1.2")," "),d.xp6(5),d.hij(" ",d.gM2(22,13,t.telosPoso,"\u20ac","symbol","1.2")," "),d.xp6(5),d.hij(" ",d.gM2(27,18,t.prostimoPoso,"\u20ac","symbol","1.2")," "),d.xp6(5),d.hij(" ",d.gM2(32,23,t.sinolikoPoso,"\u20ac","symbol","1.2")," "),d.xp6(5),d.hij(" ",t.stoixeiaApodixis," ")}}function N(i,e){1&i&&(d.TgZ(0,"tr"),d.TgZ(1,"td",18),d._uU(2," \u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ad\u03c2. "),d.qZA(),d.qZA())}var L=function(i){return[i,"EUR","symbol","1.2-2","el"]};function J(i,e){if(1&i&&(d.TgZ(0,"tr"),d.TgZ(1,"td",19),d.TgZ(2,"strong"),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"td",16),d.TgZ(5,"strong"),d._uU(6),d.ALo(7,"currency"),d.qZA(),d.qZA(),d.TgZ(8,"td",16),d.TgZ(9,"strong"),d._uU(10),d.ALo(11,"currency"),d.qZA(),d.qZA(),d.TgZ(12,"td",16),d.TgZ(13,"strong"),d._uU(14),d.ALo(15,"currency"),d.qZA(),d.qZA(),d.TgZ(16,"td",16),d.TgZ(17,"strong"),d._uU(18),d.ALo(19,"currency"),d.qZA(),d.qZA(),d.TgZ(20,"td",12),d._uU(21,"\xa0"),d.qZA(),d.qZA()),2&i){var t=d.oxw();d.xp6(3),d.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==t.diloseisPayed?null:t.diloseisPayed.length,""),d.xp6(3),d.Oqu(d.G7q(7,5,d.VKq(29,L,t.sumYpokeimeno))),d.xp6(4),d.Oqu(d.G7q(11,11,d.VKq(31,L,t.sumTelos))),d.xp6(4),d.Oqu(d.G7q(15,17,d.VKq(33,L,t.sumProstimo))),d.xp6(4),d.Oqu(d.G7q(19,23,d.VKq(35,L,t.sumSinolo)))}}var Q=["dimotikosForosForm"];function Y(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"div",19),d.TgZ(1,"label"),d._uU(2,"\u03a0\u03bf\u03c3\u03bf\u03c3\u03c4\u03cc*"),d.qZA(),d.TgZ(3,"ng-select",20,21),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw(2).selectedPososto=i}),d.qZA(),d.TgZ(5,"div",9),d._uU(6," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),d.qZA(),d.qZA()}if(2&i){var o=d.oxw(2);d.xp6(3),d.Q6J("items",o.pososta)("searchable",!0)("clearable",!1)("ngModel",o.selectedPososto)("disabled",3==o.dilosi.statusId||4==o.dilosi.statusId||5==o.dilosi.statusId||7==o.dilosi.statusId||o.dilosi.oikothenId||o.dilosi.xrimatikosKatalogosEggrafesProstimoId||o.dilosi.xrimatikosKatalogosEggrafesTelosId),d.xp6(2),d.Q6J("hidden",!o.isFormSubmitted||"1"==o.onlinePaymentsSettingsCompany||o.isFormSubmitted&&"1"!=o.onlinePaymentsSettingsCompany&&o.selectedPososto&&""!=o.selectedPososto)}}function W(i,e){1&i&&(d.TgZ(0,"span"),d._uU(1,"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd"),d.qZA())}function j(i,e){1&i&&(d.TgZ(0,"span"),d._uU(1,"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7 \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1\u03c2 \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd"),d.qZA())}function B(i,e){if(1&i&&(d.TgZ(0,"div",26),d.TgZ(1,"a",27),d.ALo(2,"async"),d.ALo(3,"securePlg"),d._UZ(4,"i",28),d.qZA(),d.TgZ(5,"strong"),d._uU(6),d.qZA(),d._uU(7),d.TgZ(8,"small"),d._UZ(9,"i",29),d._uU(10),d.ALo(11,"date"),d.qZA(),d.qZA()),2&i){var t=e.$implicit,o=d.oxw(3);d.xp6(1),d.s9C("download",t.fileName),d.Q6J("href",d.lcZ(2,5,d.lcZ(3,7,o.katastimataApiUrl+"/api/DocDms/DownloadFile/"+t.dmsId)),d.LSH),d.xp6(5),d.Oqu(t.perigrafi),d.xp6(1),d.hij(" (",t.fileName,")\xa0 "),d.xp6(3),d.hij(" ",d.xi3(11,9,t.creationTime,"dd/MM/yyyy"),"")}}function H(i,e){if(1&i){var t=d.EpF();d.ynx(0),d.TgZ(1,"div",22),d.TgZ(2,"h5"),d._uU(3,"\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u0391\u03c1\u03c7\u03b5\u03af\u03b1"),d.qZA(),d.TgZ(4,"button",23),d.NdJ("click",function(){d.CHM(t);var i=d.oxw(2);return i.toggleEditFiles=!i.toggleEditFiles}),d._UZ(5,"i",24),d.YNc(6,W,2,0,"span",2),d.YNc(7,j,2,0,"span",2),d.qZA(),d.qZA(),d.YNc(8,B,12,12,"div",25),d.BQk()}if(2&i){var o=d.oxw(2);d.xp6(4),d.Q6J("disabled",3==o.dilosi.statusId||4==o.dilosi.statusId||5==o.dilosi.statusId||7==o.dilosi.statusId||o.dilosi.oikothenId||o.dilosi.xrimatikosKatalogosEggrafesProstimoId||o.dilosi.xrimatikosKatalogosEggrafesTelosId),d.xp6(2),d.Q6J("ngIf",!o.toggleEditFiles),d.xp6(1),d.Q6J("ngIf",o.toggleEditFiles),d.xp6(1),d.Q6J("ngForOf",o.dilosiFiles)}}function K(i,e){1&i&&d._UZ(0,"p-message",37)}function z(i,e){if(1&i){var t=d.EpF();d.ynx(0),d.YNc(1,K,1,0,"p-message",30),d.TgZ(2,"div",5),d.TgZ(3,"div",31),d.TgZ(4,"label",32),d._uU(5,"\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)*"),d.qZA(),d.TgZ(6,"input",33,34),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw(2).periodikiDilosiFPA=i})("change",function(i){return d.CHM(t),d.oxw(2).onFileChange(i,"periodikiDilosiFPA")}),d.qZA(),d.TgZ(8,"div",9),d._uU(9," *\u03a4\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),d.qZA(),d.qZA(),d.TgZ(10,"div",31),d.TgZ(11,"label",35),d._uU(12,"\u0395\u03c0\u03b9\u03c0\u03bb\u03ad\u03bf\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03bf (\u03a0.\u03c7. \u0399\u03c3\u03bf\u03b6\u03cd\u03b3\u03b9\u03bf)"),d.qZA(),d.TgZ(13,"input",36),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw(2).extraFile=i})("change",function(i){return d.CHM(t),d.oxw(2).onFileChange(i,"extraFile")}),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&i){var o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",o.toggleEditFiles),d.xp6(5),d.Q6J("ngModel",o.periodikiDilosiFPA)("required",!o.dilosiFiles||o.dilosiFiles&&0==o.dilosiFiles.length),d.xp6(2),d.Q6J("hidden",!o.isFormSubmitted||o.isFormSubmitted&&o.uploadedFiles&&o.uploadedFiles.periodikiDilosiFPA),d.xp6(5),d.Q6J("ngModel",o.extraFile)}}function V(i,e){1&i&&(d.TgZ(0,"span"),d._UZ(1,"span",38),d._uU(2," \u03a5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc\u03c2 \u03a0\u03bf\u03c3\u03ce\u03bd"),d.qZA())}function G(i,e){1&i&&(d.TgZ(0,"span"),d._UZ(1,"span",39),d._uU(2," \u03a5\u03c0\u03bf\u03b2\u03bf\u03bb\u03ae"),d.qZA())}function $(i,e){if(1&i&&d._UZ(0,"div",40),2&i){var t=d.oxw(2);d.Q6J("innerHTML",t.formErrorsMsg,d.oJD)}}function X(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"form",3,4),d.TgZ(2,"div",5),d.TgZ(3,"div",6),d.TgZ(4,"label"),d._uU(5,"\u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2*"),d.qZA(),d.TgZ(6,"ng-select",7,8),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw().dilosiCopy.dilosiId=i})("change",function(i){d.CHM(t);var e=d.oxw();return e.onSelectedDilosiChanged(i),e.isFormDirty=!0}),d.qZA(),d.TgZ(8,"div",9),d._uU(9," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),d.qZA(),d.qZA(),d.TgZ(10,"div",6),d.TgZ(11,"label"),d._uU(12,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),d.qZA(),d._UZ(13,"input",10),d.ALo(14,"date"),d.qZA(),d.TgZ(15,"div",11),d.TgZ(16,"p-checkbox",12),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw().dilosiCopy.isMideniki=i})("ngModelChange",function(){return d.CHM(t),d.oxw().onIsMidenikiChanged()}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"div",5),d.YNc(18,Y,7,6,"div",13),d.TgZ(19,"div",14),d.TgZ(20,"label"),d._uU(21,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc*"),d.qZA(),d.TgZ(22,"input",15,16),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw().dilosiCopy.ypokeimenoPoso=i})("ngModelChange",function(){return d.CHM(t),d.oxw().isFormDirty=!0}),d.qZA(),d.TgZ(24,"div",9),d._uU(25," *\u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf. "),d.qZA(),d.qZA(),d.qZA(),d.YNc(26,H,9,4,"ng-container",2),d.YNc(27,z,14,5,"ng-container",2),d._UZ(28,"hr"),d.TgZ(29,"button",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().onSubmit()}),d.YNc(30,V,3,0,"span",2),d.YNc(31,G,3,0,"span",2),d.qZA(),d.YNc(32,$,1,1,"div",18),d.qZA()}if(2&i){var o=d.MAs(7),s=d.MAs(23),n=d.oxw();d.xp6(6),d.Q6J("items",n.diloseisToPay)("searchable",!0)("clearable",!1)("ngModel",n.dilosiCopy.dilosiId)("disabled",3==n.dilosi.statusId||4==n.dilosi.statusId||5==n.dilosi.statusId||7==n.dilosi.statusId||n.dilosi.oikothenId||n.dilosi.xrimatikosKatalogosEggrafesProstimoId||n.dilosi.xrimatikosKatalogosEggrafesTelosId),d.xp6(2),d.Q6J("hidden",!n.isFormSubmitted||n.isFormSubmitted&&o.valid),d.xp6(5),d.Q6J("value",d.xi3(14,20,n.dilosiCopy.hmeromiaLixisDilosis,"dd/MM/yyyy")),d.xp6(3),d.Q6J("ngModel",n.dilosiCopy.isMideniki)("disabled",3==n.dilosi.statusId||4==n.dilosi.statusId||5==n.dilosi.statusId||7==n.dilosi.statusId||n.dilosi.oikothenId||n.dilosi.xrimatikosKatalogosEggrafesProstimoId||n.dilosi.xrimatikosKatalogosEggrafesTelosId),d.xp6(2),d.Q6J("ngIf","1"!=n.onlinePaymentsSettingsCompany),d.xp6(1),d.Q6J("ngClass","1"==n.onlinePaymentsSettingsCompany?"":"col-md-6"),d.xp6(3),d.Q6J("ngModel",n.dilosiCopy.ypokeimenoPoso)("disabled",3==n.dilosi.statusId||4==n.dilosi.statusId||5==n.dilosi.statusId||7==n.dilosi.statusId||n.dilosi.oikothenId||n.dilosi.xrimatikosKatalogosEggrafesProstimoId||n.dilosi.xrimatikosKatalogosEggrafesTelosId||n.dilosi.isMideniki),d.xp6(2),d.Q6J("hidden",!n.isFormSubmitted||n.isFormSubmitted&&s.valid),d.xp6(2),d.Q6J("ngIf",n.dilosiFiles&&n.dilosiFiles.length),d.xp6(1),d.Q6J("ngIf",n.toggleEditFiles||!n.dilosiFiles||n.dilosiFiles&&0==n.dilosiFiles.length),d.xp6(2),d.Q6J("disabled",3==n.dilosi.statusId||4==n.dilosi.statusId||5==n.dilosi.statusId||7==n.dilosi.statusId||n.dilosi.oikothenId||n.dilosi.xrimatikosKatalogosEggrafesProstimoId||n.dilosi.xrimatikosKatalogosEggrafesTelosId),d.xp6(1),d.Q6J("ngIf",!n.dilosiCopy.isMideniki&&"1"==n.onlinePaymentsSettingsCompany),d.xp6(1),d.Q6J("ngIf",n.dilosiCopy.isMideniki||"1"!=n.onlinePaymentsSettingsCompany),d.xp6(1),d.Q6J("ngIf",n.formErrorsMsg&&""!=n.formErrorsMsg)}}function ii(i,e){1&i&&(d.TgZ(0,"p",44),d.TgZ(1,"span",45),d._uU(2,"\u03a4\u03b1\u03c5\u03c4\u03cc\u03c4\u03b7\u03c4\u03b1 \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2 \u0394\u0399\u0391\u03a3:"),d.qZA(),d.qZA())}function ei(i,e){1&i&&(d.TgZ(0,"p",44),d.TgZ(1,"span",45),d._uU(2,"\u0397\u03bc\u03b5\u03c1\u03bf\u03bc\u03b7\u03bd\u03af\u03b1 \u039b\u03ae\u03be\u03b7\u03c2 \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2:"),d.qZA(),d.qZA())}function ti(i,e){if(1&i&&(d.TgZ(0,"p",44),d.TgZ(1,"span",47),d._uU(2),d.qZA(),d.qZA()),2&i){var t=d.oxw(2);d.xp6(2),d.Oqu(t.kodikosPliromis)}}function oi(i,e){if(1&i&&(d.TgZ(0,"p",44),d.TgZ(1,"span",47),d._uU(2),d.ALo(3,"date"),d.qZA(),d.qZA()),2&i){var t=d.oxw(2);d.xp6(2),d.Oqu(d.xi3(3,1,t.dilosiWebPaymentInfo.hmeromiaLixisPliromis,"dd/MM/yyyy"))}}function si(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"a",52),d.NdJ("click",function(i){return d.CHM(t),d.oxw(3).onOpenEktiposi(i)}),d._UZ(1,"span",53),d._uU(2," \u0395\u03ba\u03c4\u03cd\u03c0\u03c9\u03c3\u03b7 "),d.qZA()}if(2&i){var o=d.oxw(3);d.ekj("disabled",!!o.isFormDirty||null),d.Q6J("href",o.katastimataApiUrl+"/ViewReports/ReportDilosiTautotitaPliromisDias/"+o.dilosiWebPaymentInfo.dilosiId,d.LSH)}}function ni(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"div",49),d.YNc(1,si,3,3,"a",50),d.TgZ(2,"app-checkout",51),d.NdJ("onPayBtnClick",function(i){return d.CHM(t),d.oxw(2).onCreatePaymentRequest(i)}),d.qZA(),d.qZA()}if(2&i){var o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",o.kodikosPliromis&&""!=o.kodikosPliromis),d.xp6(1),d.Q6J("isPaymentFormValid",!o.isFormDirty)("doPaymentSubscription",o.onDoPaymentSubject.asObservable())("finApiUrl",o.financeApiUrl)}}var ai=function(i){return[i,"\u20ac","symbol","1.2","el"]};function ri(i,e){if(1&i&&(d.ynx(0),d.TgZ(1,"h4",41),d._uU(2,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u03a5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03bf\u03cd"),d.qZA(),d.TgZ(3,"div",42),d.TgZ(4,"div",43),d.TgZ(5,"div"),d.TgZ(6,"p",44),d.TgZ(7,"span",45),d._uU(8,"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),d.qZA(),d.qZA(),d.TgZ(9,"p",44),d.TgZ(10,"span",45),d._uU(11,"\u03a0\u03bf\u03c3\u03cc \u03a4\u03ad\u03bb\u03bf\u03c5\u03c2:"),d.qZA(),d.qZA(),d.TgZ(12,"p",44),d.TgZ(13,"span",45),d._uU(14,"\u039c\u03ae\u03bd\u03b5\u03c2 \u039a\u03b1\u03b8\u03c5\u03c3\u03c4\u03ad\u03c1\u03b7\u03c3\u03b7\u03c2:"),d.qZA(),d.qZA(),d.TgZ(15,"p",44),d.TgZ(16,"span",45),d._uU(17,"\u03a0\u03bf\u03c3\u03cc \u03a0\u03c1\u03bf\u03c3\u03c4\u03af\u03bc\u03bf\u03c5:"),d.qZA(),d.qZA(),d.TgZ(18,"p",44),d.TgZ(19,"span",45),d._uU(20,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03bf\u03c3\u03cc \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2:"),d.qZA(),d.qZA(),d.YNc(21,ii,3,0,"p",46),d.YNc(22,ei,3,0,"p",46),d.qZA(),d.TgZ(23,"div"),d.TgZ(24,"p",44),d.TgZ(25,"span",47),d._uU(26),d.qZA(),d.qZA(),d.TgZ(27,"p",44),d.TgZ(28,"span",47),d._uU(29),d.ALo(30,"currency"),d.qZA(),d.qZA(),d.TgZ(31,"p",44),d.TgZ(32,"span",47),d._uU(33),d.qZA(),d.qZA(),d.TgZ(34,"p",44),d.TgZ(35,"span",47),d._uU(36),d.ALo(37,"currency"),d.qZA(),d.qZA(),d.TgZ(38,"p",44),d.TgZ(39,"span",47),d._uU(40),d.ALo(41,"currency"),d.qZA(),d.qZA(),d.YNc(42,ti,3,1,"p",46),d.YNc(43,oi,4,4,"p",46),d.qZA(),d.qZA(),d.YNc(44,ni,3,4,"div",48),d.qZA(),d.BQk()),2&i){var t=d.oxw();d.xp6(21),d.Q6J("ngIf",t.kodikosPliromis&&t.dilosiWebPaymentInfo.paymentAmount>0),d.xp6(1),d.Q6J("ngIf",t.kodikosPliromis&&t.dilosiWebPaymentInfo.paymentAmount>0),d.xp6(4),d.Oqu(t.dilosiWebPaymentInfo.paymentCaption),d.xp6(3),d.Oqu(d.G7q(30,10,d.VKq(28,ai,t.dilosiWebPaymentInfo.telosPoso))),d.xp6(4),d.Oqu(t.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines),d.xp6(3),d.Oqu(d.G7q(37,16,d.VKq(30,ai,t.dilosiWebPaymentInfo.prostimoPoso))),d.xp6(4),d.Oqu(d.G7q(41,22,d.VKq(32,ai,t.dilosiWebPaymentInfo.paymentAmount))),d.xp6(2),d.Q6J("ngIf",t.kodikosPliromis&&t.dilosiWebPaymentInfo.paymentAmount>0),d.xp6(1),d.Q6J("ngIf",t.kodikosPliromis&&t.dilosiWebPaymentInfo.paymentAmount>0),d.xp6(1),d.Q6J("ngIf",t.dilosiWebPaymentInfo.paymentAmount>0)}}function li(i,e){if(1&i&&d._UZ(0,"p-message",12),2&i){var t=d.oxw();d.Q6J("severity",t.bankStatusMessageClass)("text",t.bankStatusMessage)("styleClass","mb-2")}}function di(i,e){1&i&&d.GkF(0)}function ui(i,e){if(1&i&&(d.TgZ(0,"div",13),d.YNc(1,di,1,0,"ng-container",14),d.qZA()),2&i){d.oxw();var t=d.MAs(10);d.xp6(1),d.Q6J("ngTemplateOutlet",t)}}function pi(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"th",15),d.TgZ(2,"p-checkbox",16),d.NdJ("ngModelChange",function(i){return d.CHM(t),d.oxw().isAllDebitsChecked=i})("onChange",function(){return d.CHM(t),d.oxw().onAllDebitsSelected()}),d.qZA(),d.qZA(),d.TgZ(3,"th",17),d._uU(4,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),d.qZA(),d.TgZ(5,"th",18),d._uU(6,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),d.qZA(),d.TgZ(7,"th",18),d._uU(8,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),d.qZA(),d.TgZ(9,"th",19),d._uU(10,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),d.qZA(),d.TgZ(11,"th",19),d._uU(12,"\u03a4\u03ad\u03bb\u03bf\u03c2"),d.qZA(),d.TgZ(13,"th",19),d._uU(14,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),d.qZA(),d.TgZ(15,"th",19),d._uU(16,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),d.qZA(),d.TgZ(17,"th",20),d._uU(18,"\xa0"),d.qZA(),d.qZA()}if(2&i){var o=d.oxw();d.xp6(2),d.Q6J("binary",!0)("ngModel",o.isAllDebitsChecked),d.xp6(15),d.Q6J("frozen",!0)}}function ci(i,e){1&i&&d._UZ(0,"i",30)}function fi(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td",21),d.TgZ(2,"span",22),d._uU(3,"\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae"),d.qZA(),d.TgZ(4,"p-checkbox",23),d.NdJ("ngModelChange",function(i){return d.CHM(t).$implicit.isChecked=i})("onChange",function(){return d.CHM(t),d.oxw()._calculateTotalAmounts()}),d.qZA(),d.qZA(),d.TgZ(5,"td",17),d.TgZ(6,"span",22),d._uU(7,"\u0394\u03ae\u03bb\u03c9\u03c3\u03b7"),d.qZA(),d._uU(8),d.qZA(),d.TgZ(9,"td",24),d.TgZ(10,"span",22),d._uU(11,"\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2"),d.qZA(),d._uU(12),d.ALo(13,"date"),d.qZA(),d.TgZ(14,"td",24),d.TgZ(15,"span",22),d._uU(16,"\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae"),d.qZA(),d.YNc(17,ci,1,0,"i",25),d.qZA(),d.TgZ(18,"td",26),d.TgZ(19,"span",22),d._uU(20,"\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc"),d.qZA(),d._uU(21),d.ALo(22,"currency"),d.qZA(),d.TgZ(23,"td",26),d.TgZ(24,"span",22),d._uU(25,"\u03a4\u03ad\u03bb\u03bf\u03c2"),d.qZA(),d._uU(26),d.ALo(27,"currency"),d.qZA(),d.TgZ(28,"td",26),d.TgZ(29,"span",22),d._uU(30,"\u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf"),d.qZA(),d._uU(31),d.ALo(32,"currency"),d.qZA(),d.TgZ(33,"td",26),d.TgZ(34,"span",22),d._uU(35,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u039f\u03c6\u03b5\u03b9\u03bb\u03ae\u03c2"),d.qZA(),d.TgZ(36,"strong"),d._uU(37),d.ALo(38,"currency"),d.qZA(),d.qZA(),d.TgZ(39,"td",27),d.TgZ(40,"span",22),d._uU(41,"\u0395\u03bd\u03ad\u03c1\u03b3\u03b5\u03b9\u03b5\u03c2"),d.qZA(),d.TgZ(42,"button",28),d.NdJ("click",function(){var i=d.CHM(t).$implicit;return d.oxw().onEdit(i)}),d._UZ(43,"i",29),d.qZA(),d.qZA(),d.qZA()}if(2&i){var o=e.$implicit;d.xp6(4),d.Q6J("binary",!0)("ngModel",o.isChecked)("disabled",o.isMideniki),d.xp6(4),d.hij(" ",o.dilosiDescription," "),d.xp6(4),d.hij(" ",d.xi3(13,11,o.hmeromiaLixisDilosis,"dd/MM/yyyy")," "),d.xp6(5),d.Q6J("ngIf",o.isMideniki),d.xp6(4),d.hij(" ",d.gM2(22,14,o.ypokeimenoPoso,"\u20ac","symbol","1.2")," "),d.xp6(5),d.hij(" ",d.gM2(27,19,o.telosPoso,"\u20ac","symbol","1.2")," "),d.xp6(5),d.hij(" ",d.gM2(32,24,o.prostimoPoso,"\u20ac","symbol","1.2")," "),d.xp6(6),d.Oqu(d.gM2(38,29,o.telosPoso+o.prostimoPoso,"\u20ac","symbol","1.2")),d.xp6(2),d.Q6J("frozen",!0)}}function mi(i,e){1&i&&(d.TgZ(0,"tr"),d.TgZ(1,"td",31),d._uU(2," \u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ad\u03c2. "),d.qZA(),d.qZA())}function hi(i,e){if(1&i&&(d.TgZ(0,"tr"),d.TgZ(1,"td",32),d.TgZ(2,"strong"),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"td",26),d.TgZ(5,"strong"),d._uU(6),d.ALo(7,"currency"),d.qZA(),d.qZA(),d.TgZ(8,"td",26),d.TgZ(9,"strong"),d._uU(10),d.ALo(11,"currency"),d.qZA(),d.qZA(),d.TgZ(12,"td",26),d.TgZ(13,"strong"),d._uU(14),d.ALo(15,"currency"),d.qZA(),d.qZA(),d.TgZ(16,"td",26),d.TgZ(17,"strong"),d._uU(18),d.ALo(19,"currency"),d.qZA(),d.qZA(),d.TgZ(20,"td",33),d._uU(21,"\xa0"),d.qZA(),d.qZA()),2&i){var t=d.oxw();d.xp6(3),d.hij("\u03a0\u03bb\u03ae\u03b8\u03bf\u03c2: ",null==t.diloseisSaved?null:t.diloseisSaved.length,""),d.xp6(3),d.Oqu(d.G7q(7,5,d.VKq(29,L,t.sumYpokeimeno))),d.xp6(4),d.Oqu(d.G7q(11,11,d.VKq(31,L,t.sumTelos))),d.xp6(4),d.Oqu(d.G7q(15,17,d.VKq(33,L,t.sumProstimo))),d.xp6(4),d.Oqu(d.G7q(19,23,d.VKq(35,L,t.sumToPay)))}}function gi(i,e){1&i&&d.GkF(0)}function yi(i,e){if(1&i){var t=d.EpF();d.ynx(0),d.TgZ(1,"div",13),d.YNc(2,gi,1,0,"ng-container",14),d.qZA(),d.TgZ(3,"div",34),d._UZ(4,"lib-egr-loading",35),d.TgZ(5,"app-checkout",36),d.NdJ("onPayBtnClick",function(i){return d.CHM(t),d.oxw().onCreatePaymentRequest(i)}),d.qZA(),d.qZA(),d.BQk()}if(2&i){var o=d.oxw(),s=d.MAs(10);d.xp6(2),d.Q6J("ngTemplateOutlet",s),d.xp6(2),d.Q6J("condition",o.isLoadingResponse)("customClass","egr-load-small"),d.xp6(1),d.Q6J("isPaymentFormValid",!0)("doPaymentSubscription",o.onDoPaymentSubject.asObservable())("finApiUrl",o.financeApiUrl)("buttonText","\u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae")}}function bi(i,e){if(1&i&&(d.TgZ(0,"div",37),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.qZA()),2&i){var t=d.oxw();d.xp6(2),d.Oqu(t.errorMessageProfile)}}function Ii(i,e){if(1&i&&(d.TgZ(0,"p"),d._uU(1,"\u0388\u03c7\u03b5\u03c4\u03b5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03b9 "),d.TgZ(2,"span",38),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"div",39),d.TgZ(5,"p"),d._uU(6,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a4\u03ad\u03bb\u03bf\u03c2: "),d.TgZ(7,"span",38),d._uU(8),d.ALo(9,"currency"),d.qZA(),d.qZA(),d.TgZ(10,"p"),d._uU(11,"\u03a3\u03c5\u03bd\u03bf\u03bb\u03b9\u03ba\u03cc \u03a0\u03c1\u03cc\u03c3\u03c4\u03b9\u03bc\u03bf: "),d.TgZ(12,"span",38),d._uU(13),d.ALo(14,"currency"),d.qZA(),d.qZA(),d.TgZ(15,"p"),d._uU(16,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03bf\u03c6\u03b5\u03b9\u03bb\u03ce\u03bd: "),d.TgZ(17,"span",40),d._uU(18),d.ALo(19,"currency"),d.qZA(),d.qZA(),d.qZA()),2&i){var t=d.oxw();d.xp6(3),d.AsE("",t.calculatedChecked.countChecked," ",t.calculatedChecked.countText,""),d.xp6(5),d.Oqu(d.gM2(9,5,t.calculatedChecked.checkedTelos,"\u20ac","symbol","1.2")),d.xp6(5),d.Oqu(d.gM2(14,10,t.calculatedChecked.checkedProstimo,"\u20ac","symbol","1.2")),d.xp6(5),d.Oqu(d.gM2(19,15,t.calculatedChecked.checkedTelos+t.calculatedChecked.checkedProstimo,"\u20ac","symbol","1.2"))}}function vi(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"app-katastimata-create-dilosi",41),d.NdJ("updateSaved",function(i){return d.CHM(t),d.oxw().updateDilosiInTable(i)}),d.qZA()}if(2&i){var o=d.oxw();d.Q6J("diloseisToPay",o.diloseisToPay)("dilosi",o.selectedDilosi)("applicationUrl",o.applicationUrl)("onlinePaymentsSettingsCompany",o.onlinePaymentsSettingsCompany)}}var ki=function(){return{minWidth:"60vw"}};function xi(i,e){1&i&&d._UZ(0,"p-message",4)}function Ai(i,e){if(1&i&&(d.TgZ(0,"p",14),d.TgZ(1,"strong"),d._uU(2,"\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1 \u0395\u03c0\u03b9\u03c7\u03b5\u03af\u03c1\u03b7\u03c3\u03b7\u03c2:"),d.qZA(),d._uU(3),d.qZA()),2&i){var t=d.oxw(3);d.xp6(3),d.hij("\xa0",t.epixeirisiInfo.eponimia," ")}}function Zi(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"button",15),d.NdJ("click",function(){return d.CHM(t),d.oxw(3).onCreateNewDilosiClicked()}),d._UZ(1,"span",16),d._uU(2," \u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 "),d.qZA()}}function Pi(i,e){if(1&i&&(d.TgZ(0,"div",11),d.YNc(1,Ai,4,1,"p",12),d.YNc(2,Zi,3,0,"button",13),d.qZA()),2&i){var t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",t.epixeirisiInfo),d.xp6(1),d.Q6J("ngIf",t.diloseisToPay&&t.diloseisToPay.length>0)}}function Ci(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"app-katastimata-receipts",17),d.NdJ("reloadData",function(){return d.CHM(t),d.oxw(2)._loadData()}),d.qZA()}if(2&i){var o=d.oxw(2);d.Q6J("diloseisPayed",o.diloseisPayed)("diloseisToPay",o.diloseisToPay)("userInfo",o.userInfo)("isLoading",o.isLoading)}}function _i(i,e){if(1&i){var t=d.EpF();d.ynx(0),d.YNc(1,Pi,3,2,"div",5),d.TgZ(2,"p-tabView",6),d.NdJ("onChange",function(i){return d.CHM(t),d.oxw().onTabChanged(i)}),d.TgZ(3,"p-tabPanel",7),d.YNc(4,Ci,1,4,"app-katastimata-receipts",8),d.qZA(),d.TgZ(5,"p-tabPanel",9),d.TgZ(6,"app-katastimata-saved",10),d.NdJ("reloadData",function(){return d.CHM(t),d.oxw()._loadData()}),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&i){var o=d.oxw();d.xp6(1),d.Q6J("ngIf",o.epixeirisiInfo||o.diloseisToPay&&o.diloseisToPay.length>0),d.xp6(1),d.Q6J("activeIndex",o.index),d.xp6(2),d.Q6J("ngIf",o.diloseisPayed),d.xp6(2),d.Q6J("diloseisSaved",o.diloseisSaved)("diloseisToPay",o.diloseisToPay)("userInfo",o.userInfo)("epixeirisiInfo",o.epixeirisiInfo)("onlinePaymentsSettingsCompany",o.onlinePaymentsSettingsCompany)("isLoading",o.isLoading)("applicationUrl",o.applicationUrl)}}function Ti(i,e){if(1&i){var t=d.EpF();d.TgZ(0,"app-katastimata-create-dilosi",18),d.NdJ("updateSaved",function(i){return d.CHM(t),d.oxw().onReloadSaved(i)}),d.qZA()}if(2&i){var o=d.oxw();d.Q6J("epixeirisiInfo",o.epixeirisiInfo)("diloseisToPay",o.diloseisToPay)("dilosi",null)("applicationUrl",o.applicationUrl)("onlinePaymentsSettingsCompany",o.onlinePaymentsSettingsCompany)}}var wi,Ui=((wi=function(i){!function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&n(i,e)}(o,i);var e=a(o);function o(i,s){var n;return t(this,o),(n=e.call(this,s,i)).exceptionSrv=i,n.http=s,n.userInfoSubject=new p.X(null),n.userInfo$=n.userInfoSubject.asObservable(),n.egOnInit(),n}return s(o,[{key:"egOnInit",value:function(){var i=this;this.userInfo$.subscribe(function(e){i.userInfo=e})}},{key:"initUserInfo",value:function(){if(!this.userInfo){var i,e=null;i=window.localStorage.length&&null!=typeof localStorage.getItem("default-auth-config")?window.localStorage:window.sessionStorage;for(var t=0;t<i.length;t++){var o=i.key(t);o.includes("default-auth-config")&&(e=JSON.parse(i.getItem(o)).userData,this.userInfoSubject.next({email:e.email,username:e.given_name,tin:e.tin,family_name:e.family_name,given_name:e.given_name,name:e.name,address_city:e.address_city,address_country_code:e.address_country_code,address_zip:e.address_zip,address:e.address,fathers_name:e.fathers_name,mothers_name:e.mothers_name,adt:e.adt,phone_number:e.phone_number}))}}}},{key:"getDiloseisWebInfo",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/DiloseisWeb/DiloseisWebInfo/").concat(i)).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"getDilosiWebPaymentInfo",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.post("".concat(this.baseUrl,"/DiloseisWeb/DilosiWebPaymentInfo"),i).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"uploadPeriodikiDilosi",value:function(i){var e=new l.WM;return e=e.append("isForm","true"),this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.post("".concat(this.baseUrl,"/DiloseisWeb/DilosiWebScan"),i,{headers:e,responseType:"arraybuffer"}).pipe((0,h.U)(function(i){return i}),(0,g.K)(function(){return(0,c.of)(!1)}))}},{key:"getDiloseisWebPayedInfo",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/DiloseisWeb/DiloseisWebPayedInfo/").concat(i)).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"getEpixeirisiInfo",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/DiloseisWeb/DiloseisWebEpixirisiInfo/").concat(i)).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"deleteDocDmsByDilosiId",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/DiloseisWeb/DeleteDocDmsByDilosiId/").concat(i)).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"markDilosiWebExoflisi",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.post("".concat(this.baseUrl,"/DiloseisWeb/MarkDilosiWebExoflisi"),i).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionService.catchBadResponse))}},{key:"getDocDmsByDilosiId",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/DiloseisWeb/GetDocDmsByDilosiId/").concat(i)).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"getDownloadFile",value:function(i){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/DocDms/DownloadFile/").concat(i),{responseType:"blob"}).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"getPluginCustomerOptions",value:function(){return this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl,this.http.get("".concat(this.baseUrl,"/Configurations/GetPluginCustomerSpecificOptions")).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}},{key:"createRemittanceInfoById",value:function(i){this.baseUrl=(0,u.Qj)(this.baseUrl),this.baseUrl="/"==this.baseUrl[0]?this.baseUrl.substring(1):this.baseUrl;var e="".concat(this.baseUrl,"/DiloseisWeb/CreateRemittanceInfoById/").concat(i),t={headers:new l.WM({Accept:"text/html, application/xhtml+xml, */*","Content-Type":"text/plain; charset=utf-8"}),responseType:"text"};return this.http.get(e,t).pipe((0,h.U)(function(i){return i}),(0,g.K)(this.exceptionSrv.catchBadResponse))}}]),o}(function(){return s(function i(e,o){var s=this;t(this,i),this.http=e,this.exceptionService=o,this.getBaseUrl=function(){return s.baseUrl},AppConfOptions&&AppConfOptions.katastimata_api?(this.baseUrl=AppConfOptions.katastimata_api,this.financeUrl=AppConfOptions.epayments_api):(this.baseUrl="/",this.financeUrl=AppConfOptions.financeApi),this.baseUrl+="api",this.financeUrl+="api"})}())).\u0275fac=function(i){return new(i||wi)(d.LFG(u.Hm),d.LFG(l.eN))},wi.\u0275prov=d.Yz7({token:wi,factory:wi.\u0275fac,providedIn:"root"}),wi),qi=s(function i(){t(this,i),this.dilosiId=0,this.dilosiDescription=null,this.hmeromiaLixisDilosis=null,this.isMideniki=!1}),Di=s(function i(){t(this,i),this.dilosiId=null,this.epixirisiEponimia=null,this.epixirisiOfeiletisEponimia=null,this.epixirisiOfeiletisAfm=null,this.paymentCaption=null,this.paymentCode=null,this.paymentCodeDias=null,this.paymentAmount=null,this.telosPoso=null,this.prostimoPoso=null,this.ypokeimenoPoso=null,this.apoforologimenoPoso=null,this.posostoTelous=null,this.posostoEkprothesmisKatavolis=null,this.posostoEkprothesmisKatavolisArxiko=null,this.posostoEkprothesmisKatavolisMines=null}),Si=s(function i(){t(this,i),this.bankTransactionId=null}),Mi=function(){return(i=Mi||(Mi={})).dilosiDescription="\u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2",i.ypokeimenoPoso="\u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc",i.periodikiDilosiFPA="\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)",i.pososto="\u03a0\u03bf\u03c3\u03bf\u03c3\u03c4\u03cc",Mi;var i}(),Oi=function(){var i=function(){function i(e,o,s){t(this,i),this.katastimataNgSrv=e,this.route=o,this._http=s,this.reloadData=new d.vpe,this.onDestroy=new f.xQ,this.financeApiUrl="",this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumSinolo=0,this.financeApiUrl="undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(0,u.Qj)(AppConfOptions.epayments_api):(0,u.Qj)(AppConfOptions.financeApi)}return s(i,[{key:"ngOnChanges",value:function(i){var e=this;i&&i.diloseisPayed&&(this.diloseisPayed=i.diloseisPayed.currentValue,this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumSinolo=0,this.diloseisPayed.forEach(function(i){e.sumYpokeimeno+=i.ypokeimenoPoso,e.sumTelos+=i.telosPoso,e.sumProstimo+=i.prostimoPoso,i.sinolikoPoso=+i.telosPoso+ +i.prostimoPoso,e.sumSinolo+=i.sinolikoPoso})),i&&i.isLoading&&(this.isLoading=i.isLoading.currentValue)}},{key:"ngOnInit",value:function(){var i=this;this.katastimataNgSrv.userInfo$.pipe((0,y.R)(this.onDestroy)).subscribe(function(e){return i.userInfo=e}),this._getBankMessages().pipe((0,b.w)(function(e){return e?(i.oikonomikiBankMessages=e,i.route.queryParams.pipe((0,y.R)(i.onDestroy))):(0,c.of)(!1)})).subscribe(function(e){if(e){var t=e.messagecode,o=e.btId;if(t)if(i.bankStatusMessage=i.oikonomikiBankMessages[t],"TRANSACTION_COMPLETED"==t){if(i.bankStatusMessageClass="success",o){var s=new Si;s.bankTransactionId=o,i.katastimataNgSrv.markDilosiWebExoflisi(s).subscribe(function(){i.reloadData.emit(!0)})}}else i.bankStatusMessageClass="error"}})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next()}},{key:"_getBankMessages",value:function(){return this._http.get(this.financeApiUrl+"/api/Banks/BankMessages")}},{key:"btnBankStatusMessageClicked",value:function(){this.bankStatusMessage=null}}]),i}();return i.\u0275fac=function(e){return new(e||i)(d.Y36(Ui),d.Y36(I.gz),d.Y36(l.eN))},i.\u0275cmp=d.Xpm({type:i,selectors:[["app-katastimata-receipts"]],inputs:{diloseisPayed:"diloseisPayed",diloseisToPay:"diloseisToPay",userInfo:"userInfo",isLoading:"isLoading"},outputs:{reloadData:"reloadData"},features:[d.TTD],decls:7,vars:11,consts:[["severity","warn","text","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2. \u0395\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf\u03bd \u03bf\u03c1\u03b3\u03b1\u03bd\u03b9\u03c3\u03bc\u03cc.",4,"ngIf"],[3,"severity","text","styleClass",4,"ngIf"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],["severity","warn","text","\u0394\u03b5\u03bd \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03c5\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2. \u0395\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03ae\u03c3\u03c4\u03b5 \u03bc\u03b5 \u03c4\u03bf\u03bd \u03bf\u03c1\u03b3\u03b1\u03bd\u03b9\u03c3\u03bc\u03cc."],[3,"severity","text","styleClass"],[1,"fixed-width-col-80"],[1,"fixed-width-col-220"],[1,"fixed-width-col-120"],[1,"fixed-width-col-170"],[1,"fixed-width-col-80","text-center"],[1,"p-column-title"],["class","fas fa-check",4,"ngIf"],[1,"fixed-width-col-120","text-right"],[1,"fas","fa-check"],["colspan","8"],["colspan","3",1,"fixed-width-col-380"]],template:function(i,e){1&i&&(d.YNc(0,M,1,0,"p-message",0),d.YNc(1,O,1,3,"p-message",1),d.TgZ(2,"p-table",2),d.YNc(3,E,17,0,"ng-template",3),d.YNc(4,R,37,28,"ng-template",4),d.YNc(5,N,3,0,"ng-template",5),d.YNc(6,J,22,37,"ng-template",6),d.qZA()),2&i&&(d.Q6J("ngIf",(!e.diloseisToPay||e.diloseisToPay&&0==e.diloseisToPay.length)&&!e.isLoading),d.xp6(1),d.Q6J("ngIf",e.bankStatusMessage&&""!=e.bankStatusMessage),d.xp6(1),d.Q6J("value",e.diloseisPayed)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",e.isLoading)("totalRecords",null==e.diloseisPayed?null:e.diloseisPayed.length))},directives:[Z.O5,A.iA,P.jx,k.q],pipes:[Z.H9],styles:[".fixed-width-col-80[_ngcontent-%COMP%]{width:80px!important;min-width:80px!important}.fixed-width-col-120[_ngcontent-%COMP%]{width:120px!important;min-width:120px!important}.fixed-width-col-170[_ngcontent-%COMP%]{width:170px!important;min-width:170px!important}.fixed-width-col-220[_ngcontent-%COMP%]{width:220px!important;min-width:220px!important}.fixed-width-col-380[_ngcontent-%COMP%]{width:380px!important;min-width:380px!important}"]}),i}(),Ei=function(){var i=function(){function i(e,o,s){t(this,i),this.http=e,this.sanitizer=o,this.toasterSrv=s}return s(i,[{key:"transform",value:function(i){var e=this;return this.http.get(i,{responseType:"blob"}).pipe((0,h.U)(function(i){return e.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i))}),(0,g.K)(function(i){return(0,u.Zj)(i,e.toasterSrv)}))}}]),i}();return i.\u0275fac=function(e){return new(e||i)(d.Y36(l.eN,16),d.Y36(q.H7,16),d.Y36(u.MJ,16))},i.\u0275pipe=d.Yjl({name:"securePlg",type:i,pure:!0}),i}(),Fi=r(62247),Ri=function(){var e=function(){function e(i,o,s,n){t(this,e),this.katastimataNgSrv=i,this.paymentSrv=o,this.toasterSrv=s,this.cdr=n,this.updateSaved=new d.vpe,this.paymentRequestDto=void 0,this.requestObs=[],this.onDoPaymentSubject=new f.xQ,this.onDestroy=new f.xQ,this.pososta=[{value:"0.5",description:"0.5%"},{value:"2",description:"2%"},{value:"5",description:"5%"}],this.toggleEditFiles=!1,this.periodikiDilosiFPA=null,this.extraFile=null,this.uploadedFiles=[],this.isLoading=!1,this.isLoadingResponse=!1,this.initPaymentMethods=!1,this.isFormDirty=!1,this.isFormSubmitted=!1,this.formDictionaryEnum=Mi}return s(e,[{key:"ngOnInit",value:function(){var i=this;"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.katastimataApiUrl=(0,u.Qj)(AppConfOptions.katastimata_api),this.financeApiUrl=(0,u.Qj)(AppConfOptions.epayments_api),this.relatedCallbackUrl=encodeURI(this.applicationUrl+"/katastimata/receipts")):(this.katastimataApiUrl=(0,u.Qj)(AppConfOptions.applicationUrl),this.financeApiUrl=(0,u.Qj)(AppConfOptions.financeApi),this.relatedCallbackUrl=encodeURI(this.applicationUrl+"/plugin/receipts")),(0,u.RA)(this.cdr),this.dilosi?this._getDilosiFiles():(this.dilosi=new qi,this.dilosiCopy=(0,u.p$)(this.dilosi),(0,u.RA)(this.cdr)),this.katastimataNgSrv.userInfo$.pipe((0,y.R)(this.onDestroy)).subscribe(function(e){e&&(i.userInfo=e,i.userInfo.email=(0,u.Ew)(i.userInfo.email)?i.userInfo.email:i.userInfo.email.trim(),i.userInfo.username=(0,u.Ew)(i.userInfo.username)?i.userInfo.username:i.userInfo.username.trim(),i.userInfo.tin=(0,u.Ew)(i.userInfo.tin)?i.userInfo.tin:i.userInfo.tin.trim(),i.userInfo.family_name=(0,u.Ew)(i.userInfo.family_name)?i.userInfo.family_name:i.userInfo.family_name.trim(),i.userInfo.given_name=(0,u.Ew)(i.userInfo.given_name)?i.userInfo.given_name:i.userInfo.given_name.trim(),i.userInfo.fathers_name=(0,u.Ew)(i.userInfo.fathers_name)?i.userInfo.fathers_name:i.userInfo.fathers_name.trim(),i.userInfo.mothers_name=(0,u.Ew)(i.userInfo.mothers_name)?i.userInfo.mothers_name:i.userInfo.mothers_name.trim(),i.userInfo.name=(0,u.Ew)(i.userInfo.name)?i.userInfo.name:i.userInfo.name.trim(),i.userInfo.address_city=(0,u.Ew)(i.userInfo.address_city)?i.userInfo.address_city:i.userInfo.address_city.trim(),i.userInfo.address_country_code=(0,u.Ew)(i.userInfo.address_country_code)?i.userInfo.address_country_code:i.userInfo.address_country_code.trim(),i.userInfo.address_country_num=(0,u.Ew)(i.userInfo.address_country_num)?i.userInfo.address_country_num:i.userInfo.address_country_num.trim(),i.userInfo.address_zip=(0,u.Ew)(i.userInfo.address_zip)?i.userInfo.address_zip:i.userInfo.address_zip.trim(),i.userInfo.address=(0,u.Ew)(i.userInfo.address)?i.userInfo.address:i.userInfo.address.trim(),i.userInfo.adt=(0,u.Ew)(i.userInfo.adt)?i.userInfo.adt:i.userInfo.adt.trim(),i.userInfo.phone_number=(0,u.Ew)(i.userInfo.phone_number)?i.userInfo.phone_number:i.userInfo.phone_number.trim(),(0,u.RA)(i.cdr))})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next()}},{key:"ngOnChanges",value:function(i){i&&i.dilosi&&(this.dilosiCopy=i.dilosi.currentValue,this.dilosiCopy&&this.dilosiCopy.kodikosPliromisDias&&(this.dilosiCopy.oikothenId||this.dilosiCopy.xrimatikosKatalogosEggrafesProstimoId||this.dilosiCopy.xrimatikosKatalogosEggrafesTelosId||3==this.dilosiCopy.statusId||4==this.dilosiCopy.statusId||5==this.dilosiCopy.statusId||7==this.dilosiCopy.statusId)&&(this.dilosiCopy.kodikosPliromisDias.length>15&&(this.kodikosPliromis=this.dilosiCopy.kodikosPliromisDias.match(/(.|[\r\n]){1,4}/g).toString(),this.kodikosPliromis=this.kodikosPliromis.replace(new RegExp(",","g")," ")),this.dilosiWebPaymentInfo=new Di,this.dilosiWebPaymentInfo.dilosiId=this.dilosiCopy.dilosiId,this.dilosiWebPaymentInfo.paymentCaption=this.dilosiCopy.dilosiDescription,this.dilosiWebPaymentInfo.telosPoso=this.dilosiCopy.telosPoso,this.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines=this.dilosiCopy.posostoEkprothesmisKatavolis,this.dilosiWebPaymentInfo.prostimoPoso=this.dilosiCopy.prostimoPoso,this.dilosiWebPaymentInfo.paymentAmount=this.dilosiCopy.prostimoPoso+this.dilosiCopy.telosPoso,this.dilosiWebPaymentInfo.hmeromiaLixisPliromis=this.dilosiCopy.hmeromiaLixisPliromis),(0,u.RA)(this.cdr)),i&&i.onlinePaymentsSettingsCompany&&(this.onlinePaymentsSettingsCompany=i.onlinePaymentsSettingsCompany.currentValue,(0,u.RA)(this.cdr))}},{key:"onSelectedDilosiChanged",value:function(i){var e=this;if(i){var t=this.dilosiCopy.isMideniki;this.dilosiCopy=this.diloseisToPay.filter(function(i){return i.dilosiId===+e.dilosiCopy.dilosiId})[0],this.dilosiCopy.isMideniki=t,this.dilosiCopy.isMideniki&&(this.dilosiCopy.ypokeimenoPoso=0),this.katastimataNgSrv.getDocDmsByDilosiId(i.dilosiId).subscribe(function(i){i&&(e.dilosiFiles=i),(0,u.RA)(e.cdr)})}}},{key:"onIsMidenikiChanged",value:function(){this.dilosiCopy.isMideniki&&(this.dilosiCopy.ypokeimenoPoso=0,(0,u.RA)(this.cdr))}},{key:"downloadFile",value:function(i){i&&this.katastimataNgSrv.getDownloadFile(i).subscribe()}},{key:"onFileChange",value:function(e,t){var o=this;e&&e.srcElement.files.length>0?Fi(e,!0).then(function(e){o.uploadedFiles=[].concat(i(o.uploadedFiles),[{type:t,result:e}])}):this.uploadedFiles=this.uploadedFiles.filter(function(i){return i.type!=t}),this.isFormDirty=!0,(0,u.RA)(this.cdr)}},{key:"onOpenEktiposi",value:function(i){this.isFormDirty&&i.preventDefault()}},{key:"onSubmit",value:function(){var e=this;if(this.formErrorsMsg="",this.toggleEditFiles=!1,(0,u.RA)(this.cdr),this.dimotikosForosForm.valid&&(this.dilosiCopy.isMideniki||!this.dilosiCopy.isMideniki&&this.dilosiCopy.ypokeimenoPoso>0)){this.isFormSubmitted=!0,this.isFormDirty=!1,this.isLoading=!0;var t=[];if(this.uploadedFiles&&this.uploadedFiles.some(function(i){return"periodikiDilosiFPA"==i.type})){for(var o=[],s=0;s<this.uploadedFiles.length;s++){var n=Object.values(this.uploadedFiles[s]),a=n[1],r=a.name.substr(a.name.lastIndexOf(".")+1),l=+this.dilosiCopy.ypokeimenoPoso;"periodikiDilosiFPA"!=n[0]&&(l=0),o.push({language:"el",dilosiId:+this.dilosiCopy.dilosiId,fileContent:a.base64,fileLength:a.size,fileExtension:r,fileDescription:s,fileName:a.name,poso:l,hmerominiaDilosis:new Date,type:n[0]})}t=[].concat(i(t),[this.katastimataNgSrv.deleteDocDmsByDilosiId(this.dilosiCopy.dilosiId)]),this.uploadedFiles.some(function(i){return"extraFile"==i.type})&&(t=[].concat(i(t),[this.katastimataNgSrv.uploadPeriodikiDilosi(o.find(function(i){return"extraFile"==i.type}))])),t=[].concat(i(t),[this.katastimataNgSrv.uploadPeriodikiDilosi(o.find(function(i){return"periodikiDilosiFPA"==i.type}))])}var d={language:"el",dilosiId:+this.dilosiCopy.dilosiId,ypokeimenoPoso:+this.dilosiCopy.ypokeimenoPoso,hmerominiaDilosis:(0,u.Fh)(new Date),isMideniki:this.dilosiCopy.isMideniki};if(this.onlinePaymentsSettingsCompany&&"1"==this.onlinePaymentsSettingsCompany)this.requestObs=[].concat(i(this.requestObs),[this.katastimataNgSrv.getDilosiWebPaymentInfo(d)]),t=[].concat(i(t),[this.katastimataNgSrv.getDilosiWebPaymentInfo(d)]),(0,u.RA)(this.cdr),(0,u.CV)(t,function(){return e.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1.")}).subscribe(function(i){i?(e.dilosiWebPaymentInfo=i,e.dilosiWebPaymentInfo&&(e.updateSaved.emit({dilosiId:e.dilosiWebPaymentInfo.dilosiId,dilosiDescription:e.dilosiWebPaymentInfo.paymentCaption,statusId:e.dilosiCopy.statusId,akatharistoPoso:e.dilosiCopy.akatharistoPoso,ypokeimenoPoso:e.dilosiCopy.ypokeimenoPoso,telosPoso:e.dilosiWebPaymentInfo.telosPoso,prostimoPoso:e.dilosiWebPaymentInfo.prostimoPoso,hmeromiaLixisDilosis:e.dilosiCopy.hmeromiaLixisDilosis,isChecked:!1,isMideniki:e.dilosiCopy.isMideniki,epixirisiId:e.dilosiCopy.epixirisiId,etos:e.dilosiCopy.etos}),e.kodikosPliromis=e.dilosiWebPaymentInfo.paymentCodeDias,e.kodikosPliromis&&e.kodikosPliromis.length>15&&(e.kodikosPliromis=e.dilosiWebPaymentInfo.paymentCodeDias.match(/(.|[\r\n]){1,4}/g).toString(),e.kodikosPliromis=e.kodikosPliromis.replace(new RegExp(",","g")," "))),e._getDilosiFiles()):e.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03bf\u03bd \u03c5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc \u03c4\u03c9\u03bd \u03c0\u03bf\u03c3\u03ce\u03bd."),e.isLoading=!1,e.isFormSubmitted=!1,(0,u.RA)(e.cdr)});else{var p="";this.katastimataNgSrv.createRemittanceInfoById(this.dilosiCopy.dilosiId).pipe((0,b.w)(function(i){return i?(p=i,(0,u.CV)(t,function(){return e.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1.")})):(0,c.of)(!1)})).subscribe(function(i){if(i&&i.statusUpload){e.dilosiWebPaymentInfo=new Di;var t=(e.dilosiCopy.ypokeimenoPoso/(+e.selectedPososto/100+1)).toFixed(2);t=+t;var o=+e.selectedPososto/100,s=+i.poso,n=function(i,e){return e.getMonth()-i.getMonth()+12*(e.getFullYear()-i.getFullYear())}(new Date(e.dilosiCopy.hmeromiaLixisDilosis),new Date);n<0&&(n=0);var a=i.proposo;e.dilosiWebPaymentInfo.dilosiId=e.dilosiCopy.dilosiId,e.dilosiWebPaymentInfo.epixirisiEponimia=e.epixeirisiInfo.eponimia,e.dilosiWebPaymentInfo.epixirisiOfeiletisEponimia=e.epixeirisiInfo.ofeiletisEponimia,e.dilosiWebPaymentInfo.epixirisiOfeiletisAfm=e.epixeirisiInfo.ofeiletisAfm,e.dilosiWebPaymentInfo.paymentCaption=e.dilosiCopy.dilosiDescription,e.dilosiWebPaymentInfo.paymentCode=p,e.dilosiWebPaymentInfo.paymentAmount=s+a,e.dilosiWebPaymentInfo.telosPoso=s,e.dilosiWebPaymentInfo.prostimoPoso=a,e.dilosiWebPaymentInfo.ypokeimenoPoso=e.dilosiCopy.ypokeimenoPoso,e.dilosiWebPaymentInfo.apoforologimenoPoso=t,e.dilosiWebPaymentInfo.posostoTelous=o,e.dilosiWebPaymentInfo.posostoEkprothesmisKatavolis=.02*n,e.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisArxiko=.02,e.dilosiWebPaymentInfo.posostoEkprothesmisKatavolisMines=n,e.updateSaved.emit({dilosiId:e.dilosiCopy.dilosiId,dilosiDescription:e.dilosiCopy.dilosiDescription,statusId:e.dilosiCopy.statusId,hmeromiaLixisDilosis:e.dilosiCopy.hmeromiaLixisDilosis,akatharistoPoso:e.dilosiCopy.akatharistoPoso,ypokeimenoPoso:e.dilosiCopy.ypokeimenoPoso,isChecked:!1,telosPoso:e.dilosiWebPaymentInfo.telosPoso,prostimoPoso:e.dilosiWebPaymentInfo.prostimoPoso,isMideniki:e.dilosiCopy.isMideniki,epixirisiId:e.dilosiCopy.epixirisiId,etos:e.dilosiCopy.etos})}else e.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03bf\u03bd \u03c5\u03c0\u03bf\u03bb\u03bf\u03b3\u03b9\u03c3\u03bc\u03cc \u03c4\u03c9\u03bd \u03c0\u03bf\u03c3\u03ce\u03bd \u03ae \u03c4\u03bf\u03c5 Remittance Info.");e.isLoading=!1,e.isFormSubmitted=!1,(0,u.RA)(e.cdr)})}}else{var f="";this.dilosiCopy.dilosiId||(f+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: \u03a0\u03b5\u03c1\u03af\u03bf\u03b4\u03bf\u03c2 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf</li>"),0==this.dilosiCopy.ypokeimenoPoso&&(f+="<li>\u03a0\u03b5\u03b4\u03af\u03bf: \u03a5\u03c0\u03bf\u03ba\u03b5\u03af\u03bc\u03b5\u03bd\u03bf \u03a0\u03bf\u03c3\u03cc | \u03a3\u03c6\u03ac\u03bb\u03bc\u03b1: \u03a4\u03bf \u03c0\u03b5\u03b4\u03af\u03bf \u03b5\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf \u03ba\u03b1\u03b9 \u03bc\u03b5\u03b3\u03b1\u03bb\u03cd\u03c4\u03b5\u03c1\u03bf \u03c4\u03bf\u03c5 0</li>"),this.formErrorsMsg=(0,u.CD)(this.dimotikosForosForm,this.formDictionaryEnum,f),(0,u.RA)(this.cdr)}}},{key:"onCreatePaymentRequest",value:function(i){var e=this;(0,u.Ew)(this.userInfo.email)?this.toasterSrv.showWarning("","\u0395\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf \u03c4\u03bf email \u03c3\u03b1\u03c2 \u03c3\u03c4\u03b7 \u03c3\u03b5\u03bb\u03af\u03b4\u03b1 \u03c4\u03bf\u03c5 \u03c0\u03c1\u03bf\u03c6\u03af\u03bb \u03c3\u03b1\u03c2."):(this.initPaymentMethods=!0,this.isLoadingResponse=!0,this.paymentRequestDto=void 0,(0,u.RA)(this.cdr),i&&(this.paymentRequestDto={tinRelated:this.userInfo.tin,relatedCallbackUrl:this.relatedCallbackUrl,billingAddressCity:this.userInfo.address_city,billingAddressCountryCode:this.userInfo.address_country_code,billingAddressZip:this.userInfo.address_zip,billingAddress:this.userInfo.address,userEmail:this.userInfo.email,userPhone:this.userInfo.phone_number,paymentMethodKey:i.key,entries:[]},"PIRBGRAA"===i.key&&(this.paymentRequestDto.billingAddressCountryCode=null),this.paymentRequestDto.entries.push({remittanceInfo:this.dilosiWebPaymentInfo.paymentCode,amount:this.dilosiWebPaymentInfo.paymentAmount,debtorName:this.dilosiWebPaymentInfo.epixirisiOfeiletisEponimia,tin:this.userInfo.tin,description:this.dilosiWebPaymentInfo.paymentCaption}),this.paymentSrv.addPaymentRequest(this.financeApiUrl,this.paymentRequestDto).subscribe(function(i){i?(e.paymentResponseDto=i,e.onDoPaymentSubject.next(e.paymentResponseDto)):((0,u.RA)(e.cdr),e.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),e.isLoadingResponse=!1,(0,u.RA)(e.cdr)})))}},{key:"_getDilosiFiles",value:function(){var i=this;this.katastimataNgSrv.getDocDmsByDilosiId(this.dilosiCopy.dilosiId).subscribe(function(e){e&&(i.dilosiFiles=e,(0,u.RA)(i.cdr))})}}]),e}();return e.\u0275fac=function(i){return new(i||e)(d.Y36(Ui),d.Y36(u.te),d.Y36(u.MJ),d.Y36(d.sBO))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-katastimata-create-dilosi"]],viewQuery:function(i,e){var t;(1&i&&d.Gf(Q,5),2&i)&&(d.iGM(t=d.CRH())&&(e.dimotikosForosForm=t.first))},inputs:{epixeirisiInfo:"epixeirisiInfo",diloseisToPay:"diloseisToPay",dilosi:"dilosi",applicationUrl:"applicationUrl",onlinePaymentsSettingsCompany:"onlinePaymentsSettingsCompany"},outputs:{updateSaved:"updateSaved"},features:[d.TTD],decls:3,vars:4,consts:[["class","form w-100",4,"ngIf"],[3,"condition","customClass"],[4,"ngIf"],[1,"form","w-100"],["dimotikosForosForm","ngForm"],[1,"row"],[1,"form-group","col-12","col-md-4"],["name","dilosiDescription","bindLabel","dilosiDescription","bindValue","dilosiId","placeholder","\u0395\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7","required","",3,"items","searchable","clearable","ngModel","disabled","ngModelChange","change"],["dilosiDescription","ngModel"],[1,"text-danger",3,"hidden"],["name","hmeromiaLixisDilosis","placeholder","\u0397\u03bc. \u039b\u03ae\u03be\u03b7\u03c2","type","text","disabled","",1,"form-control",3,"value"],[1,"form-group","col-12","col-md-4","d-flex","align-items-center"],["label","\u039c\u03b7\u03b4\u03b5\u03bd\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7","name","isMideniki","binary","true",3,"ngModel","disabled","ngModelChange"],["class","form-group col-12 col-md-6",4,"ngIf"],[1,"form-group","col-12",3,"ngClass"],["name","ypokeimenoPoso","type","text","currencyMask","","lang","el-GR","placeholder","0,00","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["ypokeimenoPosoInput","ngModel"],["type","button",1,"btn","btn-primary","d-block","mt-2","mx-auto",3,"disabled","click"],["class","alert alert-danger form-msgs",3,"innerHTML",4,"ngIf"],[1,"form-group","col-12","col-md-6"],["name","pososto","bindLabel","description","bindValue","value","placeholder","\u0395\u03c0\u03b9\u03bb\u03ad\u03be\u03c4\u03b5 \u03c0\u03bf\u03c3\u03bf\u03c3\u03c4\u03cc","required","",3,"items","searchable","clearable","ngModel","disabled","ngModelChange"],["posostoInput","ngModel"],[1,"d-flex","flex-wrap"],["type","button",1,"btn","btn-sm","btn-primary","m-0","ml-auto",3,"disabled","click"],[1,"far","fa-edit"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],["type","button",1,"btn","btn-sm","btn-outline-info","m-0","mr-1",3,"href","download"],[1,"fas","fa-download"],[1,"far","fa-calendar-alt"],["severity","warn","text","\u03a3\u03b5 \u03c0\u03b5\u03c1\u03af\u03c0\u03c4\u03c9\u03c3\u03b7 \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf, \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03bf\u03cd\u03bd \u03cc\u03bb\u03b1 \u03c4\u03b1 \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 \u03ba\u03b1\u03b9 \u03b8\u03b1 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c4\u03b1 \u03b1\u03bd\u03b5\u03b2\u03ac\u03c3\u03b5\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac.",4,"ngIf"],[1,"form-group","col-12","col-sm-6"],["for","periodikiDilosiFPA"],["name","periodikiDilosiFPA","placeholder","\u03a0\u03b5\u03c1\u03b9\u03bf\u03b4\u03b9\u03ba\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7 \u03a6\u03a0\u0391 (\u03a62 \u03ae \u03a63)","type","file",1,"form-control-file",3,"ngModel","required","ngModelChange","change"],["periodikiDilosiFPAInput","ngModel"],["for","extraFile"],["name","extraFile","placeholder","\u0395\u03c0\u03b9\u03c0\u03bb\u03ad\u03bf\u03bd \u03b1\u03c1\u03c7\u03b5\u03af\u03bf","type","file",1,"form-control-file",3,"ngModel","ngModelChange","change"],["severity","warn","text","\u03a3\u03b5 \u03c0\u03b5\u03c1\u03af\u03c0\u03c4\u03c9\u03c3\u03b7 \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b9\u03bb\u03ad\u03be\u03b5\u03c4\u03b5 \u03bd\u03ad\u03bf \u03b1\u03c1\u03c7\u03b5\u03af\u03bf, \u03b8\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03bf\u03cd\u03bd \u03cc\u03bb\u03b1 \u03c4\u03b1 \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b1 \u03b1\u03c1\u03c7\u03b5\u03af\u03b1 \u03c4\u03b7\u03c2 \u03b4\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2 \u03ba\u03b1\u03b9 \u03b8\u03b1 \u03c0\u03c1\u03ad\u03c0\u03b5\u03b9 \u03bd\u03b1 \u03c4\u03b1 \u03b1\u03bd\u03b5\u03b2\u03ac\u03c3\u03b5\u03c4\u03b5 \u03be\u03b1\u03bd\u03ac."],["aria-hidden","true",1,"fas","fa-calculator"],["aria-hidden","true",1,"far","fa-save","fa-fw"],[1,"alert","alert-danger","form-msgs",3,"innerHTML"],[1,"w-100","pb-2"],[1,"debits-info","d-flex","justify-content-between"],[1,"debits-info_left","d-flex","mr-1"],[1,"mb-0"],[1,"mr-1",2,"width","220px","line-height","1.7"],["class","mb-0",4,"ngIf"],[1,"totalPoso"],["class","d-flex flex-column align-items-center",4,"ngIf"],[1,"d-flex","flex-column","align-items-center"],["class","btn btn-info mb-1 px-4 font-weight-bold","style","width: 173px;","target","_blank",3,"href","disabled","click",4,"ngIf"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","onPayBtnClick"],["target","_blank",1,"btn","btn-info","mb-1","px-4","font-weight-bold",2,"width","173px",3,"href","click"],["aria-hidden","true",1,"fas","fa-print"]],template:function(i,e){1&i&&(d.YNc(0,X,33,23,"form",0),d._UZ(1,"lib-egr-loading",1),d.YNc(2,ri,45,34,"ng-container",2)),2&i&&(d.Q6J("ngIf",e.dilosiCopy&&e.diloseisToPay&&e.diloseisToPay.length>0),d.xp6(1),d.Q6J("condition",e.isLoading)("customClass","egr-load-small"),d.xp6(1),d.Q6J("ngIf",e.dilosiWebPaymentInfo&&!e.isLoading&&!e.isFormDirty))},directives:[Z.O5,u.IE,T._Y,T.JL,T.F,w.w9,T.Q7,T.JJ,T.On,C.XZ,Z.mk,T.Fj,U.g1,Z.sg,k.q,u.Hl],pipes:[Z.uU,Z.Ov,Ei,Z.H9],encapsulation:2,changeDetection:0}),e}(),Ni=function(){var e=function(){function e(i,o,s,n,a,r){t(this,e),this.katastimataNgSrv=i,this.paymentSrv=o,this.toasterSrv=s,this.cdr=n,this.route=a,this._http=r,this.reloadData=new d.vpe,this.modelPaymentInfo=[],this.modelToPayInfo=[],this.paymentRequestDto=void 0,this.onDestroy=new f.xQ,this.onDoPaymentSubject=new f.xQ,this.requestObs=[],this.errorMessageProfile=null,this.isLoadingResponse=!1,this.initPaymentMethods=!1,this.isAllDebitsChecked=!1,this.calculatedChecked={countChecked:0,countText:"\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",checkedYpokeimeno:0,checkedTelos:0,checkedProstimo:0},this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumToPay=0,this.isEditModalOpen=!1}return s(e,[{key:"ngOnInit",value:function(){var i=this;"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.financeApiUrl=(0,u.Qj)(AppConfOptions.epayments_api),this.relatedCallbackUrl=encodeURI((0,u.Qj)(this.applicationUrl)+"/katastimata/saved")):(this.financeApiUrl=(0,u.Qj)(AppConfOptions.financeApi),this.relatedCallbackUrl=encodeURI((0,u.Qj)(this.applicationUrl)+"/plugin/saved")),this.katastimataNgSrv.userInfo$.pipe((0,y.R)(this.onDestroy)).subscribe(function(e){return i.userInfo=e}),this._getBankMessages().pipe((0,b.w)(function(e){return e?(i.oikonomikiBankMessages=e,i.route.queryParams.pipe((0,y.R)(i.onDestroy))):(0,c.of)(!1)})).subscribe(function(e){if(e){var t=e.messagecode,o=e.btId;if(t)if(i.bankStatusMessage=i.oikonomikiBankMessages[t],"TRANSACTION_COMPLETED"==t){if(i.bankStatusMessageClass="success",o){var s=new Si;s.bankTransactionId=o,i.katastimataNgSrv.markDilosiWebExoflisi(s).subscribe(function(){i.reloadData.emit(!0)})}}else i.bankStatusMessageClass="error"}(0,u.RA)(i.cdr)})}},{key:"ngOnChanges",value:function(i){var e=this;i&&i.diloseisSaved&&(this.diloseisSaved=i.diloseisSaved.currentValue,this.diloseisSaved&&this.diloseisSaved.length&&(this.sumYpokeimeno=0,this.sumTelos=0,this.sumProstimo=0,this.sumToPay=0,this.diloseisSaved.forEach(function(i){e.sumYpokeimeno+=i.ypokeimenoPoso,e.sumTelos+=i.telosPoso,e.sumProstimo+=i.prostimoPoso,e.sumToPay+=i.telosPoso+i.prostimoPoso})),(0,u.RA)(this.cdr))}},{key:"ngOnDestroy",value:function(){this.onDestroy.next()}},{key:"onAllDebitsSelected",value:function(){var i=this;this.diloseisSaved.forEach(function(e){e.isMideniki||(e.isChecked=i.isAllDebitsChecked)}),(0,u.RA)(this.cdr),this._calculateTotalAmounts()}},{key:"onEdit",value:function(i){this.isEditModalOpen=!0,this.selectedDilosi=(0,u.p$)(i),(0,u.RA)(this.cdr)}},{key:"updateDilosiInTable",value:function(i){if(i){var e=this.diloseisSaved.findIndex(function(e){return e.dilosiId==i.dilosiId});this.diloseisSaved[e]=i,(0,u.RA)(this.cdr)}}},{key:"onCreatePaymentRequest",value:function(e){var t,o=this;this.initPaymentMethods=!0,this.isLoadingResponse=!0,this.paymentRequestDto=void 0,this.paymentResponseDto=void 0,this.modelPaymentInfo=[],(0,u.RA)(this.cdr),!this.requestObs||!this.requestObs.length||this.modelToPayInfo&&0!=this.modelToPayInfo.length?this.requestObs&&0!=(null===(t=this.requestObs)||void 0===t?void 0:t.length)||!this.modelToPayInfo||!this.modelToPayInfo.length?(0,m.D)(this.requestObs).pipe((0,b.w)(function(t){return t&&t[0]?(t.forEach(function(e){o.modelPaymentInfo=[].concat(i(o.modelPaymentInfo),[e])}),o.modelToPayInfo.forEach(function(e){var t=new Di;t.paymentCode=e.kodikosPliromisDias,t.paymentAmount=e.prostimoPoso+e.telosPoso,t.epixirisiOfeiletisEponimia=o.epixeirisiInfo.ofeiletisEponimia,t.paymentCaption=e.dilosiDescription,o.modelPaymentInfo=[].concat(i(o.modelPaymentInfo),[t])}),o.paymentRequestDto=o._createPaymentRequest(o.modelPaymentInfo,e),o.paymentSrv.addPaymentRequest(o.financeApiUrl,o.paymentRequestDto)):(0,c.of)(!1)})).subscribe(function(i){i?(o.paymentResponseDto=i,o.onDoPaymentSubject.next(o.paymentResponseDto)):((0,u.RA)(o.cdr),o.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),o.isLoadingResponse=!1,(0,u.RA)(o.cdr)}):(this.modelPaymentInfo=[],this.diloseisSaved.forEach(function(e){if(e.isChecked){var t=new Di;t.paymentCode=e.kodikosPliromisDias,t.paymentAmount=e.prostimoPoso+e.telosPoso,t.epixirisiOfeiletisEponimia=o.epixeirisiInfo.ofeiletisEponimia,t.paymentCaption=e.dilosiDescription,o.modelPaymentInfo=[].concat(i(o.modelPaymentInfo),[t])}}),this.paymentRequestDto=this._createPaymentRequest(this.modelPaymentInfo,e),this.paymentSrv.addPaymentRequest(this.financeApiUrl,this.paymentRequestDto).subscribe(function(i){i?(o.paymentResponseDto=i,o.onDoPaymentSubject.next(o.paymentResponseDto)):((0,u.RA)(o.cdr),o.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),o.isLoadingResponse=!1,(0,u.RA)(o.cdr)})):(0,m.D)(this.requestObs).pipe((0,b.w)(function(t){return t&&t[0]?(t.forEach(function(e){o.modelPaymentInfo=[].concat(i(o.modelPaymentInfo),[e])}),o.paymentRequestDto=o._createPaymentRequest(o.modelPaymentInfo,e),(0,u.Ew)(o.paymentRequestDto.userEmail)?(o.toasterSrv.showWarning("","\u0395\u03af\u03bd\u03b1\u03b9 \u03b1\u03c0\u03b1\u03c1\u03b1\u03af\u03c4\u03b7\u03c4\u03bf \u03c4\u03bf email \u03c3\u03b1\u03c2 \u03c3\u03c4\u03b7 \u03c3\u03b5\u03bb\u03af\u03b4\u03b1 \u03c4\u03bf\u03c5 \u03c0\u03c1\u03bf\u03c6\u03af\u03bb \u03c3\u03b1\u03c2."),(0,c.of)(!1)):o.paymentSrv.addPaymentRequest(o.financeApiUrl,o.paymentRequestDto)):(0,c.of)(!1)})).subscribe(function(i){i?(o.paymentResponseDto=i,o.onDoPaymentSubject.next(o.paymentResponseDto)):((0,u.RA)(o.cdr),o.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c4\u03b7\u03c2 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2.")),o.isLoadingResponse=!1,(0,u.RA)(o.cdr)})}},{key:"_getBankMessages",value:function(){return this._http.get(this.financeApiUrl+"/api/Banks/BankMessages")}},{key:"_createPaymentRequest",value:function(i,e){var t=this,o={tinRelated:this.userInfo.tin,relatedCallbackUrl:this.relatedCallbackUrl,billingAddressCity:this.userInfo.address_city,billingAddressCountryCode:this.userInfo.address_country_code,billingAddressZip:this.userInfo.address_zip,billingAddress:this.userInfo.address,userEmail:this.userInfo.email,userPhone:this.userInfo.phone_number,paymentMethodKey:e.key,entries:[]};return"PIRBGRAA"===e.key&&(o.billingAddressCountryCode=null),i.forEach(function(i){o.entries.push({remittanceInfo:i.paymentCode,amount:i.paymentAmount,debtorName:i.epixirisiOfeiletisEponimia,tin:t.userInfo.tin,description:i.paymentCaption})}),o}},{key:"_calculateTotalAmounts",value:function(){var e=this;this.requestObs=[],this.modelToPayInfo=[];var t,o=0,s=0,n=0,a=0;this.diloseisSaved.forEach(function(t){if(t.isChecked){a++,o+=t.ypokeimenoPoso,s+=t.telosPoso,n+=t.prostimoPoso;var r={language:"el",ypokeimenoPoso:+t.ypokeimenoPoso,dilosiId:+t.dilosiId,hmerominiaDilosis:new Date};t.oikothenId||t.xrimatikosKatalogosEggrafesProstimoId||t.xrimatikosKatalogosEggrafesTelosId||1!=t.statusId&&2!=t.statusId&&6!=t.statusId?e.modelToPayInfo=[].concat(i(e.modelToPayInfo),[t]):e.requestObs=[].concat(i(e.requestObs),[e.katastimataNgSrv.getDilosiWebPaymentInfo(r)])}}),t=1==a?"\u03b4\u03ae\u03bb\u03c9\u03c3\u03b7":"\u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2",this.calculatedChecked={countChecked:a,countText:t,checkedYpokeimeno:o,checkedTelos:s,checkedProstimo:n},(0,u.RA)(this.cdr)}}]),e}();return e.\u0275fac=function(i){return new(i||e)(d.Y36(Ui),d.Y36(u.te),d.Y36(u.MJ),d.Y36(d.sBO),d.Y36(I.gz),d.Y36(l.eN))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-katastimata-saved"]],inputs:{diloseisSaved:"diloseisSaved",diloseisToPay:"diloseisToPay",userInfo:"userInfo",epixeirisiInfo:"epixeirisiInfo",onlinePaymentsSettingsCompany:"onlinePaymentsSettingsCompany",isLoading:"isLoading",applicationUrl:"applicationUrl"},outputs:{reloadData:"reloadData"},features:[d.TTD],decls:13,vars:20,consts:[[3,"severity","text","styleClass",4,"ngIf"],["class","debits-info__selected-debits",4,"ngIf"],["responsiveLayout","stack","breakpoint","1070px",3,"value","lazy","lazyLoadOnInit","rowHover","paginator","alwaysShowPaginator","rows","loading","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","footer"],[4,"ngIf"],["class","screen-msg",4,"ngIf"],["selectedDebits",""],["header","\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2","appendTo","body","resizable","false","modal","true",3,"visible","draggable","closable","visibleChange","onHide"],[3,"diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved",4,"ngIf"],[3,"severity","text","styleClass"],[1,"debits-info__selected-debits"],[4,"ngTemplateOutlet"],[1,"fixed-width-col-40","justify-content-center"],[3,"binary","ngModel","ngModelChange","onChange"],[1,"fixed-width-col-230"],[1,"fixed-width-col-100"],[1,"fixed-width-col-120"],["alignFrozen","right","pFrozenColumn","",1,"fixed-width-col-60",3,"frozen"],[1,"fixed-width-col-40","text-center"],[1,"p-column-title"],[3,"binary","ngModel","disabled","ngModelChange","onChange"],[1,"fixed-width-col-100","text-center"],["class","fas fa-check",4,"ngIf"],[1,"fixed-width-col-120","text-right"],["alignFrozen","right","pFrozenColumn","",1,"fixed-width-col-60","text-center",3,"frozen"],["type","button",1,"btn","btn-primary","btn-sm","m-0",3,"click"],[1,"far","fa-edit"],[1,"fas","fa-check"],["colspan","9"],["colspan","4",1,"fixed-width-col-490"],[1,"fixed-width-col-60"],[1,"mt-2","mx-auto","d-flex","flex-column","justify-content-center",2,"width","350px"],[3,"condition","customClass"],[3,"isPaymentFormValid","doPaymentSubscription","finApiUrl","buttonText","onPayBtnClick"],[1,"screen-msg"],[1,"totalPoso"],[1,"d-flex","total-selected-cost"],["id","sumTotalToBank",1,"totalPoso"],[3,"diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved"]],template:function(i,e){1&i&&(d.YNc(0,li,1,3,"p-message",0),d.YNc(1,ui,2,1,"div",1),d.TgZ(2,"p-table",2),d.YNc(3,pi,19,3,"ng-template",3),d.YNc(4,fi,44,34,"ng-template",4),d.YNc(5,mi,3,0,"ng-template",5),d.YNc(6,hi,22,37,"ng-template",6),d.qZA(),d.YNc(7,yi,6,7,"ng-container",7),d.YNc(8,bi,3,1,"div",8),d.YNc(9,Ii,20,20,"ng-template",null,9,d.W1O),d.TgZ(11,"p-dialog",10),d.NdJ("visibleChange",function(i){return e.isEditModalOpen=i})("onHide",function(){return e.isEditModalOpen=!1,e.selectedDilosi=null}),d.YNc(12,vi,1,4,"app-katastimata-create-dilosi",11),d.qZA()),2&i&&(d.Q6J("ngIf",e.bankStatusMessage),d.xp6(1),d.Q6J("ngIf",e.calculatedChecked.countChecked>0&&!e.isLoading),d.xp6(1),d.Q6J("value",e.diloseisSaved)("lazy",!1)("lazyLoadOnInit",!1)("rowHover",!0)("paginator",!0)("alwaysShowPaginator",!1)("rows",10)("loading",e.isLoading)("totalRecords",null==e.diloseisSaved?null:e.diloseisSaved.length),d.xp6(5),d.Q6J("ngIf",e.calculatedChecked.countChecked>0&&!e.isLoading),d.xp6(1),d.Q6J("ngIf",e.errorMessageProfile),d.xp6(3),d.Akn(d.DdM(19,ki)),d.Q6J("visible",e.isEditModalOpen)("draggable",!1)("closable",!0),d.xp6(1),d.Q6J("ngIf",e.isEditModalOpen&&e.selectedDilosi))},directives:[Z.O5,A.iA,P.jx,_.V,k.q,Z.tP,C.XZ,T.JJ,T.On,A.on,u.IE,u.Hl,Ri],pipes:[Z.uU,Z.H9],styles:[".fixed-width-col-60[_ngcontent-%COMP%]{width:60px!important;min-width:60px!important}.fixed-width-col-80[_ngcontent-%COMP%]{width:80px!important;min-width:80px!important}.fixed-width-col-100[_ngcontent-%COMP%]{width:100px!important;min-width:100px!important}.fixed-width-col-120[_ngcontent-%COMP%]{width:120px!important;min-width:120px!important}.fixed-width-col-170[_ngcontent-%COMP%]{width:170px!important;min-width:170px!important}.fixed-width-col-220[_ngcontent-%COMP%]{width:220px!important;min-width:220px!important}.fixed-width-col-230[_ngcontent-%COMP%]{width:230px!important;min-width:230px!important}.fixed-width-col-380[_ngcontent-%COMP%]{width:380px!important;min-width:380px!important}.fixed-width-col-490[_ngcontent-%COMP%]{width:490px!important;min-width:490px!important}"],changeDetection:0}),e}(),Li=function(){var i=function(){function i(e,o,s,n,a,r,l){t(this,i),this.katastimataNgSrv=e,this.toasterSrv=o,this.cdr=s,this.oidcSecuritySrv=n,this._http=a,this.router=r,this.route=l,this.diloseisPayed=[],this.countriesList=[],this.HttpStatusCodeEnum=u.WE,this.index=0,this.isLoading=!0,this.isAddingNewDilosi=!1,this.onlinePaymentsSettingsCompany="1",this.createPaymentCodeDias=!1,this.applicationUrl="",this.financeApiUrl="",this.returnUrl="",this.onDestroy=new f.xQ,"undefined"!=typeof AuthConfOptions&&AppConfOptions&&AppConfOptions.katastimata_api?(this.applicationUrl=(0,u.Qj)(AppConfOptions.application_url),this.financeApiUrl=(0,u.Qj)(AppConfOptions.epayments_api),this.returnUrl=encodeURI(this.applicationUrl+"/katastimata/receipts")):(this.applicationUrl=(0,u.Qj)(AppConfOptions.applicationUrl),this.financeApiUrl=(0,u.Qj)(AppConfOptions.financeApi),this.returnUrl=encodeURI(this.applicationUrl+"/plugin/diloseis/receipts"))}return s(i,[{key:"ngOnInit",value:function(){var i=this;this.katastimataNgSrv.initUserInfo(),this.katastimataNgSrv.userInfo$.pipe((0,b.w)(function(e){if(e){if(i.userInfo=e,"undefined"!=typeof AuthConfOptions){var t=(0,u.Qj)(AuthConfOptions.stsServer);return i._http.get(t+"/api/general/GetCountries")}return i._http.get("https://auth.dev.egritosgroup.gr/api/general/GetCountries")}return(0,c.of)(!1)}),(0,y.R)(this.onDestroy)).subscribe(function(e){e&&(i.countriesList=e,i.userInfo.address_country_code&&""!=i.userInfo.address_country_code&&(i.userInfo.address_country_num=i.countriesList.find(function(e){return e.Alpha2Code==i.userInfo.address_country_code}).NumericCode.toString()),i.userInfo.email=(0,u.Ew)(i.userInfo.email)?i.userInfo.email:i.userInfo.email.trim(),i.userInfo.username=(0,u.Ew)(i.userInfo.username)?i.userInfo.username:i.userInfo.username.trim(),i.userInfo.tin=(0,u.Ew)(i.userInfo.tin)?i.userInfo.tin:i.userInfo.tin.trim(),i.userInfo.family_name=(0,u.Ew)(i.userInfo.family_name)?i.userInfo.family_name:i.userInfo.family_name.trim(),i.userInfo.given_name=(0,u.Ew)(i.userInfo.given_name)?i.userInfo.given_name:i.userInfo.given_name.trim(),i.userInfo.fathers_name=(0,u.Ew)(i.userInfo.fathers_name)?i.userInfo.fathers_name:i.userInfo.fathers_name.trim(),i.userInfo.mothers_name=(0,u.Ew)(i.userInfo.mothers_name)?i.userInfo.mothers_name:i.userInfo.mothers_name.trim(),i.userInfo.name=(0,u.Ew)(i.userInfo.name)?i.userInfo.name:i.userInfo.name.trim(),i.userInfo.address_city=(0,u.Ew)(i.userInfo.address_city)?i.userInfo.address_city:i.userInfo.address_city.trim(),i.userInfo.address_country_code=(0,u.Ew)(i.userInfo.address_country_code)?i.userInfo.address_country_code:i.userInfo.address_country_code.trim(),i.userInfo.address_country_num=(0,u.Ew)(i.userInfo.address_country_num)?i.userInfo.address_country_num:i.userInfo.address_country_num.trim(),i.userInfo.address_zip=(0,u.Ew)(i.userInfo.address_zip)?i.userInfo.address_zip:i.userInfo.address_zip.trim(),i.userInfo.address=(0,u.Ew)(i.userInfo.address)?i.userInfo.address:i.userInfo.address.trim(),i.userInfo.adt=(0,u.Ew)(i.userInfo.adt)?i.userInfo.adt:i.userInfo.adt.trim(),i.userInfo.phone_number=(0,u.Ew)(i.userInfo.phone_number)?i.userInfo.phone_number:i.userInfo.phone_number.trim()),i.router.url.includes("receipts")?i.index=0:i.router.url.includes("saved")&&(i.index=1),(0,u.RA)(i.cdr)}),this.katastimataNgSrv.getEpixeirisiInfo(this.userInfo.tin).pipe((0,b.w)(function(e){return e&&e.statusCode==i.HttpStatusCodeEnum.Ok?(i.epixeirisiInfo=e,i.katastimataNgSrv.getDiloseisWebInfo(i.userInfo.tin)):(i.toasterSrv.showError("",e.message),(0,c.of)(!1))}),(0,b.w)(function(e){return e?(i.diloseisToPay=e,(!i.diloseisToPay||0==i.diloseisToPay.length)&&i.toasterSrv.showWarning("","\u0394\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03b3\u03af\u03bd\u03b5\u03b9 \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd."),i.katastimataNgSrv.getPluginCustomerOptions()):(0,c.of)(!1)})).subscribe(function(e){if(e){var t=e;if(t){if(t.configurationOptions&&t.configurationOptions.length&&t.configurationOptions.some(function(i){return"PluginCustomerSpecificOptions:OnlinePayments"==i.id})&&(i.onlinePaymentsSettingsCompany=t.configurationOptions.find(function(i){return"PluginCustomerSpecificOptions:OnlinePayments"==i.id}).value),i.diloseisSaved=i.diloseisToPay.filter(function(i){return 6==i.statusId}),t.configurationOptions&&t.configurationOptions.length&&t.configurationOptions.some(function(i){return"PluginCustomerSpecificOptions:CreatePaymentCodeDias"==i.id})){t.configurationOptions.find(function(i){return"PluginCustomerSpecificOptions:CreatePaymentCodeDias"==i.id}).value;i.createPaymentCodeDias=!!"true"}(0,u.RA)(i.cdr),i._loadData()}else i.toasterSrv.showError("","\u0394\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03b3\u03af\u03bd\u03b5\u03b9 \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03c1\u03c5\u03b8\u03bc\u03af\u03c3\u03b5\u03c9\u03bd \u03c4\u03b7\u03c2 \u03b5\u03c6\u03b1\u03c1\u03bc\u03bf\u03b3\u03ae\u03c2.")}i.isLoading=!1,(0,u.RA)(i.cdr)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next()}},{key:"onCreateNewDilosiClicked",value:function(){this.isAddingNewDilosi=!0,(0,u.RA)(this.cdr)}},{key:"onTabChanged",value:function(i){0==i.index?this.router.navigate(["./receipts"],{relativeTo:this.route,queryParamsHandling:"preserve"}):this.router.navigate(["./saved"],{relativeTo:this.route.parent})}},{key:"onReloadSaved",value:function(i){var e=this;this.isLoading=!0,(0,u.RA)(this.cdr),this.katastimataNgSrv.getDiloseisWebInfo(this.userInfo.tin).subscribe(function(i){i&&(e.diloseisToPay=i,e.diloseisSaved=e.diloseisToPay.filter(function(i){return 6==i.statusId}),(0,u.RA)(e.cdr),e._loadData()),e.isLoading=!1,(0,u.RA)(e.cdr)})}},{key:"_loadData",value:function(){var i=this;this.isLoading=!0,(0,u.RA)(this.cdr),this.katastimataNgSrv.getDiloseisWebPayedInfo(this.userInfo.tin).subscribe(function(e){e?i.diloseisPayed=e:i.toasterSrv.showError("","\u03a5\u03c0\u03ae\u03c1\u03be\u03b5 \u03c0\u03c1\u03cc\u03b2\u03bb\u03b7\u03bc\u03b1 \u03ba\u03b1\u03c4\u03ac \u03c4\u03b7\u03bd \u03b1\u03bd\u03ac\u03ba\u03c4\u03b7\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b5\u03be\u03bf\u03c6\u03bb\u03b7\u03bc\u03ad\u03bd\u03c9\u03bd \u03b4\u03b7\u03bb\u03ce\u03c3\u03b5\u03c9\u03bd."),i.isLoading=!1,(0,u.RA)(i.cdr)})}}]),i}();return i.\u0275fac=function(e){return new(e||i)(d.Y36(Ui),d.Y36(u.MJ),d.Y36(d.sBO),d.Y36(v.J_),d.Y36(l.eN),d.Y36(I.F0),d.Y36(I.gz))},i.\u0275cmp=d.Xpm({type:i,selectors:[["lib-katastimata-ng"]],decls:6,vars:13,consts:[["severity","error","text","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03ce \u03b4\u03bf\u03ba\u03b9\u03bc\u03ac\u03c3\u03c4\u03b5 \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1!",4,"ngIf"],[4,"ngIf"],["header","\u0395\u03c0\u03b9\u03bb\u03bf\u03b3\u03ae \u0394\u03ae\u03bb\u03c9\u03c3\u03b7\u03c2","appendTo","body","resizable","false","modal","true",3,"visible","draggable","closable","visibleChange"],[3,"epixeirisiInfo","diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved",4,"ngIf"],["severity","error","text","\u039a\u03ac\u03c4\u03b9 \u03c0\u03ae\u03b3\u03b5 \u03c3\u03c4\u03c1\u03b1\u03b2\u03ac, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03ce \u03b4\u03bf\u03ba\u03b9\u03bc\u03ac\u03c3\u03c4\u03b5 \u03b1\u03c1\u03b3\u03cc\u03c4\u03b5\u03c1\u03b1!"],["class","mb-3 py-1 d-flex flex-wrap",4,"ngIf"],[3,"activeIndex","onChange"],["header","\u0399\u03c3\u03c4\u03bf\u03c1\u03b9\u03ba\u03cc \u03a0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ce\u03bd"],[3,"diloseisPayed","diloseisToPay","userInfo","isLoading","reloadData",4,"ngIf"],["header","\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u0394\u03b7\u03bb\u03ce\u03c3\u03b5\u03b9\u03c2"],[3,"diloseisSaved","diloseisToPay","userInfo","epixeirisiInfo","onlinePaymentsSettingsCompany","isLoading","applicationUrl","reloadData"],[1,"mb-3","py-1","d-flex","flex-wrap"],["class","m-0 mr-1 d-inline-flex align-items-center eponimia-title",4,"ngIf"],["class","btn btn-primary btn-sm m-0 ml-auto","type","button",3,"click",4,"ngIf"],[1,"m-0","mr-1","d-inline-flex","align-items-center","eponimia-title"],["type","button",1,"btn","btn-primary","btn-sm","m-0","ml-auto",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[3,"diloseisPayed","diloseisToPay","userInfo","isLoading","reloadData"],[3,"epixeirisiInfo","diloseisToPay","dilosi","applicationUrl","onlinePaymentsSettingsCompany","updateSaved"]],template:function(i,e){1&i&&(d.YNc(0,xi,1,0,"p-message",0),d.ALo(1,"async"),d.YNc(2,_i,7,10,"ng-container",1),d.ALo(3,"async"),d.TgZ(4,"p-dialog",2),d.NdJ("visibleChange",function(i){return e.isAddingNewDilosi=i}),d.YNc(5,Ti,1,5,"app-katastimata-create-dilosi",3),d.qZA()),2&i&&(d.Q6J("ngIf",!d.lcZ(1,8,e.katastimataNgSrv.userInfo$)),d.xp6(2),d.Q6J("ngIf",d.lcZ(3,10,e.katastimataNgSrv.userInfo$)),d.xp6(2),d.Akn(d.DdM(12,ki)),d.Q6J("visible",e.isAddingNewDilosi)("draggable",!1)("closable",!0),d.xp6(1),d.Q6J("ngIf",e.isAddingNewDilosi))},directives:[Z.O5,_.V,k.q,x.xf,x.x4,Ni,Oi,Ri],pipes:[Z.Ov],encapsulation:2,changeDetection:0}),i}(),Ji=[{path:"",component:Li,children:[{path:"",pathMatch:"full",redirectTo:"receipts"},{path:"receipts",component:Oi},{path:"saved",component:Ni}]}],Qi=function(){var i=s(function i(){t(this,i)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[I.Bz.forChild(Ji)],I.Bz]}),i}(),Yi={align:"right",allowNegative:!1,decimal:",",precision:2,prefix:"",suffix:"\u20ac",thousands:"."},Wi=function(){var i=s(function i(){t(this,i)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[{provide:U.TN,useValue:Yi}],imports:[[Z.ez,T.u5,Qi,x.LU,A.U$,C.nD,_.S,k.O,S.Q,D.d,U.zh,w.A0,u.cA,u.pL]]}),i}(),ji=r(46019),Bi=r(35660),Hi=r(12622),Ki=r(60394),zi=r(41886);function Vi(i,e){if(1&i&&d._UZ(0,"p-message",4),2&i){var t=d.oxw();d.Q6J("text",null==t.translation?null:t.translation.egwebapps.egwebappsLoginMesg)}}function Gi(i,e){if(1&i&&(d.TgZ(0,"p-panel",6),d._UZ(1,"div",7),d.ALo(2,"decodeHtmlString"),d.qZA()),2&i){var t=d.oxw(2);d.Q6J("header",null==t.translation?null:t.translation.egwebapps.information)("styleClass","tab-msg mb-3")("toggleable",!0),d.xp6(1),d.Q6J("innerHTML",d.lcZ(2,4,t.tabMsg),d.oJD)}}function $i(i,e){1&i&&d._UZ(0,"lib-katastimata-ng")}function Xi(i,e){if(1&i&&(d.ynx(0),d.YNc(1,Gi,3,6,"p-panel",5),d.YNc(2,$i,1,0,"lib-katastimata-ng",3),d.BQk()),2&i){var t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.tabMsg),d.xp6(1),d.Q6J("ngIf",t.isAuthorized)}}var ie=[{path:"",component:function(){var i=function(){function i(e,o,s){t(this,i),this.oidcSecuritySrv=e,this.cookieService=o,this.appCacheSrv=s,this.onDestroy=new f.xQ,this.afmNotFound=!1,this.selectedLang="el"}return s(i,[{key:"ngOnInit",value:function(){var i,e=this;this.appCacheSrv.translation$.pipe((0,y.R)(this.onDestroy)).subscribe(function(i){i&&(e.translation=i)}),this.appCacheSrv.selectedLang$.pipe((0,y.R)(this.onDestroy)).subscribe(function(i){i&&(e.selectedLang=i)});for(var t=0;t<window.sessionStorage.length;t++)window.sessionStorage.key(t).includes("authzData")&&(i=window.sessionStorage.getItem(window.sessionStorage.key(t)).replace(/"/g,""));"true"==window.sessionStorage.getItem("_isAuthorized")&&(this.isAuthorized=!0,i&&""!=i&&this.cookieService.set("katastimata-egritos-token",i)),this.appCacheSrv.selectedLang$.pipe((0,y.R)(this.onDestroy)).subscribe(function(i){i&&(e.selectedLang=i),1==AppConfOptions.multilingual&&"el"!=e.selectedLang&&AppConfOptions.katastimata_tab_info_en&&""!=AppConfOptions.katastimata_tab_info_en?e.tabMsg=AppConfOptions.katastimata_tab_info_en:AppConfOptions.katastimata_tab_info&&""!=AppConfOptions.katastimata_tab_info&&"el"==e.selectedLang&&(e.tabMsg=AppConfOptions.katastimata_tab_info)}),this.oidcSecuritySrv.userData$.subscribe(function(i){i&&i.userData&&(!i.userData.tin||(0,u.Ew)(i.userData.tin))&&1==AppConfOptions.katastimata_afm_required&&(e.afmNotFound=!0)})}},{key:"ngOnDestroy",value:function(){this.onDestroy.next(null)}}]),i}();return i.\u0275fac=function(e){return new(e||i)(d.Y36(v.J_),d.Y36(u.N_),d.Y36(Hi.g))},i.\u0275cmp=d.Xpm({type:i,selectors:[["app-katastimata"]],decls:5,vars:4,consts:[[1,"module-title"],["severity","warn",3,"text",4,"ngIf"],[3,"afmNotFound"],[4,"ngIf"],["severity","warn",3,"text"],[3,"header","styleClass","toggleable",4,"ngIf"],[3,"header","styleClass","toggleable"],[3,"innerHTML"]],template:function(i,e){1&i&&(d.TgZ(0,"h3",0),d._uU(1),d.qZA(),d.YNc(2,Vi,1,1,"p-message",1),d._UZ(3,"app-afmnotfound",2),d.YNc(4,Xi,3,2,"ng-container",3)),2&i&&(d.xp6(1),d.Oqu(null==e.translation?null:e.translation.menu.katastimataMenuItem),d.xp6(1),d.Q6J("ngIf",!e.isAuthorized),d.xp6(1),d.Q6J("afmNotFound",e.afmNotFound),d.xp6(1),d.Q6J("ngIf",!e.afmNotFound))},directives:[Z.O5,Ki.d,k.q,S.s,Li],pipes:[zi.o],encapsulation:2}),i}(),children:[{path:"",loadChildren:function(){return Promise.resolve().then(r.bind(r,97394)).then(function(i){return i.PublicLibLoader})}}]}],ee=function(){var i=s(function i(){t(this,i)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[I.Bz.forChild(ie)],I.Bz]}),i}(),te=function(){var i=s(function i(){t(this,i)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[Bi.m,ji.IJ,ee,Wi]]}),i}(),oe=function(){var i=s(function i(){t(this,i)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[Wi]]}),i}()}}])}();